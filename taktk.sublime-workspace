{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"it",
				"iterable"
			],
			[
				"contet",
				"contents"
			],
			[
				"Na",
				"Namespace()"
			],
			[
				"re",
				"redirect"
			],
			[
				"noti",
				"notification"
			],
			[
				"ren",
				"render()"
			],
			[
				"pa",
				"parent"
			],
			[
				"sub",
				"subscribe_to()"
			],
			[
				"parse_",
				"parse_next_special"
			],
			[
				"lay",
				"layout_class"
			],
			[
				"is",
				"isinstance"
			],
			[
				"def",
				"default"
			],
			[
				"cre",
				"created"
			],
			[
				"rende",
				"renderred"
			],
			[
				"subs",
				"Subscriber"
			],
			[
				"bui",
				"builtins"
			],
			[
				"tk",
				"tkMenu"
			],
			[
				"__",
				"__init__()"
			],
			[
				"dic",
				"dictionary"
			],
			[
				"_co",
				"_collect_values"
			],
			[
				"_c",
				"_component_"
			],
			[
				"Sub",
				"Subscriber"
			],
			[
				"att",
				"attrs"
			],
			[
				"_sub",
				"_subscribeable"
			],
			[
				"_subs",
				"_subscriber"
			],
			[
				"_s",
				"_subscribeable"
			],
			[
				"w",
				"writeable"
			],
			[
				"At",
				"AttributeError"
			],
			[
				"Att",
				"Attrs"
			],
			[
				"Attr",
				"AttributeManager"
			],
			[
				"su",
				"subscriber"
			],
			[
				"Su",
				"Subscriber"
			],
			[
				"_subsc",
				"_subscribers"
			],
			[
				"a",
				"auto"
			],
			[
				"Subs",
				"Subscriber"
			],
			[
				"subsc",
				"subscriber"
			],
			[
				"Im",
				"ImportError"
			],
			[
				"glTr",
				"glTranslate"
			],
			[
				"ii",
				"init_gl"
			],
			[
				"dr",
				"draw_scene"
			],
			[
				"lex",
				"lexer"
			],
			[
				"p",
				"tip"
			],
			[
				"3",
				"35em"
			],
			[
				"gi",
				"i-github\tSVG Icon GitHub"
			],
			[
				"extr",
				"extra_header_link_icons="
			],
			[
				"lo",
				"logo_light="
			],
			[
				"sp",
				"sphinx_rtd_theme"
			],
			[
				"meta",
				"meta_content_scope"
			],
			[
				"illegal-",
				"illegal-assignment"
			],
			[
				"se",
				"separator."
			],
			[
				"Nam",
				"NameError"
			],
			[
				"var",
				"varname"
			],
			[
				"col",
				"columnconfigure"
			],
			[
				"un",
				"unsubscribe_from_all"
			],
			[
				"subscr",
				"subscribeable"
			],
			[
				"subc",
				"subscribe"
			],
			[
				"nam",
				"namespace"
			],
			[
				"ca",
				"call_gets"
			],
			[
				"cal",
				"call_sets"
			],
			[
				"ev",
				"eval_gets"
			],
			[
				"set",
				"set_response"
			],
			[
				"get",
				"getter_caller"
			],
			[
				"Wr",
				"Writeable"
			],
			[
				"Wri",
				"WritableStringVar"
			],
			[
				"e",
				"evaluate_string"
			],
			[
				"Ex",
				"Expression"
			],
			[
				"cl",
				"classmethod"
			],
			[
				"c",
				"classmethod"
			],
			[
				"com",
				"component"
			],
			[
				"ch",
				"children"
			],
			[
				"na",
				"namespace"
			],
			[
				"ty",
				"type"
			],
			[
				"in",
				"instructions"
			],
			[
				"las",
				"last_tag"
			],
			[
				"chi",
				"child"
			],
			[
				"la",
				"last_indent"
			],
			[
				"pr",
				"print()"
			],
			[
				"chil",
				"children"
			],
			[
				"ind",
				"indent"
			],
			[
				"par",
				"parent"
			],
			[
				"parse_next",
				"parse_next_instruction"
			],
			[
				"__get",
				"__getitem__"
			],
			[
				"parse",
				"parse_next_instruction"
			],
			[
				"ta",
				"taktk-args"
			],
			[
				"bra",
				"brackets."
			],
			[
				"co",
				"continuation."
			],
			[
				"attr",
				"attributes"
			],
			[
				"tra",
				"transparent"
			],
			[
				"conte",
				"contextmanager"
			],
			[
				"o",
				"other."
			],
			[
				"de",
				"default"
			],
			[
				"l",
				"language"
			],
			[
				"layou",
				"layout_parent"
			],
			[
				"cont",
				"container"
			],
			[
				"im",
				"import"
			],
			[
				"curr",
				"current_page"
			],
			[
				"Mod",
				"ModuleType"
			],
			[
				"an",
				"annotate"
			],
			[
				"fall",
				"fallback_language"
			],
			[
				"wind",
				"window_class"
			],
			[
				"medi",
				"media_path"
			],
			[
				"fal",
				"fallback_language"
			],
			[
				"_creat",
				"_create_params"
			],
			[
				"N",
				"Newlines"
			],
			[
				"res",
				"response_text"
			],
			[
				"winfo_",
				"winfo_rooty()"
			],
			[
				"posit",
				"position_widgets()"
			],
			[
				"app",
				"application"
			],
			[
				"vi",
				"view"
			],
			[
				"ur",
				"urllib."
			],
			[
				"cu",
				"current_url"
			],
			[
				"R",
				"RequestHandler"
			],
			[
				"Us",
				"Users"
			],
			[
				"appl",
				"application_server"
			],
			[
				"con",
				"converter()"
			],
			[
				"reg",
				"registerrer"
			],
			[
				"them",
				"theme_use()"
			],
			[
				"up",
				"update_entry"
			],
			[
				"for",
				"for_page()"
			],
			[
				"mo",
				"module"
			],
			[
				"r",
				"read()"
			],
			[
				"pag",
				"page_stores"
			],
			[
				"bas",
				"basicConfig"
			],
			[
				"url",
				"urlparse"
			],
			[
				"E",
				"Expression"
			],
			[
				"D",
				"Dictionary"
			],
			[
				"spl",
				"splitlines"
			],
			[
				"compo",
				"component_space"
			]
		]
	},
	"buffers":
	[
		{
			"file": "src/taktk/template.py",
			"settings":
			{
				"buffer_size": 19871,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					397,
					1,
					"left_delete",
					null,
					"AQAAABBEAAAAAAAAEEQAAAAAAAACAAAASWY",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAASRAAAAAAAABBEAAAAAAAAAAAAAAAA8L8"
				],
				[
					398,
					1,
					"insert",
					{
						"characters": "Enum"
					},
					"BAAAABBEAAAAAAAAEUQAAAAAAAAAAAAAEUQAAAAAAAASRAAAAAAAAAAAAAASRAAAAAAAABNEAAAAAAAAAAAAABNEAAAAAAAAFEQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAQRAAAAAAAABBEAAAAAAAAAAAAAAAA8L8"
				],
				[
					401,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAIk0AAAAAAAAiTQAAIiIiClRha3RrIHRlbXBsYXRpbmcgZW5naW5lLgoKQ29weXJpZ2h0IChDKSAyMDIyICBrZW4tbW9yZWwKClRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5Cml0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CnRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCihhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCgpUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQpHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgoiIiIKaW1wb3J0IGRhdGFjbGFzc2VzCmltcG9ydCBkZWNpbWFsCmltcG9ydCBlbnVtCmltcG9ydCBvcy5wYXRoCmltcG9ydCBzdHJpbmcKZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aApmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIEFueQoKZnJvbSBweW9sb2FkIGltcG9ydCBhbm5vdGF0ZQoKZnJvbSAuIGltcG9ydCBkaWN0aW9uYXJ5LCB3cml0ZWFibGUsIGNvbXBvbmVudAoKCmNsYXNzIFRhZ1R5cGUoZW51bS5FbnVtKToKICAgICIiIkVudW0gdHlwZSBmb3IgVGVtcGxhdGUuSXRlbSBgLnR5cGVgLiIiIgoKICAgIFRBRyA9IGVudW0uYXV0bygpCiAgICBTUEVDSUFMID0gZW51bS5hdXRvKCkKICAgIE1FVEEgPSBlbnVtLmF1dG8oKQoKClNQQUNFID0gZnJvemVuc2V0KCIgIikKVkFSTkFNRSA9IGZyb3plbnNldChzdHJpbmcuYXNjaWlfbGV0dGVycyArIHN0cmluZy5kaWdpdHMgKyAiXyIpCkNPTVBPTkVOVF9OQU1FID0gVkFSTkFNRSB8IGZyb3plbnNldCgiLiIpCkJSQUNLRVRTID0gZGljdChtYXAodHVwbGUsICIoKSxbXSx7fSIuc3BsaXQoIiwiKSkpClNUUklOR19RVU9URVMgPSBmcm96ZW5zZXQoIlwiJyIpCklOVCA9IGZyb3plbnNldChzdHJpbmcuZGlnaXRzKQpERUNJTUFMID0gZnJvemVuc2V0KHN0cmluZy5kaWdpdHMgKyAiLiIpClNMSUNFID0gSU5UIHwgZnJvemVuc2V0KCI6IikKUE9JTlQgPSBERUNJTUFMIHwgZnJvemVuc2V0KCIsIikKQVRUUl9OQU1FID0gZnJvemVuc2V0KCI6LSIpIHwgVkFSTkFNRQoKCmNsYXNzIFN0YXRlOgogICAgIiIiU3RvcmVzIHBhcnNlciBzdGF0ZSBhbmQgcGFyc2luZyB1dGlscy4iIiIKCiAgICBfX3Nsb3RzX18gPSAoInRleHQiLCAiaWR4IikKICAgIHRleHQ6IHN0cgogICAgaWR4OiBpbnQKCiAgICBAYW5ub3RhdGUKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0ZXh0OiBzdHIsIGlkeDogaW50ID0gMCk6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSB0aGUgcGFyc2VyIHN0YXRlLiIiIgogICAgICAgIHNlbGYudGV4dCA9IHRleHQKICAgICAgICBzZWxmLmlkeCA9IGlkeAoKICAgIGRlZiBfX2lvcl9fKHNlbGYsIG90aGVyOiAiU3RhdGUiKToKICAgICAgICAiIiJDb3B5IHRoZSBvdGhlciBzdGF0ZSBvYmplY3QuIiIiCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFN0YXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgc2VsZi5pZHggPSBvdGhlci5pZHgKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBjb3B5KHNlbGYpIC0+ICJTdGF0ZSI6CiAgICAgICAgIiIiQ29weSB0aGUgc3RhdGUgb2JqZWN0LiIiIgogICAgICAgIHJldHVybiBTdGF0ZSh0ZXh0PXNlbGYudGV4dCwgaWR4PXNlbGYuaWR4KQoKICAgIGRlZiBfX2ludF9fKHNlbGYpIC0+IGludDoKICAgICAgICAiIiJDb252ZXJ0IHN0YXRlIHRvIGludCwgcmV0dXJuIGluZGV4LiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeAoKICAgIGRlZiBfX2luZGV4X18oc2VsZikgLT4gaW50OgogICAgICAgICIiIlVzZSBzdGF0ZSBhcyBpbmRleCwgcmV0dXJuIGluZGV4LiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeAoKICAgIGRlZiBfX2lhZGRfXyhzZWxmLCB2YWwpIC0+ICJTdGF0ZSI6CiAgICAgICAgIiIiQWRkIHN0YXRlIGluZGV4LiIiIgogICAgICAgIHNlbGYuaWR4ICs9IHZhbAogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fYWRkX18oc2VsZiwgdmFsKSAtPiBpbnQ6CiAgICAgICAgIiIiQWRkIHN0YXRlcy4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggKyB2YWwKCiAgICBkZWYgX19yYWRkX18oc2VsZiwgdmFsKSAtPiBpbnQ6CiAgICAgICAgIiIiQWRkIHN0YXRlcy4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggKyB2YWwKCiAgICBkZWYgX19ndF9fKHNlbGYsIHZhbDogaW50KSAtPiBib29sOgogICAgICAgICIiIlBlcmZvcm0gZ3Qgb3BlcmF0aW9uIG9uIHN0YXRlIGluZGV4LiIiIgogICAgICAgIHJldHVybiBpbnQuX19ndF9fKHNlbGYuaWR4LCB2YWwpCgogICAgZGVmIF9fbHRfXyhzZWxmLCB2YWw6IGludCkgLT4gYm9vbDoKICAgICAgICAiIiJQZXJmb3JtIGx0IG9wZXJhdGlvbiBvbiBzdGF0ZSBpbmRleC4iIiIKICAgICAgICByZXR1cm4gaW50Ll9fbHRfXyhzZWxmLmlkeCwgdmFsKQoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6CiAgICAgICAgIiIiQ29tcHV0ZSBhIGR1bW15IGhhc2ggYmFzZWQgb24gdGV4dCBoYXNoLiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeCAqIGxlbihzZWxmLnRleHQpICogaGFzaChzZWxmLnRleHQpCgogICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OgogICAgICAgICIiIkNvbXB1dGUgdGhlIHRleHQgbGVuZ3RoLiIiIgogICAgICAgIHJldHVybiBsZW4oc2VsZi50ZXh0KQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpdGVtOiBzbGljZSB8IGludCkgLT4gc3RyOgogICAgICAgICIiIlNsaWNlIHRoZSBzdGF0ZSB0ZXh0LiIiIgogICAgICAgIGlmIGl0ZW0gPT0gLi4uOgogICAgICAgICAgICByZXR1cm4gc2VsZi50ZXh0W3NlbGYuaWR4XQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShpdGVtLCBzbGljZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnRleHQuX19nZXRpdGVtX18oCiAgICAgICAgICAgICAgICBzbGljZSgKICAgICAgICAgICAgICAgICAgICAqKAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlkeCBpZiB4IGlzIC4uLiBlbHNlIHgKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gKGl0ZW0uc3RhcnQsIGl0ZW0uc3RvcCwgaXRlbS5zdGVwKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnRleHQuX19nZXRpdGVtX18oaXRlbSkKCiAgICBkZWYgX19ib29sX18oc2VsZikgLT4gYm9vbDoKICAgICAgICAiIiJSZXR1cm4gdHJ1ZSBpZiBpbmRleCBkaWQgbm90IGV4Y2VlZCB0ZXh0IGxlbmd0aC4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggPCBsZW4oc2VsZi50ZXh0KQoKICAgIGRlZiBuZXh0X2xpbmUoc2VsZikgLT4gYm9vbDoKICAgICAgICAiIiJTa2lwIGFsbCBjaGFyYWN0ZXJzIHRpbGwgbmV4dCBuZXdsaW5lIGNoYXJhY3Rlci4iIiIKICAgICAgICB3aGlsZSBzZWxmIGFuZCBzZWxmWy4uLl0gIT0gIlxuIjoKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgc2VsZiArPSAxCiAgICAgICAgcmV0dXJuIGJvb2woc2VsZikKCiAgICBkZWYgc2tpcF9zcGFjZXMoc2VsZikgLT4gaW50OgogICAgICAgICIiIlNraXAgYWxsIHNwYWNlcyBhbmQgcmV0dXJuIHRoZWlyIG51bWJlci4iIiIKICAgICAgICBjb3VudCA9IDAKICAgICAgICB3aGlsZSBzZWxmIGFuZCBzZWxmWy4uLl0gaW4gU1BBQ0U6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBjb3VudCArPSAxCiAgICAgICAgaWYgKAogICAgICAgICAgICBzZWxmCiAgICAgICAgICAgIGFuZCBzZWxmW3NlbGYuaWR4XSA9PSAiXFwiCiAgICAgICAgICAgIGFuZCBsZW4oc2VsZikgPiBzZWxmLmlkeCArIDEKICAgICAgICAgICAgYW5kIHNlbGZbc2VsZi5pZHggKyAxXSA9PSAiXG4iCiAgICAgICAgKToKICAgICAgICAgICAgc2VsZiArPSAyCiAgICAgICAgICAgIHJldHVybiBjb3VudCArIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIHJldHVybiBjb3VudAoKICAgIGRlZiBuZXh0X3RhZ19uYW1lKHNlbGYpIC0+IHR1cGxlW3N0ciwgT3B0aW9uYWxbc3RyXV06CiAgICAgICAgciIiIkdldCBuZXh0IHRhZyBuYW1lIGZyb20gYFxgIGNoYXJhY3RlciwgbWF5IGluY2x1ZGUgYWxpYXMuIiIiCiAgICAgICAgc2VsZi5za2lwX3NwYWNlcygpCiAgICAgICAgYmVnaW4gPSBzZWxmLmNvcHkoKQogICAgICAgIHNlbGYgKz0gMQogICAgICAgIG5hbWUgPSAiIgogICAgICAgIHdoaWxlIHNlbGYgYW5kIHNlbGZbLi4uXSBpbiBDT01QT05FTlRfTkFNRToKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgbmFtZSA9IHNlbGYudGV4dFtiZWdpbiArIDEgOiBzZWxmXQoKICAgICAgICBpZiBsZW4oc2VsZi50ZXh0KSA+IHNlbGYgYW5kIHNlbGYudGV4dFtzZWxmXSA9PSAiOiI6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBiZWdpbiA9IHNlbGYuY29weSgpCiAgICAgICAgICAgIHdoaWxlICgKICAgICAgICAgICAgICAgIGxlbihzZWxmLnRleHQpID4gaW50KHNlbGYpCiAgICAgICAgICAgICAgICBhbmQgc2VsZi50ZXh0W2ludChzZWxmKV0gaW4gQ09NUE9ORU5UX05BTUUKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBhbGlhcyA9IHNlbGYudGV4dFtiZWdpbiA6IGludChzZWxmKV0KICAgICAgICBlbHNlOgogICAgICAgICAgICBhbGlhcyA9IE5vbmUKICAgICAgICByZXR1cm4gKG5hbWUsIGFsaWFzKQoKICAgIGRlZiBuZXh0X2F0dHJfdmFsdWUoc2VsZikgLT4gInR1cGxlW1N0YXRlLCBzdHIsIHN0cl0iOgogICAgICAgIHIiIiJHZXQgbmV4dCBhdHRyaWJ1dGUgdmFsdWUgcGFpci4iIiIKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBhdHRyID0gIiIKCiAgICAgICAgd2hpbGUgc2VsZiBhbmQgc2VsZlsuLi5dIGluIEFUVFJfTkFNRToKICAgICAgICAgICAgYXR0ciArPSBzZWxmWy4uLl0KICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgaWYgbm90IHNlbGYgb3Igc2VsZlsuLi5dICE9ICI9IjoKICAgICAgICAgICAgcmV0dXJuIGF0dHIsICJUcnVlIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICB2YWwgPSBzZWxmLm5leHRfdmFsdWUoKQogICAgICAgICAgICByZXR1cm4gYXR0ciwgdmFsCgogICAgZGVmIG5leHRfdmFsdWUoc2VsZikgLT4gc3RyOgogICAgICAgICIiIlJlYWQgdGhlIG5leHQgdmFsdWUgaW4gcGFyc2VyLiIiIgogICAgICAgIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIGJlZ2luID0gc2VsZi5jb3B5KCkKICAgICAgICBicmFja2V0cyA9IFtdCiAgICAgICAgaWYgKAogICAgICAgICAgICAiOiIgaW4gc2VsZlsuLi46XQogICAgICAgICAgICBhbmQgc2VsZlsuLi46XVs6IChuIDo9IHNlbGZbLi4uOl0uaW5kZXgoIjoiKSldLmlzYWxwaGEoKQogICAgICAgICAgICBhbmQgbGVuKGJyYWNrZXRzKSA9PSAwCiAgICAgICAgKToKICAgICAgICAgICAgYmVnaW4gPSBzZWxmLmNvcHkoKQogICAgICAgICAgICBzZWxmICs9IG4KICAgICAgICAgICAgYmMgPSAwCiAgICAgICAgICAgIHdoaWxlIHNlbGY6CiAgICAgICAgICAgICAgICBpZiBzZWxmWy4uLl0gPT0gInsiOgogICAgICAgICAgICAgICAgICAgIGJjICs9IDEKICAgICAgICAgICAgICAgIGVsaWYgc2VsZlsuLi5dID09ICJ9IjoKICAgICAgICAgICAgICAgICAgICBiYyAtPSAxCiAgICAgICAgICAgICAgICBlbGlmIChxdW90ZSA6PSBzZWxmWy4uLl0pIGluIFNUUklOR19RVU9URVM6CiAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgc2VsZjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZlsuLi5dID09IHF1b3RlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBzZWxmWy4uLl0gPT0gIlxcIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYgKz0gMgogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInVudGVybWluYXRlZCBzdHJpbmcgaW46IiwgcmVwcihzZWxmLnRleHQpCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVsaWYgc2VsZlsuLi5dLmlzc3BhY2UoKSBhbmQgYmMgPT0gMDoKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgIHJldHVybiBzZWxmW2JlZ2luOi4uLl0KICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBjID0gc2VsZlsuLi5dCiAgICAgICAgICAgIGlmIGMgaW4gQlJBQ0tFVFM6CiAgICAgICAgICAgICAgICBicmFja2V0cy5hcHBlbmQoc2VsZlsuLi5dKQogICAgICAgICAgICBlbGlmIGMgaW4gU1RSSU5HX1FVT1RFUzoKICAgICAgICAgICAgICAgIG9wZW5pbmcgPSBjCiAgICAgICAgICAgICAgICBzZWxmICs9IDEKICAgICAgICAgICAgICAgIHdoaWxlIHNlbGY6CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZlsuLi5dID09IG9wZW5pbmc6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxpZiBzZWxmWy4uLl0gPT0gIlxcIjoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAyCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigidW50ZXJtaW5hdGVkIHN0cmluZyBpbjoiLCByZXByKHNlbGYudGV4dCkpCiAgICAgICAgICAgIGVsaWYgYyBpbiBCUkFDS0VUUy52YWx1ZXMoKToKICAgICAgICAgICAgICAgIGlmIGxlbihicmFja2V0cykgPiAwIGFuZCBCUkFDS0VUU1ticmFja2V0c1stMV1dID09IGM6CiAgICAgICAgICAgICAgICAgICAgYnJhY2tldHMucG9wKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICBmInVubWF0Y2hlZCB7YyFyfSBhdCB7aW50KHNlbGYpfToge3NlbGYudGV4dCFyfSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsaWYgbGVuKGJyYWNrZXRzKSA9PSAwIGFuZCBjLmlzc3BhY2UoKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgIHJldHVybiBzZWxmW2JlZ2luOi4uLl0KCiAgICBkZWYgcGFyc2VfbmV4dF9lbnVtKHNlbGYpIC0+ICJ0dXBsZVtzdHIsIHR1cGxlW3N0ciwgc3RyXV0iOgogICAgICAgICIiIk5leHQgZW51bWVyYXRvci4iIiIKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBzZWxmICs9IGxlbigiIWVudW0gIikKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBiID0gc2VsZi5jb3B5KCkKICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBpZiBzZWxmWy4uLl0gbm90IGluIFZBUk5BTUU6CiAgICAgICAgICAgICAgICBpZiBzZWxmWy4uLl0gIT0gIjoiOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgInVucmVjb2duaXNlZCBzeW1ib2wgaW4gYWZ0ZXIgZW51bSBvYmplY3QgbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJ1bnRlcm1pbmF0ZWQgZW51bSBmaXJzdCBmaWVsZFxuIiArIHJlcHIoc2VsZikpCiAgICAgICAgb2JqID0gc2VsZi50ZXh0W2I6c2VsZl0KICAgICAgICBzZWxmICs9IDEKICAgICAgICBiID0gc2VsZi5jb3B5KCkKICAgICAgICBiICs9IDEKICAgICAgICBuYyA9IDAKICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBpZiBzZWxmWy4uLl0gPT0gIikiOgogICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbGlmIHNlbGZbLi4uXSA9PSAiLCI6CiAgICAgICAgICAgICAgICBuYyArPSAxCiAgICAgICAgICAgICAgICBpZiBuYyA+IDE6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAidG9vIG1hbnkgZmllbGRzIGFmdGVyIGVudW0gb2JqZWN0XG4iICsgcmVwcihzZWxmKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJVbnRlcm1pbmF0ZWQgZW51bSBzZWNvbmQgZmllbGRcbiIgKyByZXByKHNlbGYpKQogICAgICAgIGFsaWFzID0gdHVwbGUobWFwKHN0ci5zdHJpcCwgc2VsZltiOnNlbGZdLnNwbGl0KCIsIikpKQogICAgICAgIHJldHVybiBUZW1wbGF0ZS5JdGVtKAogICAgICAgICAgICB0eXBlPVRhZ1R5cGUuU1BFQ0lBTCwgbmFtZT0iZW51bSIsIGFyZ3M9KG9iaiwgYWxpYXMpCiAgICAgICAgKQoKICAgIGRlZiBwYXJzZV9uZXh0X3NwZWNpYWwoc2VsZik6CiAgICAgICAgaWYgc2VsZlsuLi46XS5zdGFydHN3aXRoKCIhaWYiKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VfbmV4dF9pZigpCiAgICAgICAgZWxpZiBzZWxmWy4uLjpdLnN0YXJ0c3dpdGgoIiFlbnVtIik6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlX25leHRfZW51bSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigKICAgICAgICAgICAgICAgICJ1bmV4cGVjdGVkIHNwZWNpYWwgdGFnIiwgc2VsZltzZWxmLmlkeCA6IHNlbGYuaWR4ICsgNV0gKyAiLi4uIgogICAgICAgICAgICApCgogICAgZGVmIHBhcnNlX25leHRfaWYoc2VsZikgLT4gInR1cGxlW3N0ciwgdHVwbGVbc3RyLCBzdHJdXSI6CiAgICAgICAgIiIiUmV0dXJuIG5leHQgaWYgc3RhdGVtZW50cyBwYXJ0cy4iIiIKICAgICAgICBzZWxmICs9IGxlbigiIWlmIikKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBiID0gc2VsZi5jb3B5KCkKCiAgICAgICAgd2hpbGUgc2VsZiBhbmQgc2VsZlsuLi5dICE9ICJcbiI6CiAgICAgICAgICAgIHNlbGYgKz0gMQoKICAgICAgICByZXR1cm4gVGVtcGxhdGUuSXRlbSgKICAgICAgICAgICAgdHlwZT1UYWdUeXBlLlNQRUNJQUwsIG5hbWU9ImlmIiwgYXJncz0oc2VsZltiOi4uLl0sKQogICAgICAgICkKCiAgICBAcHJvcGVydHkKICAgIGRlZiByb3coc2VsZikgLT4gaW50OgogICAgICAgICIiIkZpbmQgdGhlIGN1cnJlbnQgcG9zaXRpb24gcm93LiIiIgogICAgICAgIHJldHVybiBzZWxmLnRleHRbOiBzZWxmLmlkeF0uY291bnQoIlxuIikgKyAxCgogICAgQHJvdy5zZXR0ZXIKICAgIGRlZiByb3coc2VsZiwgdmFsOiBpbnQpOgogICAgICAgIGNvbCA9IHNlbGYuY29sCiAgICAgICAgc2VsZi5pZHggPSAwCiAgICAgICAgd2hpbGUgc2VsZi5yb3cgPCB2YWw6CiAgICAgICAgICAgIHNlbGYuaWR4ICs9IDEKICAgICAgICBzZWxmLmNvbCArPSBjb2wKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjb2woc2VsZikgLT4gaW50OgogICAgICAgICIiIkZpbmQgdGhlIGFjdHVhbCBzdGF0ZSBjb2x1bW4uIiIiCiAgICAgICAgbGluZXMgPSBzZWxmLnRleHRbOiBzZWxmLmlkeF0uc3BsaXRsaW5lcygpCiAgICAgICAgaWYgbGVuKGxpbmVzKSA+IDA6CiAgICAgICAgICAgIHJldHVybiBsZW4obGluZXNbLTFdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAwCgogICAgQGNvbC5zZXR0ZXIKICAgIGRlZiBjb2woc2VsZiwgdmFsOiBpbnQpIC0+IGJvb2w6CiAgICAgICAgaWYgbGVuKHNlbGYudGV4dC5zcGxpdGxpbmVzKClbc2VsZi5yb3cgLSAxXSkgPCB2YWw6CiAgICAgICAgICAgIHNlbGYuaWR4ICs9IHZhbCAtIHNlbGYuY29sCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIHBhcnNlX25leHRfaW5zdHJ1Y3Rpb24oc2VsZikgLT4gInR1cGxlW2ludCwgVGVtcGxhdGUuSXRlbV0iOgogICAgICAgICIiIlBhcnNlIHRoZSBuZXh0IGluc3RydWN0aW9uLiIiIgogICAgICAgIGluZGVudCA9IHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIHdoaWxlIHNlbGYgYW5kIHNlbGZbLi4uXSBpbiAiI1xuIjoKICAgICAgICAgICAgaWYgbm90IHNlbGYubmV4dF9saW5lKCk6CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgaW5kZW50ID0gc2VsZi5za2lwX3NwYWNlcygpCiAgICAgICAgaWYgbm90IHNlbGY6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGNoYXIgPSBzZWxmWy4uLl0KICAgICAgICBpZiBjaGFyID09ICJcXCI6ICAjIGEgdGFnCiAgICAgICAgICAgIHJldHVybiBpbmRlbnQsIHNlbGYucGFyc2VfbmV4dF90YWcoKQogICAgICAgIGVsaWYgY2hhciA9PSAiISI6CiAgICAgICAgICAgIHJldHVybiBpbmRlbnQsIHNlbGYucGFyc2VfbmV4dF9zcGVjaWFsKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGNoYXIpCgogICAgZGVmIHBhcnNlX25leHRfdGFnKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgIiIiUmV0dXJuIG5leHQgdGFnLiIiIgogICAgICAgIG5hbWUsIGFsaWFzID0gc2VsZi5uZXh0X3RhZ19uYW1lKCkKICAgICAgICBhdHRycyA9IHt9CiAgICAgICAgd2hpbGUgc2VsZjoKICAgICAgICAgICAgc2VsZi5za2lwX3NwYWNlcygpCiAgICAgICAgICAgIGlmIHNlbGZbLi4uXSA9PSAiIyI6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBrZXksIHZhbCA9IHNlbGYubmV4dF9hdHRyX3ZhbHVlKCkKICAgICAgICAgICAgaWYga2V5OgogICAgICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbAogICAgICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICAgICAgaWYgbm90IHNlbGYgb3Igc2VsZlsuLi5dID09ICJcbiI6CiAgICAgICAgICAgICAgICBzZWxmLm5leHRfbGluZSgpCiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICByZXR1cm4gVGVtcGxhdGUuSXRlbSh0eXBlPVRhZ1R5cGUuVEFHLCBuYW1lPW5hbWUsIGFyZ3M9KGFsaWFzLCBhdHRycykpCgogICAgQHByb3BlcnR5CiAgICBkZWYgbGluZShzZWxmKSAtPiBzdHI6CiAgICAgICAgIiIiR2V0IHRoZSBmdWxsIGN1cnJlbnQgbGluZS4iIiIKICAgICAgICByZXR1cm4gc2VsZi50ZXh0LnNwbGl0bGluZXMoKVtzZWxmLnJvdyAtIDFdCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgICIiIlJlcHJvZHVjZSB0aGUgc3RhdGUuIiIiCiAgICAgICAgcmV0dXJuICJTdGF0ZSglZCkge1xuICAgICVzXG4gICAgJXNcbn0iICUgKAogICAgICAgICAgICBzZWxmLnJvdywKICAgICAgICAgICAgc2VsZi5saW5lLAogICAgICAgICAgICAiICIgKiBzZWxmLmNvbCArICJeIiwKICAgICAgICApCgogICAgZGVmIHBhcnNlKHNlbGYpIC0+ICJUZW1wbGF0ZS5JdGVtIjoKICAgICAgICAiIiJQYXJzZSB0aGUgc3RhdGUgY29udGVudC4iIiIKICAgICAgICB0YWdzID0gW10KICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBjbWQgPSBzZWxmLnBhcnNlX25leHRfaW5zdHJ1Y3Rpb24oKQogICAgICAgICAgICBpZiBjbWQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICB0YWdzLmFwcGVuZChjbWQpCiAgICAgICAgaWYgbGVuKHRhZ3MpID09IDA6CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbGFzdF9pbmRlbnQsIHJvb3QgPSB0YWdzWzBdCiAgICAgICAgICAgIHRyZWUgPSBbXQogICAgICAgICAgICBsYXN0X3RhZyA9IHJvb3QKICAgICAgICAgICAgZm9yIGluZGVudCwgY2hpbGQgaW4gdGFnc1sxOl06CiAgICAgICAgICAgICAgICBpZiBpbmRlbnQgPiBsYXN0X2luZGVudDoKICAgICAgICAgICAgICAgICAgICB0cmVlLmFwcGVuZCgobGFzdF9pbmRlbnQsIGxhc3RfdGFnKSkKICAgICAgICAgICAgICAgIGVsaWYgaW5kZW50IDwgbGFzdF9pbmRlbnQ6CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgaW5kZW50IDw9IHRyZWVbLTFdWzBdOgogICAgICAgICAgICAgICAgICAgICAgICB0cmVlLnBvcCgpCiAgICAgICAgICAgICAgICB0cmVlWy0xXVsxXS5jaGlsZHJlbi5hcHBlbmQoY2hpbGQpCiAgICAgICAgICAgICAgICBjaGlsZC5wYXJlbnQgPSB0cmVlWy0xXVsxXQogICAgICAgICAgICAgICAgbGFzdF9pbmRlbnQgPSBpbmRlbnQKICAgICAgICAgICAgICAgIGxhc3RfdGFnID0gY2hpbGQKICAgICAgICAgICAgcmV0dXJuIHJvb3QKCgpkZWYgZXZhbHVhdGVfbGl0ZXJhbCgKICAgIHN0cmluZzogc3RyLCBuYW1lc3BhY2U6IE9wdGlvbmFsW3dyaXRlYWJsZS5OYW1lc3BhY2VdID0gTm9uZQopIC0+IHR1cGxlW2Jvb2wsIEFueV06CiAgICAiIiJFdmFsdWF0ZSBhIGxpdHRlcmFsIGZyb20gc3RyaW5nIGFuZCBvcHRpb25hbCBuYW1lc3BhY2UuIiIiCiAgICBmcm9tIC4gaW1wb3J0IG1lZGlhCiAgICBmcm9tIC4gaW1wb3J0IGNvbnN0YW50cwoKICAgIHN0cmluZ19zZXQgPSBzZXQoc3RyaW5nKQogICAgaWYgbGVuKHN0cmluZykgPiAxOgogICAgICAgIGIsICpfLCBlID0gc3RyaW5nCiAgICBlbGlmIGxlbihzdHJpbmcpID09IDE6CiAgICAgICAgYiwgZSA9IHN0cmluZywgTm9uZQogICAgZWxzZToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJlbXB0eSBsaXRlcmFsIHN0cmluZyIpCiAgICBpZiBoYXNhdHRyKGNvbnN0YW50cywgc3RyaW5nKToKICAgICAgICByZXR1cm4gKEZhbHNlLCBnZXRhdHRyKGNvbnN0YW50cywgc3RyaW5nKSkKICAgIGVsaWYgc3RyaW5nID09ICJOb25lIjoKICAgICAgICByZXR1cm4gKEZhbHNlLCBOb25lKQogICAgZWxpZiBzdHJpbmcgPT0gIlRydWUiOgogICAgICAgIHJldHVybiAoRmFsc2UsIFRydWUpCiAgICBlbGlmIHN0cmluZyA9PSAiRmFsc2UiOgogICAgICAgIHJldHVybiAoRmFsc2UsIEZhbHNlKQogICAgZWxpZiBiID09ICI8IiBhbmQgZSA9PSAiPiI6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgbWVkaWEuZ2V0X21lZGlhKHN0cmluZ1sxOi0xXSkpCiAgICBlbGlmIGxlbihzdHJpbmdfc2V0IC0gSU5UKSA9PSAwOgogICAgICAgIHJldHVybiAoRmFsc2UsIGludChzdHJpbmcpKQogICAgZWxpZiBsZW4oc3RyaW5nX3NldCAtIERFQ0lNQUwpID09IDA6CiAgICAgICAgcmV0dXJuIERlY2ltYWwoc3RyaW5nKQogICAgZWxpZiBiID09ICJ7IiBhbmQgZSA9PSAifSI6CiAgICAgICAgaWYgbmFtZXNwYWNlIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICAiVW5hbGxvd2VkIHdyaXRlYWJsZS5Xcml0ZWFibGUgaW4gbm9uZSBuYW1lc3BhY2VkIGNvbnRleHQiLAogICAgICAgICAgICAgICAgc3RyaW5nLAogICAgICAgICAgICApCiAgICAgICAgY29kZSA9IHN0cmluZ1sxOi0xXQogICAgICAgIHJldHVybiAoRmFsc2UsIGV2YWwoY29kZSwge30sIG5hbWVzcGFjZSkpCiAgICBlbGlmIGIgPT0gIiQiOgogICAgICAgIGlmIGxlbihzdHJpbmcpIDwgMjoKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKGYiV3Jvbmcgc3Vic2NyaXB0aW9uIHtzdHJpbmchcn0iKQogICAgICAgIHR5cCA9IHN0cmluZ1sxXQogICAgICAgIGlmIHR5cCA9PSAieyI6ICAjIEN1c3RvbSB3cml0ZWFibGUKICAgICAgICAgICAgY29kZSA9IHN0cmluZ1syOi0xXQogICAgICAgICAgICBpZiAifHwiIGluIGNvZGU6CiAgICAgICAgICAgICAgICBnZXQsIHNldF8gPSBjb2RlLnNwbGl0KCJ8fCIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBnZXQsIHNldF8gPSBjb2RlLCAiIgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgVHJ1ZSwKICAgICAgICAgICAgICAgIHdyaXRlYWJsZS5Xcml0ZWFibGUuZnJvbV9nZXRfc2V0KG5hbWVzcGFjZSwgZ2V0LCBzZXRfKSwKICAgICAgICAgICAgKQogICAgICAgIGVsaWYgdHlwID09ICIoIjoKICAgICAgICAgICAgcmV0dXJuIChUcnVlLCBldmFsKHN0cmluZ1syOjFdKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gKFRydWUsIHdyaXRlYWJsZS5Xcml0ZWFibGUuZnJvbV9uYW1lKG5hbWVzcGFjZSwgc3RyaW5nWzE6XSkpCiAgICBlbGlmIGIgaW4gU1RSSU5HX1FVT1RFUzoKICAgICAgICBpZiBlID09IGI6CiAgICAgICAgICAgIHJldHVybiAoRmFsc2UsIHN0cmluZ1sxOi0xXSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbnRlcm1pbmF0ZWQgc3RyaW5nOiIsIHN0cmluZykKICAgIGVsaWYgc3RyaW5nWzBdID09IHN0cmluZ1stMV0gPT0gIi8iOgogICAgICAgIHJldHVybiAoRmFsc2UsIFBhdGgob3MucGF0aC5leHBhbmR2YXJzKHN0cmluZ1sxOi0xXSkpKQogICAgZWxpZiBiID09ICJAIjoKICAgICAgICByZXR1cm4gKFRydWUsIGRpY3Rpb25hcnkuVHJhbnNsYXRpb24oc3RyaW5nWzE6XSkpCiAgICBlbGlmICI6IiBpbiBzdHJpbmcgYW5kIGxlbihzdHJpbmdfc2V0IC0gKERFQ0lNQUwgfCBTTElDRSkpID09IDA6CiAgICAgICAgaWYgbGVuKGQgOj0gKHN0cmluZ19zZXQgLSBTTElDRSkpID4gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3Jvbmcgc2xpY2UiLCBzdHJpbmcsIGQpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNsaWNlKCptYXAoaW50LCBzdHJpbmcuc3BsaXQoIjoiKSkpCiAgICBlbGlmIGxlbihzdHJpbmdfc2V0IC0gUE9JTlQpID09IDA6CiAgICAgICAgdmFsdWVzID0gW10KICAgICAgICBwb3MgPSAwCiAgICAgICAgd2hpbGUgcG9zIDwgbGVuKHN0cmluZyk6CiAgICAgICAgICAgIGJlZ2luID0gcG9zCiAgICAgICAgICAgIGlmICIsIiBpbiBzdHJpbmdbcG9zOl06CiAgICAgICAgICAgICAgICBlbmQgPSBzdHJpbmcuaW5kZXgoIiwiLCBwb3MpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlbmQgPSBsZW4oc3RyaW5nKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiAiLiIgaW4gc3RyaW5nW2JlZ2luOmVuZF06CiAgICAgICAgICAgICAgICAgICAgZGVjID0gRGVjaW1hbChzdHJpbmdbYmVnaW46ZW5kXSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZGVjID0gaW50KHN0cmluZ1tiZWdpbjplbmRdKQogICAgICAgICAgICBleGNlcHQgZGVjaW1hbC5JbnZhbGlkT3BlcmF0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgICAgIHN0cihlKSwKICAgICAgICAgICAgICAgICAgICBzdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgYmVnaW4sCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nW2JlZ2luOmVuZF0sCiAgICAgICAgICAgICAgICApIGZyb20gZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdmFsdWVzLmFwcGVuZChkZWMpCiAgICAgICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBwb3MgPSBlbmQgKyAxCiAgICAgICAgcmV0dXJuIChGYWxzZSwgdHVwbGUodmFsdWVzKSkKICAgIGVsc2U6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5yZWNvZ25zZWQgbGl0ZXJhbDoiLCByZXByKHN0cmluZykpCgoKY2xhc3MgVGVtcGxhdGU6CiAgICAiIiIKICAgIEEgdGFrdGsgY29tcG9uZW50IHRlbXBsYXRlLCBjYW4gYmUgcmVuZGVycmVkIGludG8gYSByZWFsIGNvbXBvbmVudC4KICAgIEhvbGRzIHBhcnNlZCBpbnN0cnVjdGlvbnMgYW5kIG5hbWVzcGFjZS4KICAgICIiIgoKICAgIEBkYXRhY2xhc3Nlcy5kYXRhY2xhc3MKICAgIGNsYXNzIEl0ZW06CiAgICAgICAgIiIiCiAgICAgICAgSXRlbSBpbiB0ZW1wbGF0ZSBwYXJzZSByZXN1bHQsIHJlcHJlc2VudHMgYW4gaW5zdHJ1Y3Rpb24gb3IgdGFnLgogICAgICAgICIiIgoKICAgICAgICB0eXBlOiBUYWdUeXBlCiAgICAgICAgbmFtZTogc3RyCiAgICAgICAgYXJnczogdHVwbGUKICAgICAgICBwYXJlbnQ6ICJUZW1wbGF0ZS5JdGVtIiA9IE5vbmUKICAgICAgICBjaGlsZHJlbjogbGlzdCA9IGRhdGFjbGFzc2VzLmZpZWxkKGRlZmF1bHRfZmFjdG9yeT1saXN0KQoKICAgICAgICBkZWYgcmVuZGVyKHNlbGYsIHBhcmVudCwgbmFtZXNwYWNlKToKICAgICAgICAgICAgIiIiQ3JlYXRlIHRoZSBjb21wb25lbnQuIiIiCgogICAgICAgICAgICBpZiBzZWxmLnR5cGUgaXMgVGFnVHlwZS5UQUc6CiAgICAgICAgICAgICAgICBhbGlhcywgYXR0cnMgPSBzZWxmLmFyZ3MKICAgICAgICAgICAgICAgIGNvbXAgPSBnZXRfY29tcG9uZW50KHNlbGYubmFtZSwgbmFtZXNwYWNlKSgKICAgICAgICAgICAgICAgICAgICBwYXJlbnQ9cGFyZW50LAogICAgICAgICAgICAgICAgICAgIGF0dHJzPWF0dHJzLAogICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZT1uYW1lc3BhY2UsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBpZiBhbGlhcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VbYWxpYXNdID0gY29tcAogICAgICAgICAgICAgICAgZm9yIGNoaWxkIGluIHNlbGYuY2hpbGRyZW46CiAgICAgICAgICAgICAgICAgICAgY2hpbGQucmVuZGVyKGNvbXAsIG5hbWVzcGFjZSkKICAgICAgICAgICAgICAgIHJldHVybiBjb21wCiAgICAgICAgICAgIGVsaWYgc2VsZi50eXBlIGlzIFRhZ1R5cGUuU1BFQ0lBTDoKICAgICAgICAgICAgICAgIGlmIHNlbGYubmFtZSA9PSAiaWYiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQuSWZDb21wb25lbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXJnc1swXSwgbmFtZXNwYWNlLCBwYXJlbnQsIHNlbGYuY2hpbGRyZW4uY29weSgpCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZWxpZiBzZWxmLm5hbWUgPT0gImVudW0iOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQuRW51bUNvbXBvbmVudCgKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hcmdzWzBdLCBuYW1lc3BhY2UsIHBhcmVudCwgc2VsZi5jaGlsZHJlbi5jb3B5KCkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJVbmtub3duIHNwZWNpYWwge3NlbGYubmFtZX0iKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcihmIlVuaW1wbGVtZW50ZWQgdGFndHlwZSB7c2VsZi50eXBlfSIpCgogICAgICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6CiAgICAgICAgICAgICIiIlJlcHJvZHVjZSB0aGUgb2JqZWN0IGFzIHN0cmluZyIiIgogICAgICAgICAgICBoZWFkID0gc2VsZi5uYW1lCiAgICAgICAgICAgIGNoaWxkcmVuID0gIiIKICAgICAgICAgICAgaWYgc2VsZi50eXBlID09IFRhZ1R5cGUuVEFHOgogICAgICAgICAgICAgICAgYWxpYXMsIGF0dHJzID0gc2VsZi5hcmdzCiAgICAgICAgICAgICAgICBpZiBhbGlhcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBoZWFkICs9ICI6IiArIGFsaWFzCiAgICAgICAgICAgICAgICBpZiBhdHRyczoKICAgICAgICAgICAgICAgICAgICBoZWFkICs9ICIoIiArICIgIi5qb2luKG1hcCgiPSIuam9pbiwgYXR0cnMuaXRlbXMoKSkpICsgIikiCiAgICAgICAgICAgIGlmIGxlbihzZWxmLmNoaWxkcmVuKSA+IDA6CiAgICAgICAgICAgICAgICBjaGlsZHJlbiA9ICgKICAgICAgICAgICAgICAgICAgICAie1xuIgogICAgICAgICAgICAgICAgICAgICsgIlxuIi5qb2luKAogICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAiICsgbG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBsbiBpbiAiLFxuIi5qb2luKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcChUZW1wbGF0ZS5JdGVtLl9fcmVwcl9fLCBzZWxmLmNoaWxkcmVuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5zcGxpdGxpbmVzKCkKICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICArICJcbn0iCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiBmIntoZWFkfXtjaGlsZHJlbn0iCgogICAgaW5zdHJ1Y3Rpb25zOiBsaXN0W0l0ZW1dCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHJvb3Q6IEl0ZW0sIG5hbWVzcGFjZT1Ob25lKToKICAgICAgICAiIiJDcmVhdGUgYSB0YWt0bCB0ZW1wbGF0ZSIiIgogICAgICAgIHNlbGYucm9vdCA9IHJvb3QKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IG5hbWVzcGFjZQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHBhcnNlKGNscywgc3RyaW5nOiBzdHIpIC0+ICJUZW1wbGF0ZSI6CiAgICAgICAgIiIiTG9hZCB0ZW1wbGF0ZSBmcm9tIHRha3RsIHNvdXJjZSBzdHJpbmcuIiIiCiAgICAgICAgcmV0dXJuIFRlbXBsYXRlKFN0YXRlKHN0cmluZy5yZXBsYWNlKCJcXFxuIiwgIiIpKS5wYXJzZSgpKQoKICAgIGRlZiBldmFsKHNlbGYsIF9uYW1lc3BhY2U6IE9wdGlvbmFsW3dyaXRlYWJsZS5OYW1lc3BhY2VdID0gTm9uZSk6CiAgICAgICAgIiIiRXZhbHVhdGUgdGhlIHRlbXBsYXRlIGluIHRoZSBnaXZlbiBuYW1lc3BhY2UuIiIiCiAgICAgICAgbmFtZXNwYWNlID0gc2VsZi5uYW1lc3BhY2Ugb3IgX25hbWVzcGFjZQogICAgICAgIGFzc2VydCBuYW1lc3BhY2UgaXMgbm90IE5vbmUsICJObyBuYW1lc3BhY2Ugc3BlY2lmaWVkISIKCiAgICAgICAgcmV0dXJuIHNlbGYucm9vdC5yZW5kZXIoTm9uZSwgbmFtZXNwYWNlKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6CiAgICAgICAgcmV0dXJuIHN0cihzZWxmLnJvb3QpCgoKZGVmIGdldF9jb21wb25lbnQoCiAgICBuYW1lOiBzdHIsIG5hbWVzcGFjZTogT3B0aW9uYWxbd3JpdGVhYmxlLk5hbWVzcGFjZV0gPSBOb25lCikgLT4gImNvbXBvbmVudC5CYXNlQ29tcG9uZW50IjoKICAgICIiIkdldCBhIGNvbXBvbmVudCBieSBuYW1lIGZyb20gYnVpbHRpbnMgb3Igb3B0aW9uYWwgYG5hbWVzcGFjZWAuIiIiCiAgICBmcm9tIC4gaW1wb3J0IGNvbXBvbmVudHMKCiAgICB0cnk6CiAgICAgICAgcmV0dXJuIGV2YWwobmFtZSwge30sIChuYW1lc3BhY2UudmFycyBvciB7fSkgfCB2YXJzKGNvbXBvbmVudHMpKQogICAgZXhjZXB0IE5hbWVFcnJvciBhcyBlOgogICAgICAgIHJhaXNlIE5hbWVFcnJvcihmIkNvbXBvbmVudCB7bmFtZSFyfSBkb2VzIG5vdCBleGlzdC4iKSBmcm9tIGUK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAURAAAAAAAABREAAAAAAAAAAAAAAAA8L8"
				],
				[
					405,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAENEAAAAAAAAREQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABDRAAAAAAAAENEAAAAAAAAAAAAAAAA8L8"
				],
				[
					406,
					1,
					"insert",
					{
						"characters": " self."
					},
					"BgAAAEREAAAAAAAARUQAAAAAAAAAAAAARUQAAAAAAABGRAAAAAAAAAAAAABGRAAAAAAAAEdEAAAAAAAAAAAAAEdEAAAAAAAASEQAAAAAAAAAAAAASEQAAAAAAABJRAAAAAAAAAAAAABJRAAAAAAAAEpEAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABERAAAAAAAAEREAAAAAAAAAAAAAAAA8L8"
				],
				[
					407,
					1,
					"insert",
					{
						"characters": "at"
					},
					"AgAAAEpEAAAAAAAAS0QAAAAAAAAAAAAAS0QAAAAAAABMRAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABKRAAAAAAAAEpEAAAAAAAAAAAAAAAA8L8"
				],
				[
					408,
					1,
					"left_delete",
					null,
					"AQAAAEtEAAAAAAAAS0QAAAAAAAABAAAAdA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABMRAAAAAAAAExEAAAAAAAAAAAAAAAA8L8"
				],
				[
					409,
					1,
					"insert",
					{
						"characters": "rgs"
					},
					"AwAAAEtEAAAAAAAATEQAAAAAAAAAAAAATEQAAAAAAABNRAAAAAAAAAAAAABNRAAAAAAAAE5EAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABLRAAAAAAAAEtEAAAAAAAAAAAAAAAA8L8"
				],
				[
					410,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAAE5EAAAAAAAAUEQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABORAAAAAAAAE5EAAAAAAAAAAAAAAAA8L8"
				],
				[
					411,
					1,
					"insert",
					{
						"characters": "1"
					},
					"AQAAAE9EAAAAAAAAUEQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABPRAAAAAAAAE9EAAAAAAAAAAAAAAAA8L8"
				],
				[
					414,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAkU0AAAAAAAAwTQAAIiIiClRha3RrIHRlbXBsYXRpbmcgZW5naW5lLgoKQ29weXJpZ2h0IChDKSAyMDIyICBrZW4tbW9yZWwKClRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5Cml0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CnRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCihhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCgpUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQpHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgoiIiIKaW1wb3J0IGRhdGFjbGFzc2VzCmltcG9ydCBkZWNpbWFsCmltcG9ydCBlbnVtCmltcG9ydCBvcy5wYXRoCmltcG9ydCBzdHJpbmcKZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aApmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIEFueQoKZnJvbSBweW9sb2FkIGltcG9ydCBhbm5vdGF0ZQoKZnJvbSAuIGltcG9ydCBkaWN0aW9uYXJ5LCB3cml0ZWFibGUsIGNvbXBvbmVudAoKCmNsYXNzIFRhZ1R5cGUoZW51bS5FbnVtKToKICAgICIiIkVudW0gdHlwZSBmb3IgVGVtcGxhdGUuSXRlbSBgLnR5cGVgLiIiIgoKICAgIFRBRyA9IGVudW0uYXV0bygpCiAgICBTUEVDSUFMID0gZW51bS5hdXRvKCkKICAgIE1FVEEgPSBlbnVtLmF1dG8oKQoKClNQQUNFID0gZnJvemVuc2V0KCIgIikKVkFSTkFNRSA9IGZyb3plbnNldChzdHJpbmcuYXNjaWlfbGV0dGVycyArIHN0cmluZy5kaWdpdHMgKyAiXyIpCkNPTVBPTkVOVF9OQU1FID0gVkFSTkFNRSB8IGZyb3plbnNldCgiLiIpCkJSQUNLRVRTID0gZGljdChtYXAodHVwbGUsICIoKSxbXSx7fSIuc3BsaXQoIiwiKSkpClNUUklOR19RVU9URVMgPSBmcm96ZW5zZXQoIlwiJyIpCklOVCA9IGZyb3plbnNldChzdHJpbmcuZGlnaXRzKQpERUNJTUFMID0gZnJvemVuc2V0KHN0cmluZy5kaWdpdHMgKyAiLiIpClNMSUNFID0gSU5UIHwgZnJvemVuc2V0KCI6IikKUE9JTlQgPSBERUNJTUFMIHwgZnJvemVuc2V0KCIsIikKQVRUUl9OQU1FID0gZnJvemVuc2V0KCI6LSIpIHwgVkFSTkFNRQoKCmNsYXNzIFN0YXRlOgogICAgIiIiU3RvcmVzIHBhcnNlciBzdGF0ZSBhbmQgcGFyc2luZyB1dGlscy4iIiIKCiAgICBfX3Nsb3RzX18gPSAoInRleHQiLCAiaWR4IikKICAgIHRleHQ6IHN0cgogICAgaWR4OiBpbnQKCiAgICBAYW5ub3RhdGUKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0ZXh0OiBzdHIsIGlkeDogaW50ID0gMCk6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSB0aGUgcGFyc2VyIHN0YXRlLiIiIgogICAgICAgIHNlbGYudGV4dCA9IHRleHQKICAgICAgICBzZWxmLmlkeCA9IGlkeAoKICAgIGRlZiBfX2lvcl9fKHNlbGYsIG90aGVyOiAiU3RhdGUiKToKICAgICAgICAiIiJDb3B5IHRoZSBvdGhlciBzdGF0ZSBvYmplY3QuIiIiCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFN0YXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgc2VsZi5pZHggPSBvdGhlci5pZHgKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBjb3B5KHNlbGYpIC0+ICJTdGF0ZSI6CiAgICAgICAgIiIiQ29weSB0aGUgc3RhdGUgb2JqZWN0LiIiIgogICAgICAgIHJldHVybiBTdGF0ZSh0ZXh0PXNlbGYudGV4dCwgaWR4PXNlbGYuaWR4KQoKICAgIGRlZiBfX2ludF9fKHNlbGYpIC0+IGludDoKICAgICAgICAiIiJDb252ZXJ0IHN0YXRlIHRvIGludCwgcmV0dXJuIGluZGV4LiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeAoKICAgIGRlZiBfX2luZGV4X18oc2VsZikgLT4gaW50OgogICAgICAgICIiIlVzZSBzdGF0ZSBhcyBpbmRleCwgcmV0dXJuIGluZGV4LiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeAoKICAgIGRlZiBfX2lhZGRfXyhzZWxmLCB2YWwpIC0+ICJTdGF0ZSI6CiAgICAgICAgIiIiQWRkIHN0YXRlIGluZGV4LiIiIgogICAgICAgIHNlbGYuaWR4ICs9IHZhbAogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fYWRkX18oc2VsZiwgdmFsKSAtPiBpbnQ6CiAgICAgICAgIiIiQWRkIHN0YXRlcy4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggKyB2YWwKCiAgICBkZWYgX19yYWRkX18oc2VsZiwgdmFsKSAtPiBpbnQ6CiAgICAgICAgIiIiQWRkIHN0YXRlcy4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggKyB2YWwKCiAgICBkZWYgX19ndF9fKHNlbGYsIHZhbDogaW50KSAtPiBib29sOgogICAgICAgICIiIlBlcmZvcm0gZ3Qgb3BlcmF0aW9uIG9uIHN0YXRlIGluZGV4LiIiIgogICAgICAgIHJldHVybiBpbnQuX19ndF9fKHNlbGYuaWR4LCB2YWwpCgogICAgZGVmIF9fbHRfXyhzZWxmLCB2YWw6IGludCkgLT4gYm9vbDoKICAgICAgICAiIiJQZXJmb3JtIGx0IG9wZXJhdGlvbiBvbiBzdGF0ZSBpbmRleC4iIiIKICAgICAgICByZXR1cm4gaW50Ll9fbHRfXyhzZWxmLmlkeCwgdmFsKQoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6CiAgICAgICAgIiIiQ29tcHV0ZSBhIGR1bW15IGhhc2ggYmFzZWQgb24gdGV4dCBoYXNoLiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeCAqIGxlbihzZWxmLnRleHQpICogaGFzaChzZWxmLnRleHQpCgogICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OgogICAgICAgICIiIkNvbXB1dGUgdGhlIHRleHQgbGVuZ3RoLiIiIgogICAgICAgIHJldHVybiBsZW4oc2VsZi50ZXh0KQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpdGVtOiBzbGljZSB8IGludCkgLT4gc3RyOgogICAgICAgICIiIlNsaWNlIHRoZSBzdGF0ZSB0ZXh0LiIiIgogICAgICAgIGlmIGl0ZW0gPT0gLi4uOgogICAgICAgICAgICByZXR1cm4gc2VsZi50ZXh0W3NlbGYuaWR4XQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShpdGVtLCBzbGljZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnRleHQuX19nZXRpdGVtX18oCiAgICAgICAgICAgICAgICBzbGljZSgKICAgICAgICAgICAgICAgICAgICAqKAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlkeCBpZiB4IGlzIC4uLiBlbHNlIHgKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gKGl0ZW0uc3RhcnQsIGl0ZW0uc3RvcCwgaXRlbS5zdGVwKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnRleHQuX19nZXRpdGVtX18oaXRlbSkKCiAgICBkZWYgX19ib29sX18oc2VsZikgLT4gYm9vbDoKICAgICAgICAiIiJSZXR1cm4gdHJ1ZSBpZiBpbmRleCBkaWQgbm90IGV4Y2VlZCB0ZXh0IGxlbmd0aC4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggPCBsZW4oc2VsZi50ZXh0KQoKICAgIGRlZiBuZXh0X2xpbmUoc2VsZikgLT4gYm9vbDoKICAgICAgICAiIiJTa2lwIGFsbCBjaGFyYWN0ZXJzIHRpbGwgbmV4dCBuZXdsaW5lIGNoYXJhY3Rlci4iIiIKICAgICAgICB3aGlsZSBzZWxmIGFuZCBzZWxmWy4uLl0gIT0gIlxuIjoKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgc2VsZiArPSAxCiAgICAgICAgcmV0dXJuIGJvb2woc2VsZikKCiAgICBkZWYgc2tpcF9zcGFjZXMoc2VsZikgLT4gaW50OgogICAgICAgICIiIlNraXAgYWxsIHNwYWNlcyBhbmQgcmV0dXJuIHRoZWlyIG51bWJlci4iIiIKICAgICAgICBjb3VudCA9IDAKICAgICAgICB3aGlsZSBzZWxmIGFuZCBzZWxmWy4uLl0gaW4gU1BBQ0U6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBjb3VudCArPSAxCiAgICAgICAgaWYgKAogICAgICAgICAgICBzZWxmCiAgICAgICAgICAgIGFuZCBzZWxmW3NlbGYuaWR4XSA9PSAiXFwiCiAgICAgICAgICAgIGFuZCBsZW4oc2VsZikgPiBzZWxmLmlkeCArIDEKICAgICAgICAgICAgYW5kIHNlbGZbc2VsZi5pZHggKyAxXSA9PSAiXG4iCiAgICAgICAgKToKICAgICAgICAgICAgc2VsZiArPSAyCiAgICAgICAgICAgIHJldHVybiBjb3VudCArIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIHJldHVybiBjb3VudAoKICAgIGRlZiBuZXh0X3RhZ19uYW1lKHNlbGYpIC0+IHR1cGxlW3N0ciwgT3B0aW9uYWxbc3RyXV06CiAgICAgICAgciIiIkdldCBuZXh0IHRhZyBuYW1lIGZyb20gYFxgIGNoYXJhY3RlciwgbWF5IGluY2x1ZGUgYWxpYXMuIiIiCiAgICAgICAgc2VsZi5za2lwX3NwYWNlcygpCiAgICAgICAgYmVnaW4gPSBzZWxmLmNvcHkoKQogICAgICAgIHNlbGYgKz0gMQogICAgICAgIG5hbWUgPSAiIgogICAgICAgIHdoaWxlIHNlbGYgYW5kIHNlbGZbLi4uXSBpbiBDT01QT05FTlRfTkFNRToKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgbmFtZSA9IHNlbGYudGV4dFtiZWdpbiArIDEgOiBzZWxmXQoKICAgICAgICBpZiBsZW4oc2VsZi50ZXh0KSA+IHNlbGYgYW5kIHNlbGYudGV4dFtzZWxmXSA9PSAiOiI6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBiZWdpbiA9IHNlbGYuY29weSgpCiAgICAgICAgICAgIHdoaWxlICgKICAgICAgICAgICAgICAgIGxlbihzZWxmLnRleHQpID4gaW50KHNlbGYpCiAgICAgICAgICAgICAgICBhbmQgc2VsZi50ZXh0W2ludChzZWxmKV0gaW4gQ09NUE9ORU5UX05BTUUKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBhbGlhcyA9IHNlbGYudGV4dFtiZWdpbiA6IGludChzZWxmKV0KICAgICAgICBlbHNlOgogICAgICAgICAgICBhbGlhcyA9IE5vbmUKICAgICAgICByZXR1cm4gKG5hbWUsIGFsaWFzKQoKICAgIGRlZiBuZXh0X2F0dHJfdmFsdWUoc2VsZikgLT4gInR1cGxlW1N0YXRlLCBzdHIsIHN0cl0iOgogICAgICAgIHIiIiJHZXQgbmV4dCBhdHRyaWJ1dGUgdmFsdWUgcGFpci4iIiIKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBhdHRyID0gIiIKCiAgICAgICAgd2hpbGUgc2VsZiBhbmQgc2VsZlsuLi5dIGluIEFUVFJfTkFNRToKICAgICAgICAgICAgYXR0ciArPSBzZWxmWy4uLl0KICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgaWYgbm90IHNlbGYgb3Igc2VsZlsuLi5dICE9ICI9IjoKICAgICAgICAgICAgcmV0dXJuIGF0dHIsICJUcnVlIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICB2YWwgPSBzZWxmLm5leHRfdmFsdWUoKQogICAgICAgICAgICByZXR1cm4gYXR0ciwgdmFsCgogICAgZGVmIG5leHRfdmFsdWUoc2VsZikgLT4gc3RyOgogICAgICAgICIiIlJlYWQgdGhlIG5leHQgdmFsdWUgaW4gcGFyc2VyLiIiIgogICAgICAgIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIGJlZ2luID0gc2VsZi5jb3B5KCkKICAgICAgICBicmFja2V0cyA9IFtdCiAgICAgICAgaWYgKAogICAgICAgICAgICAiOiIgaW4gc2VsZlsuLi46XQogICAgICAgICAgICBhbmQgc2VsZlsuLi46XVs6IChuIDo9IHNlbGZbLi4uOl0uaW5kZXgoIjoiKSldLmlzYWxwaGEoKQogICAgICAgICAgICBhbmQgbGVuKGJyYWNrZXRzKSA9PSAwCiAgICAgICAgKToKICAgICAgICAgICAgYmVnaW4gPSBzZWxmLmNvcHkoKQogICAgICAgICAgICBzZWxmICs9IG4KICAgICAgICAgICAgYmMgPSAwCiAgICAgICAgICAgIHdoaWxlIHNlbGY6CiAgICAgICAgICAgICAgICBpZiBzZWxmWy4uLl0gPT0gInsiOgogICAgICAgICAgICAgICAgICAgIGJjICs9IDEKICAgICAgICAgICAgICAgIGVsaWYgc2VsZlsuLi5dID09ICJ9IjoKICAgICAgICAgICAgICAgICAgICBiYyAtPSAxCiAgICAgICAgICAgICAgICBlbGlmIChxdW90ZSA6PSBzZWxmWy4uLl0pIGluIFNUUklOR19RVU9URVM6CiAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgc2VsZjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZlsuLi5dID09IHF1b3RlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBzZWxmWy4uLl0gPT0gIlxcIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYgKz0gMgogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInVudGVybWluYXRlZCBzdHJpbmcgaW46IiwgcmVwcihzZWxmLnRleHQpCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVsaWYgc2VsZlsuLi5dLmlzc3BhY2UoKSBhbmQgYmMgPT0gMDoKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgIHJldHVybiBzZWxmW2JlZ2luOi4uLl0KICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBjID0gc2VsZlsuLi5dCiAgICAgICAgICAgIGlmIGMgaW4gQlJBQ0tFVFM6CiAgICAgICAgICAgICAgICBicmFja2V0cy5hcHBlbmQoc2VsZlsuLi5dKQogICAgICAgICAgICBlbGlmIGMgaW4gU1RSSU5HX1FVT1RFUzoKICAgICAgICAgICAgICAgIG9wZW5pbmcgPSBjCiAgICAgICAgICAgICAgICBzZWxmICs9IDEKICAgICAgICAgICAgICAgIHdoaWxlIHNlbGY6CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZlsuLi5dID09IG9wZW5pbmc6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxpZiBzZWxmWy4uLl0gPT0gIlxcIjoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAyCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigidW50ZXJtaW5hdGVkIHN0cmluZyBpbjoiLCByZXByKHNlbGYudGV4dCkpCiAgICAgICAgICAgIGVsaWYgYyBpbiBCUkFDS0VUUy52YWx1ZXMoKToKICAgICAgICAgICAgICAgIGlmIGxlbihicmFja2V0cykgPiAwIGFuZCBCUkFDS0VUU1ticmFja2V0c1stMV1dID09IGM6CiAgICAgICAgICAgICAgICAgICAgYnJhY2tldHMucG9wKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICBmInVubWF0Y2hlZCB7YyFyfSBhdCB7aW50KHNlbGYpfToge3NlbGYudGV4dCFyfSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsaWYgbGVuKGJyYWNrZXRzKSA9PSAwIGFuZCBjLmlzc3BhY2UoKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgIHJldHVybiBzZWxmW2JlZ2luOi4uLl0KCiAgICBkZWYgcGFyc2VfbmV4dF9lbnVtKHNlbGYpIC0+ICJ0dXBsZVtzdHIsIHR1cGxlW3N0ciwgc3RyXV0iOgogICAgICAgICIiIk5leHQgZW51bWVyYXRvci4iIiIKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBzZWxmICs9IGxlbigiIWVudW0gIikKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBiID0gc2VsZi5jb3B5KCkKICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBpZiBzZWxmWy4uLl0gbm90IGluIFZBUk5BTUU6CiAgICAgICAgICAgICAgICBpZiBzZWxmWy4uLl0gIT0gIjoiOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgInVucmVjb2duaXNlZCBzeW1ib2wgaW4gYWZ0ZXIgZW51bSBvYmplY3QgbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJ1bnRlcm1pbmF0ZWQgZW51bSBmaXJzdCBmaWVsZFxuIiArIHJlcHIoc2VsZikpCiAgICAgICAgb2JqID0gc2VsZi50ZXh0W2I6c2VsZl0KICAgICAgICBzZWxmICs9IDEKICAgICAgICBiID0gc2VsZi5jb3B5KCkKICAgICAgICBiICs9IDEKICAgICAgICBuYyA9IDAKICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBpZiBzZWxmWy4uLl0gPT0gIikiOgogICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbGlmIHNlbGZbLi4uXSA9PSAiLCI6CiAgICAgICAgICAgICAgICBuYyArPSAxCiAgICAgICAgICAgICAgICBpZiBuYyA+IDE6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAidG9vIG1hbnkgZmllbGRzIGFmdGVyIGVudW0gb2JqZWN0XG4iICsgcmVwcihzZWxmKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJVbnRlcm1pbmF0ZWQgZW51bSBzZWNvbmQgZmllbGRcbiIgKyByZXByKHNlbGYpKQogICAgICAgIGFsaWFzID0gdHVwbGUobWFwKHN0ci5zdHJpcCwgc2VsZltiOnNlbGZdLnNwbGl0KCIsIikpKQogICAgICAgIHJldHVybiBUZW1wbGF0ZS5JdGVtKAogICAgICAgICAgICB0eXBlPVRhZ1R5cGUuU1BFQ0lBTCwgbmFtZT0iZW51bSIsIGFyZ3M9KG9iaiwgYWxpYXMpCiAgICAgICAgKQoKICAgIGRlZiBwYXJzZV9uZXh0X3NwZWNpYWwoc2VsZik6CiAgICAgICAgaWYgc2VsZlsuLi46XS5zdGFydHN3aXRoKCIhaWYiKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VfbmV4dF9pZigpCiAgICAgICAgZWxpZiBzZWxmWy4uLjpdLnN0YXJ0c3dpdGgoIiFlbnVtIik6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlX25leHRfZW51bSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigKICAgICAgICAgICAgICAgICJ1bmV4cGVjdGVkIHNwZWNpYWwgdGFnIiwgc2VsZltzZWxmLmlkeCA6IHNlbGYuaWR4ICsgNV0gKyAiLi4uIgogICAgICAgICAgICApCgogICAgZGVmIHBhcnNlX25leHRfaWYoc2VsZikgLT4gInR1cGxlW3N0ciwgdHVwbGVbc3RyLCBzdHJdXSI6CiAgICAgICAgIiIiUmV0dXJuIG5leHQgaWYgc3RhdGVtZW50cyBwYXJ0cy4iIiIKICAgICAgICBzZWxmICs9IGxlbigiIWlmIikKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBiID0gc2VsZi5jb3B5KCkKCiAgICAgICAgd2hpbGUgc2VsZiBhbmQgc2VsZlsuLi5dICE9ICJcbiI6CiAgICAgICAgICAgIHNlbGYgKz0gMQoKICAgICAgICByZXR1cm4gVGVtcGxhdGUuSXRlbSgKICAgICAgICAgICAgdHlwZT1UYWdUeXBlLlNQRUNJQUwsIG5hbWU9ImlmIiwgYXJncz0oc2VsZltiOi4uLl0sKQogICAgICAgICkKCiAgICBAcHJvcGVydHkKICAgIGRlZiByb3coc2VsZikgLT4gaW50OgogICAgICAgICIiIkZpbmQgdGhlIGN1cnJlbnQgcG9zaXRpb24gcm93LiIiIgogICAgICAgIHJldHVybiBzZWxmLnRleHRbOiBzZWxmLmlkeF0uY291bnQoIlxuIikgKyAxCgogICAgQHJvdy5zZXR0ZXIKICAgIGRlZiByb3coc2VsZiwgdmFsOiBpbnQpOgogICAgICAgIGNvbCA9IHNlbGYuY29sCiAgICAgICAgc2VsZi5pZHggPSAwCiAgICAgICAgd2hpbGUgc2VsZi5yb3cgPCB2YWw6CiAgICAgICAgICAgIHNlbGYuaWR4ICs9IDEKICAgICAgICBzZWxmLmNvbCArPSBjb2wKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjb2woc2VsZikgLT4gaW50OgogICAgICAgICIiIkZpbmQgdGhlIGFjdHVhbCBzdGF0ZSBjb2x1bW4uIiIiCiAgICAgICAgbGluZXMgPSBzZWxmLnRleHRbOiBzZWxmLmlkeF0uc3BsaXRsaW5lcygpCiAgICAgICAgaWYgbGVuKGxpbmVzKSA+IDA6CiAgICAgICAgICAgIHJldHVybiBsZW4obGluZXNbLTFdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAwCgogICAgQGNvbC5zZXR0ZXIKICAgIGRlZiBjb2woc2VsZiwgdmFsOiBpbnQpIC0+IGJvb2w6CiAgICAgICAgaWYgbGVuKHNlbGYudGV4dC5zcGxpdGxpbmVzKClbc2VsZi5yb3cgLSAxXSkgPCB2YWw6CiAgICAgICAgICAgIHNlbGYuaWR4ICs9IHZhbCAtIHNlbGYuY29sCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIHBhcnNlX25leHRfaW5zdHJ1Y3Rpb24oc2VsZikgLT4gInR1cGxlW2ludCwgVGVtcGxhdGUuSXRlbV0iOgogICAgICAgICIiIlBhcnNlIHRoZSBuZXh0IGluc3RydWN0aW9uLiIiIgogICAgICAgIGluZGVudCA9IHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIHdoaWxlIHNlbGYgYW5kIHNlbGZbLi4uXSBpbiAiI1xuIjoKICAgICAgICAgICAgaWYgbm90IHNlbGYubmV4dF9saW5lKCk6CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgaW5kZW50ID0gc2VsZi5za2lwX3NwYWNlcygpCiAgICAgICAgaWYgbm90IHNlbGY6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGNoYXIgPSBzZWxmWy4uLl0KICAgICAgICBpZiBjaGFyID09ICJcXCI6ICAjIGEgdGFnCiAgICAgICAgICAgIHJldHVybiBpbmRlbnQsIHNlbGYucGFyc2VfbmV4dF90YWcoKQogICAgICAgIGVsaWYgY2hhciA9PSAiISI6CiAgICAgICAgICAgIHJldHVybiBpbmRlbnQsIHNlbGYucGFyc2VfbmV4dF9zcGVjaWFsKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGNoYXIpCgogICAgZGVmIHBhcnNlX25leHRfdGFnKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgIiIiUmV0dXJuIG5leHQgdGFnLiIiIgogICAgICAgIG5hbWUsIGFsaWFzID0gc2VsZi5uZXh0X3RhZ19uYW1lKCkKICAgICAgICBhdHRycyA9IHt9CiAgICAgICAgd2hpbGUgc2VsZjoKICAgICAgICAgICAgc2VsZi5za2lwX3NwYWNlcygpCiAgICAgICAgICAgIGlmIHNlbGZbLi4uXSA9PSAiIyI6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBrZXksIHZhbCA9IHNlbGYubmV4dF9hdHRyX3ZhbHVlKCkKICAgICAgICAgICAgaWYga2V5OgogICAgICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbAogICAgICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICAgICAgaWYgbm90IHNlbGYgb3Igc2VsZlsuLi5dID09ICJcbiI6CiAgICAgICAgICAgICAgICBzZWxmLm5leHRfbGluZSgpCiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICByZXR1cm4gVGVtcGxhdGUuSXRlbSh0eXBlPVRhZ1R5cGUuVEFHLCBuYW1lPW5hbWUsIGFyZ3M9KGFsaWFzLCBhdHRycykpCgogICAgQHByb3BlcnR5CiAgICBkZWYgbGluZShzZWxmKSAtPiBzdHI6CiAgICAgICAgIiIiR2V0IHRoZSBmdWxsIGN1cnJlbnQgbGluZS4iIiIKICAgICAgICByZXR1cm4gc2VsZi50ZXh0LnNwbGl0bGluZXMoKVtzZWxmLnJvdyAtIDFdCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgICIiIlJlcHJvZHVjZSB0aGUgc3RhdGUuIiIiCiAgICAgICAgcmV0dXJuICJTdGF0ZSglZCkge1xuICAgICVzXG4gICAgJXNcbn0iICUgKAogICAgICAgICAgICBzZWxmLnJvdywKICAgICAgICAgICAgc2VsZi5saW5lLAogICAgICAgICAgICAiICIgKiBzZWxmLmNvbCArICJeIiwKICAgICAgICApCgogICAgZGVmIHBhcnNlKHNlbGYpIC0+ICJUZW1wbGF0ZS5JdGVtIjoKICAgICAgICAiIiJQYXJzZSB0aGUgc3RhdGUgY29udGVudC4iIiIKICAgICAgICB0YWdzID0gW10KICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBjbWQgPSBzZWxmLnBhcnNlX25leHRfaW5zdHJ1Y3Rpb24oKQogICAgICAgICAgICBpZiBjbWQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICB0YWdzLmFwcGVuZChjbWQpCiAgICAgICAgaWYgbGVuKHRhZ3MpID09IDA6CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbGFzdF9pbmRlbnQsIHJvb3QgPSB0YWdzWzBdCiAgICAgICAgICAgIHRyZWUgPSBbXQogICAgICAgICAgICBsYXN0X3RhZyA9IHJvb3QKICAgICAgICAgICAgZm9yIGluZGVudCwgY2hpbGQgaW4gdGFnc1sxOl06CiAgICAgICAgICAgICAgICBpZiBpbmRlbnQgPiBsYXN0X2luZGVudDoKICAgICAgICAgICAgICAgICAgICB0cmVlLmFwcGVuZCgobGFzdF9pbmRlbnQsIGxhc3RfdGFnKSkKICAgICAgICAgICAgICAgIGVsaWYgaW5kZW50IDwgbGFzdF9pbmRlbnQ6CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgaW5kZW50IDw9IHRyZWVbLTFdWzBdOgogICAgICAgICAgICAgICAgICAgICAgICB0cmVlLnBvcCgpCiAgICAgICAgICAgICAgICB0cmVlWy0xXVsxXS5jaGlsZHJlbi5hcHBlbmQoY2hpbGQpCiAgICAgICAgICAgICAgICBjaGlsZC5wYXJlbnQgPSB0cmVlWy0xXVsxXQogICAgICAgICAgICAgICAgbGFzdF9pbmRlbnQgPSBpbmRlbnQKICAgICAgICAgICAgICAgIGxhc3RfdGFnID0gY2hpbGQKICAgICAgICAgICAgcmV0dXJuIHJvb3QKCgpkZWYgZXZhbHVhdGVfbGl0ZXJhbCgKICAgIHN0cmluZzogc3RyLCBuYW1lc3BhY2U6IE9wdGlvbmFsW3dyaXRlYWJsZS5OYW1lc3BhY2VdID0gTm9uZQopIC0+IHR1cGxlW2Jvb2wsIEFueV06CiAgICAiIiJFdmFsdWF0ZSBhIGxpdHRlcmFsIGZyb20gc3RyaW5nIGFuZCBvcHRpb25hbCBuYW1lc3BhY2UuIiIiCiAgICBmcm9tIC4gaW1wb3J0IG1lZGlhCiAgICBmcm9tIC4gaW1wb3J0IGNvbnN0YW50cwoKICAgIHN0cmluZ19zZXQgPSBzZXQoc3RyaW5nKQogICAgaWYgbGVuKHN0cmluZykgPiAxOgogICAgICAgIGIsICpfLCBlID0gc3RyaW5nCiAgICBlbGlmIGxlbihzdHJpbmcpID09IDE6CiAgICAgICAgYiwgZSA9IHN0cmluZywgTm9uZQogICAgZWxzZToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJlbXB0eSBsaXRlcmFsIHN0cmluZyIpCiAgICBpZiBoYXNhdHRyKGNvbnN0YW50cywgc3RyaW5nKToKICAgICAgICByZXR1cm4gKEZhbHNlLCBnZXRhdHRyKGNvbnN0YW50cywgc3RyaW5nKSkKICAgIGVsaWYgc3RyaW5nID09ICJOb25lIjoKICAgICAgICByZXR1cm4gKEZhbHNlLCBOb25lKQogICAgZWxpZiBzdHJpbmcgPT0gIlRydWUiOgogICAgICAgIHJldHVybiAoRmFsc2UsIFRydWUpCiAgICBlbGlmIHN0cmluZyA9PSAiRmFsc2UiOgogICAgICAgIHJldHVybiAoRmFsc2UsIEZhbHNlKQogICAgZWxpZiBiID09ICI8IiBhbmQgZSA9PSAiPiI6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgbWVkaWEuZ2V0X21lZGlhKHN0cmluZ1sxOi0xXSkpCiAgICBlbGlmIGxlbihzdHJpbmdfc2V0IC0gSU5UKSA9PSAwOgogICAgICAgIHJldHVybiAoRmFsc2UsIGludChzdHJpbmcpKQogICAgZWxpZiBsZW4oc3RyaW5nX3NldCAtIERFQ0lNQUwpID09IDA6CiAgICAgICAgcmV0dXJuIERlY2ltYWwoc3RyaW5nKQogICAgZWxpZiBiID09ICJ7IiBhbmQgZSA9PSAifSI6CiAgICAgICAgaWYgbmFtZXNwYWNlIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICAiVW5hbGxvd2VkIHdyaXRlYWJsZS5Xcml0ZWFibGUgaW4gbm9uZSBuYW1lc3BhY2VkIGNvbnRleHQiLAogICAgICAgICAgICAgICAgc3RyaW5nLAogICAgICAgICAgICApCiAgICAgICAgY29kZSA9IHN0cmluZ1sxOi0xXQogICAgICAgIHJldHVybiAoRmFsc2UsIGV2YWwoY29kZSwge30sIG5hbWVzcGFjZSkpCiAgICBlbGlmIGIgPT0gIiQiOgogICAgICAgIGlmIGxlbihzdHJpbmcpIDwgMjoKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKGYiV3Jvbmcgc3Vic2NyaXB0aW9uIHtzdHJpbmchcn0iKQogICAgICAgIHR5cCA9IHN0cmluZ1sxXQogICAgICAgIGlmIHR5cCA9PSAieyI6ICAjIEN1c3RvbSB3cml0ZWFibGUKICAgICAgICAgICAgY29kZSA9IHN0cmluZ1syOi0xXQogICAgICAgICAgICBpZiAifHwiIGluIGNvZGU6CiAgICAgICAgICAgICAgICBnZXQsIHNldF8gPSBjb2RlLnNwbGl0KCJ8fCIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBnZXQsIHNldF8gPSBjb2RlLCAiIgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgVHJ1ZSwKICAgICAgICAgICAgICAgIHdyaXRlYWJsZS5Xcml0ZWFibGUuZnJvbV9nZXRfc2V0KG5hbWVzcGFjZSwgZ2V0LCBzZXRfKSwKICAgICAgICAgICAgKQogICAgICAgIGVsaWYgdHlwID09ICIoIjoKICAgICAgICAgICAgcmV0dXJuIChUcnVlLCBldmFsKHN0cmluZ1syOjFdKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gKFRydWUsIHdyaXRlYWJsZS5Xcml0ZWFibGUuZnJvbV9uYW1lKG5hbWVzcGFjZSwgc3RyaW5nWzE6XSkpCiAgICBlbGlmIGIgaW4gU1RSSU5HX1FVT1RFUzoKICAgICAgICBpZiBlID09IGI6CiAgICAgICAgICAgIHJldHVybiAoRmFsc2UsIHN0cmluZ1sxOi0xXSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbnRlcm1pbmF0ZWQgc3RyaW5nOiIsIHN0cmluZykKICAgIGVsaWYgc3RyaW5nWzBdID09IHN0cmluZ1stMV0gPT0gIi8iOgogICAgICAgIHJldHVybiAoRmFsc2UsIFBhdGgob3MucGF0aC5leHBhbmR2YXJzKHN0cmluZ1sxOi0xXSkpKQogICAgZWxpZiBiID09ICJAIjoKICAgICAgICByZXR1cm4gKFRydWUsIGRpY3Rpb25hcnkuVHJhbnNsYXRpb24oc3RyaW5nWzE6XSkpCiAgICBlbGlmICI6IiBpbiBzdHJpbmcgYW5kIGxlbihzdHJpbmdfc2V0IC0gKERFQ0lNQUwgfCBTTElDRSkpID09IDA6CiAgICAgICAgaWYgbGVuKGQgOj0gKHN0cmluZ19zZXQgLSBTTElDRSkpID4gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3Jvbmcgc2xpY2UiLCBzdHJpbmcsIGQpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNsaWNlKCptYXAoaW50LCBzdHJpbmcuc3BsaXQoIjoiKSkpCiAgICBlbGlmIGxlbihzdHJpbmdfc2V0IC0gUE9JTlQpID09IDA6CiAgICAgICAgdmFsdWVzID0gW10KICAgICAgICBwb3MgPSAwCiAgICAgICAgd2hpbGUgcG9zIDwgbGVuKHN0cmluZyk6CiAgICAgICAgICAgIGJlZ2luID0gcG9zCiAgICAgICAgICAgIGlmICIsIiBpbiBzdHJpbmdbcG9zOl06CiAgICAgICAgICAgICAgICBlbmQgPSBzdHJpbmcuaW5kZXgoIiwiLCBwb3MpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlbmQgPSBsZW4oc3RyaW5nKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiAiLiIgaW4gc3RyaW5nW2JlZ2luOmVuZF06CiAgICAgICAgICAgICAgICAgICAgZGVjID0gRGVjaW1hbChzdHJpbmdbYmVnaW46ZW5kXSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZGVjID0gaW50KHN0cmluZ1tiZWdpbjplbmRdKQogICAgICAgICAgICBleGNlcHQgZGVjaW1hbC5JbnZhbGlkT3BlcmF0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgICAgIHN0cihlKSwKICAgICAgICAgICAgICAgICAgICBzdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgYmVnaW4sCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nW2JlZ2luOmVuZF0sCiAgICAgICAgICAgICAgICApIGZyb20gZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdmFsdWVzLmFwcGVuZChkZWMpCiAgICAgICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBwb3MgPSBlbmQgKyAxCiAgICAgICAgcmV0dXJuIChGYWxzZSwgdHVwbGUodmFsdWVzKSkKICAgIGVsc2U6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5yZWNvZ25zZWQgbGl0ZXJhbDoiLCByZXByKHN0cmluZykpCgoKY2xhc3MgVGVtcGxhdGU6CiAgICAiIiIKICAgIEEgdGFrdGsgY29tcG9uZW50IHRlbXBsYXRlLCBjYW4gYmUgcmVuZGVycmVkIGludG8gYSByZWFsIGNvbXBvbmVudC4KICAgIEhvbGRzIHBhcnNlZCBpbnN0cnVjdGlvbnMgYW5kIG5hbWVzcGFjZS4KICAgICIiIgoKICAgIEBkYXRhY2xhc3Nlcy5kYXRhY2xhc3MKICAgIGNsYXNzIEl0ZW06CiAgICAgICAgIiIiCiAgICAgICAgSXRlbSBpbiB0ZW1wbGF0ZSBwYXJzZSByZXN1bHQsIHJlcHJlc2VudHMgYW4gaW5zdHJ1Y3Rpb24gb3IgdGFnLgogICAgICAgICIiIgoKICAgICAgICB0eXBlOiBUYWdUeXBlCiAgICAgICAgbmFtZTogc3RyCiAgICAgICAgYXJnczogdHVwbGUKICAgICAgICBwYXJlbnQ6ICJUZW1wbGF0ZS5JdGVtIiA9IE5vbmUKICAgICAgICBjaGlsZHJlbjogbGlzdCA9IGRhdGFjbGFzc2VzLmZpZWxkKGRlZmF1bHRfZmFjdG9yeT1saXN0KQoKICAgICAgICBkZWYgcmVuZGVyKHNlbGYsIHBhcmVudCwgbmFtZXNwYWNlKToKICAgICAgICAgICAgIiIiQ3JlYXRlIHRoZSBjb21wb25lbnQuIiIiCgogICAgICAgICAgICBpZiBzZWxmLnR5cGUgaXMgVGFnVHlwZS5UQUc6CiAgICAgICAgICAgICAgICBhbGlhcywgYXR0cnMgPSBzZWxmLmFyZ3MKICAgICAgICAgICAgICAgIGNvbXAgPSBnZXRfY29tcG9uZW50KHNlbGYubmFtZSwgbmFtZXNwYWNlKSgKICAgICAgICAgICAgICAgICAgICBwYXJlbnQ9cGFyZW50LAogICAgICAgICAgICAgICAgICAgIGF0dHJzPWF0dHJzLAogICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZT1uYW1lc3BhY2UsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBpZiBhbGlhcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VbYWxpYXNdID0gY29tcAogICAgICAgICAgICAgICAgZm9yIGNoaWxkIGluIHNlbGYuY2hpbGRyZW46CiAgICAgICAgICAgICAgICAgICAgY2hpbGQucmVuZGVyKGNvbXAsIG5hbWVzcGFjZSkKICAgICAgICAgICAgICAgIHJldHVybiBjb21wCiAgICAgICAgICAgIGVsaWYgc2VsZi50eXBlIGlzIFRhZ1R5cGUuU1BFQ0lBTDoKICAgICAgICAgICAgICAgIGlmIHNlbGYubmFtZSA9PSAiaWYiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQuSWZDb21wb25lbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXJnc1swXSwgbmFtZXNwYWNlLCBwYXJlbnQsIHNlbGYuY2hpbGRyZW4uY29weSgpCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZWxpZiBzZWxmLm5hbWUgPT0gImVudW0iOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQuRW51bUNvbXBvbmVudCgKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hcmdzWzBdLCBzZWxmLmFyZ3NbMV0sIG5hbWVzcGFjZSwgcGFyZW50LCBzZWxmLmNoaWxkcmVuLmNvcHkoKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIlVua25vd24gc3BlY2lhbCB7c2VsZi5uYW1lfSIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKGYiVW5pbXBsZW1lbnRlZCB0YWd0eXBlIHtzZWxmLnR5cGV9IikKCiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjoKICAgICAgICAgICAgIiIiUmVwcm9kdWNlIHRoZSBvYmplY3QgYXMgc3RyaW5nIiIiCiAgICAgICAgICAgIGhlYWQgPSBzZWxmLm5hbWUKICAgICAgICAgICAgY2hpbGRyZW4gPSAiIgogICAgICAgICAgICBpZiBzZWxmLnR5cGUgPT0gVGFnVHlwZS5UQUc6CiAgICAgICAgICAgICAgICBhbGlhcywgYXR0cnMgPSBzZWxmLmFyZ3MKICAgICAgICAgICAgICAgIGlmIGFsaWFzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIGhlYWQgKz0gIjoiICsgYWxpYXMKICAgICAgICAgICAgICAgIGlmIGF0dHJzOgogICAgICAgICAgICAgICAgICAgIGhlYWQgKz0gIigiICsgIiAiLmpvaW4obWFwKCI9Ii5qb2luLCBhdHRycy5pdGVtcygpKSkgKyAiKSIKICAgICAgICAgICAgaWYgbGVuKHNlbGYuY2hpbGRyZW4pID4gMDoKICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gKAogICAgICAgICAgICAgICAgICAgICJ7XG4iCiAgICAgICAgICAgICAgICAgICAgKyAiXG4iLmpvaW4oCiAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICIgKyBsbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGxuIGluICIsXG4iLmpvaW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwKFRlbXBsYXRlLkl0ZW0uX19yZXByX18sIHNlbGYuY2hpbGRyZW4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnNwbGl0bGluZXMoKQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICsgIlxufSIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIGYie2hlYWR9e2NoaWxkcmVufSIKCiAgICBpbnN0cnVjdGlvbnM6IGxpc3RbSXRlbV0KCiAgICBkZWYgX19pbml0X18oc2VsZiwgcm9vdDogSXRlbSwgbmFtZXNwYWNlPU5vbmUpOgogICAgICAgICIiIkNyZWF0ZSBhIHRha3RsIHRlbXBsYXRlIiIiCiAgICAgICAgc2VsZi5yb290ID0gcm9vdAogICAgICAgIHNlbGYubmFtZXNwYWNlID0gbmFtZXNwYWNlCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgcGFyc2UoY2xzLCBzdHJpbmc6IHN0cikgLT4gIlRlbXBsYXRlIjoKICAgICAgICAiIiJMb2FkIHRlbXBsYXRlIGZyb20gdGFrdGwgc291cmNlIHN0cmluZy4iIiIKICAgICAgICByZXR1cm4gVGVtcGxhdGUoU3RhdGUoc3RyaW5nLnJlcGxhY2UoIlxcXG4iLCAiIikpLnBhcnNlKCkpCgogICAgZGVmIGV2YWwoc2VsZiwgX25hbWVzcGFjZTogT3B0aW9uYWxbd3JpdGVhYmxlLk5hbWVzcGFjZV0gPSBOb25lKToKICAgICAgICAiIiJFdmFsdWF0ZSB0aGUgdGVtcGxhdGUgaW4gdGhlIGdpdmVuIG5hbWVzcGFjZS4iIiIKICAgICAgICBuYW1lc3BhY2UgPSBzZWxmLm5hbWVzcGFjZSBvciBfbmFtZXNwYWNlCiAgICAgICAgYXNzZXJ0IG5hbWVzcGFjZSBpcyBub3QgTm9uZSwgIk5vIG5hbWVzcGFjZSBzcGVjaWZpZWQhIgoKICAgICAgICByZXR1cm4gc2VsZi5yb290LnJlbmRlcihOb25lLCBuYW1lc3BhY2UpCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjoKICAgICAgICByZXR1cm4gc3RyKHNlbGYucm9vdCkKCgpkZWYgZ2V0X2NvbXBvbmVudCgKICAgIG5hbWU6IHN0ciwgbmFtZXNwYWNlOiBPcHRpb25hbFt3cml0ZWFibGUuTmFtZXNwYWNlXSA9IE5vbmUKKSAtPiAiY29tcG9uZW50LkJhc2VDb21wb25lbnQiOgogICAgIiIiR2V0IGEgY29tcG9uZW50IGJ5IG5hbWUgZnJvbSBidWlsdGlucyBvciBvcHRpb25hbCBgbmFtZXNwYWNlYC4iIiIKICAgIGZyb20gLiBpbXBvcnQgY29tcG9uZW50cwoKICAgIHRyeToKICAgICAgICByZXR1cm4gZXZhbChuYW1lLCB7fSwgKG5hbWVzcGFjZS52YXJzIG9yIHt9KSB8IHZhcnMoY29tcG9uZW50cykpCiAgICBleGNlcHQgTmFtZUVycm9yIGFzIGU6CiAgICAgICAgcmFpc2UgTmFtZUVycm9yKGYiQ29tcG9uZW50IHtuYW1lIXJ9IGRvZXMgbm90IGV4aXN0LiIpIGZyb20gZQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABQRAAAAAAAAFBEAAAAAAAAAAAAAAAA8L8"
				],
				[
					432,
					1,
					"left_delete",
					null,
					"AQAAAM8iAAAAAAAAzyIAAAAAAAAEAAAAc2VsZg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADPIgAAAAAAANMiAAAAAAAAAAAAAAAA8L8"
				],
				[
					433,
					1,
					"insert",
					{
						"characters": "..."
					},
					"AwAAAM8iAAAAAAAA0CIAAAAAAAAAAAAA0CIAAAAAAADRIgAAAAAAAAAAAADRIgAAAAAAANIiAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADPIgAAAAAAAM8iAAAAAAAAAAAAAAAA8L8"
				],
				[
					436,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAkE0AAAAAAACQTQAAIiIiClRha3RrIHRlbXBsYXRpbmcgZW5naW5lLgoKQ29weXJpZ2h0IChDKSAyMDIyICBrZW4tbW9yZWwKClRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5Cml0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CnRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCihhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCgpUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQpHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgoiIiIKaW1wb3J0IGRhdGFjbGFzc2VzCmltcG9ydCBkZWNpbWFsCmltcG9ydCBlbnVtCmltcG9ydCBvcy5wYXRoCmltcG9ydCBzdHJpbmcKZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aApmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIEFueQoKZnJvbSBweW9sb2FkIGltcG9ydCBhbm5vdGF0ZQoKZnJvbSAuIGltcG9ydCBkaWN0aW9uYXJ5LCB3cml0ZWFibGUsIGNvbXBvbmVudAoKCmNsYXNzIFRhZ1R5cGUoZW51bS5FbnVtKToKICAgICIiIkVudW0gdHlwZSBmb3IgVGVtcGxhdGUuSXRlbSBgLnR5cGVgLiIiIgoKICAgIFRBRyA9IGVudW0uYXV0bygpCiAgICBTUEVDSUFMID0gZW51bS5hdXRvKCkKICAgIE1FVEEgPSBlbnVtLmF1dG8oKQoKClNQQUNFID0gZnJvemVuc2V0KCIgIikKVkFSTkFNRSA9IGZyb3plbnNldChzdHJpbmcuYXNjaWlfbGV0dGVycyArIHN0cmluZy5kaWdpdHMgKyAiXyIpCkNPTVBPTkVOVF9OQU1FID0gVkFSTkFNRSB8IGZyb3plbnNldCgiLiIpCkJSQUNLRVRTID0gZGljdChtYXAodHVwbGUsICIoKSxbXSx7fSIuc3BsaXQoIiwiKSkpClNUUklOR19RVU9URVMgPSBmcm96ZW5zZXQoIlwiJyIpCklOVCA9IGZyb3plbnNldChzdHJpbmcuZGlnaXRzKQpERUNJTUFMID0gZnJvemVuc2V0KHN0cmluZy5kaWdpdHMgKyAiLiIpClNMSUNFID0gSU5UIHwgZnJvemVuc2V0KCI6IikKUE9JTlQgPSBERUNJTUFMIHwgZnJvemVuc2V0KCIsIikKQVRUUl9OQU1FID0gZnJvemVuc2V0KCI6LSIpIHwgVkFSTkFNRQoKCmNsYXNzIFN0YXRlOgogICAgIiIiU3RvcmVzIHBhcnNlciBzdGF0ZSBhbmQgcGFyc2luZyB1dGlscy4iIiIKCiAgICBfX3Nsb3RzX18gPSAoInRleHQiLCAiaWR4IikKICAgIHRleHQ6IHN0cgogICAgaWR4OiBpbnQKCiAgICBAYW5ub3RhdGUKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0ZXh0OiBzdHIsIGlkeDogaW50ID0gMCk6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSB0aGUgcGFyc2VyIHN0YXRlLiIiIgogICAgICAgIHNlbGYudGV4dCA9IHRleHQKICAgICAgICBzZWxmLmlkeCA9IGlkeAoKICAgIGRlZiBfX2lvcl9fKHNlbGYsIG90aGVyOiAiU3RhdGUiKToKICAgICAgICAiIiJDb3B5IHRoZSBvdGhlciBzdGF0ZSBvYmplY3QuIiIiCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFN0YXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgc2VsZi5pZHggPSBvdGhlci5pZHgKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBjb3B5KHNlbGYpIC0+ICJTdGF0ZSI6CiAgICAgICAgIiIiQ29weSB0aGUgc3RhdGUgb2JqZWN0LiIiIgogICAgICAgIHJldHVybiBTdGF0ZSh0ZXh0PXNlbGYudGV4dCwgaWR4PXNlbGYuaWR4KQoKICAgIGRlZiBfX2ludF9fKHNlbGYpIC0+IGludDoKICAgICAgICAiIiJDb252ZXJ0IHN0YXRlIHRvIGludCwgcmV0dXJuIGluZGV4LiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeAoKICAgIGRlZiBfX2luZGV4X18oc2VsZikgLT4gaW50OgogICAgICAgICIiIlVzZSBzdGF0ZSBhcyBpbmRleCwgcmV0dXJuIGluZGV4LiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeAoKICAgIGRlZiBfX2lhZGRfXyhzZWxmLCB2YWwpIC0+ICJTdGF0ZSI6CiAgICAgICAgIiIiQWRkIHN0YXRlIGluZGV4LiIiIgogICAgICAgIHNlbGYuaWR4ICs9IHZhbAogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fYWRkX18oc2VsZiwgdmFsKSAtPiBpbnQ6CiAgICAgICAgIiIiQWRkIHN0YXRlcy4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggKyB2YWwKCiAgICBkZWYgX19yYWRkX18oc2VsZiwgdmFsKSAtPiBpbnQ6CiAgICAgICAgIiIiQWRkIHN0YXRlcy4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggKyB2YWwKCiAgICBkZWYgX19ndF9fKHNlbGYsIHZhbDogaW50KSAtPiBib29sOgogICAgICAgICIiIlBlcmZvcm0gZ3Qgb3BlcmF0aW9uIG9uIHN0YXRlIGluZGV4LiIiIgogICAgICAgIHJldHVybiBpbnQuX19ndF9fKHNlbGYuaWR4LCB2YWwpCgogICAgZGVmIF9fbHRfXyhzZWxmLCB2YWw6IGludCkgLT4gYm9vbDoKICAgICAgICAiIiJQZXJmb3JtIGx0IG9wZXJhdGlvbiBvbiBzdGF0ZSBpbmRleC4iIiIKICAgICAgICByZXR1cm4gaW50Ll9fbHRfXyhzZWxmLmlkeCwgdmFsKQoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6CiAgICAgICAgIiIiQ29tcHV0ZSBhIGR1bW15IGhhc2ggYmFzZWQgb24gdGV4dCBoYXNoLiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeCAqIGxlbihzZWxmLnRleHQpICogaGFzaChzZWxmLnRleHQpCgogICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OgogICAgICAgICIiIkNvbXB1dGUgdGhlIHRleHQgbGVuZ3RoLiIiIgogICAgICAgIHJldHVybiBsZW4oc2VsZi50ZXh0KQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpdGVtOiBzbGljZSB8IGludCkgLT4gc3RyOgogICAgICAgICIiIlNsaWNlIHRoZSBzdGF0ZSB0ZXh0LiIiIgogICAgICAgIGlmIGl0ZW0gPT0gLi4uOgogICAgICAgICAgICByZXR1cm4gc2VsZi50ZXh0W3NlbGYuaWR4XQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShpdGVtLCBzbGljZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnRleHQuX19nZXRpdGVtX18oCiAgICAgICAgICAgICAgICBzbGljZSgKICAgICAgICAgICAgICAgICAgICAqKAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlkeCBpZiB4IGlzIC4uLiBlbHNlIHgKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gKGl0ZW0uc3RhcnQsIGl0ZW0uc3RvcCwgaXRlbS5zdGVwKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnRleHQuX19nZXRpdGVtX18oaXRlbSkKCiAgICBkZWYgX19ib29sX18oc2VsZikgLT4gYm9vbDoKICAgICAgICAiIiJSZXR1cm4gdHJ1ZSBpZiBpbmRleCBkaWQgbm90IGV4Y2VlZCB0ZXh0IGxlbmd0aC4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggPCBsZW4oc2VsZi50ZXh0KQoKICAgIGRlZiBuZXh0X2xpbmUoc2VsZikgLT4gYm9vbDoKICAgICAgICAiIiJTa2lwIGFsbCBjaGFyYWN0ZXJzIHRpbGwgbmV4dCBuZXdsaW5lIGNoYXJhY3Rlci4iIiIKICAgICAgICB3aGlsZSBzZWxmIGFuZCBzZWxmWy4uLl0gIT0gIlxuIjoKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgc2VsZiArPSAxCiAgICAgICAgcmV0dXJuIGJvb2woc2VsZikKCiAgICBkZWYgc2tpcF9zcGFjZXMoc2VsZikgLT4gaW50OgogICAgICAgICIiIlNraXAgYWxsIHNwYWNlcyBhbmQgcmV0dXJuIHRoZWlyIG51bWJlci4iIiIKICAgICAgICBjb3VudCA9IDAKICAgICAgICB3aGlsZSBzZWxmIGFuZCBzZWxmWy4uLl0gaW4gU1BBQ0U6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBjb3VudCArPSAxCiAgICAgICAgaWYgKAogICAgICAgICAgICBzZWxmCiAgICAgICAgICAgIGFuZCBzZWxmW3NlbGYuaWR4XSA9PSAiXFwiCiAgICAgICAgICAgIGFuZCBsZW4oc2VsZikgPiBzZWxmLmlkeCArIDEKICAgICAgICAgICAgYW5kIHNlbGZbc2VsZi5pZHggKyAxXSA9PSAiXG4iCiAgICAgICAgKToKICAgICAgICAgICAgc2VsZiArPSAyCiAgICAgICAgICAgIHJldHVybiBjb3VudCArIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIHJldHVybiBjb3VudAoKICAgIGRlZiBuZXh0X3RhZ19uYW1lKHNlbGYpIC0+IHR1cGxlW3N0ciwgT3B0aW9uYWxbc3RyXV06CiAgICAgICAgciIiIkdldCBuZXh0IHRhZyBuYW1lIGZyb20gYFxgIGNoYXJhY3RlciwgbWF5IGluY2x1ZGUgYWxpYXMuIiIiCiAgICAgICAgc2VsZi5za2lwX3NwYWNlcygpCiAgICAgICAgYmVnaW4gPSBzZWxmLmNvcHkoKQogICAgICAgIHNlbGYgKz0gMQogICAgICAgIG5hbWUgPSAiIgogICAgICAgIHdoaWxlIHNlbGYgYW5kIHNlbGZbLi4uXSBpbiBDT01QT05FTlRfTkFNRToKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgbmFtZSA9IHNlbGYudGV4dFtiZWdpbiArIDEgOiBzZWxmXQoKICAgICAgICBpZiBsZW4oc2VsZi50ZXh0KSA+IHNlbGYgYW5kIHNlbGYudGV4dFtzZWxmXSA9PSAiOiI6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBiZWdpbiA9IHNlbGYuY29weSgpCiAgICAgICAgICAgIHdoaWxlICgKICAgICAgICAgICAgICAgIGxlbihzZWxmLnRleHQpID4gaW50KHNlbGYpCiAgICAgICAgICAgICAgICBhbmQgc2VsZi50ZXh0W2ludChzZWxmKV0gaW4gQ09NUE9ORU5UX05BTUUKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBhbGlhcyA9IHNlbGYudGV4dFtiZWdpbiA6IGludChzZWxmKV0KICAgICAgICBlbHNlOgogICAgICAgICAgICBhbGlhcyA9IE5vbmUKICAgICAgICByZXR1cm4gKG5hbWUsIGFsaWFzKQoKICAgIGRlZiBuZXh0X2F0dHJfdmFsdWUoc2VsZikgLT4gInR1cGxlW1N0YXRlLCBzdHIsIHN0cl0iOgogICAgICAgIHIiIiJHZXQgbmV4dCBhdHRyaWJ1dGUgdmFsdWUgcGFpci4iIiIKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBhdHRyID0gIiIKCiAgICAgICAgd2hpbGUgc2VsZiBhbmQgc2VsZlsuLi5dIGluIEFUVFJfTkFNRToKICAgICAgICAgICAgYXR0ciArPSBzZWxmWy4uLl0KICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgaWYgbm90IHNlbGYgb3Igc2VsZlsuLi5dICE9ICI9IjoKICAgICAgICAgICAgcmV0dXJuIGF0dHIsICJUcnVlIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICB2YWwgPSBzZWxmLm5leHRfdmFsdWUoKQogICAgICAgICAgICByZXR1cm4gYXR0ciwgdmFsCgogICAgZGVmIG5leHRfdmFsdWUoc2VsZikgLT4gc3RyOgogICAgICAgICIiIlJlYWQgdGhlIG5leHQgdmFsdWUgaW4gcGFyc2VyLiIiIgogICAgICAgIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIGJlZ2luID0gc2VsZi5jb3B5KCkKICAgICAgICBicmFja2V0cyA9IFtdCiAgICAgICAgaWYgKAogICAgICAgICAgICAiOiIgaW4gc2VsZlsuLi46XQogICAgICAgICAgICBhbmQgc2VsZlsuLi46XVs6IChuIDo9IHNlbGZbLi4uOl0uaW5kZXgoIjoiKSldLmlzYWxwaGEoKQogICAgICAgICAgICBhbmQgbGVuKGJyYWNrZXRzKSA9PSAwCiAgICAgICAgKToKICAgICAgICAgICAgYmVnaW4gPSBzZWxmLmNvcHkoKQogICAgICAgICAgICBzZWxmICs9IG4KICAgICAgICAgICAgYmMgPSAwCiAgICAgICAgICAgIHdoaWxlIHNlbGY6CiAgICAgICAgICAgICAgICBpZiBzZWxmWy4uLl0gPT0gInsiOgogICAgICAgICAgICAgICAgICAgIGJjICs9IDEKICAgICAgICAgICAgICAgIGVsaWYgc2VsZlsuLi5dID09ICJ9IjoKICAgICAgICAgICAgICAgICAgICBiYyAtPSAxCiAgICAgICAgICAgICAgICBlbGlmIChxdW90ZSA6PSBzZWxmWy4uLl0pIGluIFNUUklOR19RVU9URVM6CiAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgc2VsZjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZlsuLi5dID09IHF1b3RlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBzZWxmWy4uLl0gPT0gIlxcIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYgKz0gMgogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInVudGVybWluYXRlZCBzdHJpbmcgaW46IiwgcmVwcihzZWxmLnRleHQpCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVsaWYgc2VsZlsuLi5dLmlzc3BhY2UoKSBhbmQgYmMgPT0gMDoKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgIHJldHVybiBzZWxmW2JlZ2luOi4uLl0KICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBjID0gc2VsZlsuLi5dCiAgICAgICAgICAgIGlmIGMgaW4gQlJBQ0tFVFM6CiAgICAgICAgICAgICAgICBicmFja2V0cy5hcHBlbmQoc2VsZlsuLi5dKQogICAgICAgICAgICBlbGlmIGMgaW4gU1RSSU5HX1FVT1RFUzoKICAgICAgICAgICAgICAgIG9wZW5pbmcgPSBjCiAgICAgICAgICAgICAgICBzZWxmICs9IDEKICAgICAgICAgICAgICAgIHdoaWxlIHNlbGY6CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZlsuLi5dID09IG9wZW5pbmc6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxpZiBzZWxmWy4uLl0gPT0gIlxcIjoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAyCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigidW50ZXJtaW5hdGVkIHN0cmluZyBpbjoiLCByZXByKHNlbGYudGV4dCkpCiAgICAgICAgICAgIGVsaWYgYyBpbiBCUkFDS0VUUy52YWx1ZXMoKToKICAgICAgICAgICAgICAgIGlmIGxlbihicmFja2V0cykgPiAwIGFuZCBCUkFDS0VUU1ticmFja2V0c1stMV1dID09IGM6CiAgICAgICAgICAgICAgICAgICAgYnJhY2tldHMucG9wKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICBmInVubWF0Y2hlZCB7YyFyfSBhdCB7aW50KHNlbGYpfToge3NlbGYudGV4dCFyfSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsaWYgbGVuKGJyYWNrZXRzKSA9PSAwIGFuZCBjLmlzc3BhY2UoKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgIHJldHVybiBzZWxmW2JlZ2luOi4uLl0KCiAgICBkZWYgcGFyc2VfbmV4dF9lbnVtKHNlbGYpIC0+ICJ0dXBsZVtzdHIsIHR1cGxlW3N0ciwgc3RyXV0iOgogICAgICAgICIiIk5leHQgZW51bWVyYXRvci4iIiIKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBzZWxmICs9IGxlbigiIWVudW0gIikKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBiID0gc2VsZi5jb3B5KCkKICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBpZiBzZWxmWy4uLl0gbm90IGluIFZBUk5BTUU6CiAgICAgICAgICAgICAgICBpZiBzZWxmWy4uLl0gIT0gIjoiOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgInVucmVjb2duaXNlZCBzeW1ib2wgaW4gYWZ0ZXIgZW51bSBvYmplY3QgbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJ1bnRlcm1pbmF0ZWQgZW51bSBmaXJzdCBmaWVsZFxuIiArIHJlcHIoc2VsZikpCiAgICAgICAgb2JqID0gc2VsZi50ZXh0W2I6c2VsZl0KICAgICAgICBzZWxmICs9IDEKICAgICAgICBiID0gc2VsZi5jb3B5KCkKICAgICAgICBiICs9IDEKICAgICAgICBuYyA9IDAKICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBpZiBzZWxmWy4uLl0gPT0gIikiOgogICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbGlmIHNlbGZbLi4uXSA9PSAiLCI6CiAgICAgICAgICAgICAgICBuYyArPSAxCiAgICAgICAgICAgICAgICBpZiBuYyA+IDE6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAidG9vIG1hbnkgZmllbGRzIGFmdGVyIGVudW0gb2JqZWN0XG4iICsgcmVwcihzZWxmKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJVbnRlcm1pbmF0ZWQgZW51bSBzZWNvbmQgZmllbGRcbiIgKyByZXByKHNlbGYpKQogICAgICAgIGFsaWFzID0gdHVwbGUobWFwKHN0ci5zdHJpcCwgc2VsZltiOi4uLl0uc3BsaXQoIiwiKSkpCiAgICAgICAgcmV0dXJuIFRlbXBsYXRlLkl0ZW0oCiAgICAgICAgICAgIHR5cGU9VGFnVHlwZS5TUEVDSUFMLCBuYW1lPSJlbnVtIiwgYXJncz0ob2JqLCBhbGlhcykKICAgICAgICApCgogICAgZGVmIHBhcnNlX25leHRfc3BlY2lhbChzZWxmKToKICAgICAgICBpZiBzZWxmWy4uLjpdLnN0YXJ0c3dpdGgoIiFpZiIpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5wYXJzZV9uZXh0X2lmKCkKICAgICAgICBlbGlmIHNlbGZbLi4uOl0uc3RhcnRzd2l0aCgiIWVudW0iKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VfbmV4dF9lbnVtKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgInVuZXhwZWN0ZWQgc3BlY2lhbCB0YWciLCBzZWxmW3NlbGYuaWR4IDogc2VsZi5pZHggKyA1XSArICIuLi4iCiAgICAgICAgICAgICkKCiAgICBkZWYgcGFyc2VfbmV4dF9pZihzZWxmKSAtPiAidHVwbGVbc3RyLCB0dXBsZVtzdHIsIHN0cl1dIjoKICAgICAgICAiIiJSZXR1cm4gbmV4dCBpZiBzdGF0ZW1lbnRzIHBhcnRzLiIiIgogICAgICAgIHNlbGYgKz0gbGVuKCIhaWYiKQogICAgICAgIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIGIgPSBzZWxmLmNvcHkoKQoKICAgICAgICB3aGlsZSBzZWxmIGFuZCBzZWxmWy4uLl0gIT0gIlxuIjoKICAgICAgICAgICAgc2VsZiArPSAxCgogICAgICAgIHJldHVybiBUZW1wbGF0ZS5JdGVtKAogICAgICAgICAgICB0eXBlPVRhZ1R5cGUuU1BFQ0lBTCwgbmFtZT0iaWYiLCBhcmdzPShzZWxmW2I6Li4uXSwpCiAgICAgICAgKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHJvdyhzZWxmKSAtPiBpbnQ6CiAgICAgICAgIiIiRmluZCB0aGUgY3VycmVudCBwb3NpdGlvbiByb3cuIiIiCiAgICAgICAgcmV0dXJuIHNlbGYudGV4dFs6IHNlbGYuaWR4XS5jb3VudCgiXG4iKSArIDEKCiAgICBAcm93LnNldHRlcgogICAgZGVmIHJvdyhzZWxmLCB2YWw6IGludCk6CiAgICAgICAgY29sID0gc2VsZi5jb2wKICAgICAgICBzZWxmLmlkeCA9IDAKICAgICAgICB3aGlsZSBzZWxmLnJvdyA8IHZhbDoKICAgICAgICAgICAgc2VsZi5pZHggKz0gMQogICAgICAgIHNlbGYuY29sICs9IGNvbAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGNvbChzZWxmKSAtPiBpbnQ6CiAgICAgICAgIiIiRmluZCB0aGUgYWN0dWFsIHN0YXRlIGNvbHVtbi4iIiIKICAgICAgICBsaW5lcyA9IHNlbGYudGV4dFs6IHNlbGYuaWR4XS5zcGxpdGxpbmVzKCkKICAgICAgICBpZiBsZW4obGluZXMpID4gMDoKICAgICAgICAgICAgcmV0dXJuIGxlbihsaW5lc1stMV0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIDAKCiAgICBAY29sLnNldHRlcgogICAgZGVmIGNvbChzZWxmLCB2YWw6IGludCkgLT4gYm9vbDoKICAgICAgICBpZiBsZW4oc2VsZi50ZXh0LnNwbGl0bGluZXMoKVtzZWxmLnJvdyAtIDFdKSA8IHZhbDoKICAgICAgICAgICAgc2VsZi5pZHggKz0gdmFsIC0gc2VsZi5jb2wKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgcGFyc2VfbmV4dF9pbnN0cnVjdGlvbihzZWxmKSAtPiAidHVwbGVbaW50LCBUZW1wbGF0ZS5JdGVtXSI6CiAgICAgICAgIiIiUGFyc2UgdGhlIG5leHQgaW5zdHJ1Y3Rpb24uIiIiCiAgICAgICAgaW5kZW50ID0gc2VsZi5za2lwX3NwYWNlcygpCiAgICAgICAgd2hpbGUgc2VsZiBhbmQgc2VsZlsuLi5dIGluICIjXG4iOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5uZXh0X2xpbmUoKToKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBpbmRlbnQgPSBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBpZiBub3Qgc2VsZjoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgY2hhciA9IHNlbGZbLi4uXQogICAgICAgIGlmIGNoYXIgPT0gIlxcIjogICMgYSB0YWcKICAgICAgICAgICAgcmV0dXJuIGluZGVudCwgc2VsZi5wYXJzZV9uZXh0X3RhZygpCiAgICAgICAgZWxpZiBjaGFyID09ICIhIjoKICAgICAgICAgICAgcmV0dXJuIGluZGVudCwgc2VsZi5wYXJzZV9uZXh0X3NwZWNpYWwoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoY2hhcikKCiAgICBkZWYgcGFyc2VfbmV4dF90YWcoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiJSZXR1cm4gbmV4dCB0YWcuIiIiCiAgICAgICAgbmFtZSwgYWxpYXMgPSBzZWxmLm5leHRfdGFnX25hbWUoKQogICAgICAgIGF0dHJzID0ge30KICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICAgICAgaWYgc2VsZlsuLi5dID09ICIjIjoKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGtleSwgdmFsID0gc2VsZi5uZXh0X2F0dHJfdmFsdWUoKQogICAgICAgICAgICBpZiBrZXk6CiAgICAgICAgICAgICAgICBhdHRyc1trZXldID0gdmFsCiAgICAgICAgICAgIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgICAgICBpZiBub3Qgc2VsZiBvciBzZWxmWy4uLl0gPT0gIlxuIjoKICAgICAgICAgICAgICAgIHNlbGYubmV4dF9saW5lKCkKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHJldHVybiBUZW1wbGF0ZS5JdGVtKHR5cGU9VGFnVHlwZS5UQUcsIG5hbWU9bmFtZSwgYXJncz0oYWxpYXMsIGF0dHJzKSkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBsaW5lKHNlbGYpIC0+IHN0cjoKICAgICAgICAiIiJHZXQgdGhlIGZ1bGwgY3VycmVudCBsaW5lLiIiIgogICAgICAgIHJldHVybiBzZWxmLnRleHQuc3BsaXRsaW5lcygpW3NlbGYucm93IC0gMV0KCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgIiIiUmVwcm9kdWNlIHRoZSBzdGF0ZS4iIiIKICAgICAgICByZXR1cm4gIlN0YXRlKCVkKSB7XG4gICAgJXNcbiAgICAlc1xufSIgJSAoCiAgICAgICAgICAgIHNlbGYucm93LAogICAgICAgICAgICBzZWxmLmxpbmUsCiAgICAgICAgICAgICIgIiAqIHNlbGYuY29sICsgIl4iLAogICAgICAgICkKCiAgICBkZWYgcGFyc2Uoc2VsZikgLT4gIlRlbXBsYXRlLkl0ZW0iOgogICAgICAgICIiIlBhcnNlIHRoZSBzdGF0ZSBjb250ZW50LiIiIgogICAgICAgIHRhZ3MgPSBbXQogICAgICAgIHdoaWxlIHNlbGY6CiAgICAgICAgICAgIGNtZCA9IHNlbGYucGFyc2VfbmV4dF9pbnN0cnVjdGlvbigpCiAgICAgICAgICAgIGlmIGNtZCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHRhZ3MuYXBwZW5kKGNtZCkKICAgICAgICBpZiBsZW4odGFncykgPT0gMDoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBlbHNlOgogICAgICAgICAgICBsYXN0X2luZGVudCwgcm9vdCA9IHRhZ3NbMF0KICAgICAgICAgICAgdHJlZSA9IFtdCiAgICAgICAgICAgIGxhc3RfdGFnID0gcm9vdAogICAgICAgICAgICBmb3IgaW5kZW50LCBjaGlsZCBpbiB0YWdzWzE6XToKICAgICAgICAgICAgICAgIGlmIGluZGVudCA+IGxhc3RfaW5kZW50OgogICAgICAgICAgICAgICAgICAgIHRyZWUuYXBwZW5kKChsYXN0X2luZGVudCwgbGFzdF90YWcpKQogICAgICAgICAgICAgICAgZWxpZiBpbmRlbnQgPCBsYXN0X2luZGVudDoKICAgICAgICAgICAgICAgICAgICB3aGlsZSBpbmRlbnQgPD0gdHJlZVstMV1bMF06CiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUucG9wKCkKICAgICAgICAgICAgICAgIHRyZWVbLTFdWzFdLmNoaWxkcmVuLmFwcGVuZChjaGlsZCkKICAgICAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IHRyZWVbLTFdWzFdCiAgICAgICAgICAgICAgICBsYXN0X2luZGVudCA9IGluZGVudAogICAgICAgICAgICAgICAgbGFzdF90YWcgPSBjaGlsZAogICAgICAgICAgICByZXR1cm4gcm9vdAoKCmRlZiBldmFsdWF0ZV9saXRlcmFsKAogICAgc3RyaW5nOiBzdHIsIG5hbWVzcGFjZTogT3B0aW9uYWxbd3JpdGVhYmxlLk5hbWVzcGFjZV0gPSBOb25lCikgLT4gdHVwbGVbYm9vbCwgQW55XToKICAgICIiIkV2YWx1YXRlIGEgbGl0dGVyYWwgZnJvbSBzdHJpbmcgYW5kIG9wdGlvbmFsIG5hbWVzcGFjZS4iIiIKICAgIGZyb20gLiBpbXBvcnQgbWVkaWEKICAgIGZyb20gLiBpbXBvcnQgY29uc3RhbnRzCgogICAgc3RyaW5nX3NldCA9IHNldChzdHJpbmcpCiAgICBpZiBsZW4oc3RyaW5nKSA+IDE6CiAgICAgICAgYiwgKl8sIGUgPSBzdHJpbmcKICAgIGVsaWYgbGVuKHN0cmluZykgPT0gMToKICAgICAgICBiLCBlID0gc3RyaW5nLCBOb25lCiAgICBlbHNlOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImVtcHR5IGxpdGVyYWwgc3RyaW5nIikKICAgIGlmIGhhc2F0dHIoY29uc3RhbnRzLCBzdHJpbmcpOgogICAgICAgIHJldHVybiAoRmFsc2UsIGdldGF0dHIoY29uc3RhbnRzLCBzdHJpbmcpKQogICAgZWxpZiBzdHJpbmcgPT0gIk5vbmUiOgogICAgICAgIHJldHVybiAoRmFsc2UsIE5vbmUpCiAgICBlbGlmIHN0cmluZyA9PSAiVHJ1ZSI6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgVHJ1ZSkKICAgIGVsaWYgc3RyaW5nID09ICJGYWxzZSI6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgRmFsc2UpCiAgICBlbGlmIGIgPT0gIjwiIGFuZCBlID09ICI+IjoKICAgICAgICByZXR1cm4gKEZhbHNlLCBtZWRpYS5nZXRfbWVkaWEoc3RyaW5nWzE6LTFdKSkKICAgIGVsaWYgbGVuKHN0cmluZ19zZXQgLSBJTlQpID09IDA6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgaW50KHN0cmluZykpCiAgICBlbGlmIGxlbihzdHJpbmdfc2V0IC0gREVDSU1BTCkgPT0gMDoKICAgICAgICByZXR1cm4gRGVjaW1hbChzdHJpbmcpCiAgICBlbGlmIGIgPT0gInsiIGFuZCBlID09ICJ9IjoKICAgICAgICBpZiBuYW1lc3BhY2UgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigKICAgICAgICAgICAgICAgICJVbmFsbG93ZWQgd3JpdGVhYmxlLldyaXRlYWJsZSBpbiBub25lIG5hbWVzcGFjZWQgY29udGV4dCIsCiAgICAgICAgICAgICAgICBzdHJpbmcsCiAgICAgICAgICAgICkKICAgICAgICBjb2RlID0gc3RyaW5nWzE6LTFdCiAgICAgICAgcmV0dXJuIChGYWxzZSwgZXZhbChjb2RlLCB7fSwgbmFtZXNwYWNlKSkKICAgIGVsaWYgYiA9PSAiJCI6CiAgICAgICAgaWYgbGVuKHN0cmluZykgPCAyOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oZiJXcm9uZyBzdWJzY3JpcHRpb24ge3N0cmluZyFyfSIpCiAgICAgICAgdHlwID0gc3RyaW5nWzFdCiAgICAgICAgaWYgdHlwID09ICJ7IjogICMgQ3VzdG9tIHdyaXRlYWJsZQogICAgICAgICAgICBjb2RlID0gc3RyaW5nWzI6LTFdCiAgICAgICAgICAgIGlmICJ8fCIgaW4gY29kZToKICAgICAgICAgICAgICAgIGdldCwgc2V0XyA9IGNvZGUuc3BsaXQoInx8IikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGdldCwgc2V0XyA9IGNvZGUsICIiCiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBUcnVlLAogICAgICAgICAgICAgICAgd3JpdGVhYmxlLldyaXRlYWJsZS5mcm9tX2dldF9zZXQobmFtZXNwYWNlLCBnZXQsIHNldF8pLAogICAgICAgICAgICApCiAgICAgICAgZWxpZiB0eXAgPT0gIigiOgogICAgICAgICAgICByZXR1cm4gKFRydWUsIGV2YWwoc3RyaW5nWzI6MV0pKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAoVHJ1ZSwgd3JpdGVhYmxlLldyaXRlYWJsZS5mcm9tX25hbWUobmFtZXNwYWNlLCBzdHJpbmdbMTpdKSkKICAgIGVsaWYgYiBpbiBTVFJJTkdfUVVPVEVTOgogICAgICAgIGlmIGUgPT0gYjoKICAgICAgICAgICAgcmV0dXJuIChGYWxzZSwgc3RyaW5nWzE6LTFdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVudGVybWluYXRlZCBzdHJpbmc6Iiwgc3RyaW5nKQogICAgZWxpZiBzdHJpbmdbMF0gPT0gc3RyaW5nWy0xXSA9PSAiLyI6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgUGF0aChvcy5wYXRoLmV4cGFuZHZhcnMoc3RyaW5nWzE6LTFdKSkpCiAgICBlbGlmIGIgPT0gIkAiOgogICAgICAgIHJldHVybiAoVHJ1ZSwgZGljdGlvbmFyeS5UcmFuc2xhdGlvbihzdHJpbmdbMTpdKSkKICAgIGVsaWYgIjoiIGluIHN0cmluZyBhbmQgbGVuKHN0cmluZ19zZXQgLSAoREVDSU1BTCB8IFNMSUNFKSkgPT0gMDoKICAgICAgICBpZiBsZW4oZCA6PSAoc3RyaW5nX3NldCAtIFNMSUNFKSkgPiAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ3cm9uZyBzbGljZSIsIHN0cmluZywgZCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc2xpY2UoKm1hcChpbnQsIHN0cmluZy5zcGxpdCgiOiIpKSkKICAgIGVsaWYgbGVuKHN0cmluZ19zZXQgLSBQT0lOVCkgPT0gMDoKICAgICAgICB2YWx1ZXMgPSBbXQogICAgICAgIHBvcyA9IDAKICAgICAgICB3aGlsZSBwb3MgPCBsZW4oc3RyaW5nKToKICAgICAgICAgICAgYmVnaW4gPSBwb3MKICAgICAgICAgICAgaWYgIiwiIGluIHN0cmluZ1twb3M6XToKICAgICAgICAgICAgICAgIGVuZCA9IHN0cmluZy5pbmRleCgiLCIsIHBvcykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGVuZCA9IGxlbihzdHJpbmcpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlmICIuIiBpbiBzdHJpbmdbYmVnaW46ZW5kXToKICAgICAgICAgICAgICAgICAgICBkZWMgPSBEZWNpbWFsKHN0cmluZ1tiZWdpbjplbmRdKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBkZWMgPSBpbnQoc3RyaW5nW2JlZ2luOmVuZF0pCiAgICAgICAgICAgIGV4Y2VwdCBkZWNpbWFsLkludmFsaWRPcGVyYXRpb24gYXMgZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgc3RyKGUpLAogICAgICAgICAgICAgICAgICAgIHN0cmluZywKICAgICAgICAgICAgICAgICAgICBiZWdpbiwKICAgICAgICAgICAgICAgICAgICBzdHJpbmdbYmVnaW46ZW5kXSwKICAgICAgICAgICAgICAgICkgZnJvbSBlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB2YWx1ZXMuYXBwZW5kKGRlYykKICAgICAgICAgICAgZmluYWxseToKICAgICAgICAgICAgICAgIHBvcyA9IGVuZCArIDEKICAgICAgICByZXR1cm4gKEZhbHNlLCB0dXBsZSh2YWx1ZXMpKQogICAgZWxzZToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbnJlY29nbnNlZCBsaXRlcmFsOiIsIHJlcHIoc3RyaW5nKSkKCgpjbGFzcyBUZW1wbGF0ZToKICAgICIiIgogICAgQSB0YWt0ayBjb21wb25lbnQgdGVtcGxhdGUsIGNhbiBiZSByZW5kZXJyZWQgaW50byBhIHJlYWwgY29tcG9uZW50LgogICAgSG9sZHMgcGFyc2VkIGluc3RydWN0aW9ucyBhbmQgbmFtZXNwYWNlLgogICAgIiIiCgogICAgQGRhdGFjbGFzc2VzLmRhdGFjbGFzcwogICAgY2xhc3MgSXRlbToKICAgICAgICAiIiIKICAgICAgICBJdGVtIGluIHRlbXBsYXRlIHBhcnNlIHJlc3VsdCwgcmVwcmVzZW50cyBhbiBpbnN0cnVjdGlvbiBvciB0YWcuCiAgICAgICAgIiIiCgogICAgICAgIHR5cGU6IFRhZ1R5cGUKICAgICAgICBuYW1lOiBzdHIKICAgICAgICBhcmdzOiB0dXBsZQogICAgICAgIHBhcmVudDogIlRlbXBsYXRlLkl0ZW0iID0gTm9uZQogICAgICAgIGNoaWxkcmVuOiBsaXN0ID0gZGF0YWNsYXNzZXMuZmllbGQoZGVmYXVsdF9mYWN0b3J5PWxpc3QpCgogICAgICAgIGRlZiByZW5kZXIoc2VsZiwgcGFyZW50LCBuYW1lc3BhY2UpOgogICAgICAgICAgICAiIiJDcmVhdGUgdGhlIGNvbXBvbmVudC4iIiIKCiAgICAgICAgICAgIGlmIHNlbGYudHlwZSBpcyBUYWdUeXBlLlRBRzoKICAgICAgICAgICAgICAgIGFsaWFzLCBhdHRycyA9IHNlbGYuYXJncwogICAgICAgICAgICAgICAgY29tcCA9IGdldF9jb21wb25lbnQoc2VsZi5uYW1lLCBuYW1lc3BhY2UpKAogICAgICAgICAgICAgICAgICAgIHBhcmVudD1wYXJlbnQsCiAgICAgICAgICAgICAgICAgICAgYXR0cnM9YXR0cnMsCiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlPW5hbWVzcGFjZSwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGlmIGFsaWFzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZVthbGlhc10gPSBjb21wCiAgICAgICAgICAgICAgICBmb3IgY2hpbGQgaW4gc2VsZi5jaGlsZHJlbjoKICAgICAgICAgICAgICAgICAgICBjaGlsZC5yZW5kZXIoY29tcCwgbmFtZXNwYWNlKQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbXAKICAgICAgICAgICAgZWxpZiBzZWxmLnR5cGUgaXMgVGFnVHlwZS5TUEVDSUFMOgogICAgICAgICAgICAgICAgaWYgc2VsZi5uYW1lID09ICJpZiI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5JZkNvbXBvbmVudCgKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hcmdzWzBdLCBuYW1lc3BhY2UsIHBhcmVudCwgc2VsZi5jaGlsZHJlbi5jb3B5KCkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbGlmIHNlbGYubmFtZSA9PSAiZW51bSI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5FbnVtQ29tcG9uZW50KAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFyZ3NbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXJnc1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlLAogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2hpbGRyZW4uY29weSgpLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIlVua25vd24gc3BlY2lhbCB7c2VsZi5uYW1lfSIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKGYiVW5pbXBsZW1lbnRlZCB0YWd0eXBlIHtzZWxmLnR5cGV9IikKCiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjoKICAgICAgICAgICAgIiIiUmVwcm9kdWNlIHRoZSBvYmplY3QgYXMgc3RyaW5nIiIiCiAgICAgICAgICAgIGhlYWQgPSBzZWxmLm5hbWUKICAgICAgICAgICAgY2hpbGRyZW4gPSAiIgogICAgICAgICAgICBpZiBzZWxmLnR5cGUgPT0gVGFnVHlwZS5UQUc6CiAgICAgICAgICAgICAgICBhbGlhcywgYXR0cnMgPSBzZWxmLmFyZ3MKICAgICAgICAgICAgICAgIGlmIGFsaWFzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIGhlYWQgKz0gIjoiICsgYWxpYXMKICAgICAgICAgICAgICAgIGlmIGF0dHJzOgogICAgICAgICAgICAgICAgICAgIGhlYWQgKz0gIigiICsgIiAiLmpvaW4obWFwKCI9Ii5qb2luLCBhdHRycy5pdGVtcygpKSkgKyAiKSIKICAgICAgICAgICAgaWYgbGVuKHNlbGYuY2hpbGRyZW4pID4gMDoKICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gKAogICAgICAgICAgICAgICAgICAgICJ7XG4iCiAgICAgICAgICAgICAgICAgICAgKyAiXG4iLmpvaW4oCiAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICIgKyBsbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGxuIGluICIsXG4iLmpvaW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwKFRlbXBsYXRlLkl0ZW0uX19yZXByX18sIHNlbGYuY2hpbGRyZW4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnNwbGl0bGluZXMoKQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICsgIlxufSIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIGYie2hlYWR9e2NoaWxkcmVufSIKCiAgICBpbnN0cnVjdGlvbnM6IGxpc3RbSXRlbV0KCiAgICBkZWYgX19pbml0X18oc2VsZiwgcm9vdDogSXRlbSwgbmFtZXNwYWNlPU5vbmUpOgogICAgICAgICIiIkNyZWF0ZSBhIHRha3RsIHRlbXBsYXRlIiIiCiAgICAgICAgc2VsZi5yb290ID0gcm9vdAogICAgICAgIHNlbGYubmFtZXNwYWNlID0gbmFtZXNwYWNlCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgcGFyc2UoY2xzLCBzdHJpbmc6IHN0cikgLT4gIlRlbXBsYXRlIjoKICAgICAgICAiIiJMb2FkIHRlbXBsYXRlIGZyb20gdGFrdGwgc291cmNlIHN0cmluZy4iIiIKICAgICAgICByZXR1cm4gVGVtcGxhdGUoU3RhdGUoc3RyaW5nLnJlcGxhY2UoIlxcXG4iLCAiIikpLnBhcnNlKCkpCgogICAgZGVmIGV2YWwoc2VsZiwgX25hbWVzcGFjZTogT3B0aW9uYWxbd3JpdGVhYmxlLk5hbWVzcGFjZV0gPSBOb25lKToKICAgICAgICAiIiJFdmFsdWF0ZSB0aGUgdGVtcGxhdGUgaW4gdGhlIGdpdmVuIG5hbWVzcGFjZS4iIiIKICAgICAgICBuYW1lc3BhY2UgPSBzZWxmLm5hbWVzcGFjZSBvciBfbmFtZXNwYWNlCiAgICAgICAgYXNzZXJ0IG5hbWVzcGFjZSBpcyBub3QgTm9uZSwgIk5vIG5hbWVzcGFjZSBzcGVjaWZpZWQhIgoKICAgICAgICByZXR1cm4gc2VsZi5yb290LnJlbmRlcihOb25lLCBuYW1lc3BhY2UpCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjoKICAgICAgICByZXR1cm4gc3RyKHNlbGYucm9vdCkKCgpkZWYgZ2V0X2NvbXBvbmVudCgKICAgIG5hbWU6IHN0ciwgbmFtZXNwYWNlOiBPcHRpb25hbFt3cml0ZWFibGUuTmFtZXNwYWNlXSA9IE5vbmUKKSAtPiAiY29tcG9uZW50LkJhc2VDb21wb25lbnQiOgogICAgIiIiR2V0IGEgY29tcG9uZW50IGJ5IG5hbWUgZnJvbSBidWlsdGlucyBvciBvcHRpb25hbCBgbmFtZXNwYWNlYC4iIiIKICAgIGZyb20gLiBpbXBvcnQgY29tcG9uZW50cwoKICAgIHRyeToKICAgICAgICByZXR1cm4gZXZhbChuYW1lLCB7fSwgKG5hbWVzcGFjZS52YXJzIG9yIHt9KSB8IHZhcnMoY29tcG9uZW50cykpCiAgICBleGNlcHQgTmFtZUVycm9yIGFzIGU6CiAgICAgICAgcmFpc2UgTmFtZUVycm9yKGYiQ29tcG9uZW50IHtuYW1lIXJ9IGRvZXMgbm90IGV4aXN0LiIpIGZyb20gZQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADSIgAAAAAAANIiAAAAAAAAAAAAAAAA8L8"
				],
				[
					440,
					1,
					"cut",
					null,
					"AQAAADYhAAAAAAAANiEAAAAAAAAJAAAAc2VsZiArPSAx",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA/IQAAAAAAADYhAAAAAAAAAAAAAAAA8L8"
				],
				[
					442,
					1,
					"left_delete",
					null,
					"AQAAACYhAAAAAAAAJiEAAAAAAAARAAAAICAgICAgICAgICAgICAgIAo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAmIQAAAAAAADchAAAAAAAAAAAAAAAA8L8"
				],
				[
					445,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAMYiAAAAAAAAxyIAAAAAAAAAAAAAxyIAAAAAAADPIgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADGIgAAAAAAAMYiAAAAAAAAAAAAAAAA8L8"
				],
				[
					446,
					1,
					"paste",
					null,
					"AQAAAM8iAAAAAAAA2CIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADPIgAAAAAAAM8iAAAAAAAAAAAAAAAA8L8"
				],
				[
					447,
					1,
					"insert",
					{
						"characters": "  #"
					},
					"AwAAANgiAAAAAAAA2SIAAAAAAAAAAAAA2SIAAAAAAADaIgAAAAAAAAAAAADaIgAAAAAAANsiAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADYIgAAAAAAANgiAAAAAAAAAAAAAAAA8L8"
				],
				[
					448,
					1,
					"insert",
					{
						"characters": " skip"
					},
					"BQAAANsiAAAAAAAA3CIAAAAAAAAAAAAA3CIAAAAAAADdIgAAAAAAAAAAAADdIgAAAAAAAN4iAAAAAAAAAAAAAN4iAAAAAAAA3yIAAAAAAAAAAAAA3yIAAAAAAADgIgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADbIgAAAAAAANsiAAAAAAAAAAAAAAAA8L8"
				],
				[
					449,
					1,
					"insert",
					{
						"characters": " ending"
					},
					"BwAAAOAiAAAAAAAA4SIAAAAAAAAAAAAA4SIAAAAAAADiIgAAAAAAAAAAAADiIgAAAAAAAOMiAAAAAAAAAAAAAOMiAAAAAAAA5CIAAAAAAAAAAAAA5CIAAAAAAADlIgAAAAAAAAAAAADlIgAAAAAAAOYiAAAAAAAAAAAAAOYiAAAAAAAA5yIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADgIgAAAAAAAOAiAAAAAAAAAAAAAAAA8L8"
				],
				[
					450,
					1,
					"insert",
					{
						"characters": " bracket"
					},
					"CAAAAOciAAAAAAAA6CIAAAAAAAAAAAAA6CIAAAAAAADpIgAAAAAAAAAAAADpIgAAAAAAAOoiAAAAAAAAAAAAAOoiAAAAAAAA6yIAAAAAAAAAAAAA6yIAAAAAAADsIgAAAAAAAAAAAADsIgAAAAAAAO0iAAAAAAAAAAAAAO0iAAAAAAAA7iIAAAAAAAAAAAAA7iIAAAAAAADvIgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADnIgAAAAAAAOciAAAAAAAAAAAAAAAA8L8"
				],
				[
					453,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAn00AAAAAAACfTQAAIiIiClRha3RrIHRlbXBsYXRpbmcgZW5naW5lLgoKQ29weXJpZ2h0IChDKSAyMDIyICBrZW4tbW9yZWwKClRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5Cml0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CnRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCihhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCgpUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQpHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgoiIiIKaW1wb3J0IGRhdGFjbGFzc2VzCmltcG9ydCBkZWNpbWFsCmltcG9ydCBlbnVtCmltcG9ydCBvcy5wYXRoCmltcG9ydCBzdHJpbmcKZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aApmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIEFueQoKZnJvbSBweW9sb2FkIGltcG9ydCBhbm5vdGF0ZQoKZnJvbSAuIGltcG9ydCBkaWN0aW9uYXJ5LCB3cml0ZWFibGUsIGNvbXBvbmVudAoKCmNsYXNzIFRhZ1R5cGUoZW51bS5FbnVtKToKICAgICIiIkVudW0gdHlwZSBmb3IgVGVtcGxhdGUuSXRlbSBgLnR5cGVgLiIiIgoKICAgIFRBRyA9IGVudW0uYXV0bygpCiAgICBTUEVDSUFMID0gZW51bS5hdXRvKCkKICAgIE1FVEEgPSBlbnVtLmF1dG8oKQoKClNQQUNFID0gZnJvemVuc2V0KCIgIikKVkFSTkFNRSA9IGZyb3plbnNldChzdHJpbmcuYXNjaWlfbGV0dGVycyArIHN0cmluZy5kaWdpdHMgKyAiXyIpCkNPTVBPTkVOVF9OQU1FID0gVkFSTkFNRSB8IGZyb3plbnNldCgiLiIpCkJSQUNLRVRTID0gZGljdChtYXAodHVwbGUsICIoKSxbXSx7fSIuc3BsaXQoIiwiKSkpClNUUklOR19RVU9URVMgPSBmcm96ZW5zZXQoIlwiJyIpCklOVCA9IGZyb3plbnNldChzdHJpbmcuZGlnaXRzKQpERUNJTUFMID0gZnJvemVuc2V0KHN0cmluZy5kaWdpdHMgKyAiLiIpClNMSUNFID0gSU5UIHwgZnJvemVuc2V0KCI6IikKUE9JTlQgPSBERUNJTUFMIHwgZnJvemVuc2V0KCIsIikKQVRUUl9OQU1FID0gZnJvemVuc2V0KCI6LSIpIHwgVkFSTkFNRQoKCmNsYXNzIFN0YXRlOgogICAgIiIiU3RvcmVzIHBhcnNlciBzdGF0ZSBhbmQgcGFyc2luZyB1dGlscy4iIiIKCiAgICBfX3Nsb3RzX18gPSAoInRleHQiLCAiaWR4IikKICAgIHRleHQ6IHN0cgogICAgaWR4OiBpbnQKCiAgICBAYW5ub3RhdGUKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0ZXh0OiBzdHIsIGlkeDogaW50ID0gMCk6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSB0aGUgcGFyc2VyIHN0YXRlLiIiIgogICAgICAgIHNlbGYudGV4dCA9IHRleHQKICAgICAgICBzZWxmLmlkeCA9IGlkeAoKICAgIGRlZiBfX2lvcl9fKHNlbGYsIG90aGVyOiAiU3RhdGUiKToKICAgICAgICAiIiJDb3B5IHRoZSBvdGhlciBzdGF0ZSBvYmplY3QuIiIiCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFN0YXRlKToKICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkCiAgICAgICAgc2VsZi5pZHggPSBvdGhlci5pZHgKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBjb3B5KHNlbGYpIC0+ICJTdGF0ZSI6CiAgICAgICAgIiIiQ29weSB0aGUgc3RhdGUgb2JqZWN0LiIiIgogICAgICAgIHJldHVybiBTdGF0ZSh0ZXh0PXNlbGYudGV4dCwgaWR4PXNlbGYuaWR4KQoKICAgIGRlZiBfX2ludF9fKHNlbGYpIC0+IGludDoKICAgICAgICAiIiJDb252ZXJ0IHN0YXRlIHRvIGludCwgcmV0dXJuIGluZGV4LiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeAoKICAgIGRlZiBfX2luZGV4X18oc2VsZikgLT4gaW50OgogICAgICAgICIiIlVzZSBzdGF0ZSBhcyBpbmRleCwgcmV0dXJuIGluZGV4LiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeAoKICAgIGRlZiBfX2lhZGRfXyhzZWxmLCB2YWwpIC0+ICJTdGF0ZSI6CiAgICAgICAgIiIiQWRkIHN0YXRlIGluZGV4LiIiIgogICAgICAgIHNlbGYuaWR4ICs9IHZhbAogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fYWRkX18oc2VsZiwgdmFsKSAtPiBpbnQ6CiAgICAgICAgIiIiQWRkIHN0YXRlcy4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggKyB2YWwKCiAgICBkZWYgX19yYWRkX18oc2VsZiwgdmFsKSAtPiBpbnQ6CiAgICAgICAgIiIiQWRkIHN0YXRlcy4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggKyB2YWwKCiAgICBkZWYgX19ndF9fKHNlbGYsIHZhbDogaW50KSAtPiBib29sOgogICAgICAgICIiIlBlcmZvcm0gZ3Qgb3BlcmF0aW9uIG9uIHN0YXRlIGluZGV4LiIiIgogICAgICAgIHJldHVybiBpbnQuX19ndF9fKHNlbGYuaWR4LCB2YWwpCgogICAgZGVmIF9fbHRfXyhzZWxmLCB2YWw6IGludCkgLT4gYm9vbDoKICAgICAgICAiIiJQZXJmb3JtIGx0IG9wZXJhdGlvbiBvbiBzdGF0ZSBpbmRleC4iIiIKICAgICAgICByZXR1cm4gaW50Ll9fbHRfXyhzZWxmLmlkeCwgdmFsKQoKICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6CiAgICAgICAgIiIiQ29tcHV0ZSBhIGR1bW15IGhhc2ggYmFzZWQgb24gdGV4dCBoYXNoLiIiIgogICAgICAgIHJldHVybiBzZWxmLmlkeCAqIGxlbihzZWxmLnRleHQpICogaGFzaChzZWxmLnRleHQpCgogICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OgogICAgICAgICIiIkNvbXB1dGUgdGhlIHRleHQgbGVuZ3RoLiIiIgogICAgICAgIHJldHVybiBsZW4oc2VsZi50ZXh0KQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpdGVtOiBzbGljZSB8IGludCkgLT4gc3RyOgogICAgICAgICIiIlNsaWNlIHRoZSBzdGF0ZSB0ZXh0LiIiIgogICAgICAgIGlmIGl0ZW0gPT0gLi4uOgogICAgICAgICAgICByZXR1cm4gc2VsZi50ZXh0W3NlbGYuaWR4XQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShpdGVtLCBzbGljZSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnRleHQuX19nZXRpdGVtX18oCiAgICAgICAgICAgICAgICBzbGljZSgKICAgICAgICAgICAgICAgICAgICAqKAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlkeCBpZiB4IGlzIC4uLiBlbHNlIHgKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gKGl0ZW0uc3RhcnQsIGl0ZW0uc3RvcCwgaXRlbS5zdGVwKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnRleHQuX19nZXRpdGVtX18oaXRlbSkKCiAgICBkZWYgX19ib29sX18oc2VsZikgLT4gYm9vbDoKICAgICAgICAiIiJSZXR1cm4gdHJ1ZSBpZiBpbmRleCBkaWQgbm90IGV4Y2VlZCB0ZXh0IGxlbmd0aC4iIiIKICAgICAgICByZXR1cm4gc2VsZi5pZHggPCBsZW4oc2VsZi50ZXh0KQoKICAgIGRlZiBuZXh0X2xpbmUoc2VsZikgLT4gYm9vbDoKICAgICAgICAiIiJTa2lwIGFsbCBjaGFyYWN0ZXJzIHRpbGwgbmV4dCBuZXdsaW5lIGNoYXJhY3Rlci4iIiIKICAgICAgICB3aGlsZSBzZWxmIGFuZCBzZWxmWy4uLl0gIT0gIlxuIjoKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgc2VsZiArPSAxCiAgICAgICAgcmV0dXJuIGJvb2woc2VsZikKCiAgICBkZWYgc2tpcF9zcGFjZXMoc2VsZikgLT4gaW50OgogICAgICAgICIiIlNraXAgYWxsIHNwYWNlcyBhbmQgcmV0dXJuIHRoZWlyIG51bWJlci4iIiIKICAgICAgICBjb3VudCA9IDAKICAgICAgICB3aGlsZSBzZWxmIGFuZCBzZWxmWy4uLl0gaW4gU1BBQ0U6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBjb3VudCArPSAxCiAgICAgICAgaWYgKAogICAgICAgICAgICBzZWxmCiAgICAgICAgICAgIGFuZCBzZWxmW3NlbGYuaWR4XSA9PSAiXFwiCiAgICAgICAgICAgIGFuZCBsZW4oc2VsZikgPiBzZWxmLmlkeCArIDEKICAgICAgICAgICAgYW5kIHNlbGZbc2VsZi5pZHggKyAxXSA9PSAiXG4iCiAgICAgICAgKToKICAgICAgICAgICAgc2VsZiArPSAyCiAgICAgICAgICAgIHJldHVybiBjb3VudCArIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIHJldHVybiBjb3VudAoKICAgIGRlZiBuZXh0X3RhZ19uYW1lKHNlbGYpIC0+IHR1cGxlW3N0ciwgT3B0aW9uYWxbc3RyXV06CiAgICAgICAgciIiIkdldCBuZXh0IHRhZyBuYW1lIGZyb20gYFxgIGNoYXJhY3RlciwgbWF5IGluY2x1ZGUgYWxpYXMuIiIiCiAgICAgICAgc2VsZi5za2lwX3NwYWNlcygpCiAgICAgICAgYmVnaW4gPSBzZWxmLmNvcHkoKQogICAgICAgIHNlbGYgKz0gMQogICAgICAgIG5hbWUgPSAiIgogICAgICAgIHdoaWxlIHNlbGYgYW5kIHNlbGZbLi4uXSBpbiBDT01QT05FTlRfTkFNRToKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgbmFtZSA9IHNlbGYudGV4dFtiZWdpbiArIDEgOiBzZWxmXQoKICAgICAgICBpZiBsZW4oc2VsZi50ZXh0KSA+IHNlbGYgYW5kIHNlbGYudGV4dFtzZWxmXSA9PSAiOiI6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBiZWdpbiA9IHNlbGYuY29weSgpCiAgICAgICAgICAgIHdoaWxlICgKICAgICAgICAgICAgICAgIGxlbihzZWxmLnRleHQpID4gaW50KHNlbGYpCiAgICAgICAgICAgICAgICBhbmQgc2VsZi50ZXh0W2ludChzZWxmKV0gaW4gQ09NUE9ORU5UX05BTUUKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICBhbGlhcyA9IHNlbGYudGV4dFtiZWdpbiA6IGludChzZWxmKV0KICAgICAgICBlbHNlOgogICAgICAgICAgICBhbGlhcyA9IE5vbmUKICAgICAgICByZXR1cm4gKG5hbWUsIGFsaWFzKQoKICAgIGRlZiBuZXh0X2F0dHJfdmFsdWUoc2VsZikgLT4gInR1cGxlW1N0YXRlLCBzdHIsIHN0cl0iOgogICAgICAgIHIiIiJHZXQgbmV4dCBhdHRyaWJ1dGUgdmFsdWUgcGFpci4iIiIKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBhdHRyID0gIiIKCiAgICAgICAgd2hpbGUgc2VsZiBhbmQgc2VsZlsuLi5dIGluIEFUVFJfTkFNRToKICAgICAgICAgICAgYXR0ciArPSBzZWxmWy4uLl0KICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgaWYgbm90IHNlbGYgb3Igc2VsZlsuLi5dICE9ICI9IjoKICAgICAgICAgICAgcmV0dXJuIGF0dHIsICJUcnVlIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgICAgICB2YWwgPSBzZWxmLm5leHRfdmFsdWUoKQogICAgICAgICAgICByZXR1cm4gYXR0ciwgdmFsCgogICAgZGVmIG5leHRfdmFsdWUoc2VsZikgLT4gc3RyOgogICAgICAgICIiIlJlYWQgdGhlIG5leHQgdmFsdWUgaW4gcGFyc2VyLiIiIgogICAgICAgIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIGJlZ2luID0gc2VsZi5jb3B5KCkKICAgICAgICBicmFja2V0cyA9IFtdCiAgICAgICAgaWYgKAogICAgICAgICAgICAiOiIgaW4gc2VsZlsuLi46XQogICAgICAgICAgICBhbmQgc2VsZlsuLi46XVs6IChuIDo9IHNlbGZbLi4uOl0uaW5kZXgoIjoiKSldLmlzYWxwaGEoKQogICAgICAgICAgICBhbmQgbGVuKGJyYWNrZXRzKSA9PSAwCiAgICAgICAgKToKICAgICAgICAgICAgYmVnaW4gPSBzZWxmLmNvcHkoKQogICAgICAgICAgICBzZWxmICs9IG4KICAgICAgICAgICAgYmMgPSAwCiAgICAgICAgICAgIHdoaWxlIHNlbGY6CiAgICAgICAgICAgICAgICBpZiBzZWxmWy4uLl0gPT0gInsiOgogICAgICAgICAgICAgICAgICAgIGJjICs9IDEKICAgICAgICAgICAgICAgIGVsaWYgc2VsZlsuLi5dID09ICJ9IjoKICAgICAgICAgICAgICAgICAgICBiYyAtPSAxCiAgICAgICAgICAgICAgICBlbGlmIChxdW90ZSA6PSBzZWxmWy4uLl0pIGluIFNUUklOR19RVU9URVM6CiAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgc2VsZjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZlsuLi5dID09IHF1b3RlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBzZWxmWy4uLl0gPT0gIlxcIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYgKz0gMgogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInVudGVybWluYXRlZCBzdHJpbmcgaW46IiwgcmVwcihzZWxmLnRleHQpCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVsaWYgc2VsZlsuLi5dLmlzc3BhY2UoKSBhbmQgYmMgPT0gMDoKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgIHJldHVybiBzZWxmW2JlZ2luOi4uLl0KICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBjID0gc2VsZlsuLi5dCiAgICAgICAgICAgIGlmIGMgaW4gQlJBQ0tFVFM6CiAgICAgICAgICAgICAgICBicmFja2V0cy5hcHBlbmQoc2VsZlsuLi5dKQogICAgICAgICAgICBlbGlmIGMgaW4gU1RSSU5HX1FVT1RFUzoKICAgICAgICAgICAgICAgIG9wZW5pbmcgPSBjCiAgICAgICAgICAgICAgICBzZWxmICs9IDEKICAgICAgICAgICAgICAgIHdoaWxlIHNlbGY6CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZlsuLi5dID09IG9wZW5pbmc6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxpZiBzZWxmWy4uLl0gPT0gIlxcIjoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAyCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigidW50ZXJtaW5hdGVkIHN0cmluZyBpbjoiLCByZXByKHNlbGYudGV4dCkpCiAgICAgICAgICAgIGVsaWYgYyBpbiBCUkFDS0VUUy52YWx1ZXMoKToKICAgICAgICAgICAgICAgIGlmIGxlbihicmFja2V0cykgPiAwIGFuZCBCUkFDS0VUU1ticmFja2V0c1stMV1dID09IGM6CiAgICAgICAgICAgICAgICAgICAgYnJhY2tldHMucG9wKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICBmInVubWF0Y2hlZCB7YyFyfSBhdCB7aW50KHNlbGYpfToge3NlbGYudGV4dCFyfSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsaWYgbGVuKGJyYWNrZXRzKSA9PSAwIGFuZCBjLmlzc3BhY2UoKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgIHJldHVybiBzZWxmW2JlZ2luOi4uLl0KCiAgICBkZWYgcGFyc2VfbmV4dF9lbnVtKHNlbGYpIC0+ICJ0dXBsZVtzdHIsIHR1cGxlW3N0ciwgc3RyXV0iOgogICAgICAgICIiIk5leHQgZW51bWVyYXRvci4iIiIKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBzZWxmICs9IGxlbigiIWVudW0gIikKICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBiID0gc2VsZi5jb3B5KCkKICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBpZiBzZWxmWy4uLl0gbm90IGluIFZBUk5BTUU6CiAgICAgICAgICAgICAgICBpZiBzZWxmWy4uLl0gIT0gIjoiOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgInVucmVjb2duaXNlZCBzeW1ib2wgaW4gYWZ0ZXIgZW51bSBvYmplY3QgbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgc2VsZiArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJ1bnRlcm1pbmF0ZWQgZW51bSBmaXJzdCBmaWVsZFxuIiArIHJlcHIoc2VsZikpCiAgICAgICAgb2JqID0gc2VsZi50ZXh0W2I6c2VsZl0KICAgICAgICBzZWxmICs9IDEKICAgICAgICBiID0gc2VsZi5jb3B5KCkKICAgICAgICBiICs9IDEKICAgICAgICBuYyA9IDAKICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBpZiBzZWxmWy4uLl0gPT0gIikiOgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxpZiBzZWxmWy4uLl0gPT0gIiwiOgogICAgICAgICAgICAgICAgbmMgKz0gMQogICAgICAgICAgICAgICAgaWYgbmMgPiAxOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgInRvbyBtYW55IGZpZWxkcyBhZnRlciBlbnVtIG9iamVjdFxuIiArIHJlcHIoc2VsZikKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIHNlbGYgKz0gMQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigiVW50ZXJtaW5hdGVkIGVudW0gc2Vjb25kIGZpZWxkXG4iICsgcmVwcihzZWxmKSkKICAgICAgICBhbGlhcyA9IHR1cGxlKG1hcChzdHIuc3RyaXAsIHNlbGZbYjouLi5dLnNwbGl0KCIsIikpKQogICAgICAgIHNlbGYgKz0gMSAgIyBza2lwIGVuZGluZyBicmFja2V0CiAgICAgICAgcmV0dXJuIFRlbXBsYXRlLkl0ZW0oCiAgICAgICAgICAgIHR5cGU9VGFnVHlwZS5TUEVDSUFMLCBuYW1lPSJlbnVtIiwgYXJncz0ob2JqLCBhbGlhcykKICAgICAgICApCgogICAgZGVmIHBhcnNlX25leHRfc3BlY2lhbChzZWxmKToKICAgICAgICBpZiBzZWxmWy4uLjpdLnN0YXJ0c3dpdGgoIiFpZiIpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5wYXJzZV9uZXh0X2lmKCkKICAgICAgICBlbGlmIHNlbGZbLi4uOl0uc3RhcnRzd2l0aCgiIWVudW0iKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VfbmV4dF9lbnVtKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgInVuZXhwZWN0ZWQgc3BlY2lhbCB0YWciLCBzZWxmW3NlbGYuaWR4IDogc2VsZi5pZHggKyA1XSArICIuLi4iCiAgICAgICAgICAgICkKCiAgICBkZWYgcGFyc2VfbmV4dF9pZihzZWxmKSAtPiAidHVwbGVbc3RyLCB0dXBsZVtzdHIsIHN0cl1dIjoKICAgICAgICAiIiJSZXR1cm4gbmV4dCBpZiBzdGF0ZW1lbnRzIHBhcnRzLiIiIgogICAgICAgIHNlbGYgKz0gbGVuKCIhaWYiKQogICAgICAgIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgIGIgPSBzZWxmLmNvcHkoKQoKICAgICAgICB3aGlsZSBzZWxmIGFuZCBzZWxmWy4uLl0gIT0gIlxuIjoKICAgICAgICAgICAgc2VsZiArPSAxCgogICAgICAgIHJldHVybiBUZW1wbGF0ZS5JdGVtKAogICAgICAgICAgICB0eXBlPVRhZ1R5cGUuU1BFQ0lBTCwgbmFtZT0iaWYiLCBhcmdzPShzZWxmW2I6Li4uXSwpCiAgICAgICAgKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHJvdyhzZWxmKSAtPiBpbnQ6CiAgICAgICAgIiIiRmluZCB0aGUgY3VycmVudCBwb3NpdGlvbiByb3cuIiIiCiAgICAgICAgcmV0dXJuIHNlbGYudGV4dFs6IHNlbGYuaWR4XS5jb3VudCgiXG4iKSArIDEKCiAgICBAcm93LnNldHRlcgogICAgZGVmIHJvdyhzZWxmLCB2YWw6IGludCk6CiAgICAgICAgY29sID0gc2VsZi5jb2wKICAgICAgICBzZWxmLmlkeCA9IDAKICAgICAgICB3aGlsZSBzZWxmLnJvdyA8IHZhbDoKICAgICAgICAgICAgc2VsZi5pZHggKz0gMQogICAgICAgIHNlbGYuY29sICs9IGNvbAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGNvbChzZWxmKSAtPiBpbnQ6CiAgICAgICAgIiIiRmluZCB0aGUgYWN0dWFsIHN0YXRlIGNvbHVtbi4iIiIKICAgICAgICBsaW5lcyA9IHNlbGYudGV4dFs6IHNlbGYuaWR4XS5zcGxpdGxpbmVzKCkKICAgICAgICBpZiBsZW4obGluZXMpID4gMDoKICAgICAgICAgICAgcmV0dXJuIGxlbihsaW5lc1stMV0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIDAKCiAgICBAY29sLnNldHRlcgogICAgZGVmIGNvbChzZWxmLCB2YWw6IGludCkgLT4gYm9vbDoKICAgICAgICBpZiBsZW4oc2VsZi50ZXh0LnNwbGl0bGluZXMoKVtzZWxmLnJvdyAtIDFdKSA8IHZhbDoKICAgICAgICAgICAgc2VsZi5pZHggKz0gdmFsIC0gc2VsZi5jb2wKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgcGFyc2VfbmV4dF9pbnN0cnVjdGlvbihzZWxmKSAtPiAidHVwbGVbaW50LCBUZW1wbGF0ZS5JdGVtXSI6CiAgICAgICAgIiIiUGFyc2UgdGhlIG5leHQgaW5zdHJ1Y3Rpb24uIiIiCiAgICAgICAgaW5kZW50ID0gc2VsZi5za2lwX3NwYWNlcygpCiAgICAgICAgd2hpbGUgc2VsZiBhbmQgc2VsZlsuLi5dIGluICIjXG4iOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5uZXh0X2xpbmUoKToKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBpbmRlbnQgPSBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICBpZiBub3Qgc2VsZjoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgY2hhciA9IHNlbGZbLi4uXQogICAgICAgIGlmIGNoYXIgPT0gIlxcIjogICMgYSB0YWcKICAgICAgICAgICAgcmV0dXJuIGluZGVudCwgc2VsZi5wYXJzZV9uZXh0X3RhZygpCiAgICAgICAgZWxpZiBjaGFyID09ICIhIjoKICAgICAgICAgICAgcmV0dXJuIGluZGVudCwgc2VsZi5wYXJzZV9uZXh0X3NwZWNpYWwoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoY2hhcikKCiAgICBkZWYgcGFyc2VfbmV4dF90YWcoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiJSZXR1cm4gbmV4dCB0YWcuIiIiCiAgICAgICAgbmFtZSwgYWxpYXMgPSBzZWxmLm5leHRfdGFnX25hbWUoKQogICAgICAgIGF0dHJzID0ge30KICAgICAgICB3aGlsZSBzZWxmOgogICAgICAgICAgICBzZWxmLnNraXBfc3BhY2VzKCkKICAgICAgICAgICAgaWYgc2VsZlsuLi5dID09ICIjIjoKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGtleSwgdmFsID0gc2VsZi5uZXh0X2F0dHJfdmFsdWUoKQogICAgICAgICAgICBpZiBrZXk6CiAgICAgICAgICAgICAgICBhdHRyc1trZXldID0gdmFsCiAgICAgICAgICAgIHNlbGYuc2tpcF9zcGFjZXMoKQogICAgICAgICAgICBpZiBub3Qgc2VsZiBvciBzZWxmWy4uLl0gPT0gIlxuIjoKICAgICAgICAgICAgICAgIHNlbGYubmV4dF9saW5lKCkKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHJldHVybiBUZW1wbGF0ZS5JdGVtKHR5cGU9VGFnVHlwZS5UQUcsIG5hbWU9bmFtZSwgYXJncz0oYWxpYXMsIGF0dHJzKSkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBsaW5lKHNlbGYpIC0+IHN0cjoKICAgICAgICAiIiJHZXQgdGhlIGZ1bGwgY3VycmVudCBsaW5lLiIiIgogICAgICAgIHJldHVybiBzZWxmLnRleHQuc3BsaXRsaW5lcygpW3NlbGYucm93IC0gMV0KCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgIiIiUmVwcm9kdWNlIHRoZSBzdGF0ZS4iIiIKICAgICAgICByZXR1cm4gIlN0YXRlKCVkKSB7XG4gICAgJXNcbiAgICAlc1xufSIgJSAoCiAgICAgICAgICAgIHNlbGYucm93LAogICAgICAgICAgICBzZWxmLmxpbmUsCiAgICAgICAgICAgICIgIiAqIHNlbGYuY29sICsgIl4iLAogICAgICAgICkKCiAgICBkZWYgcGFyc2Uoc2VsZikgLT4gIlRlbXBsYXRlLkl0ZW0iOgogICAgICAgICIiIlBhcnNlIHRoZSBzdGF0ZSBjb250ZW50LiIiIgogICAgICAgIHRhZ3MgPSBbXQogICAgICAgIHdoaWxlIHNlbGY6CiAgICAgICAgICAgIGNtZCA9IHNlbGYucGFyc2VfbmV4dF9pbnN0cnVjdGlvbigpCiAgICAgICAgICAgIGlmIGNtZCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHRhZ3MuYXBwZW5kKGNtZCkKICAgICAgICBpZiBsZW4odGFncykgPT0gMDoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBlbHNlOgogICAgICAgICAgICBsYXN0X2luZGVudCwgcm9vdCA9IHRhZ3NbMF0KICAgICAgICAgICAgdHJlZSA9IFtdCiAgICAgICAgICAgIGxhc3RfdGFnID0gcm9vdAogICAgICAgICAgICBmb3IgaW5kZW50LCBjaGlsZCBpbiB0YWdzWzE6XToKICAgICAgICAgICAgICAgIGlmIGluZGVudCA+IGxhc3RfaW5kZW50OgogICAgICAgICAgICAgICAgICAgIHRyZWUuYXBwZW5kKChsYXN0X2luZGVudCwgbGFzdF90YWcpKQogICAgICAgICAgICAgICAgZWxpZiBpbmRlbnQgPCBsYXN0X2luZGVudDoKICAgICAgICAgICAgICAgICAgICB3aGlsZSBpbmRlbnQgPD0gdHJlZVstMV1bMF06CiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUucG9wKCkKICAgICAgICAgICAgICAgIHRyZWVbLTFdWzFdLmNoaWxkcmVuLmFwcGVuZChjaGlsZCkKICAgICAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IHRyZWVbLTFdWzFdCiAgICAgICAgICAgICAgICBsYXN0X2luZGVudCA9IGluZGVudAogICAgICAgICAgICAgICAgbGFzdF90YWcgPSBjaGlsZAogICAgICAgICAgICByZXR1cm4gcm9vdAoKCmRlZiBldmFsdWF0ZV9saXRlcmFsKAogICAgc3RyaW5nOiBzdHIsIG5hbWVzcGFjZTogT3B0aW9uYWxbd3JpdGVhYmxlLk5hbWVzcGFjZV0gPSBOb25lCikgLT4gdHVwbGVbYm9vbCwgQW55XToKICAgICIiIkV2YWx1YXRlIGEgbGl0dGVyYWwgZnJvbSBzdHJpbmcgYW5kIG9wdGlvbmFsIG5hbWVzcGFjZS4iIiIKICAgIGZyb20gLiBpbXBvcnQgbWVkaWEKICAgIGZyb20gLiBpbXBvcnQgY29uc3RhbnRzCgogICAgc3RyaW5nX3NldCA9IHNldChzdHJpbmcpCiAgICBpZiBsZW4oc3RyaW5nKSA+IDE6CiAgICAgICAgYiwgKl8sIGUgPSBzdHJpbmcKICAgIGVsaWYgbGVuKHN0cmluZykgPT0gMToKICAgICAgICBiLCBlID0gc3RyaW5nLCBOb25lCiAgICBlbHNlOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImVtcHR5IGxpdGVyYWwgc3RyaW5nIikKICAgIGlmIGhhc2F0dHIoY29uc3RhbnRzLCBzdHJpbmcpOgogICAgICAgIHJldHVybiAoRmFsc2UsIGdldGF0dHIoY29uc3RhbnRzLCBzdHJpbmcpKQogICAgZWxpZiBzdHJpbmcgPT0gIk5vbmUiOgogICAgICAgIHJldHVybiAoRmFsc2UsIE5vbmUpCiAgICBlbGlmIHN0cmluZyA9PSAiVHJ1ZSI6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgVHJ1ZSkKICAgIGVsaWYgc3RyaW5nID09ICJGYWxzZSI6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgRmFsc2UpCiAgICBlbGlmIGIgPT0gIjwiIGFuZCBlID09ICI+IjoKICAgICAgICByZXR1cm4gKEZhbHNlLCBtZWRpYS5nZXRfbWVkaWEoc3RyaW5nWzE6LTFdKSkKICAgIGVsaWYgbGVuKHN0cmluZ19zZXQgLSBJTlQpID09IDA6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgaW50KHN0cmluZykpCiAgICBlbGlmIGxlbihzdHJpbmdfc2V0IC0gREVDSU1BTCkgPT0gMDoKICAgICAgICByZXR1cm4gRGVjaW1hbChzdHJpbmcpCiAgICBlbGlmIGIgPT0gInsiIGFuZCBlID09ICJ9IjoKICAgICAgICBpZiBuYW1lc3BhY2UgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigKICAgICAgICAgICAgICAgICJVbmFsbG93ZWQgd3JpdGVhYmxlLldyaXRlYWJsZSBpbiBub25lIG5hbWVzcGFjZWQgY29udGV4dCIsCiAgICAgICAgICAgICAgICBzdHJpbmcsCiAgICAgICAgICAgICkKICAgICAgICBjb2RlID0gc3RyaW5nWzE6LTFdCiAgICAgICAgcmV0dXJuIChGYWxzZSwgZXZhbChjb2RlLCB7fSwgbmFtZXNwYWNlKSkKICAgIGVsaWYgYiA9PSAiJCI6CiAgICAgICAgaWYgbGVuKHN0cmluZykgPCAyOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oZiJXcm9uZyBzdWJzY3JpcHRpb24ge3N0cmluZyFyfSIpCiAgICAgICAgdHlwID0gc3RyaW5nWzFdCiAgICAgICAgaWYgdHlwID09ICJ7IjogICMgQ3VzdG9tIHdyaXRlYWJsZQogICAgICAgICAgICBjb2RlID0gc3RyaW5nWzI6LTFdCiAgICAgICAgICAgIGlmICJ8fCIgaW4gY29kZToKICAgICAgICAgICAgICAgIGdldCwgc2V0XyA9IGNvZGUuc3BsaXQoInx8IikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGdldCwgc2V0XyA9IGNvZGUsICIiCiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBUcnVlLAogICAgICAgICAgICAgICAgd3JpdGVhYmxlLldyaXRlYWJsZS5mcm9tX2dldF9zZXQobmFtZXNwYWNlLCBnZXQsIHNldF8pLAogICAgICAgICAgICApCiAgICAgICAgZWxpZiB0eXAgPT0gIigiOgogICAgICAgICAgICByZXR1cm4gKFRydWUsIGV2YWwoc3RyaW5nWzI6MV0pKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAoVHJ1ZSwgd3JpdGVhYmxlLldyaXRlYWJsZS5mcm9tX25hbWUobmFtZXNwYWNlLCBzdHJpbmdbMTpdKSkKICAgIGVsaWYgYiBpbiBTVFJJTkdfUVVPVEVTOgogICAgICAgIGlmIGUgPT0gYjoKICAgICAgICAgICAgcmV0dXJuIChGYWxzZSwgc3RyaW5nWzE6LTFdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVudGVybWluYXRlZCBzdHJpbmc6Iiwgc3RyaW5nKQogICAgZWxpZiBzdHJpbmdbMF0gPT0gc3RyaW5nWy0xXSA9PSAiLyI6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgUGF0aChvcy5wYXRoLmV4cGFuZHZhcnMoc3RyaW5nWzE6LTFdKSkpCiAgICBlbGlmIGIgPT0gIkAiOgogICAgICAgIHJldHVybiAoVHJ1ZSwgZGljdGlvbmFyeS5UcmFuc2xhdGlvbihzdHJpbmdbMTpdKSkKICAgIGVsaWYgIjoiIGluIHN0cmluZyBhbmQgbGVuKHN0cmluZ19zZXQgLSAoREVDSU1BTCB8IFNMSUNFKSkgPT0gMDoKICAgICAgICBpZiBsZW4oZCA6PSAoc3RyaW5nX3NldCAtIFNMSUNFKSkgPiAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ3cm9uZyBzbGljZSIsIHN0cmluZywgZCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc2xpY2UoKm1hcChpbnQsIHN0cmluZy5zcGxpdCgiOiIpKSkKICAgIGVsaWYgbGVuKHN0cmluZ19zZXQgLSBQT0lOVCkgPT0gMDoKICAgICAgICB2YWx1ZXMgPSBbXQogICAgICAgIHBvcyA9IDAKICAgICAgICB3aGlsZSBwb3MgPCBsZW4oc3RyaW5nKToKICAgICAgICAgICAgYmVnaW4gPSBwb3MKICAgICAgICAgICAgaWYgIiwiIGluIHN0cmluZ1twb3M6XToKICAgICAgICAgICAgICAgIGVuZCA9IHN0cmluZy5pbmRleCgiLCIsIHBvcykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGVuZCA9IGxlbihzdHJpbmcpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlmICIuIiBpbiBzdHJpbmdbYmVnaW46ZW5kXToKICAgICAgICAgICAgICAgICAgICBkZWMgPSBEZWNpbWFsKHN0cmluZ1tiZWdpbjplbmRdKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBkZWMgPSBpbnQoc3RyaW5nW2JlZ2luOmVuZF0pCiAgICAgICAgICAgIGV4Y2VwdCBkZWNpbWFsLkludmFsaWRPcGVyYXRpb24gYXMgZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgc3RyKGUpLAogICAgICAgICAgICAgICAgICAgIHN0cmluZywKICAgICAgICAgICAgICAgICAgICBiZWdpbiwKICAgICAgICAgICAgICAgICAgICBzdHJpbmdbYmVnaW46ZW5kXSwKICAgICAgICAgICAgICAgICkgZnJvbSBlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB2YWx1ZXMuYXBwZW5kKGRlYykKICAgICAgICAgICAgZmluYWxseToKICAgICAgICAgICAgICAgIHBvcyA9IGVuZCArIDEKICAgICAgICByZXR1cm4gKEZhbHNlLCB0dXBsZSh2YWx1ZXMpKQogICAgZWxzZToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbnJlY29nbnNlZCBsaXRlcmFsOiIsIHJlcHIoc3RyaW5nKSkKCgpjbGFzcyBUZW1wbGF0ZToKICAgICIiIgogICAgQSB0YWt0ayBjb21wb25lbnQgdGVtcGxhdGUsIGNhbiBiZSByZW5kZXJyZWQgaW50byBhIHJlYWwgY29tcG9uZW50LgogICAgSG9sZHMgcGFyc2VkIGluc3RydWN0aW9ucyBhbmQgbmFtZXNwYWNlLgogICAgIiIiCgogICAgQGRhdGFjbGFzc2VzLmRhdGFjbGFzcwogICAgY2xhc3MgSXRlbToKICAgICAgICAiIiIKICAgICAgICBJdGVtIGluIHRlbXBsYXRlIHBhcnNlIHJlc3VsdCwgcmVwcmVzZW50cyBhbiBpbnN0cnVjdGlvbiBvciB0YWcuCiAgICAgICAgIiIiCgogICAgICAgIHR5cGU6IFRhZ1R5cGUKICAgICAgICBuYW1lOiBzdHIKICAgICAgICBhcmdzOiB0dXBsZQogICAgICAgIHBhcmVudDogIlRlbXBsYXRlLkl0ZW0iID0gTm9uZQogICAgICAgIGNoaWxkcmVuOiBsaXN0ID0gZGF0YWNsYXNzZXMuZmllbGQoZGVmYXVsdF9mYWN0b3J5PWxpc3QpCgogICAgICAgIGRlZiByZW5kZXIoc2VsZiwgcGFyZW50LCBuYW1lc3BhY2UpOgogICAgICAgICAgICAiIiJDcmVhdGUgdGhlIGNvbXBvbmVudC4iIiIKCiAgICAgICAgICAgIGlmIHNlbGYudHlwZSBpcyBUYWdUeXBlLlRBRzoKICAgICAgICAgICAgICAgIGFsaWFzLCBhdHRycyA9IHNlbGYuYXJncwogICAgICAgICAgICAgICAgY29tcCA9IGdldF9jb21wb25lbnQoc2VsZi5uYW1lLCBuYW1lc3BhY2UpKAogICAgICAgICAgICAgICAgICAgIHBhcmVudD1wYXJlbnQsCiAgICAgICAgICAgICAgICAgICAgYXR0cnM9YXR0cnMsCiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlPW5hbWVzcGFjZSwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGlmIGFsaWFzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZVthbGlhc10gPSBjb21wCiAgICAgICAgICAgICAgICBmb3IgY2hpbGQgaW4gc2VsZi5jaGlsZHJlbjoKICAgICAgICAgICAgICAgICAgICBjaGlsZC5yZW5kZXIoY29tcCwgbmFtZXNwYWNlKQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbXAKICAgICAgICAgICAgZWxpZiBzZWxmLnR5cGUgaXMgVGFnVHlwZS5TUEVDSUFMOgogICAgICAgICAgICAgICAgaWYgc2VsZi5uYW1lID09ICJpZiI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5JZkNvbXBvbmVudCgKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hcmdzWzBdLCBuYW1lc3BhY2UsIHBhcmVudCwgc2VsZi5jaGlsZHJlbi5jb3B5KCkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbGlmIHNlbGYubmFtZSA9PSAiZW51bSI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5FbnVtQ29tcG9uZW50KAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFyZ3NbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXJnc1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlLAogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2hpbGRyZW4uY29weSgpLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIlVua25vd24gc3BlY2lhbCB7c2VsZi5uYW1lfSIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKGYiVW5pbXBsZW1lbnRlZCB0YWd0eXBlIHtzZWxmLnR5cGV9IikKCiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjoKICAgICAgICAgICAgIiIiUmVwcm9kdWNlIHRoZSBvYmplY3QgYXMgc3RyaW5nIiIiCiAgICAgICAgICAgIGhlYWQgPSBzZWxmLm5hbWUKICAgICAgICAgICAgY2hpbGRyZW4gPSAiIgogICAgICAgICAgICBpZiBzZWxmLnR5cGUgPT0gVGFnVHlwZS5UQUc6CiAgICAgICAgICAgICAgICBhbGlhcywgYXR0cnMgPSBzZWxmLmFyZ3MKICAgICAgICAgICAgICAgIGlmIGFsaWFzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIGhlYWQgKz0gIjoiICsgYWxpYXMKICAgICAgICAgICAgICAgIGlmIGF0dHJzOgogICAgICAgICAgICAgICAgICAgIGhlYWQgKz0gIigiICsgIiAiLmpvaW4obWFwKCI9Ii5qb2luLCBhdHRycy5pdGVtcygpKSkgKyAiKSIKICAgICAgICAgICAgaWYgbGVuKHNlbGYuY2hpbGRyZW4pID4gMDoKICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gKAogICAgICAgICAgICAgICAgICAgICJ7XG4iCiAgICAgICAgICAgICAgICAgICAgKyAiXG4iLmpvaW4oCiAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICIgKyBsbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGxuIGluICIsXG4iLmpvaW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwKFRlbXBsYXRlLkl0ZW0uX19yZXByX18sIHNlbGYuY2hpbGRyZW4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnNwbGl0bGluZXMoKQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICsgIlxufSIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIGYie2hlYWR9e2NoaWxkcmVufSIKCiAgICBpbnN0cnVjdGlvbnM6IGxpc3RbSXRlbV0KCiAgICBkZWYgX19pbml0X18oc2VsZiwgcm9vdDogSXRlbSwgbmFtZXNwYWNlPU5vbmUpOgogICAgICAgICIiIkNyZWF0ZSBhIHRha3RsIHRlbXBsYXRlIiIiCiAgICAgICAgc2VsZi5yb290ID0gcm9vdAogICAgICAgIHNlbGYubmFtZXNwYWNlID0gbmFtZXNwYWNlCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgcGFyc2UoY2xzLCBzdHJpbmc6IHN0cikgLT4gIlRlbXBsYXRlIjoKICAgICAgICAiIiJMb2FkIHRlbXBsYXRlIGZyb20gdGFrdGwgc291cmNlIHN0cmluZy4iIiIKICAgICAgICByZXR1cm4gVGVtcGxhdGUoU3RhdGUoc3RyaW5nLnJlcGxhY2UoIlxcXG4iLCAiIikpLnBhcnNlKCkpCgogICAgZGVmIGV2YWwoc2VsZiwgX25hbWVzcGFjZTogT3B0aW9uYWxbd3JpdGVhYmxlLk5hbWVzcGFjZV0gPSBOb25lKToKICAgICAgICAiIiJFdmFsdWF0ZSB0aGUgdGVtcGxhdGUgaW4gdGhlIGdpdmVuIG5hbWVzcGFjZS4iIiIKICAgICAgICBuYW1lc3BhY2UgPSBzZWxmLm5hbWVzcGFjZSBvciBfbmFtZXNwYWNlCiAgICAgICAgYXNzZXJ0IG5hbWVzcGFjZSBpcyBub3QgTm9uZSwgIk5vIG5hbWVzcGFjZSBzcGVjaWZpZWQhIgoKICAgICAgICByZXR1cm4gc2VsZi5yb290LnJlbmRlcihOb25lLCBuYW1lc3BhY2UpCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjoKICAgICAgICByZXR1cm4gc3RyKHNlbGYucm9vdCkKCgpkZWYgZ2V0X2NvbXBvbmVudCgKICAgIG5hbWU6IHN0ciwgbmFtZXNwYWNlOiBPcHRpb25hbFt3cml0ZWFibGUuTmFtZXNwYWNlXSA9IE5vbmUKKSAtPiAiY29tcG9uZW50LkJhc2VDb21wb25lbnQiOgogICAgIiIiR2V0IGEgY29tcG9uZW50IGJ5IG5hbWUgZnJvbSBidWlsdGlucyBvciBvcHRpb25hbCBgbmFtZXNwYWNlYC4iIiIKICAgIGZyb20gLiBpbXBvcnQgY29tcG9uZW50cwoKICAgIHRyeToKICAgICAgICByZXR1cm4gZXZhbChuYW1lLCB7fSwgKG5hbWVzcGFjZS52YXJzIG9yIHt9KSB8IHZhcnMoY29tcG9uZW50cykpCiAgICBleGNlcHQgTmFtZUVycm9yIGFzIGU6CiAgICAgICAgcmFpc2UgTmFtZUVycm9yKGYiQ29tcG9uZW50IHtuYW1lIXJ9IGRvZXMgbm90IGV4aXN0LiIpIGZyb20gZQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADvIgAAAAAAAO8iAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "examples/todoapp/todoapp/pages/__init__.py",
			"settings":
			{
				"buffer_size": 1118,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					9,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAANECAAAAAAAA0gIAAAAAAAAAAAAA0gIAAAAAAADiAgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADRAgAAAAAAANECAAAAAAAAAAAAAAAA8L8"
				],
				[
					10,
					2,
					"left_delete",
					null,
					"AgAAAN4CAAAAAAAA3gIAAAAAAAAEAAAAICAgINoCAAAAAAAA2gIAAAAAAAAEAAAAICAgIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiAgAAAAAAAOICAAAAAAAAAAAAAAAA8L8"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "!en"
					},
					"AwAAANoCAAAAAAAA2wIAAAAAAAAAAAAA2wIAAAAAAADcAgAAAAAAAAAAAADcAgAAAAAAAN0CAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADaAgAAAAAAANoCAAAAAAAAAAAAAAAA8L8"
				],
				[
					12,
					1,
					"insert",
					{
						"characters": "um"
					},
					"AgAAAN0CAAAAAAAA3gIAAAAAAAAAAAAA3gIAAAAAAADfAgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADdAgAAAAAAAN0CAAAAAAAAAAAAAAAA8L8"
				],
				[
					13,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAN8CAAAAAAAA4AIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADfAgAAAAAAAN8CAAAAAAAAAAAAAAAA8L8"
				],
				[
					14,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOACAAAAAAAA4gIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADgAgAAAAAAAOACAAAAAAAAAAAAAAAA8L8"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "items:"
					},
					"BgAAAOACAAAAAAAA4QIAAAAAAAAAAAAA4QIAAAAAAADiAgAAAAAAAAAAAADiAgAAAAAAAOMCAAAAAAAAAAAAAOMCAAAAAAAA5AIAAAAAAAAAAAAA5AIAAAAAAADlAgAAAAAAAAAAAADlAgAAAAAAAOYCAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADgAgAAAAAAAOACAAAAAAAAAAAAAAAA8L8"
				],
				[
					17,
					1,
					"left_delete",
					null,
					"AQAAAOUCAAAAAAAA5QIAAAAAAAABAAAAOg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADmAgAAAAAAAOYCAAAAAAAAAAAAAAAA8L8"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAOUCAAAAAAAA5gIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADlAgAAAAAAAOUCAAAAAAAAAAAAAAAA8L8"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": "idx,"
					},
					"BAAAAOcCAAAAAAAA6AIAAAAAAAAAAAAA6AIAAAAAAADpAgAAAAAAAAAAAADpAgAAAAAAAOoCAAAAAAAAAAAAAOoCAAAAAAAA6wIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADnAgAAAAAAAOcCAAAAAAAAAAAAAAAA8L8"
				],
				[
					21,
					1,
					"insert",
					{
						"characters": " val"
					},
					"BAAAAOsCAAAAAAAA7AIAAAAAAAAAAAAA7AIAAAAAAADtAgAAAAAAAAAAAADtAgAAAAAAAO4CAAAAAAAAAAAAAO4CAAAAAAAA7wIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADrAgAAAAAAAOsCAAAAAAAAAAAAAAAA8L8"
				],
				[
					22,
					3,
					"left_delete",
					null,
					"AwAAAO4CAAAAAAAA7gIAAAAAAAABAAAAbO0CAAAAAAAA7QIAAAAAAAABAAAAYewCAAAAAAAA7AIAAAAAAAABAAAAdg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADvAgAAAAAAAO8CAAAAAAAAAAAAAAAA8L8"
				],
				[
					23,
					1,
					"insert",
					{
						"characters": "val"
					},
					"AwAAAOwCAAAAAAAA7QIAAAAAAAAAAAAA7QIAAAAAAADuAgAAAAAAAAAAAADuAgAAAAAAAO8CAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADsAgAAAAAAAOwCAAAAAAAAAAAAAAAA8L8"
				],
				[
					26,
					1,
					"reindent",
					null,
					"AQAAAPkCAAAAAAAA/QIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD5AgAAAAAAAPkCAAAAAAAAAAAAAACAZkA"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": "items"
					},
					"BQAAAP0CAAAAAAAA/gIAAAAAAAAAAAAA/gIAAAAAAAD/AgAAAAAAAAAAAAD/AgAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAQMAAAAAAAAAAAAAAQMAAAAAAAACAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD9AgAAAAAAAP0CAAAAAAAAAAAAAAAA8L8"
				],
				[
					28,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAAIDAAAAAAAAAwMAAAAAAAAAAAAAAwMAAAAAAAAEAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAACAwAAAAAAAAIDAAAAAAAAAAAAAAAA8L8"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAQDAAAAAAAABQMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAEAwAAAAAAAAQDAAAAAAAAAAAAAAAA8L8"
				],
				[
					30,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAAAUDAAAAAAAABwMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAFAwAAAAAAAAUDAAAAAAAAAAAAAAAA8L8"
				],
				[
					31,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAAUDAAAAAAAABQMAAAAAAAABAAAAWwUDAAAAAAAABQMAAAAAAAABAAAAXQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAGAwAAAAAAAAYDAAAAAAAAAAAAAAAA8L8"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "range"
					},
					"BQAAAAUDAAAAAAAABgMAAAAAAAAAAAAABgMAAAAAAAAHAwAAAAAAAAAAAAAHAwAAAAAAAAgDAAAAAAAAAAAAAAgDAAAAAAAACQMAAAAAAAAAAAAACQMAAAAAAAAKAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAFAwAAAAAAAAUDAAAAAAAAAAAAAAAA8L8"
				],
				[
					33,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAAoDAAAAAAAADAMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKAwAAAAAAAAoDAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "5"
					},
					"AQAAAAsDAAAAAAAADAMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAALAwAAAAAAAAsDAAAAAAAAAAAAAAAA8L8"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": "\n\t"
					},
					"AwAAAPACAAAAAAAA8QIAAAAAAAAAAAAA8QIAAAAAAAD5AgAAAAAAAAAAAAD5AgAAAAAAAP0CAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADwAgAAAAAAAPACAAAAAAAAAAAAAAAA8L8"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "l"
					},
					"AQAAAP0CAAAAAAAA/gIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD9AgAAAAAAAP0CAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"left_delete",
					null,
					"AQAAAP0CAAAAAAAA/QIAAAAAAAABAAAAbA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD+AgAAAAAAAP4CAAAAAAAAAAAAAAAA8L8"
				],
				[
					40,
					1,
					"insert",
					{
						"characters": "\\label"
					},
					"BgAAAP0CAAAAAAAA/gIAAAAAAAAAAAAA/gIAAAAAAAD/AgAAAAAAAAAAAAD/AgAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAQMAAAAAAAAAAAAAAQMAAAAAAAACAwAAAAAAAAAAAAACAwAAAAAAAAMDAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD9AgAAAAAAAP0CAAAAAAAAAAAAAAAA8L8"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": " text"
					},
					"BQAAAAMDAAAAAAAABAMAAAAAAAAAAAAABAMAAAAAAAAFAwAAAAAAAAAAAAAFAwAAAAAAAAYDAAAAAAAAAAAAAAYDAAAAAAAABwMAAAAAAAAAAAAABwMAAAAAAAAIAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAADAwAAAAAAAAMDAAAAAAAAAAAAAAAA8L8"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": "="
					},
					"AQAAAAgDAAAAAAAACQMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAIAwAAAAAAAAgDAAAAAAAAAAAAAAAA8L8"
				],
				[
					43,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAAkDAAAAAAAACwMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAJAwAAAAAAAAkDAAAAAAAAAAAAAAAA8L8"
				],
				[
					44,
					1,
					"insert",
					{
						"characters": "str"
					},
					"AwAAAAoDAAAAAAAACwMAAAAAAAAAAAAACwMAAAAAAAAMAwAAAAAAAAAAAAAMAwAAAAAAAA0DAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKAwAAAAAAAAoDAAAAAAAAAAAAAAAA8L8"
				],
				[
					45,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAA0DAAAAAAAADwMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAANAwAAAAAAAA0DAAAAAAAAAAAAAAAA8L8"
				],
				[
					46,
					1,
					"insert",
					{
						"characters": "val"
					},
					"AwAAAA4DAAAAAAAADwMAAAAAAAAAAAAADwMAAAAAAAAQAwAAAAAAAAAAAAAQAwAAAAAAABEDAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAOAwAAAAAAAA4DAAAAAAAAAAAAAAAA8L8"
				],
				[
					48,
					1,
					"insert",
					{
						"characters": " pos:pack"
					},
					"CQAAABMDAAAAAAAAFAMAAAAAAAAAAAAAFAMAAAAAAAAVAwAAAAAAAAAAAAAVAwAAAAAAABYDAAAAAAAAAAAAABYDAAAAAAAAFwMAAAAAAAAAAAAAFwMAAAAAAAAYAwAAAAAAAAAAAAAYAwAAAAAAABkDAAAAAAAAAAAAABkDAAAAAAAAGgMAAAAAAAAAAAAAGgMAAAAAAAAbAwAAAAAAAAAAAAAbAwAAAAAAABwDAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAATAwAAAAAAABMDAAAAAAAAAAAAAAAA8L8"
				],
				[
					51,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAA3QQAAAAAAADcBAAAZnJvbSB0YWt0ay5jb21wb25lbnQgaW1wb3J0IENvbXBvbmVudApmcm9tIHRha3RrLm5vdGlmaWNhdGlvbiBpbXBvcnQgTm90aWZpY2F0aW9uCgpmcm9tIHRha3RrLnBhZ2UgaW1wb3J0IHJlZ2lzdGVyX3VybHBhdHRlcm4KCgpmcm9tIC4uYWRtaW4gaW1wb3J0IFVzZXIKCmZyb20gLiBpbXBvcnQgdG9kb3MKCgpjbGFzcyBJbmRleChDb21wb25lbnQpOgogICAgciIiIgogICAgXGZyYW1lIHBhZGRpbmc9MCB3ZWlnaHQ6eD0nMDo1JyB3ZWlnaHQ6eT0nMDo1JwogICAgICAgIFxmcmFtZSBwb3M6Z3JpZD0wLDEgIHBhZGRpbmc9NSBwb3M6c3RpY2t5PScnCiAgICAgICAgICAgIFxzZG93bi52aWV3IHRleHQ9QHBhZ2VzLmluZGV4LndlbGNvbWUgd2lkdGg9MTEwIHNjcm9sbGFibGU9RmFsc2VcCiAgICAgICAgICAgICAgICBwb3M6Z3JpZD0wLDAgcG9zOnN0aWNreT0nbnNldycKICAgICAgICAhaWYgVXNlci5pc19sb2dpbigpCiAgICAgICAgICAgIFxjdGsuYnV0dG9uIHBvczpncmlkPTAsMiB0ZXh0PUBwYWdlcy5pbmRleC5uZXh0IHBvczpzdGlja3k9J3NlJ1wKICAgICAgICAgICAgICAgIGNvbW1hbmQ9e2d0X25leHR9CiAgICAgICAgIWlmIG5vdCBVc2VyLmlzX2xvZ2luKCkKICAgICAgICAgICAgXGN0ay5idXR0b24gcG9zOmdyaWQ9MCwyIHRleHQ9QHBhZ2VzLmluZGV4LmxvZ2luIHBvczpzdGlja3k9J3NlJ1wKICAgICAgICAgICAgICAgIGNvbW1hbmQ9e2d0X2xvZ2lufQogICAgICAgICFlbnVtIGl0ZW1zOihpZHgsIHZhbCkKICAgICAgICAgICAgXGxhYmVsIHRleHQ9e3N0cih2YWwpfSBwb3M6cGFjawogICAgIiIiCiAgICBpdGVtcyA9IHJhbmdlKDUpCiAgICBkZWYgZ3RfbmV4dChzZWxmKToKICAgICAgICBpbXBvcnQgdGFrdGsKCiAgICAgICAgdGFrdGsuYXBwbGljYXRpb24oInRvZG9zIikKCiAgICBkZWYgZ3RfbG9naW4oc2VsZik6CiAgICAgICAgaW1wb3J0IHRha3RrCgogICAgICAgIHRha3RrLmFwcGxpY2F0aW9uKCJzaWduIiwgInNpZ25pbiIsIHJlZGlyZWN0PSJ0b2RvcyIpCgogICAgVXNlciA9IFVzZXIKCgpkZWYgZGVmYXVsdChzdG9yZSwgLywgKipwYXJhbXMpOgogICAgcmV0dXJuIEluZGV4KCkKCgpAcmVnaXN0ZXJfdXJscGF0dGVybigKICAgIHIiW1xkYS1mXXs4fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXsxMn0iLAogICAgcG9zaXRpb249MCwKKQpkZWYgdXNlcih1dWlkKToKICAgIHJldHVybiBVc2VyLmZyb21fdXVpZCh1dWlkKQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAcAwAAAAAAABwDAAAAAAAAAAAAAAAA8L8"
				],
				[
					63,
					1,
					"left_delete",
					null,
					"AQAAAOUAAAAAAAAA5QAAAAAAAAAeAAAAIHdlaWdodDp4PScwOjUnIHdlaWdodDp5PScwOjUn",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADlAAAAAAAAAAMBAAAAAAAAAAAAAAAA8L8"
				],
				[
					66,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAvwQAAAAAAAC/BAAAZnJvbSB0YWt0ay5jb21wb25lbnQgaW1wb3J0IENvbXBvbmVudApmcm9tIHRha3RrLm5vdGlmaWNhdGlvbiBpbXBvcnQgTm90aWZpY2F0aW9uCgpmcm9tIHRha3RrLnBhZ2UgaW1wb3J0IHJlZ2lzdGVyX3VybHBhdHRlcm4KCgpmcm9tIC4uYWRtaW4gaW1wb3J0IFVzZXIKCmZyb20gLiBpbXBvcnQgdG9kb3MKCgpjbGFzcyBJbmRleChDb21wb25lbnQpOgogICAgciIiIgogICAgXGZyYW1lIHBhZGRpbmc9MAogICAgICAgIFxmcmFtZSBwb3M6Z3JpZD0wLDEgIHBhZGRpbmc9NSBwb3M6c3RpY2t5PScnCiAgICAgICAgICAgIFxzZG93bi52aWV3IHRleHQ9QHBhZ2VzLmluZGV4LndlbGNvbWUgd2lkdGg9MTEwIHNjcm9sbGFibGU9RmFsc2VcCiAgICAgICAgICAgICAgICBwb3M6Z3JpZD0wLDAgcG9zOnN0aWNreT0nbnNldycKICAgICAgICAhaWYgVXNlci5pc19sb2dpbigpCiAgICAgICAgICAgIFxjdGsuYnV0dG9uIHBvczpncmlkPTAsMiB0ZXh0PUBwYWdlcy5pbmRleC5uZXh0IHBvczpzdGlja3k9J3NlJ1wKICAgICAgICAgICAgICAgIGNvbW1hbmQ9e2d0X25leHR9CiAgICAgICAgIWlmIG5vdCBVc2VyLmlzX2xvZ2luKCkKICAgICAgICAgICAgXGN0ay5idXR0b24gcG9zOmdyaWQ9MCwyIHRleHQ9QHBhZ2VzLmluZGV4LmxvZ2luIHBvczpzdGlja3k9J3NlJ1wKICAgICAgICAgICAgICAgIGNvbW1hbmQ9e2d0X2xvZ2lufQogICAgICAgICFlbnVtIGl0ZW1zOihpZHgsIHZhbCkKICAgICAgICAgICAgXGxhYmVsIHRleHQ9e3N0cih2YWwpfSBwb3M6cGFjawogICAgIiIiCiAgICBpdGVtcyA9IHJhbmdlKDUpCgogICAgZGVmIGd0X25leHQoc2VsZik6CiAgICAgICAgaW1wb3J0IHRha3RrCgogICAgICAgIHRha3RrLmFwcGxpY2F0aW9uKCJ0b2RvcyIpCgogICAgZGVmIGd0X2xvZ2luKHNlbGYpOgogICAgICAgIGltcG9ydCB0YWt0awoKICAgICAgICB0YWt0ay5hcHBsaWNhdGlvbigic2lnbiIsICJzaWduaW4iLCByZWRpcmVjdD0idG9kb3MiKQoKICAgIFVzZXIgPSBVc2VyCgoKZGVmIGRlZmF1bHQoc3RvcmUsIC8sICoqcGFyYW1zKToKICAgIHJldHVybiBJbmRleCgpCgoKQHJlZ2lzdGVyX3VybHBhdHRlcm4oCiAgICByIltcZGEtZl17OH1cLVtcZGEtZl17NH1cLVtcZGEtZl17NH1cLVtcZGEtZl17NH1cLVtcZGEtZl17MTJ9IiwKICAgIHBvc2l0aW9uPTAsCikKZGVmIHVzZXIodXVpZCk6CiAgICByZXR1cm4gVXNlci5mcm9tX3V1aWQodXVpZCkK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADlAAAAAAAAAOUAAAAAAAAAAAAAAAAA8L8"
				],
				[
					70,
					1,
					"left_delete",
					null,
					"AQAAAPkAAAAAAAAA+QAAAAAAAAAhAAAAZ3JpZD0wLDEgIHBhZGRpbmc9NSBwb3M6c3RpY2t5PScn",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD5AAAAAAAAABoBAAAAAAAAAAAAAAAA8L8"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": "pack"
					},
					"BAAAAPkAAAAAAAAA+gAAAAAAAAAAAAAA+gAAAAAAAAD7AAAAAAAAAAAAAAD7AAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAA/QAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD5AAAAAAAAAPkAAAAAAAAAAAAAAAAA8L8"
				],
				[
					72,
					1,
					"insert",
					{
						"characters": " pos"
					},
					"BAAAAP0AAAAAAAAA/gAAAAAAAAAAAAAA/gAAAAAAAAD/AAAAAAAAAAAAAAD/AAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAQEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD9AAAAAAAAAP0AAAAAAAAAAAAAAAAA8L8"
				],
				[
					73,
					1,
					"insert",
					{
						"characters": ":fill="
					},
					"BgAAAAEBAAAAAAAAAgEAAAAAAAAAAAAAAgEAAAAAAAADAQAAAAAAAAAAAAADAQAAAAAAAAQBAAAAAAAAAAAAAAQBAAAAAAAABQEAAAAAAAAAAAAABQEAAAAAAAAGAQAAAAAAAAAAAAAGAQAAAAAAAAcBAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAABAQAAAAAAAAEBAAAAAAAAAAAAAAAA8L8"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": "BOTH"
					},
					"BAAAAAcBAAAAAAAACAEAAAAAAAAAAAAACAEAAAAAAAAJAQAAAAAAAAAAAAAJAQAAAAAAAAoBAAAAAAAAAAAAAAoBAAAAAAAACwEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAHAQAAAAAAAAcBAAAAAAAAAAAAAAAA8L8"
				],
				[
					77,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAsAQAAAAAAACwBAAAZnJvbSB0YWt0ay5jb21wb25lbnQgaW1wb3J0IENvbXBvbmVudApmcm9tIHRha3RrLm5vdGlmaWNhdGlvbiBpbXBvcnQgTm90aWZpY2F0aW9uCgpmcm9tIHRha3RrLnBhZ2UgaW1wb3J0IHJlZ2lzdGVyX3VybHBhdHRlcm4KCgpmcm9tIC4uYWRtaW4gaW1wb3J0IFVzZXIKCmZyb20gLiBpbXBvcnQgdG9kb3MKCgpjbGFzcyBJbmRleChDb21wb25lbnQpOgogICAgciIiIgogICAgXGZyYW1lIHBhZGRpbmc9MAogICAgICAgIFxmcmFtZSBwb3M6cGFjayBwb3M6ZmlsbD1CT1RICiAgICAgICAgICAgIFxzZG93bi52aWV3IHRleHQ9QHBhZ2VzLmluZGV4LndlbGNvbWUgd2lkdGg9MTEwIHNjcm9sbGFibGU9RmFsc2VcCiAgICAgICAgICAgICAgICBwb3M6Z3JpZD0wLDAgcG9zOnN0aWNreT0nbnNldycKICAgICAgICAhaWYgVXNlci5pc19sb2dpbigpCiAgICAgICAgICAgIFxjdGsuYnV0dG9uIHBvczpncmlkPTAsMiB0ZXh0PUBwYWdlcy5pbmRleC5uZXh0IHBvczpzdGlja3k9J3NlJ1wKICAgICAgICAgICAgICAgIGNvbW1hbmQ9e2d0X25leHR9CiAgICAgICAgIWlmIG5vdCBVc2VyLmlzX2xvZ2luKCkKICAgICAgICAgICAgXGN0ay5idXR0b24gcG9zOmdyaWQ9MCwyIHRleHQ9QHBhZ2VzLmluZGV4LmxvZ2luIHBvczpzdGlja3k9J3NlJ1wKICAgICAgICAgICAgICAgIGNvbW1hbmQ9e2d0X2xvZ2lufQogICAgICAgICFlbnVtIGl0ZW1zOihpZHgsIHZhbCkKICAgICAgICAgICAgXGxhYmVsIHRleHQ9e3N0cih2YWwpfSBwb3M6cGFjawogICAgIiIiCiAgICBpdGVtcyA9IHJhbmdlKDUpCgogICAgZGVmIGd0X25leHQoc2VsZik6CiAgICAgICAgaW1wb3J0IHRha3RrCgogICAgICAgIHRha3RrLmFwcGxpY2F0aW9uKCJ0b2RvcyIpCgogICAgZGVmIGd0X2xvZ2luKHNlbGYpOgogICAgICAgIGltcG9ydCB0YWt0awoKICAgICAgICB0YWt0ay5hcHBsaWNhdGlvbigic2lnbiIsICJzaWduaW4iLCByZWRpcmVjdD0idG9kb3MiKQoKICAgIFVzZXIgPSBVc2VyCgoKZGVmIGRlZmF1bHQoc3RvcmUsIC8sICoqcGFyYW1zKToKICAgIHJldHVybiBJbmRleCgpCgoKQHJlZ2lzdGVyX3VybHBhdHRlcm4oCiAgICByIltcZGEtZl17OH1cLVtcZGEtZl17NH1cLVtcZGEtZl17NH1cLVtcZGEtZl17NH1cLVtcZGEtZl17MTJ9IiwKICAgIHBvc2l0aW9uPTAsCikKZGVmIHVzZXIodXVpZCk6CiAgICByZXR1cm4gVXNlci5mcm9tX3V1aWQodXVpZCkK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAALAQAAAAAAAAsBAAAAAAAAAAAAAAAA8L8"
				],
				[
					83,
					1,
					"left_delete",
					null,
					"AQAAAG4BAAAAAAAAbgEAAAAAAAAEAAAAZ3JpZA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABuAQAAAAAAAHIBAAAAAAAAAAAAAAAA8L8"
				],
				[
					84,
					1,
					"insert",
					{
						"characters": "pack"
					},
					"BAAAAG4BAAAAAAAAbwEAAAAAAAAAAAAAbwEAAAAAAABwAQAAAAAAAAAAAABwAQAAAAAAAHEBAAAAAAAAAAAAAHEBAAAAAAAAcgEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABuAQAAAAAAAG4BAAAAAAAAAAAAAAAA8L8"
				],
				[
					86,
					1,
					"left_delete",
					null,
					"AQAAAHIBAAAAAAAAcgEAAAAAAAAWAAAAPTAsMCBwb3M6c3RpY2t5PSduc2V3Jw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByAQAAAAAAAIgBAAAAAAAAAAAAAAAA8L8"
				],
				[
					87,
					1,
					"insert",
					{
						"characters": " pos:fi"
					},
					"BwAAAHIBAAAAAAAAcwEAAAAAAAAAAAAAcwEAAAAAAAB0AQAAAAAAAAAAAAB0AQAAAAAAAHUBAAAAAAAAAAAAAHUBAAAAAAAAdgEAAAAAAAAAAAAAdgEAAAAAAAB3AQAAAAAAAAAAAAB3AQAAAAAAAHgBAAAAAAAAAAAAAHgBAAAAAAAAeQEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByAQAAAAAAAHIBAAAAAAAAAAAAAAAA8L8"
				],
				[
					88,
					1,
					"insert",
					{
						"characters": "l=BOTH"
					},
					"BgAAAHkBAAAAAAAAegEAAAAAAAAAAAAAegEAAAAAAAB7AQAAAAAAAAAAAAB7AQAAAAAAAHwBAAAAAAAAAAAAAHwBAAAAAAAAfQEAAAAAAAAAAAAAfQEAAAAAAAB+AQAAAAAAAAAAAAB+AQAAAAAAAH8BAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB5AQAAAAAAAHkBAAAAAAAAAAAAAAAA8L8"
				],
				[
					91,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAApwQAAAAAAACnBAAAZnJvbSB0YWt0ay5jb21wb25lbnQgaW1wb3J0IENvbXBvbmVudApmcm9tIHRha3RrLm5vdGlmaWNhdGlvbiBpbXBvcnQgTm90aWZpY2F0aW9uCgpmcm9tIHRha3RrLnBhZ2UgaW1wb3J0IHJlZ2lzdGVyX3VybHBhdHRlcm4KCgpmcm9tIC4uYWRtaW4gaW1wb3J0IFVzZXIKCmZyb20gLiBpbXBvcnQgdG9kb3MKCgpjbGFzcyBJbmRleChDb21wb25lbnQpOgogICAgciIiIgogICAgXGZyYW1lIHBhZGRpbmc9MAogICAgICAgIFxmcmFtZSBwb3M6cGFjayBwb3M6ZmlsbD1CT1RICiAgICAgICAgICAgIFxzZG93bi52aWV3IHRleHQ9QHBhZ2VzLmluZGV4LndlbGNvbWUgd2lkdGg9MTEwIHNjcm9sbGFibGU9RmFsc2VcCiAgICAgICAgICAgICAgICBwb3M6cGFjayBwb3M6ZmlsPUJPVEgKICAgICAgICAhaWYgVXNlci5pc19sb2dpbigpCiAgICAgICAgICAgIFxjdGsuYnV0dG9uIHBvczpncmlkPTAsMiB0ZXh0PUBwYWdlcy5pbmRleC5uZXh0IHBvczpzdGlja3k9J3NlJ1wKICAgICAgICAgICAgICAgIGNvbW1hbmQ9e2d0X25leHR9CiAgICAgICAgIWlmIG5vdCBVc2VyLmlzX2xvZ2luKCkKICAgICAgICAgICAgXGN0ay5idXR0b24gcG9zOmdyaWQ9MCwyIHRleHQ9QHBhZ2VzLmluZGV4LmxvZ2luIHBvczpzdGlja3k9J3NlJ1wKICAgICAgICAgICAgICAgIGNvbW1hbmQ9e2d0X2xvZ2lufQogICAgICAgICFlbnVtIGl0ZW1zOihpZHgsIHZhbCkKICAgICAgICAgICAgXGxhYmVsIHRleHQ9e3N0cih2YWwpfSBwb3M6cGFjawogICAgIiIiCiAgICBpdGVtcyA9IHJhbmdlKDUpCgogICAgZGVmIGd0X25leHQoc2VsZik6CiAgICAgICAgaW1wb3J0IHRha3RrCgogICAgICAgIHRha3RrLmFwcGxpY2F0aW9uKCJ0b2RvcyIpCgogICAgZGVmIGd0X2xvZ2luKHNlbGYpOgogICAgICAgIGltcG9ydCB0YWt0awoKICAgICAgICB0YWt0ay5hcHBsaWNhdGlvbigic2lnbiIsICJzaWduaW4iLCByZWRpcmVjdD0idG9kb3MiKQoKICAgIFVzZXIgPSBVc2VyCgoKZGVmIGRlZmF1bHQoc3RvcmUsIC8sICoqcGFyYW1zKToKICAgIHJldHVybiBJbmRleCgpCgoKQHJlZ2lzdGVyX3VybHBhdHRlcm4oCiAgICByIltcZGEtZl17OH1cLVtcZGEtZl17NH1cLVtcZGEtZl17NH1cLVtcZGEtZl17NH1cLVtcZGEtZl17MTJ9IiwKICAgIHBvc2l0aW9uPTAsCikKZGVmIHVzZXIodXVpZCk6CiAgICByZXR1cm4gVXNlci5mcm9tX3V1aWQodXVpZCkK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB/AQAAAAAAAH8BAAAAAAAAAAAAAAAA8L8"
				],
				[
					96,
					1,
					"left_delete",
					null,
					"AQAAALgBAAAAAAAAuAEAAAAAAAAIAAAAZ3JpZD0wLDI",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADAAQAAAAAAALgBAAAAAAAAAAAAAAAA8L8"
				],
				[
					97,
					1,
					"insert",
					{
						"characters": "pack"
					},
					"BAAAALgBAAAAAAAAuQEAAAAAAAAAAAAAuQEAAAAAAAC6AQAAAAAAAAAAAAC6AQAAAAAAALsBAAAAAAAAAAAAALsBAAAAAAAAvAEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC4AQAAAAAAALgBAAAAAAAAAAAAAAAA8L8"
				],
				[
					105,
					1,
					"cut",
					null,
					"AQAAAPUBAAAAAAAA9QEAAAAAAAARAAAAY29tbWFuZD17Z3RfbmV4dH0",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAGAgAAAAAAAPUBAAAAAAAAAAAAAAAA8L8"
				],
				[
					106,
					6,
					"left_delete",
					null,
					"BgAAAPEBAAAAAAAA8QEAAAAAAAAEAAAAICAgIO0BAAAAAAAA7QEAAAAAAAAEAAAAICAgIOkBAAAAAAAA6QEAAAAAAAAEAAAAICAgIOUBAAAAAAAA5QEAAAAAAAAEAAAAICAgIOQBAAAAAAAA5AEAAAAAAAABAAAACuMBAAAAAAAA4wEAAAAAAAABAAAAXA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD1AQAAAAAAAPUBAAAAAAAAAAAAAAAA8L8"
				],
				[
					107,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOMBAAAAAAAA5AEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADjAQAAAAAAAOMBAAAAAAAAAAAAAAAA8L8"
				],
				[
					108,
					1,
					"paste",
					null,
					"AQAAAOQBAAAAAAAA9QEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADkAQAAAAAAAOQBAAAAAAAAAAAAAAAA8L8"
				],
				[
					110,
					1,
					"left_delete",
					null,
					"AQAAAOMBAAAAAAAA4wEAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADkAQAAAAAAAOQBAAAAAAAAAAAAAAAA8L8"
				],
				[
					111,
					1,
					"insert",
					{
						"characters": "\\"
					},
					"AQAAAOMBAAAAAAAA5AEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADjAQAAAAAAAOMBAAAAAAAAAAAAAAAA8L8"
				],
				[
					112,
					1,
					"insert",
					{
						"characters": "\n\t"
					},
					"AwAAAOQBAAAAAAAA5QEAAAAAAAAAAAAA5QEAAAAAAADxAQAAAAAAAAAAAADxAQAAAAAAAPUBAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADkAQAAAAAAAOQBAAAAAAAAAAAAAAAA8L8"
				],
				[
					117,
					1,
					"left_delete",
					null,
					"AQAAAEMCAAAAAAAAQwIAAAAAAAAIAAAAZ3JpZD0wLDI",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABDAgAAAAAAAEsCAAAAAAAAAAAAAAAA8L8"
				],
				[
					118,
					1,
					"insert",
					{
						"characters": "pack"
					},
					"BAAAAEMCAAAAAAAARAIAAAAAAAAAAAAARAIAAAAAAABFAgAAAAAAAAAAAABFAgAAAAAAAEYCAAAAAAAAAAAAAEYCAAAAAAAARwIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABDAgAAAAAAAEMCAAAAAAAAAAAAAAAA8L8"
				],
				[
					127,
					16,
					"left_delete",
					null,
					"IAAAAG4CAAAAAAAAbgIAAAAAAAABAAAAJ+IBAAAAAAAA4gEAAAAAAAABAAAAJ2wCAAAAAAAAbAIAAAAAAAABAAAAZeEBAAAAAAAA4QEAAAAAAAABAAAAZWoCAAAAAAAAagIAAAAAAAABAAAAc+ABAAAAAAAA4AEAAAAAAAABAAAAc2gCAAAAAAAAaAIAAAAAAAABAAAAJ98BAAAAAAAA3wEAAAAAAAABAAAAJ2YCAAAAAAAAZgIAAAAAAAABAAAAPd4BAAAAAAAA3gEAAAAAAAABAAAAPWQCAAAAAAAAZAIAAAAAAAABAAAAed0BAAAAAAAA3QEAAAAAAAABAAAAeWICAAAAAAAAYgIAAAAAAAABAAAAa9wBAAAAAAAA3AEAAAAAAAABAAAAa2ACAAAAAAAAYAIAAAAAAAABAAAAY9sBAAAAAAAA2wEAAAAAAAABAAAAY14CAAAAAAAAXgIAAAAAAAABAAAAadoBAAAAAAAA2gEAAAAAAAABAAAAaVwCAAAAAAAAXAIAAAAAAAABAAAAdNkBAAAAAAAA2QEAAAAAAAABAAAAdFoCAAAAAAAAWgIAAAAAAAABAAAAc9gBAAAAAAAA2AEAAAAAAAABAAAAc1gCAAAAAAAAWAIAAAAAAAABAAAAOtcBAAAAAAAA1wEAAAAAAAABAAAAOlYCAAAAAAAAVgIAAAAAAAABAAAAc9YBAAAAAAAA1gEAAAAAAAABAAAAc1QCAAAAAAAAVAIAAAAAAAABAAAAb9UBAAAAAAAA1QEAAAAAAAABAAAAb1ICAAAAAAAAUgIAAAAAAAABAAAAcNQBAAAAAAAA1AEAAAAAAAABAAAAcFACAAAAAAAAUAIAAAAAAAABAAAAINMBAAAAAAAA0wEAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAIAAADjAQAAAAAAAOMBAAAAAAAAAAAAAAAA8L9vAgAAAAAAAG8CAAAAAAAAAAAAAAAA8L8"
				],
				[
					129,
					1,
					"left_delete",
					null,
					"AgAAAE8CAAAAAAAATwIAAAAAAAABAAAAXNMBAAAAAAAA0wEAAAAAAAABAAAAXA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAIAAADUAQAAAAAAANQBAAAAAAAAAAAAAAAA8L9QAgAAAAAAAFACAAAAAAAAAAAAAAAA8L8"
				],
				[
					133,
					5,
					"left_delete",
					null,
					"CgAAAFsCAAAAAAAAWwIAAAAAAAAEAAAAICAgIOABAAAAAAAA4AEAAAAAAAADAAAAICAgVAIAAAAAAABUAgAAAAAAAAQAAAAgICAg3AEAAAAAAADcAQAAAAAAAAQAAAAgICAgTAIAAAAAAABMAgAAAAAAAAQAAAAgICAg2AEAAAAAAADYAQAAAAAAAAQAAAAgICAgRAIAAAAAAABEAgAAAAAAAAQAAAAgICAg1AEAAAAAAADUAQAAAAAAAAQAAAAgICAgPwIAAAAAAAA/AgAAAAAAAAEAAAAK0wEAAAAAAADTAQAAAAAAAAEAAAAK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAIAAADjAQAAAAAAAOMBAAAAAAAAAAAAAAAA8L9fAgAAAAAAAF8CAAAAAAAAAAAAAAAA8L8"
				],
				[
					134,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAD4CAAAAAAAAPwIAAAAAAAAAAAAA0wEAAAAAAADUAQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAIAAADTAQAAAAAAANMBAAAAAAAAAAAAAAAA8L8+AgAAAAAAAD4CAAAAAAAAAAAAAAAA8L8"
				],
				[
					140,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAXgQAAAAAAABeBAAAZnJvbSB0YWt0ay5jb21wb25lbnQgaW1wb3J0IENvbXBvbmVudApmcm9tIHRha3RrLm5vdGlmaWNhdGlvbiBpbXBvcnQgTm90aWZpY2F0aW9uCgpmcm9tIHRha3RrLnBhZ2UgaW1wb3J0IHJlZ2lzdGVyX3VybHBhdHRlcm4KCgpmcm9tIC4uYWRtaW4gaW1wb3J0IFVzZXIKCmZyb20gLiBpbXBvcnQgdG9kb3MKCgpjbGFzcyBJbmRleChDb21wb25lbnQpOgogICAgciIiIgogICAgXGZyYW1lIHBhZGRpbmc9MAogICAgICAgIFxmcmFtZSBwb3M6cGFjayBwb3M6ZmlsbD1CT1RICiAgICAgICAgICAgIFxzZG93bi52aWV3IHRleHQ9QHBhZ2VzLmluZGV4LndlbGNvbWUgd2lkdGg9MTEwIHNjcm9sbGFibGU9RmFsc2VcCiAgICAgICAgICAgICAgICBwb3M6cGFjayBwb3M6ZmlsPUJPVEgKICAgICAgICAhaWYgVXNlci5pc19sb2dpbigpCiAgICAgICAgICAgIFxjdGsuYnV0dG9uIHBvczpwYWNrIHRleHQ9QHBhZ2VzLmluZGV4Lm5leHQgIGNvbW1hbmQ9e2d0X25leHR9CiAgICAgICAgIWlmIG5vdCBVc2VyLmlzX2xvZ2luKCkKICAgICAgICAgICAgXGN0ay5idXR0b24gcG9zOnBhY2sgdGV4dD1AcGFnZXMuaW5kZXgubG9naW4gY29tbWFuZD17Z3RfbG9naW59CiAgICAgICAgIWVudW0gaXRlbXM6KGlkeCwgdmFsKQogICAgICAgICAgICBcbGFiZWwgdGV4dD17c3RyKHZhbCl9IHBvczpwYWNrCiAgICAiIiIKICAgIGl0ZW1zID0gcmFuZ2UoNSkKCiAgICBkZWYgZ3RfbmV4dChzZWxmKToKICAgICAgICBpbXBvcnQgdGFrdGsKCiAgICAgICAgdGFrdGsuYXBwbGljYXRpb24oInRvZG9zIikKCiAgICBkZWYgZ3RfbG9naW4oc2VsZik6CiAgICAgICAgaW1wb3J0IHRha3RrCgogICAgICAgIHRha3RrLmFwcGxpY2F0aW9uKCJzaWduIiwgInNpZ25pbiIsIHJlZGlyZWN0PSJ0b2RvcyIpCgogICAgVXNlciA9IFVzZXIKCgpkZWYgZGVmYXVsdChzdG9yZSwgLywgKipwYXJhbXMpOgogICAgcmV0dXJuIEluZGV4KCkKCgpAcmVnaXN0ZXJfdXJscGF0dGVybigKICAgIHIiW1xkYS1mXXs4fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXsxMn0iLAogICAgcG9zaXRpb249MCwKKQpkZWYgdXNlcih1dWlkKToKICAgIHJldHVybiBVc2VyLmZyb21fdXVpZCh1dWlkKQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABxAgAAAAAAAHECAAAAAAAAAAAAAABAZ0A"
				],
				[
					146,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAJ0CAAAAAAAAngIAAAAAAAAAAAAAngIAAAAAAACqAgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACdAgAAAAAAAJ0CAAAAAAAAAAAAAAAA8L8"
				],
				[
					147,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAKoCAAAAAAAArAIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACqAgAAAAAAAKoCAAAAAAAAAAAAAAAA8L8"
				],
				[
					148,
					1,
					"insert",
					{
						"characters": "3"
					},
					"AQAAAKsCAAAAAAAArAIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACrAgAAAAAAAKsCAAAAAAAAAAAAAAAA8L8"
				],
				[
					149,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAKwCAAAAAAAArQIAAAAAAAAAAAAArQIAAAAAAACuAgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACsAgAAAAAAAKwCAAAAAAAAAAAAAAAA8L8"
				],
				[
					150,
					1,
					"insert",
					{
						"characters": " 4"
					},
					"AgAAAK4CAAAAAAAArwIAAAAAAAAAAAAArwIAAAAAAACwAgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACuAgAAAAAAAK4CAAAAAAAAAAAAAAAA8L8"
				],
				[
					151,
					1,
					"insert",
					{
						"characters": " +"
					},
					"AgAAALACAAAAAAAAsQIAAAAAAAAAAAAAsQIAAAAAAACyAgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwAgAAAAAAALACAAAAAAAAAAAAAAAA8L8"
				],
				[
					152,
					1,
					"insert",
					{
						"characters": " 6"
					},
					"AgAAALICAAAAAAAAswIAAAAAAAAAAAAAswIAAAAAAAC0AgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACyAgAAAAAAALICAAAAAAAAAAAAAAAA8L8"
				],
				[
					154,
					1,
					"left_delete",
					null,
					"AQAAAJ4CAAAAAAAAngIAAAAAAAAYAAAAICAgICAgICAgICAgezMgPSA0ICsgNn0K",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACeAgAAAAAAALYCAAAAAAAAAAAAAAAA8L8"
				],
				[
					157,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAXgQAAAAAAABeBAAAZnJvbSB0YWt0ay5jb21wb25lbnQgaW1wb3J0IENvbXBvbmVudApmcm9tIHRha3RrLm5vdGlmaWNhdGlvbiBpbXBvcnQgTm90aWZpY2F0aW9uCgpmcm9tIHRha3RrLnBhZ2UgaW1wb3J0IHJlZ2lzdGVyX3VybHBhdHRlcm4KCgpmcm9tIC4uYWRtaW4gaW1wb3J0IFVzZXIKCmZyb20gLiBpbXBvcnQgdG9kb3MKCgpjbGFzcyBJbmRleChDb21wb25lbnQpOgogICAgciIiIgogICAgXGZyYW1lIHBhZGRpbmc9MAogICAgICAgIFxmcmFtZSBwb3M6cGFjayBwb3M6ZmlsbD1CT1RICiAgICAgICAgICAgIFxzZG93bi52aWV3IHRleHQ9QHBhZ2VzLmluZGV4LndlbGNvbWUgd2lkdGg9MTEwIHNjcm9sbGFibGU9RmFsc2VcCiAgICAgICAgICAgICAgICBwb3M6cGFjayBwb3M6ZmlsPUJPVEgKICAgICAgICAhaWYgVXNlci5pc19sb2dpbigpCiAgICAgICAgICAgIFxjdGsuYnV0dG9uIHBvczpwYWNrIHRleHQ9QHBhZ2VzLmluZGV4Lm5leHQgIGNvbW1hbmQ9e2d0X25leHR9CiAgICAgICAgIWlmIG5vdCBVc2VyLmlzX2xvZ2luKCkKICAgICAgICAgICAgXGN0ay5idXR0b24gcG9zOnBhY2sgdGV4dD1AcGFnZXMuaW5kZXgubG9naW4gY29tbWFuZD17Z3RfbG9naW59CiAgICAgICAgIWVudW0gaXRlbXM6KGlkeCwgdmFsKQogICAgICAgICAgICBcbGFiZWwgdGV4dD17c3RyKHZhbCl9IHBvczpwYWNrCiAgICAiIiIKICAgIGl0ZW1zID0gcmFuZ2UoNSkKCiAgICBkZWYgZ3RfbmV4dChzZWxmKToKICAgICAgICBpbXBvcnQgdGFrdGsKCiAgICAgICAgdGFrdGsuYXBwbGljYXRpb24oInRvZG9zIikKCiAgICBkZWYgZ3RfbG9naW4oc2VsZik6CiAgICAgICAgaW1wb3J0IHRha3RrCgogICAgICAgIHRha3RrLmFwcGxpY2F0aW9uKCJzaWduIiwgInNpZ25pbiIsIHJlZGlyZWN0PSJ0b2RvcyIpCgogICAgVXNlciA9IFVzZXIKCgpkZWYgZGVmYXVsdChzdG9yZSwgLywgKipwYXJhbXMpOgogICAgcmV0dXJuIEluZGV4KCkKCgpAcmVnaXN0ZXJfdXJscGF0dGVybigKICAgIHIiW1xkYS1mXXs4fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXsxMn0iLAogICAgcG9zaXRpb249MCwKKQpkZWYgdXNlcih1dWlkKToKICAgIHJldHVybiBVc2VyLmZyb21fdXVpZCh1dWlkKQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACeAgAAAAAAAJ4CAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "src/taktk/application.py",
			"settings":
			{
				"buffer_size": 9736,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"left_delete",
					null,
					"AQAAAMMHAAAAAAAAwwcAAAAAAAAbAAAAICAgIGRlc3Ryb3lfY2FjaGU6IGludCA9IDUK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADDBwAAAAAAAN4HAAAAAAAAAAAAAAAA8L8"
				],
				[
					12,
					1,
					"left_delete",
					null,
					"AQAAAJcGAAAAAAAAlwYAAAAAAACPAAAAICAgIC0gKipkZXN0cm95X2NhY2hlKio6IEV4cGVyaW1lbnRhbDogZGVzdHJveXMgb25seSB0aGUgbGFzdCB7eH0gdmlld2VkCiAgICAgIGNvbXBvbmVudCdzIHdpZGdldCB0byByZWR1Y2UgY2hhbmNlcyBmb3IgYXBwIHRvIGFicnVwdGx5IHJlc2l6ZQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACXBgAAAAAAACYHAAAAAAAAAAAAAAAA8L8"
				],
				[
					15,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAEiYAAAAAAAASJgAAIiIiXApQcm92aWRlcyBiYXNlIGNsYXNzIGZvciB0YWt0ayBhcHBsaWNhdGlvbiBjcmVhdGlvbgpDb3B5cmlnaHQgKEMpIDIwMjIgIGtlbi1tb3JlbAoKVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KClRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLApidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgpNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCkdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgpZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQphbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiIiIgpmcm9tIGxvZ2dpbmcgaW1wb3J0IGdldExvZ2dlcgpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSB0ZW1wZmlsZSBpbXBvcnQgTmFtZWRUZW1wb3JhcnlGaWxlCmZyb20gdHlwZXMgaW1wb3J0IE1vZHVsZVR5cGUKZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgT3B0aW9uYWwKZnJvbSBweW9sb2FkIGltcG9ydCBhbm5vdGF0ZQpmcm9tIHR0a2Jvb3RzdHJhcCBpbXBvcnQgV2luZG93CmZyb20gLiBpbXBvcnQgKAogICAgT05fQ1JFQVRFX0hBTkRMRVJTLAogICAgYXBwbGljYXRpb25fc2VydmVyLAogICAgY29tcG9uZW50LAogICAgZGljdGlvbmFyeSwKICAgIG1lZGlhLAogICAgbWVudSwKICAgIHBhZ2UsCiAgICBzdG9yZSwKKQoKbG9nID0gZ2V0TG9nZ2VyKF9fbmFtZV9fKQoKCkBhbm5vdGF0ZQpjbGFzcyBBcHBsaWNhdGlvbjoKICAgICIiIgogICAgSGFzIG9wdGlvbmFsIGF0dHJpYnV0ZXMgdG8gc3BlY2lmeSBiZWhhdmlvdXIgaW5jbHVkaW5nOgoKICAgIC0gKipkaWN0aW9uYXJpZXMqKjogVGhlIHBhdGggdG8gdGhlIGRpY3Rpb25uYXJ5IGRpcmVjdG9yeSB0YWt0ayBzaG91bGQKICAgICAgZmV0Y2ggZGljdGlvbmFyaWVzIGZyb20KICAgIC0gKipmYWxsYmFja19sYW5ndWFnZSoqOiBUaGUgZmFsbGJhY2sgbGFuZ3VhZ2UgdG8gdXNlIGluIGNhc2UgdGhlIGxvY2FsZSdzCiAgICAgIGxhbmd1YWdlIGNvdWxkIG5vdCBiZSBmb3VuZCBpbiBkaWN0aW9uYXJpZXMKICAgIC0gKipwYXJhbXMqKjogYGRpY3Rbc3RyLF1gOiBBZGRpdGlvbmFsIHBhcmFtcyB0byBwYXNzIHRvIHR0a2Jvb3RzdHJhcAogICAgICBXaW5kb3cgb24gd2luZG93CiAgICAgIGNyZWF0aW9uLgogICAgLSAqKm1lbnUqKjogYW4gb3B0aW9uYWwgYHRha3RrLm1lbnUuTWVudWAgb2JqZWN0IHRvIHVzZSBhcyB0b3BsZXZlbCBtZW51CiAgICAtICoqbGF5b3V0Kio6IGFuIGluc3RhbmNlIG9mIGBMYXlvdXRgIGNsYXNzIHlvdSBzaG91bGQgZGVmaW5lIHlvdXJzZWxmCiAgICAiIiIKCiAgICBkaWN0aW9uYXJpZXM6IGRpY3Rpb25hcnkuRGljdGlvbmFyaWVzID0gTm9uZQogICAgZmFsbGJhY2tfbGFuZ3VhZ2U6IHN0cgogICAgbWVudTogT3B0aW9uYWxbbWVudS5NZW51XQogICAgbGF5b3V0OiBPcHRpb25hbFtjb21wb25lbnQuQ29tcG9uZW50XQogICAgX3N0b3JlOiBPcHRpb25hbFtzdG9yZS5TdG9yZV0gPSBOb25lCiAgICBhZGRyZXNzOiBPcHRpb25hbFt0dXBsZVtzdHIsIGludF1dCiAgICBpY29uOiBPcHRpb25hbFtzdHIgfCBtZWRpYS5JbWFnZV0KICAgIF9jcmVhdGVfcGFyYW1zOiB0dXBsZVsKICAgICAgICBPcHRpb25hbFtQYXRoIHwgc3RyIHwgZGljdGlvbmFyeS5EaWN0aW9uYXJpZXNdLAogICAgICAgIGRpY3Rbc3RyLCBBbnldLAogICAgICAgIHR1cGxlW05vbmUsIGRpY3RdIHwgc3RvcmUuU3RvcmUsCiAgICAgICAgT3B0aW9uYWxbUGF0aCB8IHN0ciB8IG1lZGlhLkltYWdlXSwKICAgICAgICB0eXBlKFdpbmRvdyksCiAgICBdCiAgICBtZWRpYV9wYXRoOiBPcHRpb25hbFtzdHIgfCBQYXRoXQogICAgcGFnZXM6IE1vZHVsZVR5cGUKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBwYWdlczogTW9kdWxlVHlwZSwKICAgICAgICBkaWN0aW9uYXJpZXM6IE9wdGlvbmFsW1BhdGggfCBzdHIgfCBkaWN0aW9uYXJ5LkRpY3Rpb25hcmllc10gPSBOb25lLAogICAgICAgIGZhbGxiYWNrX2xhbmd1YWdlOiBzdHIgPSAiZW5nbGlzaCIsCiAgICAgICAgcGFyYW1zOiBkaWN0W3N0ciwgQW55XSA9IHt9LAogICAgICAgIG1lbnU6IE9wdGlvbmFsW21lbnUuTWVudV0gPSBOb25lLAogICAgICAgIGxheW91dDogT3B0aW9uYWxbdHlwZV0gPSBOb25lLAogICAgICAgIHN0b3JlOiB0dXBsZVtOb25lLCBkaWN0XSB8IHN0b3JlLlN0b3JlID0gKE5vbmUsIHt9KSwKICAgICAgICBhZGRyZXNzOiBPcHRpb25hbFt0dXBsZVtzdHIsIGludF1dID0gTm9uZSwKICAgICAgICBpY29uOiBPcHRpb25hbFtzdHIgfCBtZWRpYS5JbWFnZV0gPSBOb25lLAogICAgICAgIG1lZGlhX3BhdGg6IE9wdGlvbmFsW3N0ciB8IFBhdGhdID0gTm9uZSwKICAgICAgICB3aW5kb3dfY2xhc3M6IHR5cGUoV2luZG93KSA9IFdpbmRvdywKICAgICk6CiAgICAgICAgIiIiCiAgICAgICAgSW5pdGlhbGl6ZSB0aGUgYXBwIGFuZCBzdG9yZSBtb3N0IG9mIHRoZSBwYXNzZWQgcGFyYW1ldGVycyBpbnRvCiAgICAgICAgYC5fY3JlYXRlX3BhcmFtc2AuCgogICAgICAgIDpwYXJhbSBkaWN0aW9uYXJpZXM6IFRoZSBwYXRoIHRvIHRoZSBhcHBsaWNhdGlvbiBkaWN0aW9uYXJpZXMgZGlyZWN0b3J5CiAgICAgICAgb3IgYSBgdGFrdGsuZGljdGlvbmFyeS5EaWN0aW9uYXJ5YCBpbnN0YW5jZS4KCiAgICAgICAgOnBhcmFtIGZhbGxiYWNrX2xhbmd1YWdlOiBUaGUgZmFsbGJhY2sgbGFuZ3VhZ2UgdG8gZmV0Y2ggZnJvbQogICAgICAgIGRpY3Rpb25hcnkgaWYgbG9jYWxlJ3MgZG9lcyBub3Qgc3VjY2VlZC4KCiAgICAgICAgOnBhcmFtIHBhcmFtczogQWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gYHdpbmRvd19jbGFzc2Agb24KICAgICAgICB3aW5kb3cgY3JlYXRpb24uCgogICAgICAgIDpwYXJhbSBtZW51OiBUaGUgb3B0aW9uYWwgYXBwbGljYXRpb24gbWVudSwgYSBgdGFrdGsubWVudS5NZW51YAogICAgICAgIGluc3RhbmNlCgogICAgICAgIDpwYXJhbSBsYXlvdXQ6IFRoZSBhcHBsaWNhdGlvbiBsYXlvdXQgY29tcG9uZW50IGluc3RhbmNlIHRvIHVzZS4KCiAgICAgICAgOnBhcmFtIHN0b3JlOiBUaGUgcGF0aCB0byBhcHBsaWNhdGlvbiBqc29uIF9zdG9yZV8gZGF0YWJhc2UuCgogICAgICAgIDpwYXJhbSBhZGRyZXNzOiBUaGUgd2ViIGFkZHJlc3MgdHVwbGUgZm9yIGFwcGxpY2F0aW9uIHNlcnZlcgogICAgICAgIHRvIGxpc3RlbiBhdAoKICAgICAgICA6cGFyYW0gaWNvbjogVGhlIG9wdGlvbmFsIGFwcGxpY2F0aW9uIGljb24gc3BlYyBvciBgdGFrdGsubWVkaWEuSW1hZ2VgCiAgICAgICAgaW5zdGFuY2UKCiAgICAgICAgOnBhcmFtIG1lZGlhX3BhdGg6IFRoZSBvcHRpb25hbCBwYXRoIHRvIGdsb2JhbCBtZWRpYSBkaXJlY3RvcnkKCiAgICAgICAgOnBhcmFtIHdpbmRvd19jbGFzczogVGhlIGNsYXNzIHRvIGNhbGwgb24gd2luZG93IGNyZWF0aW9uLgoKICAgICAgICA6cGFyYW0gcGFnZXM6IFRoZSBwYWdlcyBtb2R1bGUKICAgICAgICAiIiIKICAgICAgICBpbXBvcnQgdGFrdGsKCiAgICAgICAgdGFrdGsuYXBwbGljYXRpb24gPSBzZWxmCgogICAgICAgIHNlbGYubWVudSA9IG1lbnUKICAgICAgICBzZWxmLmxheW91dF9jbGFzcyA9IGxheW91dAogICAgICAgIHNlbGYubGF5b3V0ID0gTm9uZQogICAgICAgIHNlbGYuYWRkcmVzcyA9IGFkZHJlc3MKICAgICAgICBzZWxmLm1lZGlhX3BhdGggPSBtZWRpYV9wYXRoCiAgICAgICAgc2VsZi5wYWdlcyA9IHBhZ2VzCgogICAgICAgIHNlbGYuZmFsbGJhY2tfbGFuZ3VhZ2UgPSBmYWxsYmFja19sYW5ndWFnZQogICAgICAgIHNlbGYuX2NyZWF0ZV9wYXJhbXMgPSAoCiAgICAgICAgICAgIGRpY3Rpb25hcmllcywKICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICBzdG9yZSwKICAgICAgICAgICAgaWNvbiwKICAgICAgICAgICAgd2luZG93X2NsYXNzLAogICAgICAgICkKCiAgICBkZWYgaW5pdChzZWxmKToKICAgICAgICAiIiIKICAgICAgICBTdWJjbGFzcyB0aGlzIG1ldGhvZCB0byBpbml0aWFsaXplIHlvdXIgYXBwIHNwZWNpZmljIHBhcmFtZXRlcnMKICAgICAgICAiIiIKCiAgICBkZWYgc2V0X2xhbmd1YWdlKHNlbGYsIGxhbmc6IE9wdGlvbmFsW3N0cl0gPSBOb25lKToKICAgICAgICAiIiIKICAgICAgICBJbnN0YWxscyB0aGUgbGFuZ3VhZ2UgcGFzc2VkIGFzIGFyZ3VtZW50IG9yIHRoZSBhcHBsaWNhdGlvbnMKICAgICAgICBgLmZhbGxiYWNrX2xhbmd1YWdlYAogICAgICAgICIiIgogICAgICAgIHNlbGYuZGljdGlvbmFyaWVzLmdldCgKICAgICAgICAgICAgbGFuZ3VhZ2U9bGFuZywgZmFsbGJhY2tfbGFuZ3VhZ2U9c2VsZi5mYWxsYmFja19sYW5ndWFnZQogICAgICAgICkuaW5zdGFsbCgpCgogICAgZGVmIHNldHVwX3Rha3RrKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIEludGVybmFsIHRvIHNldCB1cCB0YWt0ayBjb21wb25lbnRzIGZvciBhcHAgaW5pdGlhbGl6YXRpb24KICAgICAgICAiIiIKICAgICAgICAoCiAgICAgICAgICAgIGRpY3Rpb25hcmllc19wYXRoLAogICAgICAgICAgICBfLAogICAgICAgICAgICBfc3RvcmUsCiAgICAgICAgICAgICpfXywKICAgICAgICApID0gc2VsZi5fY3JlYXRlX3BhcmFtcwogICAgICAgIGlmIGlzaW5zdGFuY2UoX3N0b3JlLCBzdG9yZS5TdG9yZSk6CiAgICAgICAgICAgIHNlbGYuX3N0b3JlID0gX3N0b3JlCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKF9zdG9yZSwgdHVwbGUpOgogICAgICAgICAgICBfc3RvcmUsIGRlZmF1bHQgPSBfc3RvcmUKICAgICAgICAgICAgaWYgX3N0b3JlIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBzZWxmLl9zdG9yZV9maWxlID0gTmFtZWRUZW1wb3JhcnlGaWxlKGRlbGV0ZT1GYWxzZSkKICAgICAgICAgICAgICAgIF9zdG9yZSA9IHNlbGYuX3N0b3JlX2ZpbGUubmFtZQogICAgICAgICAgICBzZWxmLl9zdG9yZSA9IHN0b3JlLlN0b3JlKF9zdG9yZSwgZGVmYXVsdD1kZWZhdWx0KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlZmF1bHQgPSB7fQogICAgICAgICAgICBpZiBfc3RvcmUgaXMgTm9uZToKICAgICAgICAgICAgICAgIHNlbGYuX3N0b3JlX2ZpbGUgPSBOYW1lZFRlbXBvcmFyeUZpbGUoZGVsZXRlPUZhbHNlKQogICAgICAgICAgICAgICAgX3N0b3JlID0gc2VsZi5fc3RvcmVfZmlsZS5uYW1lCiAgICAgICAgICAgIHNlbGYuX3N0b3JlID0gc3RvcmUuU3RvcmUoX3N0b3JlLCBkZWZhdWx0PWRlZmF1bHQpCiAgICAgICAgaWYgZGljdGlvbmFyaWVzX3BhdGggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuZGljdGlvbmFyaWVzID0gZGljdGlvbmFyeS5EaWN0aW9uYXJpZXMoZGljdGlvbmFyaWVzX3BhdGgpCiAgICAgICAgICAgIHNlbGYuc2V0X2xhbmd1YWdlKCkKICAgICAgICBpZiBzZWxmLm1lZGlhX3BhdGggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG1lZGlhLk1FRElBX0RJUiA9IFBhdGgoc2VsZi5tZWRpYV9wYXRoKQoKICAgIGRlZiBjcmVhdGUoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgQ3JlYXRlcyB0aGUgYXBwIGNvbnRhaW5lcgogICAgICAgICIiIgogICAgICAgICgKICAgICAgICAgICAgXywKICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICBfXywKICAgICAgICAgICAgaWNvbiwKICAgICAgICAgICAgd2luZG93X2NsYXNzLAogICAgICAgICkgPSBzZWxmLl9jcmVhdGVfcGFyYW1zCiAgICAgICAgaWYgaWNvbiBpcyBub3QgTm9uZToKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShpY29uLCBzdHIpOgogICAgICAgICAgICAgICAgc2VsZi5pY29uID0gbWVkaWEuZ2V0X2ltYWdlKGljb24pCiAgICAgICAgICAgICAgICBwYXJhbXNbImljb25waG90byJdID0gc2VsZi5pY29uLmZ1bGxfcGF0aAogICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UoaWNvbiwgbWVkaWEuSW1hZ2UpOgogICAgICAgICAgICAgICAgc2VsZi5pY29uID0gaWNvbgogICAgICAgICAgICAgICAgcGFyYW1zWyJpY29ucGhvdG8iXSA9IHNlbGYuaWNvbi5mdWxsX3BhdGgKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgZiJXcm9uZyBpY29uIHBhcmFtZXRlciB7aWNvbiFyfSB3YXMiCiAgICAgICAgICAgICAgICAgICAgZiIgcGFzc2VkIHRvIHtzZWxmLl9fY2xhc3NfXy5fX25hbWVfX30uX19pbml0X18iCiAgICAgICAgICAgICAgICApCiAgICAgICAgc2VsZi5yb290ID0gcm9vdCA9IHdpbmRvd19jbGFzcygqKnBhcmFtcykKICAgICAgICByb290LmNvbHVtbmNvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICByb290LnJvd2NvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICBpZiBzZWxmLm1lbnUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYubWVudS50b3BsZXZlbChyb290KQoKICAgICAgICBzZWxmLmxheW91dCA9IHNlbGYubGF5b3V0X2NsYXNzKCkKICAgICAgICBpZiBzZWxmLmxheW91dCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5sYXlvdXQucmVuZGVyKHNlbGYucm9vdCkKICAgICAgICAgICAgc2VsZi5sYXlvdXQuY29udGFpbmVyLmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKQogICAgICAgICAgICByZXR1cm4gc2VsZi5sYXlvdXRbIm91dGxldCJdLm91dGxldAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiByb290CgogICAgZGVmIHJ1bihzZWxmLCBlbnRyeTogc3RyID0gIi8iKToKICAgICAgICAiIiIKICAgICAgICBSdW5zIHRoZSBhcHAgd2l0aCB0aGUgc3BlY2lmaWVkIGVudHJ5IHBvaW50LgogICAgICAgIFRIZSBwYXNzZWQgYGVudHJ5YCBpcyBzZXQgYXMgZmlyc3QgcGFnZQogICAgICAgICIiIgogICAgICAgIHNlbGYuc2V0dXBfdGFrdGsoKQogICAgICAgIHJvb3QgPSBzZWxmLmNyZWF0ZSgpCiAgICAgICAgc2VsZi5pbml0KCkKICAgICAgICBmb3IgaGFuZGxlciBpbiBPTl9DUkVBVEVfSEFORExFUlM6CiAgICAgICAgICAgIGhhbmRsZXIoc2VsZikKICAgICAgICBpZiBzZWxmLmFkZHJlc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYubGlzdGVuX2F0KHNlbGYuYWRkcmVzcykKICAgICAgICBzZWxmLnZpZXcgPSBwYWdlLlBhZ2VWaWV3KHJvb3QsIHNlbGYucGFnZXMsIHNlbGYsIHNlbGYuZGVzdHJveV9jYWNoZSkKICAgICAgICBzZWxmLnZpZXcuZ2VvbWV0cnkoKQogICAgICAgIHNlbGYudmlldy51cmwoZW50cnkpCiAgICAgICAgc2VsZi5yb290Lm1haW5sb29wKCkKCiAgICBkZWYgX19jYWxsX18oCiAgICAgICAgc2VsZiwKICAgICAgICBtb2R1bGU6IHN0ciwKICAgICAgICBmdW5jdGlvbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsCiAgICAgICAgcmVkaXJlY3Q6IGJvb2wgPSBUcnVlLAogICAgICAgIC8sCiAgICAgICAgKipwYXJhbXMsCiAgICApOgogICAgICAgICIiIgogICAgICAgIFJlZmVyIHRvIHRoZSBhcHAncyB2aWV3IHJvdXRpbmcgc3lzdGVtIHdpdGggdGhlIHNwZWNpZmllZCBwYXJhbXM6CgogICAgICAgIDpwYXJhbSBtb2R1bGU6IFRoZSBzbGFzaCBzZXBlcmF0ZWQgcGF0aCB0byB0aGUgbW9kdWxlCiAgICAgICAgOnBhcmFtIGZ1bmN0aW9uOiBvcHRpb25hbCBoYW5kbGVyIG5hbWUgdG8gY2FsbAogICAgICAgIDpwYXJhbSByZWRpcmVjdDogaW5zdHJ1Y3RzIHRoZSBhcHAgdG8gZm9sbG93IHJlZGlyZWN0cwogICAgICAgIDpwYXJhbSBwYXJhbXM6IEV4dHJhIHBhcmFtZXRlcnMgcGFzc2VkIHRvIHRoZSBoYW5kbGVyCiAgICAgICAgIiIiCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiAiQCIgaW4gbW9kdWxlIG9yICIjIiBpbiBtb2R1bGU6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKG1vZHVsZSwgZiJEaWQgeW91IG1lYW4gYXBwLnVybCguLi4pPyIpCiAgICAgICAgICAgIHNlbGYudmlldyhtb2R1bGUsIGZ1bmN0aW9uLCBwYXJhbXMpCiAgICAgICAgZXhjZXB0IHBhZ2UuUmVkaXJlY3QgYXMgZToKICAgICAgICAgICAgdGFyZ2V0ID0gZS51cmwKICAgICAgICAgICAgaWYgcmVkaXJlY3Q6CiAgICAgICAgICAgICAgICBzZWxmLnZpZXcudXJsKHRhcmdldCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgc2VsZi5sYXlvdXQudXBkYXRlKCkKCiAgICBkZWYgdXJsKHNlbGYsIHVybDogc3RyKToKICAgICAgICAiIiIKICAgICAgICBUYXJnZXRzIHRoZSBhcHAgdG8gdGhlIHNwZWNpZmllZCB1cmwKICAgICAgICAiIiIKICAgICAgICByZXR1cm4gc2VsZi52aWV3LnVybCh1cmwpCgogICAgZGVmIGV4aXQoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgQ2xvc2VzIHRoZSBhcHAgd2luZG93LgogICAgICAgICIiIgogICAgICAgIHNlbGYucm9vdC5kZXN0cm95KCkKCiAgICBkZWYgbGlzdGVuX2F0KHNlbGYsIGFkZHJlc3M6IHR1cGxlW3N0ciwgaW50XSk6CiAgICAgICAgIiIiCiAgICAgICAgc3RhcnRzIGEgYHRha3RrLmFwcGxpY2F0aW9uX3NlcnZlci5BcHBsaWNhdGlvblNlcnZlcmAgYXQgc3BlY2lmaWVkCiAgICAgICAgYWRkcmVzcwogICAgICAgICIiIgogICAgICAgIGFwcGxpY2F0aW9uX3NlcnZlci5BcHBsaWNhdGlvblNlcnZlcihzZWxmLCBhZGRyZXNzKS50aHJlYWRfc2VydmUoKQoKICAgIGRlZiByZWRpcmVjdF90b19zaW5nbGV0b24oc2VsZiwgdXJsOiBzdHIgPSAiIikgLT4gYm9vbDoKICAgICAgICAiIiIKICAgICAgICBUcmllcyB0byBxdWVyeSB0aGUgYXBwcyBhZGRyZXNzIGFuZDoKICAgICAgICAtIGlmIHN1Y2NlZWRzLCBzZW5kcyBhIHJlcXVlc3QgdG8gdGhlIGluc3RhbmNlIHdpdGggdGhlIHBhc3NlZCB1cmwKICAgICAgICAtIGlmIGZhaWxzLCBzdGFydHMgYW4gaW5zdGFuY2Ugb2YgdGhlIGFwcGxpY2F0aW9uCgogICAgICAgIDpyZXR1cm5zOiBBIGJvb2xlYW4gdGVsbGluZyBpZiB0aGUgYXBwIGluc3RhbmNlIHdhcyBzdGFydGVkLgogICAgICAgICIiIgogICAgICAgIGZyb20gdXJsbGliLnJlcXVlc3QgaW1wb3J0IHVybG9wZW4KCiAgICAgICAgdHJ5OgogICAgICAgICAgICB1cmxvcGVuKGYiaHR0cDovL2xvY2FsaG9zdDp7c2VsZi5hZGRyZXNzWzFdfS8hY3VycmVudCIpLnJlYWQoKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHNlbGYucnVuKHVybCkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICB1cmxvcGVuKGYiaHR0cDovL2xvY2FsaG9zdDp7c2VsZi5hZGRyZXNzWzFdfS8iICsgdXJsLmxzdHJpcCgiLyIpKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZ2V0X3N0b3JlKHNlbGYpIC0+IHN0b3JlLlN0b3JlOgogICAgICAgICIiIgogICAgICAgIFJldHVybnMgdGhlIGFwcGxpY2F0aW9uIHN0b3JlIGluc3RhbmNlLgogICAgICAgICIiIgogICAgICAgIHJldHVybiBzZWxmLl9zdG9yZQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACXBgAAAAAAAJcGAAAAAAAAAAAAAAAA8L8"
				],
				[
					30,
					3,
					"left_delete",
					null,
					"AwAAAD4dAAAAAAAAPh0AAAAAAAASAAAAc2VsZi5kZXN0cm95X2NhY2hlPR0AAAAAAAA9HQAAAAAAAAEAAAAgPB0AAAAAAAA8HQAAAAAAAAEAAAAs",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA+HQAAAAAAAFAdAAAAAAAAAAAAAAAA8L8"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": ".s"
					},
					"AgAAADwdAAAAAAAAPR0AAAAAAAAAAAAAPR0AAAAAAAA+HQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA8HQAAAAAAADwdAAAAAAAAAAAAAAAA8L8"
				],
				[
					32,
					1,
					"left_delete",
					null,
					"AQAAAD0dAAAAAAAAPR0AAAAAAAABAAAAcw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA+HQAAAAAAAD4dAAAAAAAAAAAAAAAA8L8"
				],
				[
					33,
					1,
					"insert",
					{
						"characters": "get_stor"
					},
					"CAAAAD0dAAAAAAAAPh0AAAAAAAAAAAAAPh0AAAAAAAA/HQAAAAAAAAAAAAA/HQAAAAAAAEAdAAAAAAAAAAAAAEAdAAAAAAAAQR0AAAAAAAAAAAAAQR0AAAAAAABCHQAAAAAAAAAAAABCHQAAAAAAAEMdAAAAAAAAAAAAAEMdAAAAAAAARB0AAAAAAAAAAAAARB0AAAAAAABFHQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA9HQAAAAAAAD0dAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "e"
					},
					"AQAAAEUdAAAAAAAARh0AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABFHQAAAAAAAEUdAAAAAAAAAAAAAAAA8L8"
				],
				[
					35,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAEYdAAAAAAAASB0AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABGHQAAAAAAAEYdAAAAAAAAAAAAAAAA8L8"
				],
				[
					38,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAACiYAAAAAAAAKJgAAIiIiXApQcm92aWRlcyBiYXNlIGNsYXNzIGZvciB0YWt0ayBhcHBsaWNhdGlvbiBjcmVhdGlvbgpDb3B5cmlnaHQgKEMpIDIwMjIgIGtlbi1tb3JlbAoKVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KClRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLApidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgpNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCkdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgpZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQphbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiIiIgpmcm9tIGxvZ2dpbmcgaW1wb3J0IGdldExvZ2dlcgpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSB0ZW1wZmlsZSBpbXBvcnQgTmFtZWRUZW1wb3JhcnlGaWxlCmZyb20gdHlwZXMgaW1wb3J0IE1vZHVsZVR5cGUKZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgT3B0aW9uYWwKZnJvbSBweW9sb2FkIGltcG9ydCBhbm5vdGF0ZQpmcm9tIHR0a2Jvb3RzdHJhcCBpbXBvcnQgV2luZG93CmZyb20gLiBpbXBvcnQgKAogICAgT05fQ1JFQVRFX0hBTkRMRVJTLAogICAgYXBwbGljYXRpb25fc2VydmVyLAogICAgY29tcG9uZW50LAogICAgZGljdGlvbmFyeSwKICAgIG1lZGlhLAogICAgbWVudSwKICAgIHBhZ2UsCiAgICBzdG9yZSwKKQoKbG9nID0gZ2V0TG9nZ2VyKF9fbmFtZV9fKQoKCkBhbm5vdGF0ZQpjbGFzcyBBcHBsaWNhdGlvbjoKICAgICIiIgogICAgSGFzIG9wdGlvbmFsIGF0dHJpYnV0ZXMgdG8gc3BlY2lmeSBiZWhhdmlvdXIgaW5jbHVkaW5nOgoKICAgIC0gKipkaWN0aW9uYXJpZXMqKjogVGhlIHBhdGggdG8gdGhlIGRpY3Rpb25uYXJ5IGRpcmVjdG9yeSB0YWt0ayBzaG91bGQKICAgICAgZmV0Y2ggZGljdGlvbmFyaWVzIGZyb20KICAgIC0gKipmYWxsYmFja19sYW5ndWFnZSoqOiBUaGUgZmFsbGJhY2sgbGFuZ3VhZ2UgdG8gdXNlIGluIGNhc2UgdGhlIGxvY2FsZSdzCiAgICAgIGxhbmd1YWdlIGNvdWxkIG5vdCBiZSBmb3VuZCBpbiBkaWN0aW9uYXJpZXMKICAgIC0gKipwYXJhbXMqKjogYGRpY3Rbc3RyLF1gOiBBZGRpdGlvbmFsIHBhcmFtcyB0byBwYXNzIHRvIHR0a2Jvb3RzdHJhcAogICAgICBXaW5kb3cgb24gd2luZG93CiAgICAgIGNyZWF0aW9uLgogICAgLSAqKm1lbnUqKjogYW4gb3B0aW9uYWwgYHRha3RrLm1lbnUuTWVudWAgb2JqZWN0IHRvIHVzZSBhcyB0b3BsZXZlbCBtZW51CiAgICAtICoqbGF5b3V0Kio6IGFuIGluc3RhbmNlIG9mIGBMYXlvdXRgIGNsYXNzIHlvdSBzaG91bGQgZGVmaW5lIHlvdXJzZWxmCiAgICAiIiIKCiAgICBkaWN0aW9uYXJpZXM6IGRpY3Rpb25hcnkuRGljdGlvbmFyaWVzID0gTm9uZQogICAgZmFsbGJhY2tfbGFuZ3VhZ2U6IHN0cgogICAgbWVudTogT3B0aW9uYWxbbWVudS5NZW51XQogICAgbGF5b3V0OiBPcHRpb25hbFtjb21wb25lbnQuQ29tcG9uZW50XQogICAgX3N0b3JlOiBPcHRpb25hbFtzdG9yZS5TdG9yZV0gPSBOb25lCiAgICBhZGRyZXNzOiBPcHRpb25hbFt0dXBsZVtzdHIsIGludF1dCiAgICBpY29uOiBPcHRpb25hbFtzdHIgfCBtZWRpYS5JbWFnZV0KICAgIF9jcmVhdGVfcGFyYW1zOiB0dXBsZVsKICAgICAgICBPcHRpb25hbFtQYXRoIHwgc3RyIHwgZGljdGlvbmFyeS5EaWN0aW9uYXJpZXNdLAogICAgICAgIGRpY3Rbc3RyLCBBbnldLAogICAgICAgIHR1cGxlW05vbmUsIGRpY3RdIHwgc3RvcmUuU3RvcmUsCiAgICAgICAgT3B0aW9uYWxbUGF0aCB8IHN0ciB8IG1lZGlhLkltYWdlXSwKICAgICAgICB0eXBlKFdpbmRvdyksCiAgICBdCiAgICBtZWRpYV9wYXRoOiBPcHRpb25hbFtzdHIgfCBQYXRoXQogICAgcGFnZXM6IE1vZHVsZVR5cGUKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBwYWdlczogTW9kdWxlVHlwZSwKICAgICAgICBkaWN0aW9uYXJpZXM6IE9wdGlvbmFsW1BhdGggfCBzdHIgfCBkaWN0aW9uYXJ5LkRpY3Rpb25hcmllc10gPSBOb25lLAogICAgICAgIGZhbGxiYWNrX2xhbmd1YWdlOiBzdHIgPSAiZW5nbGlzaCIsCiAgICAgICAgcGFyYW1zOiBkaWN0W3N0ciwgQW55XSA9IHt9LAogICAgICAgIG1lbnU6IE9wdGlvbmFsW21lbnUuTWVudV0gPSBOb25lLAogICAgICAgIGxheW91dDogT3B0aW9uYWxbdHlwZV0gPSBOb25lLAogICAgICAgIHN0b3JlOiB0dXBsZVtOb25lLCBkaWN0XSB8IHN0b3JlLlN0b3JlID0gKE5vbmUsIHt9KSwKICAgICAgICBhZGRyZXNzOiBPcHRpb25hbFt0dXBsZVtzdHIsIGludF1dID0gTm9uZSwKICAgICAgICBpY29uOiBPcHRpb25hbFtzdHIgfCBtZWRpYS5JbWFnZV0gPSBOb25lLAogICAgICAgIG1lZGlhX3BhdGg6IE9wdGlvbmFsW3N0ciB8IFBhdGhdID0gTm9uZSwKICAgICAgICB3aW5kb3dfY2xhc3M6IHR5cGUoV2luZG93KSA9IFdpbmRvdywKICAgICk6CiAgICAgICAgIiIiCiAgICAgICAgSW5pdGlhbGl6ZSB0aGUgYXBwIGFuZCBzdG9yZSBtb3N0IG9mIHRoZSBwYXNzZWQgcGFyYW1ldGVycyBpbnRvCiAgICAgICAgYC5fY3JlYXRlX3BhcmFtc2AuCgogICAgICAgIDpwYXJhbSBkaWN0aW9uYXJpZXM6IFRoZSBwYXRoIHRvIHRoZSBhcHBsaWNhdGlvbiBkaWN0aW9uYXJpZXMgZGlyZWN0b3J5CiAgICAgICAgb3IgYSBgdGFrdGsuZGljdGlvbmFyeS5EaWN0aW9uYXJ5YCBpbnN0YW5jZS4KCiAgICAgICAgOnBhcmFtIGZhbGxiYWNrX2xhbmd1YWdlOiBUaGUgZmFsbGJhY2sgbGFuZ3VhZ2UgdG8gZmV0Y2ggZnJvbQogICAgICAgIGRpY3Rpb25hcnkgaWYgbG9jYWxlJ3MgZG9lcyBub3Qgc3VjY2VlZC4KCiAgICAgICAgOnBhcmFtIHBhcmFtczogQWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gYHdpbmRvd19jbGFzc2Agb24KICAgICAgICB3aW5kb3cgY3JlYXRpb24uCgogICAgICAgIDpwYXJhbSBtZW51OiBUaGUgb3B0aW9uYWwgYXBwbGljYXRpb24gbWVudSwgYSBgdGFrdGsubWVudS5NZW51YAogICAgICAgIGluc3RhbmNlCgogICAgICAgIDpwYXJhbSBsYXlvdXQ6IFRoZSBhcHBsaWNhdGlvbiBsYXlvdXQgY29tcG9uZW50IGluc3RhbmNlIHRvIHVzZS4KCiAgICAgICAgOnBhcmFtIHN0b3JlOiBUaGUgcGF0aCB0byBhcHBsaWNhdGlvbiBqc29uIF9zdG9yZV8gZGF0YWJhc2UuCgogICAgICAgIDpwYXJhbSBhZGRyZXNzOiBUaGUgd2ViIGFkZHJlc3MgdHVwbGUgZm9yIGFwcGxpY2F0aW9uIHNlcnZlcgogICAgICAgIHRvIGxpc3RlbiBhdAoKICAgICAgICA6cGFyYW0gaWNvbjogVGhlIG9wdGlvbmFsIGFwcGxpY2F0aW9uIGljb24gc3BlYyBvciBgdGFrdGsubWVkaWEuSW1hZ2VgCiAgICAgICAgaW5zdGFuY2UKCiAgICAgICAgOnBhcmFtIG1lZGlhX3BhdGg6IFRoZSBvcHRpb25hbCBwYXRoIHRvIGdsb2JhbCBtZWRpYSBkaXJlY3RvcnkKCiAgICAgICAgOnBhcmFtIHdpbmRvd19jbGFzczogVGhlIGNsYXNzIHRvIGNhbGwgb24gd2luZG93IGNyZWF0aW9uLgoKICAgICAgICA6cGFyYW0gcGFnZXM6IFRoZSBwYWdlcyBtb2R1bGUKICAgICAgICAiIiIKICAgICAgICBpbXBvcnQgdGFrdGsKCiAgICAgICAgdGFrdGsuYXBwbGljYXRpb24gPSBzZWxmCgogICAgICAgIHNlbGYubWVudSA9IG1lbnUKICAgICAgICBzZWxmLmxheW91dF9jbGFzcyA9IGxheW91dAogICAgICAgIHNlbGYubGF5b3V0ID0gTm9uZQogICAgICAgIHNlbGYuYWRkcmVzcyA9IGFkZHJlc3MKICAgICAgICBzZWxmLm1lZGlhX3BhdGggPSBtZWRpYV9wYXRoCiAgICAgICAgc2VsZi5wYWdlcyA9IHBhZ2VzCgogICAgICAgIHNlbGYuZmFsbGJhY2tfbGFuZ3VhZ2UgPSBmYWxsYmFja19sYW5ndWFnZQogICAgICAgIHNlbGYuX2NyZWF0ZV9wYXJhbXMgPSAoCiAgICAgICAgICAgIGRpY3Rpb25hcmllcywKICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICBzdG9yZSwKICAgICAgICAgICAgaWNvbiwKICAgICAgICAgICAgd2luZG93X2NsYXNzLAogICAgICAgICkKCiAgICBkZWYgaW5pdChzZWxmKToKICAgICAgICAiIiIKICAgICAgICBTdWJjbGFzcyB0aGlzIG1ldGhvZCB0byBpbml0aWFsaXplIHlvdXIgYXBwIHNwZWNpZmljIHBhcmFtZXRlcnMKICAgICAgICAiIiIKCiAgICBkZWYgc2V0X2xhbmd1YWdlKHNlbGYsIGxhbmc6IE9wdGlvbmFsW3N0cl0gPSBOb25lKToKICAgICAgICAiIiIKICAgICAgICBJbnN0YWxscyB0aGUgbGFuZ3VhZ2UgcGFzc2VkIGFzIGFyZ3VtZW50IG9yIHRoZSBhcHBsaWNhdGlvbnMKICAgICAgICBgLmZhbGxiYWNrX2xhbmd1YWdlYAogICAgICAgICIiIgogICAgICAgIHNlbGYuZGljdGlvbmFyaWVzLmdldCgKICAgICAgICAgICAgbGFuZ3VhZ2U9bGFuZywgZmFsbGJhY2tfbGFuZ3VhZ2U9c2VsZi5mYWxsYmFja19sYW5ndWFnZQogICAgICAgICkuaW5zdGFsbCgpCgogICAgZGVmIHNldHVwX3Rha3RrKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIEludGVybmFsIHRvIHNldCB1cCB0YWt0ayBjb21wb25lbnRzIGZvciBhcHAgaW5pdGlhbGl6YXRpb24KICAgICAgICAiIiIKICAgICAgICAoCiAgICAgICAgICAgIGRpY3Rpb25hcmllc19wYXRoLAogICAgICAgICAgICBfLAogICAgICAgICAgICBfc3RvcmUsCiAgICAgICAgICAgICpfXywKICAgICAgICApID0gc2VsZi5fY3JlYXRlX3BhcmFtcwogICAgICAgIGlmIGlzaW5zdGFuY2UoX3N0b3JlLCBzdG9yZS5TdG9yZSk6CiAgICAgICAgICAgIHNlbGYuX3N0b3JlID0gX3N0b3JlCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKF9zdG9yZSwgdHVwbGUpOgogICAgICAgICAgICBfc3RvcmUsIGRlZmF1bHQgPSBfc3RvcmUKICAgICAgICAgICAgaWYgX3N0b3JlIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBzZWxmLl9zdG9yZV9maWxlID0gTmFtZWRUZW1wb3JhcnlGaWxlKGRlbGV0ZT1GYWxzZSkKICAgICAgICAgICAgICAgIF9zdG9yZSA9IHNlbGYuX3N0b3JlX2ZpbGUubmFtZQogICAgICAgICAgICBzZWxmLl9zdG9yZSA9IHN0b3JlLlN0b3JlKF9zdG9yZSwgZGVmYXVsdD1kZWZhdWx0KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlZmF1bHQgPSB7fQogICAgICAgICAgICBpZiBfc3RvcmUgaXMgTm9uZToKICAgICAgICAgICAgICAgIHNlbGYuX3N0b3JlX2ZpbGUgPSBOYW1lZFRlbXBvcmFyeUZpbGUoZGVsZXRlPUZhbHNlKQogICAgICAgICAgICAgICAgX3N0b3JlID0gc2VsZi5fc3RvcmVfZmlsZS5uYW1lCiAgICAgICAgICAgIHNlbGYuX3N0b3JlID0gc3RvcmUuU3RvcmUoX3N0b3JlLCBkZWZhdWx0PWRlZmF1bHQpCiAgICAgICAgaWYgZGljdGlvbmFyaWVzX3BhdGggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuZGljdGlvbmFyaWVzID0gZGljdGlvbmFyeS5EaWN0aW9uYXJpZXMoZGljdGlvbmFyaWVzX3BhdGgpCiAgICAgICAgICAgIHNlbGYuc2V0X2xhbmd1YWdlKCkKICAgICAgICBpZiBzZWxmLm1lZGlhX3BhdGggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG1lZGlhLk1FRElBX0RJUiA9IFBhdGgoc2VsZi5tZWRpYV9wYXRoKQoKICAgIGRlZiBjcmVhdGUoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgQ3JlYXRlcyB0aGUgYXBwIGNvbnRhaW5lcgogICAgICAgICIiIgogICAgICAgICgKICAgICAgICAgICAgXywKICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICBfXywKICAgICAgICAgICAgaWNvbiwKICAgICAgICAgICAgd2luZG93X2NsYXNzLAogICAgICAgICkgPSBzZWxmLl9jcmVhdGVfcGFyYW1zCiAgICAgICAgaWYgaWNvbiBpcyBub3QgTm9uZToKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShpY29uLCBzdHIpOgogICAgICAgICAgICAgICAgc2VsZi5pY29uID0gbWVkaWEuZ2V0X2ltYWdlKGljb24pCiAgICAgICAgICAgICAgICBwYXJhbXNbImljb25waG90byJdID0gc2VsZi5pY29uLmZ1bGxfcGF0aAogICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UoaWNvbiwgbWVkaWEuSW1hZ2UpOgogICAgICAgICAgICAgICAgc2VsZi5pY29uID0gaWNvbgogICAgICAgICAgICAgICAgcGFyYW1zWyJpY29ucGhvdG8iXSA9IHNlbGYuaWNvbi5mdWxsX3BhdGgKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgZiJXcm9uZyBpY29uIHBhcmFtZXRlciB7aWNvbiFyfSB3YXMiCiAgICAgICAgICAgICAgICAgICAgZiIgcGFzc2VkIHRvIHtzZWxmLl9fY2xhc3NfXy5fX25hbWVfX30uX19pbml0X18iCiAgICAgICAgICAgICAgICApCiAgICAgICAgc2VsZi5yb290ID0gcm9vdCA9IHdpbmRvd19jbGFzcygqKnBhcmFtcykKICAgICAgICByb290LmNvbHVtbmNvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICByb290LnJvd2NvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICBpZiBzZWxmLm1lbnUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYubWVudS50b3BsZXZlbChyb290KQoKICAgICAgICBzZWxmLmxheW91dCA9IHNlbGYubGF5b3V0X2NsYXNzKCkKICAgICAgICBpZiBzZWxmLmxheW91dCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5sYXlvdXQucmVuZGVyKHNlbGYucm9vdCkKICAgICAgICAgICAgc2VsZi5sYXlvdXQuY29udGFpbmVyLmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKQogICAgICAgICAgICByZXR1cm4gc2VsZi5sYXlvdXRbIm91dGxldCJdLm91dGxldAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiByb290CgogICAgZGVmIHJ1bihzZWxmLCBlbnRyeTogc3RyID0gIi8iKToKICAgICAgICAiIiIKICAgICAgICBSdW5zIHRoZSBhcHAgd2l0aCB0aGUgc3BlY2lmaWVkIGVudHJ5IHBvaW50LgogICAgICAgIFRIZSBwYXNzZWQgYGVudHJ5YCBpcyBzZXQgYXMgZmlyc3QgcGFnZQogICAgICAgICIiIgogICAgICAgIHNlbGYuc2V0dXBfdGFrdGsoKQogICAgICAgIHJvb3QgPSBzZWxmLmNyZWF0ZSgpCiAgICAgICAgc2VsZi5pbml0KCkKICAgICAgICBmb3IgaGFuZGxlciBpbiBPTl9DUkVBVEVfSEFORExFUlM6CiAgICAgICAgICAgIGhhbmRsZXIoc2VsZikKICAgICAgICBpZiBzZWxmLmFkZHJlc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYubGlzdGVuX2F0KHNlbGYuYWRkcmVzcykKICAgICAgICBzZWxmLnZpZXcgPSBwYWdlLlBhZ2VWaWV3KHJvb3QsIHNlbGYucGFnZXMsIHNlbGYuZ2V0X3N0b3JlKCkpCiAgICAgICAgc2VsZi52aWV3Lmdlb21ldHJ5KCkKICAgICAgICBzZWxmLnZpZXcudXJsKGVudHJ5KQogICAgICAgIHNlbGYucm9vdC5tYWlubG9vcCgpCgogICAgZGVmIF9fY2FsbF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgbW9kdWxlOiBzdHIsCiAgICAgICAgZnVuY3Rpb246IE9wdGlvbmFsW3N0cl0gPSBOb25lLAogICAgICAgIHJlZGlyZWN0OiBib29sID0gVHJ1ZSwKICAgICAgICAvLAogICAgICAgICoqcGFyYW1zLAogICAgKToKICAgICAgICAiIiIKICAgICAgICBSZWZlciB0byB0aGUgYXBwJ3MgdmlldyByb3V0aW5nIHN5c3RlbSB3aXRoIHRoZSBzcGVjaWZpZWQgcGFyYW1zOgoKICAgICAgICA6cGFyYW0gbW9kdWxlOiBUaGUgc2xhc2ggc2VwZXJhdGVkIHBhdGggdG8gdGhlIG1vZHVsZQogICAgICAgIDpwYXJhbSBmdW5jdGlvbjogb3B0aW9uYWwgaGFuZGxlciBuYW1lIHRvIGNhbGwKICAgICAgICA6cGFyYW0gcmVkaXJlY3Q6IGluc3RydWN0cyB0aGUgYXBwIHRvIGZvbGxvdyByZWRpcmVjdHMKICAgICAgICA6cGFyYW0gcGFyYW1zOiBFeHRyYSBwYXJhbWV0ZXJzIHBhc3NlZCB0byB0aGUgaGFuZGxlcgogICAgICAgICIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgIkAiIGluIG1vZHVsZSBvciAiIyIgaW4gbW9kdWxlOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihtb2R1bGUsIGYiRGlkIHlvdSBtZWFuIGFwcC51cmwoLi4uKT8iKQogICAgICAgICAgICBzZWxmLnZpZXcobW9kdWxlLCBmdW5jdGlvbiwgcGFyYW1zKQogICAgICAgIGV4Y2VwdCBwYWdlLlJlZGlyZWN0IGFzIGU6CiAgICAgICAgICAgIHRhcmdldCA9IGUudXJsCiAgICAgICAgICAgIGlmIHJlZGlyZWN0OgogICAgICAgICAgICAgICAgc2VsZi52aWV3LnVybCh0YXJnZXQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgIHNlbGYubGF5b3V0LnVwZGF0ZSgpCgogICAgZGVmIHVybChzZWxmLCB1cmw6IHN0cik6CiAgICAgICAgIiIiCiAgICAgICAgVGFyZ2V0cyB0aGUgYXBwIHRvIHRoZSBzcGVjaWZpZWQgdXJsCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYudmlldy51cmwodXJsKQoKICAgIGRlZiBleGl0KHNlbGYpOgogICAgICAgICIiIgogICAgICAgIENsb3NlcyB0aGUgYXBwIHdpbmRvdy4KICAgICAgICAiIiIKICAgICAgICBzZWxmLnJvb3QuZGVzdHJveSgpCgogICAgZGVmIGxpc3Rlbl9hdChzZWxmLCBhZGRyZXNzOiB0dXBsZVtzdHIsIGludF0pOgogICAgICAgICIiIgogICAgICAgIHN0YXJ0cyBhIGB0YWt0ay5hcHBsaWNhdGlvbl9zZXJ2ZXIuQXBwbGljYXRpb25TZXJ2ZXJgIGF0IHNwZWNpZmllZAogICAgICAgIGFkZHJlc3MKICAgICAgICAiIiIKICAgICAgICBhcHBsaWNhdGlvbl9zZXJ2ZXIuQXBwbGljYXRpb25TZXJ2ZXIoc2VsZiwgYWRkcmVzcykudGhyZWFkX3NlcnZlKCkKCiAgICBkZWYgcmVkaXJlY3RfdG9fc2luZ2xldG9uKHNlbGYsIHVybDogc3RyID0gIiIpIC0+IGJvb2w6CiAgICAgICAgIiIiCiAgICAgICAgVHJpZXMgdG8gcXVlcnkgdGhlIGFwcHMgYWRkcmVzcyBhbmQ6CiAgICAgICAgLSBpZiBzdWNjZWVkcywgc2VuZHMgYSByZXF1ZXN0IHRvIHRoZSBpbnN0YW5jZSB3aXRoIHRoZSBwYXNzZWQgdXJsCiAgICAgICAgLSBpZiBmYWlscywgc3RhcnRzIGFuIGluc3RhbmNlIG9mIHRoZSBhcHBsaWNhdGlvbgoKICAgICAgICA6cmV0dXJuczogQSBib29sZWFuIHRlbGxpbmcgaWYgdGhlIGFwcCBpbnN0YW5jZSB3YXMgc3RhcnRlZC4KICAgICAgICAiIiIKICAgICAgICBmcm9tIHVybGxpYi5yZXF1ZXN0IGltcG9ydCB1cmxvcGVuCgogICAgICAgIHRyeToKICAgICAgICAgICAgdXJsb3BlbihmImh0dHA6Ly9sb2NhbGhvc3Q6e3NlbGYuYWRkcmVzc1sxXX0vIWN1cnJlbnQiKS5yZWFkKCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICBzZWxmLnJ1bih1cmwpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdXJsb3BlbihmImh0dHA6Ly9sb2NhbGhvc3Q6e3NlbGYuYWRkcmVzc1sxXX0vIiArIHVybC5sc3RyaXAoIi8iKSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGdldF9zdG9yZShzZWxmKSAtPiBzdG9yZS5TdG9yZToKICAgICAgICAiIiIKICAgICAgICBSZXR1cm5zIHRoZSBhcHBsaWNhdGlvbiBzdG9yZSBpbnN0YW5jZS4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gc2VsZi5fc3RvcmUK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABHHQAAAAAAAEcdAAAAAAAAAAAAAAAA8L8"
				],
				[
					65,
					1,
					"left_delete",
					null,
					"AQAAAEYdAAAAAAAARh0AAAAAAAACAAAAKCk",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABIHQAAAAAAAEYdAAAAAAAAAAAAAAAA8L8"
				],
				[
					68,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAACCYAAAAAAAAIJgAAIiIiXApQcm92aWRlcyBiYXNlIGNsYXNzIGZvciB0YWt0ayBhcHBsaWNhdGlvbiBjcmVhdGlvbgpDb3B5cmlnaHQgKEMpIDIwMjIgIGtlbi1tb3JlbAoKVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KClRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLApidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgpNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCkdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgpZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQphbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiIiIgpmcm9tIGxvZ2dpbmcgaW1wb3J0IGdldExvZ2dlcgpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSB0ZW1wZmlsZSBpbXBvcnQgTmFtZWRUZW1wb3JhcnlGaWxlCmZyb20gdHlwZXMgaW1wb3J0IE1vZHVsZVR5cGUKZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgT3B0aW9uYWwKZnJvbSBweW9sb2FkIGltcG9ydCBhbm5vdGF0ZQpmcm9tIHR0a2Jvb3RzdHJhcCBpbXBvcnQgV2luZG93CmZyb20gLiBpbXBvcnQgKAogICAgT05fQ1JFQVRFX0hBTkRMRVJTLAogICAgYXBwbGljYXRpb25fc2VydmVyLAogICAgY29tcG9uZW50LAogICAgZGljdGlvbmFyeSwKICAgIG1lZGlhLAogICAgbWVudSwKICAgIHBhZ2UsCiAgICBzdG9yZSwKKQoKbG9nID0gZ2V0TG9nZ2VyKF9fbmFtZV9fKQoKCkBhbm5vdGF0ZQpjbGFzcyBBcHBsaWNhdGlvbjoKICAgICIiIgogICAgSGFzIG9wdGlvbmFsIGF0dHJpYnV0ZXMgdG8gc3BlY2lmeSBiZWhhdmlvdXIgaW5jbHVkaW5nOgoKICAgIC0gKipkaWN0aW9uYXJpZXMqKjogVGhlIHBhdGggdG8gdGhlIGRpY3Rpb25uYXJ5IGRpcmVjdG9yeSB0YWt0ayBzaG91bGQKICAgICAgZmV0Y2ggZGljdGlvbmFyaWVzIGZyb20KICAgIC0gKipmYWxsYmFja19sYW5ndWFnZSoqOiBUaGUgZmFsbGJhY2sgbGFuZ3VhZ2UgdG8gdXNlIGluIGNhc2UgdGhlIGxvY2FsZSdzCiAgICAgIGxhbmd1YWdlIGNvdWxkIG5vdCBiZSBmb3VuZCBpbiBkaWN0aW9uYXJpZXMKICAgIC0gKipwYXJhbXMqKjogYGRpY3Rbc3RyLF1gOiBBZGRpdGlvbmFsIHBhcmFtcyB0byBwYXNzIHRvIHR0a2Jvb3RzdHJhcAogICAgICBXaW5kb3cgb24gd2luZG93CiAgICAgIGNyZWF0aW9uLgogICAgLSAqKm1lbnUqKjogYW4gb3B0aW9uYWwgYHRha3RrLm1lbnUuTWVudWAgb2JqZWN0IHRvIHVzZSBhcyB0b3BsZXZlbCBtZW51CiAgICAtICoqbGF5b3V0Kio6IGFuIGluc3RhbmNlIG9mIGBMYXlvdXRgIGNsYXNzIHlvdSBzaG91bGQgZGVmaW5lIHlvdXJzZWxmCiAgICAiIiIKCiAgICBkaWN0aW9uYXJpZXM6IGRpY3Rpb25hcnkuRGljdGlvbmFyaWVzID0gTm9uZQogICAgZmFsbGJhY2tfbGFuZ3VhZ2U6IHN0cgogICAgbWVudTogT3B0aW9uYWxbbWVudS5NZW51XQogICAgbGF5b3V0OiBPcHRpb25hbFtjb21wb25lbnQuQ29tcG9uZW50XQogICAgX3N0b3JlOiBPcHRpb25hbFtzdG9yZS5TdG9yZV0gPSBOb25lCiAgICBhZGRyZXNzOiBPcHRpb25hbFt0dXBsZVtzdHIsIGludF1dCiAgICBpY29uOiBPcHRpb25hbFtzdHIgfCBtZWRpYS5JbWFnZV0KICAgIF9jcmVhdGVfcGFyYW1zOiB0dXBsZVsKICAgICAgICBPcHRpb25hbFtQYXRoIHwgc3RyIHwgZGljdGlvbmFyeS5EaWN0aW9uYXJpZXNdLAogICAgICAgIGRpY3Rbc3RyLCBBbnldLAogICAgICAgIHR1cGxlW05vbmUsIGRpY3RdIHwgc3RvcmUuU3RvcmUsCiAgICAgICAgT3B0aW9uYWxbUGF0aCB8IHN0ciB8IG1lZGlhLkltYWdlXSwKICAgICAgICB0eXBlKFdpbmRvdyksCiAgICBdCiAgICBtZWRpYV9wYXRoOiBPcHRpb25hbFtzdHIgfCBQYXRoXQogICAgcGFnZXM6IE1vZHVsZVR5cGUKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBwYWdlczogTW9kdWxlVHlwZSwKICAgICAgICBkaWN0aW9uYXJpZXM6IE9wdGlvbmFsW1BhdGggfCBzdHIgfCBkaWN0aW9uYXJ5LkRpY3Rpb25hcmllc10gPSBOb25lLAogICAgICAgIGZhbGxiYWNrX2xhbmd1YWdlOiBzdHIgPSAiZW5nbGlzaCIsCiAgICAgICAgcGFyYW1zOiBkaWN0W3N0ciwgQW55XSA9IHt9LAogICAgICAgIG1lbnU6IE9wdGlvbmFsW21lbnUuTWVudV0gPSBOb25lLAogICAgICAgIGxheW91dDogT3B0aW9uYWxbdHlwZV0gPSBOb25lLAogICAgICAgIHN0b3JlOiB0dXBsZVtOb25lLCBkaWN0XSB8IHN0b3JlLlN0b3JlID0gKE5vbmUsIHt9KSwKICAgICAgICBhZGRyZXNzOiBPcHRpb25hbFt0dXBsZVtzdHIsIGludF1dID0gTm9uZSwKICAgICAgICBpY29uOiBPcHRpb25hbFtzdHIgfCBtZWRpYS5JbWFnZV0gPSBOb25lLAogICAgICAgIG1lZGlhX3BhdGg6IE9wdGlvbmFsW3N0ciB8IFBhdGhdID0gTm9uZSwKICAgICAgICB3aW5kb3dfY2xhc3M6IHR5cGUoV2luZG93KSA9IFdpbmRvdywKICAgICk6CiAgICAgICAgIiIiCiAgICAgICAgSW5pdGlhbGl6ZSB0aGUgYXBwIGFuZCBzdG9yZSBtb3N0IG9mIHRoZSBwYXNzZWQgcGFyYW1ldGVycyBpbnRvCiAgICAgICAgYC5fY3JlYXRlX3BhcmFtc2AuCgogICAgICAgIDpwYXJhbSBkaWN0aW9uYXJpZXM6IFRoZSBwYXRoIHRvIHRoZSBhcHBsaWNhdGlvbiBkaWN0aW9uYXJpZXMgZGlyZWN0b3J5CiAgICAgICAgb3IgYSBgdGFrdGsuZGljdGlvbmFyeS5EaWN0aW9uYXJ5YCBpbnN0YW5jZS4KCiAgICAgICAgOnBhcmFtIGZhbGxiYWNrX2xhbmd1YWdlOiBUaGUgZmFsbGJhY2sgbGFuZ3VhZ2UgdG8gZmV0Y2ggZnJvbQogICAgICAgIGRpY3Rpb25hcnkgaWYgbG9jYWxlJ3MgZG9lcyBub3Qgc3VjY2VlZC4KCiAgICAgICAgOnBhcmFtIHBhcmFtczogQWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gYHdpbmRvd19jbGFzc2Agb24KICAgICAgICB3aW5kb3cgY3JlYXRpb24uCgogICAgICAgIDpwYXJhbSBtZW51OiBUaGUgb3B0aW9uYWwgYXBwbGljYXRpb24gbWVudSwgYSBgdGFrdGsubWVudS5NZW51YAogICAgICAgIGluc3RhbmNlCgogICAgICAgIDpwYXJhbSBsYXlvdXQ6IFRoZSBhcHBsaWNhdGlvbiBsYXlvdXQgY29tcG9uZW50IGluc3RhbmNlIHRvIHVzZS4KCiAgICAgICAgOnBhcmFtIHN0b3JlOiBUaGUgcGF0aCB0byBhcHBsaWNhdGlvbiBqc29uIF9zdG9yZV8gZGF0YWJhc2UuCgogICAgICAgIDpwYXJhbSBhZGRyZXNzOiBUaGUgd2ViIGFkZHJlc3MgdHVwbGUgZm9yIGFwcGxpY2F0aW9uIHNlcnZlcgogICAgICAgIHRvIGxpc3RlbiBhdAoKICAgICAgICA6cGFyYW0gaWNvbjogVGhlIG9wdGlvbmFsIGFwcGxpY2F0aW9uIGljb24gc3BlYyBvciBgdGFrdGsubWVkaWEuSW1hZ2VgCiAgICAgICAgaW5zdGFuY2UKCiAgICAgICAgOnBhcmFtIG1lZGlhX3BhdGg6IFRoZSBvcHRpb25hbCBwYXRoIHRvIGdsb2JhbCBtZWRpYSBkaXJlY3RvcnkKCiAgICAgICAgOnBhcmFtIHdpbmRvd19jbGFzczogVGhlIGNsYXNzIHRvIGNhbGwgb24gd2luZG93IGNyZWF0aW9uLgoKICAgICAgICA6cGFyYW0gcGFnZXM6IFRoZSBwYWdlcyBtb2R1bGUKICAgICAgICAiIiIKICAgICAgICBpbXBvcnQgdGFrdGsKCiAgICAgICAgdGFrdGsuYXBwbGljYXRpb24gPSBzZWxmCgogICAgICAgIHNlbGYubWVudSA9IG1lbnUKICAgICAgICBzZWxmLmxheW91dF9jbGFzcyA9IGxheW91dAogICAgICAgIHNlbGYubGF5b3V0ID0gTm9uZQogICAgICAgIHNlbGYuYWRkcmVzcyA9IGFkZHJlc3MKICAgICAgICBzZWxmLm1lZGlhX3BhdGggPSBtZWRpYV9wYXRoCiAgICAgICAgc2VsZi5wYWdlcyA9IHBhZ2VzCgogICAgICAgIHNlbGYuZmFsbGJhY2tfbGFuZ3VhZ2UgPSBmYWxsYmFja19sYW5ndWFnZQogICAgICAgIHNlbGYuX2NyZWF0ZV9wYXJhbXMgPSAoCiAgICAgICAgICAgIGRpY3Rpb25hcmllcywKICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICBzdG9yZSwKICAgICAgICAgICAgaWNvbiwKICAgICAgICAgICAgd2luZG93X2NsYXNzLAogICAgICAgICkKCiAgICBkZWYgaW5pdChzZWxmKToKICAgICAgICAiIiIKICAgICAgICBTdWJjbGFzcyB0aGlzIG1ldGhvZCB0byBpbml0aWFsaXplIHlvdXIgYXBwIHNwZWNpZmljIHBhcmFtZXRlcnMKICAgICAgICAiIiIKCiAgICBkZWYgc2V0X2xhbmd1YWdlKHNlbGYsIGxhbmc6IE9wdGlvbmFsW3N0cl0gPSBOb25lKToKICAgICAgICAiIiIKICAgICAgICBJbnN0YWxscyB0aGUgbGFuZ3VhZ2UgcGFzc2VkIGFzIGFyZ3VtZW50IG9yIHRoZSBhcHBsaWNhdGlvbnMKICAgICAgICBgLmZhbGxiYWNrX2xhbmd1YWdlYAogICAgICAgICIiIgogICAgICAgIHNlbGYuZGljdGlvbmFyaWVzLmdldCgKICAgICAgICAgICAgbGFuZ3VhZ2U9bGFuZywgZmFsbGJhY2tfbGFuZ3VhZ2U9c2VsZi5mYWxsYmFja19sYW5ndWFnZQogICAgICAgICkuaW5zdGFsbCgpCgogICAgZGVmIHNldHVwX3Rha3RrKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIEludGVybmFsIHRvIHNldCB1cCB0YWt0ayBjb21wb25lbnRzIGZvciBhcHAgaW5pdGlhbGl6YXRpb24KICAgICAgICAiIiIKICAgICAgICAoCiAgICAgICAgICAgIGRpY3Rpb25hcmllc19wYXRoLAogICAgICAgICAgICBfLAogICAgICAgICAgICBfc3RvcmUsCiAgICAgICAgICAgICpfXywKICAgICAgICApID0gc2VsZi5fY3JlYXRlX3BhcmFtcwogICAgICAgIGlmIGlzaW5zdGFuY2UoX3N0b3JlLCBzdG9yZS5TdG9yZSk6CiAgICAgICAgICAgIHNlbGYuX3N0b3JlID0gX3N0b3JlCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKF9zdG9yZSwgdHVwbGUpOgogICAgICAgICAgICBfc3RvcmUsIGRlZmF1bHQgPSBfc3RvcmUKICAgICAgICAgICAgaWYgX3N0b3JlIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBzZWxmLl9zdG9yZV9maWxlID0gTmFtZWRUZW1wb3JhcnlGaWxlKGRlbGV0ZT1GYWxzZSkKICAgICAgICAgICAgICAgIF9zdG9yZSA9IHNlbGYuX3N0b3JlX2ZpbGUubmFtZQogICAgICAgICAgICBzZWxmLl9zdG9yZSA9IHN0b3JlLlN0b3JlKF9zdG9yZSwgZGVmYXVsdD1kZWZhdWx0KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlZmF1bHQgPSB7fQogICAgICAgICAgICBpZiBfc3RvcmUgaXMgTm9uZToKICAgICAgICAgICAgICAgIHNlbGYuX3N0b3JlX2ZpbGUgPSBOYW1lZFRlbXBvcmFyeUZpbGUoZGVsZXRlPUZhbHNlKQogICAgICAgICAgICAgICAgX3N0b3JlID0gc2VsZi5fc3RvcmVfZmlsZS5uYW1lCiAgICAgICAgICAgIHNlbGYuX3N0b3JlID0gc3RvcmUuU3RvcmUoX3N0b3JlLCBkZWZhdWx0PWRlZmF1bHQpCiAgICAgICAgaWYgZGljdGlvbmFyaWVzX3BhdGggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuZGljdGlvbmFyaWVzID0gZGljdGlvbmFyeS5EaWN0aW9uYXJpZXMoZGljdGlvbmFyaWVzX3BhdGgpCiAgICAgICAgICAgIHNlbGYuc2V0X2xhbmd1YWdlKCkKICAgICAgICBpZiBzZWxmLm1lZGlhX3BhdGggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG1lZGlhLk1FRElBX0RJUiA9IFBhdGgoc2VsZi5tZWRpYV9wYXRoKQoKICAgIGRlZiBjcmVhdGUoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgQ3JlYXRlcyB0aGUgYXBwIGNvbnRhaW5lcgogICAgICAgICIiIgogICAgICAgICgKICAgICAgICAgICAgXywKICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICBfXywKICAgICAgICAgICAgaWNvbiwKICAgICAgICAgICAgd2luZG93X2NsYXNzLAogICAgICAgICkgPSBzZWxmLl9jcmVhdGVfcGFyYW1zCiAgICAgICAgaWYgaWNvbiBpcyBub3QgTm9uZToKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShpY29uLCBzdHIpOgogICAgICAgICAgICAgICAgc2VsZi5pY29uID0gbWVkaWEuZ2V0X2ltYWdlKGljb24pCiAgICAgICAgICAgICAgICBwYXJhbXNbImljb25waG90byJdID0gc2VsZi5pY29uLmZ1bGxfcGF0aAogICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UoaWNvbiwgbWVkaWEuSW1hZ2UpOgogICAgICAgICAgICAgICAgc2VsZi5pY29uID0gaWNvbgogICAgICAgICAgICAgICAgcGFyYW1zWyJpY29ucGhvdG8iXSA9IHNlbGYuaWNvbi5mdWxsX3BhdGgKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgZiJXcm9uZyBpY29uIHBhcmFtZXRlciB7aWNvbiFyfSB3YXMiCiAgICAgICAgICAgICAgICAgICAgZiIgcGFzc2VkIHRvIHtzZWxmLl9fY2xhc3NfXy5fX25hbWVfX30uX19pbml0X18iCiAgICAgICAgICAgICAgICApCiAgICAgICAgc2VsZi5yb290ID0gcm9vdCA9IHdpbmRvd19jbGFzcygqKnBhcmFtcykKICAgICAgICByb290LmNvbHVtbmNvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICByb290LnJvd2NvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICBpZiBzZWxmLm1lbnUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYubWVudS50b3BsZXZlbChyb290KQoKICAgICAgICBzZWxmLmxheW91dCA9IHNlbGYubGF5b3V0X2NsYXNzKCkKICAgICAgICBpZiBzZWxmLmxheW91dCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5sYXlvdXQucmVuZGVyKHNlbGYucm9vdCkKICAgICAgICAgICAgc2VsZi5sYXlvdXQuY29udGFpbmVyLmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKQogICAgICAgICAgICByZXR1cm4gc2VsZi5sYXlvdXRbIm91dGxldCJdLm91dGxldAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiByb290CgogICAgZGVmIHJ1bihzZWxmLCBlbnRyeTogc3RyID0gIi8iKToKICAgICAgICAiIiIKICAgICAgICBSdW5zIHRoZSBhcHAgd2l0aCB0aGUgc3BlY2lmaWVkIGVudHJ5IHBvaW50LgogICAgICAgIFRIZSBwYXNzZWQgYGVudHJ5YCBpcyBzZXQgYXMgZmlyc3QgcGFnZQogICAgICAgICIiIgogICAgICAgIHNlbGYuc2V0dXBfdGFrdGsoKQogICAgICAgIHJvb3QgPSBzZWxmLmNyZWF0ZSgpCiAgICAgICAgc2VsZi5pbml0KCkKICAgICAgICBmb3IgaGFuZGxlciBpbiBPTl9DUkVBVEVfSEFORExFUlM6CiAgICAgICAgICAgIGhhbmRsZXIoc2VsZikKICAgICAgICBpZiBzZWxmLmFkZHJlc3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYubGlzdGVuX2F0KHNlbGYuYWRkcmVzcykKICAgICAgICBzZWxmLnZpZXcgPSBwYWdlLlBhZ2VWaWV3KHJvb3QsIHNlbGYucGFnZXMsIHNlbGYuZ2V0X3N0b3JlKQogICAgICAgIHNlbGYudmlldy5nZW9tZXRyeSgpCiAgICAgICAgc2VsZi52aWV3LnVybChlbnRyeSkKICAgICAgICBzZWxmLnJvb3QubWFpbmxvb3AoKQoKICAgIGRlZiBfX2NhbGxfXygKICAgICAgICBzZWxmLAogICAgICAgIG1vZHVsZTogc3RyLAogICAgICAgIGZ1bmN0aW9uOiBPcHRpb25hbFtzdHJdID0gTm9uZSwKICAgICAgICByZWRpcmVjdDogYm9vbCA9IFRydWUsCiAgICAgICAgLywKICAgICAgICAqKnBhcmFtcywKICAgICk6CiAgICAgICAgIiIiCiAgICAgICAgUmVmZXIgdG8gdGhlIGFwcCdzIHZpZXcgcm91dGluZyBzeXN0ZW0gd2l0aCB0aGUgc3BlY2lmaWVkIHBhcmFtczoKCiAgICAgICAgOnBhcmFtIG1vZHVsZTogVGhlIHNsYXNoIHNlcGVyYXRlZCBwYXRoIHRvIHRoZSBtb2R1bGUKICAgICAgICA6cGFyYW0gZnVuY3Rpb246IG9wdGlvbmFsIGhhbmRsZXIgbmFtZSB0byBjYWxsCiAgICAgICAgOnBhcmFtIHJlZGlyZWN0OiBpbnN0cnVjdHMgdGhlIGFwcCB0byBmb2xsb3cgcmVkaXJlY3RzCiAgICAgICAgOnBhcmFtIHBhcmFtczogRXh0cmEgcGFyYW1ldGVycyBwYXNzZWQgdG8gdGhlIGhhbmRsZXIKICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmICJAIiBpbiBtb2R1bGUgb3IgIiMiIGluIG1vZHVsZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IobW9kdWxlLCBmIkRpZCB5b3UgbWVhbiBhcHAudXJsKC4uLik/IikKICAgICAgICAgICAgc2VsZi52aWV3KG1vZHVsZSwgZnVuY3Rpb24sIHBhcmFtcykKICAgICAgICBleGNlcHQgcGFnZS5SZWRpcmVjdCBhcyBlOgogICAgICAgICAgICB0YXJnZXQgPSBlLnVybAogICAgICAgICAgICBpZiByZWRpcmVjdDoKICAgICAgICAgICAgICAgIHNlbGYudmlldy51cmwodGFyZ2V0KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICBzZWxmLmxheW91dC51cGRhdGUoKQoKICAgIGRlZiB1cmwoc2VsZiwgdXJsOiBzdHIpOgogICAgICAgICIiIgogICAgICAgIFRhcmdldHMgdGhlIGFwcCB0byB0aGUgc3BlY2lmaWVkIHVybAogICAgICAgICIiIgogICAgICAgIHJldHVybiBzZWxmLnZpZXcudXJsKHVybCkKCiAgICBkZWYgZXhpdChzZWxmKToKICAgICAgICAiIiIKICAgICAgICBDbG9zZXMgdGhlIGFwcCB3aW5kb3cuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5yb290LmRlc3Ryb3koKQoKICAgIGRlZiBsaXN0ZW5fYXQoc2VsZiwgYWRkcmVzczogdHVwbGVbc3RyLCBpbnRdKToKICAgICAgICAiIiIKICAgICAgICBzdGFydHMgYSBgdGFrdGsuYXBwbGljYXRpb25fc2VydmVyLkFwcGxpY2F0aW9uU2VydmVyYCBhdCBzcGVjaWZpZWQKICAgICAgICBhZGRyZXNzCiAgICAgICAgIiIiCiAgICAgICAgYXBwbGljYXRpb25fc2VydmVyLkFwcGxpY2F0aW9uU2VydmVyKHNlbGYsIGFkZHJlc3MpLnRocmVhZF9zZXJ2ZSgpCgogICAgZGVmIHJlZGlyZWN0X3RvX3NpbmdsZXRvbihzZWxmLCB1cmw6IHN0ciA9ICIiKSAtPiBib29sOgogICAgICAgICIiIgogICAgICAgIFRyaWVzIHRvIHF1ZXJ5IHRoZSBhcHBzIGFkZHJlc3MgYW5kOgogICAgICAgIC0gaWYgc3VjY2VlZHMsIHNlbmRzIGEgcmVxdWVzdCB0byB0aGUgaW5zdGFuY2Ugd2l0aCB0aGUgcGFzc2VkIHVybAogICAgICAgIC0gaWYgZmFpbHMsIHN0YXJ0cyBhbiBpbnN0YW5jZSBvZiB0aGUgYXBwbGljYXRpb24KCiAgICAgICAgOnJldHVybnM6IEEgYm9vbGVhbiB0ZWxsaW5nIGlmIHRoZSBhcHAgaW5zdGFuY2Ugd2FzIHN0YXJ0ZWQuCiAgICAgICAgIiIiCiAgICAgICAgZnJvbSB1cmxsaWIucmVxdWVzdCBpbXBvcnQgdXJsb3BlbgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHVybG9wZW4oZiJodHRwOi8vbG9jYWxob3N0OntzZWxmLmFkZHJlc3NbMV19LyFjdXJyZW50IikucmVhZCgpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgc2VsZi5ydW4odXJsKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHVybG9wZW4oZiJodHRwOi8vbG9jYWxob3N0OntzZWxmLmFkZHJlc3NbMV19LyIgKyB1cmwubHN0cmlwKCIvIikpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBnZXRfc3RvcmUoc2VsZikgLT4gc3RvcmUuU3RvcmU6CiAgICAgICAgIiIiCiAgICAgICAgUmV0dXJucyB0aGUgYXBwbGljYXRpb24gc3RvcmUgaW5zdGFuY2UuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX3N0b3JlCg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABGHQAAAAAAAEYdAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "src/taktk/page.py",
			"settings":
			{
				"buffer_size": 8815,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"left_delete",
					null,
					"AQAAAI4DAAAAAAAAjgMAAAAAAAADAAAAYXBw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACOAwAAAAAAAJEDAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					1,
					"insert",
					{
						"characters": "store"
					},
					"BQAAAI4DAAAAAAAAjwMAAAAAAAAAAAAAjwMAAAAAAACQAwAAAAAAAAAAAACQAwAAAAAAAJEDAAAAAAAAAAAAAJEDAAAAAAAAkgMAAAAAAAAAAAAAkgMAAAAAAACTAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACOAwAAAAAAAI4DAAAAAAAAAAAAAAAA8L8"
				],
				[
					11,
					1,
					"left_delete",
					null,
					"AQAAAJYDAAAAAAAAlgMAAAAAAAALAAAAYXBwbGljYXRpb24",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACWAwAAAAAAAKEDAAAAAAAAAAAAAAAA8L8"
				],
				[
					12,
					1,
					"insert",
					{
						"characters": "store"
					},
					"BQAAAJYDAAAAAAAAlwMAAAAAAAAAAAAAlwMAAAAAAACYAwAAAAAAAAAAAACYAwAAAAAAAJkDAAAAAAAAAAAAAJkDAAAAAAAAmgMAAAAAAAAAAAAAmgMAAAAAAACbAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACWAwAAAAAAAJYDAAAAAAAAAAAAAAAA8L8"
				],
				[
					15,
					1,
					"left_delete",
					null,
					"AQAAAJwDAAAAAAAAnAMAAAAAAAALAAAAQXBwbGljYXRpb24",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACcAwAAAAAAAKcDAAAAAAAAAAAAAAAA8L8"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "Store"
					},
					"BQAAAJwDAAAAAAAAnQMAAAAAAAAAAAAAnQMAAAAAAACeAwAAAAAAAAAAAACeAwAAAAAAAJ8DAAAAAAAAAAAAAJ8DAAAAAAAAoAMAAAAAAAAAAAAAoAMAAAAAAAChAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACcAwAAAAAAAJwDAAAAAAAAAAAAAAAA8L8"
				],
				[
					30,
					1,
					"insert",
					{
						"characters": "_"
					},
					"AQAAAJsDAAAAAAAAnAMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACbAwAAAAAAAJsDAAAAAAAAAAAAAAAA8L8"
				],
				[
					33,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAARiIAAAAAAABGIgAAaW1wb3J0IGpzb24KaW1wb3J0IHJlCmltcG9ydCBzdHJpbmcKZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsCmZyb20gaW1wb3J0bGliIGltcG9ydCBpbXBvcnRfbW9kdWxlCmZyb20gbG9nZ2luZyBpbXBvcnQgZ2V0TG9nZ2VyCmZyb20gdGtpbnRlciBpbXBvcnQgVGssIFdpZGdldApmcm9tIHR5cGVzIGltcG9ydCBNb2R1bGVUeXBlCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIE9wdGlvbmFsCmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBwYXJzZV9xc2wsIHVybHBhcnNlCmZyb20gdXVpZCBpbXBvcnQgVVVJRAoKZnJvbSBweW9sb2FkIGltcG9ydCBhbm5vdGF0ZQoKZnJvbSAuIGltcG9ydCBhcHBsaWNhdGlvbiwgY29tcG9uZW50CmZyb20gLiBpbXBvcnQgc3RvcmUgYXMgc3RvcmVfCgpsb2cgPSBnZXRMb2dnZXIoX19uYW1lX18pCgoKSEFORExFUl9OQU1FID0gc2V0KHN0cmluZy5hc2NpaV9sZXR0ZXJzICsgIl8iKQpERUZBVUxUX0hBTkRMRVIgPSAiZGVmYXVsdCIKCgpAYW5ub3RhdGUKY2xhc3MgUGFnZVZpZXc6CiAgICAiIiIKICAgIEFwcGxpY3RhaW9ucyBwYWdlIHZpZXcsIHBlcmZvcm1zIHBhZ2Ugcm91dGluZywgY2FjaGluZyBhbmQgaGlzdG9yeSBmb3IgYQogICAgdGFrdGsgYXBwbGljYXRpb24uCiAgICAiIiIKCiAgICBoaXN0b3J5OiBsaXN0CiAgICBjdXJyZW50X3BhZ2U6IEFueQogICAgYXBwOiAiYXBwbGljYXRpb24uQXBwbGljYXRpb24iCiAgICBzdG9yZTogc3RvcmVfLlN0b3JlCiAgICBkZXN0cm95X2NhY2hlOiBpbnQKICAgIHBhY2thZ2U6IE1vZHVsZVR5cGUKICAgIGN1cnJlbnRfdXJsOiBPcHRpb25hbFtzdHJdCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgcGFyZW50OiBUayB8IFdpZGdldCwKICAgICAgICBwYWdlOiBNb2R1bGVUeXBlLAogICAgICAgIHN0b3JlOiAic3RvcmVfLlN0b3JlIiwKICAgICAgICBkZXN0cm95X2NhY2hlOiBpbnQgPSA1LAogICAgKToKICAgICAgICAiIiJcCiAgICAgICAgOnBhcmFtIHBhcmVudDogdGhlIHBhcmVudCB3aWRnZXQgdG8gdmlldyB0aGUgcGFnZXMgaW4sIHVzdWFsbHkgdGhlCiAgICAgICAgb3V0bGV0IG9mIGFuIGFwcHMgbGF5b3V0LgoKICAgICAgICA6cGFyYW0gcGFnZTogVGhlIG1vZHVsZSB0aGUgYXBwIHdpbGwgZmV0Y2ggcGFnZXMgZnJvbS4KCiAgICAgICAgOnBhcmFtIGRlc3Ryb3lfY2FjaGU6IEV4cGVyaW1lbnRhbCBkZXN0cm95IGNhY2hlCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5oaXN0b3J5ID0gW10KICAgICAgICBzZWxmLmN1cnJlbnRfcGFnZSA9IE5vbmUKICAgICAgICBzZWxmLnBhcmVudCA9IHBhcmVudAogICAgICAgIHNlbGYuY3VycmVudF93aWRnZXQgPSBOb25lCiAgICAgICAgc2VsZi5hcHAgPSBhcHAKICAgICAgICBzZWxmLnN0b3JlID0gYXBwLmdldF9zdG9yZSgpCiAgICAgICAgc2VsZi5kZXN0cm95X2NhY2hlID0gZGVzdHJveV9jYWNoZQogICAgICAgIHNlbGYucGFja2FnZSA9IHBhZ2UKICAgICAgICBzZWxmLmN1cnJlbnRfdXJsID0gTm9uZQoKICAgIGRlZiBnZW9tZXRyeShzZWxmKToKICAgICAgICAiIiJcCiAgICAgICAgUHJlcGFyZXMgdGhlIHBhcmVudCdzIGdlb21ldHJ5LgogICAgICAgICIiIgogICAgICAgIHNlbGYucGFyZW50LmNvbHVtbmNvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICBzZWxmLnBhcmVudC5yb3djb25maWd1cmUoMCwgd2VpZ2h0PTEpCgogICAgZGVmIHVybChzZWxmLCB1cmw6IHN0ciwgcmVkaXJlY3Q6IGJvb2wgPSBUcnVlKToKICAgICAgICAiIiIKICAgICAgICBUYXJnZXRzIHRoZSBhcHAgdG8gdGhlIHVybCBmb2xsb3dpbmcgcmVkaXJlY3RzIGV4Y2VwdAogICAgICAgIHJlZGlyZWN0IHBhcmFtZXRlciBzZXQgdG8gZmFsc2UuCgogICAgICAgIDpyYWlzZXMgdGFrdGsucGFnZXMuUmVkaXJlY3Q6IEluIGNhc2UgcmVkcmVjdCBzZXQgdG8gZmFsc2UgYW5kIGEKICAgICAgICByZWRpcmVjdCBvY2N1cmVkCiAgICAgICAgIiIiCiAgICAgICAgdGFyZ2V0ID0gdXJsCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5leGVjX3VybCh0YXJnZXQpCiAgICAgICAgICAgIGV4Y2VwdCBSZWRpcmVjdCBhcyByOgogICAgICAgICAgICAgICAgdGFyZ2V0ID0gci51cmwKICAgICAgICAgICAgICAgIGlmIG5vdCByZWRpcmVjdDoKICAgICAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiB2aWV3X2NvbXBvbmVudChzZWxmLCBjb21wb25lbnRzOiAidHVwbGUiLCAqLCBfY2FjaGU9e30pOgogICAgICAgIGlmIHNlbGYuY3VycmVudF9wYWdlIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuY3VycmVudF9wYWdlID0gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuY3VycmVudF9wYWdlICs9IDEKICAgICAgICBjdXJyZW50ID0gc2VsZi5jdXJyZW50X3dpZGdldAogICAgICAgIHNlbGYuaGlzdG9yeS5pbnNlcnQoc2VsZi5jdXJyZW50X3BhZ2UsIGNvbXBvbmVudHMpCiAgICAgICAgcGFyZW50ID0gc2VsZi5wYXJlbnQKICAgICAgICBtYXN0ZXIgPSBOb25lCiAgICAgICAgZm9yIGNvbXBvbmVudCBpbiBjb21wb25lbnRzOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGNvbXBvbmVudCwgdHlwZSk6CiAgICAgICAgICAgICAgICBpZiBjb21wb25lbnQgbm90IGluIF9jYWNoZToKICAgICAgICAgICAgICAgICAgICBfY2FjaGVbY29tcG9uZW50XSA9IGNvbXBvbmVudCgpCiAgICAgICAgICAgICAgICBjb21wb25lbnQgPSBfY2FjaGVbY29tcG9uZW50XQoKICAgICAgICAgICAgY29tcG9uZW50ID0gY29tcG9uZW50CiAgICAgICAgICAgIHBhcmVudC5jb2x1bW5jb25maWd1cmUoMCwgd2VpZ2h0PTEpCiAgICAgICAgICAgIHBhcmVudC5yb3djb25maWd1cmUoMCwgd2VpZ2h0PTEpCiAgICAgICAgICAgIGNvbXBvbmVudC5yZW5kZXIocGFyZW50KQogICAgICAgICAgICBjb250YWluZXIgPSBjb21wb25lbnQuY29udGFpbmVyCiAgICAgICAgICAgIGNvbnRhaW5lci5ncmlkKGNvbHVtbj0wLCByb3c9MCwgc3RpY2t5PSJuc2V3IikKICAgICAgICAgICAgbWFzdGVyID0gbWFzdGVyIG9yIGNvbnRhaW5lcgogICAgICAgICAgICBwYXJlbnQgPSBjb21wb25lbnQub3V0bGV0CiAgICAgICAgc2VsZi5jdXJyZW50X3dpZGdldCA9IG1hc3RlcgogICAgICAgIGlmIGN1cnJlbnQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuZGVzdHJveV9sYXRlcihtYXN0ZXIpCgogICAgZGVmIGRlc3Ryb3lfbGF0ZXIoc2VsZiwgd2lkZ2V0LCBjYWNoZT1bXSk6CiAgICAgICAgY2FjaGUuYXBwZW5kKHdpZGdldCkKICAgICAgICBpZiBsZW4oY2FjaGUpID4gc2VsZi5kZXN0cm95X2NhY2hlOgogICAgICAgICAgICBjYWNoZS5wb3AoMCkuZGVzdHJveSgpCgogICAgZGVmIGJhY2soc2VsZik6CiAgICAgICAgaWYgc2VsZi5jdXJyZW50X3BhZ2UgPiAwOgogICAgICAgICAgICBzZWxmLmZvY3VzX3BhZ2Uoc2VsZi5jdXJyZW50X3BhZ2UgLSAxKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBmb3J3YXJkKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY3VycmVudF9wYWdlIDwgbGVuKHNlbGYuaGlzdG9yeSkgLSAxOgogICAgICAgICAgICBzZWxmLmZvY3VzX3BhZ2Uoc2VsZi5jdXJyZW50X3BhZ2UgKyAxKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBmb2N1c19wYWdlKHNlbGYsIGlkeCk6CiAgICAgICAgcGFnZSA9IHNlbGYuaGlzdG9yeVtpZHhdCiAgICAgICAgaWYgc2VsZi5jdXJyZW50X3dpZGdldCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5jdXJyZW50X3dpZGdldC5kZXN0cm95KCkKICAgICAgICBzZWxmLmhpc3RvcnlbaWR4XS5yZW5kZXIoc2VsZi5wYXJlbnQpCiAgICAgICAgc2VsZi5jdXJyZW50X3dpZGdldCA9IHNlbGYuaGlzdG9yeVtpZHhdLmNvbnRhaW5lcgogICAgICAgIHNlbGYuY3VycmVudF93aWRnZXQuZ3JpZChjb2x1bW49MCwgcm93PTAsIHN0aWNreT0ibnNldyIpCiAgICAgICAgc2VsZi5jdXJyZW50X3BhZ2UgPSBpZHgKCiAgICBkZWYgZXhlY191cmwoc2VsZiwgY21kKToKICAgICAgICBpZiBjbWQuc3RyaXAoIi8iKSA9PSAiIWN1cnJlbnQiOgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgTm9uZSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAib2siOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICJ1cmwiOiBzZWxmLmN1cnJlbnRfdXJsLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKQogICAgICAgIGVsaWYgY21kLnN0cmlwKCIvIikgPT0gIiFiYWNrIjoKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIE5vbmUsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm9rIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAiY2hhbmdlZCI6IHNlbGYuYmFjaygpLAogICAgICAgICAgICAgICAgICAgICJ1cmwiOiBzZWxmLmN1cnJlbnRfdXJsLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKQogICAgICAgIGVsaWYgY21kLnN0cmlwKCIvIikgPT0gIiFmb3J3YXJkIjoKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIE5vbmUsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm9rIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAiY2hhbmdlZCI6IHNlbGYuZm9yd2FyZCgpLAogICAgICAgICAgICAgICAgICAgICJ1cmwiOiBzZWxmLmN1cnJlbnRfdXJsLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHBhcnNlZCA9IHVybHBhcnNlKGNtZCkKICAgICAgICAgICAgYXJncyA9IHtrOiBqc29uLmxvYWRzKHYpIGZvciBrLCB2IGluIHBhcnNlX3FzbChwYXJzZWQucXVlcnkpfQogICAgICAgICAgICBoYW5kbGVyID0gcGFyc2VkLmZyYWdtZW50CiAgICAgICAgICAgIHBhdGggPSBwYXJzZWQucGF0aAogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAiQCIgaW4gcGF0aAogICAgICAgICAgICAgICAgYW5kIGxlbihzZXQocGF0aFtwYXRoLmluZGV4KCJAIikgKyAxIDpdKSAtIEhBTkRMRVJfTkFNRSkgPT0gMAogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgcGF0aCwgaGFuZGxlciA9IHBhdGgucnNwbGl0KCJAIiwgMSkKICAgICAgICAgICAgc2VsZi5jdXJyZW50X3VybCA9IHBhcnNlZC5wYXRoCiAgICAgICAgICAgIHJldHVybiBzZWxmKHBhdGgsIGhhbmRsZXIsIGFyZ3MpCgogICAgZGVmIF9fY2FsbF9fKHNlbGYsIG1vZHVsZSwgaGFuZGxlciwgcGFyYW1zPXt9LCAvLCAqKmt3cGFyYW1zKToKICAgICAgICBmcm9tIC5jb21wb25lbnQgaW1wb3J0IENvbXBvbmVudAoKICAgICAgICBpZiBpc2luc3RhbmNlKG1vZHVsZSwgc3RyKToKICAgICAgICAgICAgbW9kdWxlLCB1cmxwYXJhbXMsIGxheW91dHMgPSBzZWxmLmltcG9ydF9tb2R1bGUobW9kdWxlKQogICAgICAgIHRyeToKICAgICAgICAgICAgZnVuY3Rpb24gPSBnZXRhdHRyKG1vZHVsZSwgaGFuZGxlciBvciBERUZBVUxUX0hBTkRMRVIpCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIEVycm9yNDA0KGUpCiAgICAgICAgaHR0cCA9IGNvbXAgPSBOb25lCiAgICAgICAgcGFnZSA9IGZ1bmN0aW9uKAogICAgICAgICAgICBzZWxmLnN0b3JlLAogICAgICAgICAgICAqdXJscGFyYW1zLAogICAgICAgICAgICAqKmt3cGFyYW1zLAogICAgICAgICkKICAgICAgICBpZiBwYWdlIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiAoTm9uZSwgTm9uZSkKICAgICAgICBlbGlmIGlzaW5zdGFuY2UocGFnZSwgdHVwbGUpOgogICAgICAgICAgICBjb21wLCBodHRwID0gcGFnZQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShwYWdlLCBDb21wb25lbnQpOgogICAgICAgICAgICBjb21wID0gcGFnZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGh0dHAgPSBwYWdlCiAgICAgICAgaWYgY29tcCBpcyBub3QgTm9uZToKICAgICAgICAgICAgbGF5b3V0cy5hcHBlbmQoY29tcCkKICAgICAgICAgICAgc2VsZi52aWV3X2NvbXBvbmVudCh0dXBsZShsYXlvdXRzKSkKICAgICAgICByZXR1cm4gKHR1cGxlKGxheW91dHMpLCBodHRwKQoKICAgIGRlZiBpbXBvcnRfbW9kdWxlKHNlbGYsIHBhdGgpOgogICAgICAgIG1vZHVsZSA9IHNlbGYucGFja2FnZQogICAgICAgIHBhcmFtcyA9IFtdCiAgICAgICAgbGF5b3V0cyA9IFtdCiAgICAgICAgaWYgaGFzYXR0cihtb2R1bGUsICJsYXlvdXQiKToKICAgICAgICAgICAgbGF5b3V0cy5hcHBlbmQobW9kdWxlLmxheW91dCkKICAgICAgICBmb3IgcGFja2FnZSBpbiBwYXRoLnN0cmlwKCIvIikuc3BsaXQoIi8iKToKICAgICAgICAgICAgaWYgbm90IHBhY2thZ2Uuc3RyaXAoKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG1vZHVsZSA9IGltcG9ydF9tb2R1bGUobW9kdWxlLl9fcGFja2FnZV9fICsgIi4iICsgcGFja2FnZSkKICAgICAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICAgICAgZm9yIHJlZ2V4LCBuYW1lLCBjb252ZXJ0ZXIgaW4gVVJMUEFUVEVSTlM6CiAgICAgICAgICAgICAgICAgICAgaWYgbWF0Y2ggOj0gcmVnZXguZnVsbG1hdGNoKHBhY2thZ2UpOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGUgPSBpbXBvcnRfbW9kdWxlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5fX3BhY2thZ2VfXyArICIuIiArIG5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbSA9IGNvbnZlcnRlcihwYWNrYWdlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIEVycm9yNDA0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChwYXJhbSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEVycm9yNDA0KHBhdGgpCiAgICAgICAgICAgIGlmIGhhc2F0dHIobW9kdWxlLCAibGF5b3V0Iik6CiAgICAgICAgICAgICAgICBsYXlvdXRzLmFwcGVuZChtb2R1bGUubGF5b3V0KQoKICAgICAgICByZXR1cm4gbW9kdWxlLCBwYXJhbXMsIGxheW91dHMKCgpjbGFzcyBFcnJvcjQwNChWYWx1ZUVycm9yKToKICAgIHBhc3MKCgpjbGFzcyBSZWRpcmVjdChFeGNlcHRpb24pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHVybDogc3RyKToKICAgICAgICBzZWxmLnVybCA9IHVybAogICAgICAgIHN1cGVyKCkuX19pbml0X18oKQoKClNIT1JUQ1VUUyA9IHsKICAgICJpbnQiOiByZS5jb21waWxlKHIiXlxkKyQiKSwKICAgICJkZWNpbWFsIjogcmUuY29tcGlsZShyIl5cZCtcLlxkKyQiKSwKICAgICJzdHIiOiByZS5jb21waWxlKHIiLisiKSwKICAgICJ1dWlkIjogcmUuY29tcGlsZSgKICAgICAgICByIltcZGEtZl17OH1cLVtcZGEtZl17NH1cLVtcZGEtZl17NH1cLVtcZGEtZl17NH1cLVtcZGEtZl17MTJ9IiwKICAgICksCn0KVVJMUEFUVEVSTlMgPSBbCiAgICAoImludCIsIGludCksCiAgICAoImRlY2ltYWwiLCBEZWNpbWFsKSwKICAgICgic3RyIiwgc3RyKSwKICAgICgidXVpZCIsIFVVSUQpLApdClVSTFBBVFRFUk5TID0gWyhTSE9SVENVVFNbbl0sIG4sIGMpIGZvciBuLCBjIGluIFVSTFBBVFRFUk5TXQoKCmRlZiByZWdpc3Rlcl91cmxwYXR0ZXJuKHJlZ2V4LCBjb252ZXJ0ZXI9Tm9uZSwgbmFtZT1Ob25lLCBwb3NpdGlvbj0tMik6CiAgICBkZWYgcmVnaXN0ZXJyZXIoZnVuYyk6CiAgICAgICAgbm9ubG9jYWwgbmFtZSwgcmVnZXgKICAgICAgICBpZiBuYW1lIGlzIE5vbmU6CiAgICAgICAgICAgIG5hbWUgPSBmdW5jLl9fbmFtZV9fLmxvd2VyKCkKICAgICAgICBpZiBsZW4ocmVnZXgpID4gMiBhbmQgcmVnZXhbMF0gPT0gIjwiIGFuZCByZWdleFstMV0gPT0gIj4iOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZWdleCA9IFNIT1JUQ1VUU1tyZWdleFsxOi0xXV0KICAgICAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiVW5rbm93biB1cmwgc2hvcnRjdXQ6IHtyZWdleCFyfSIpCiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShyZWdleCwgcmUuUGF0dGVybik6CiAgICAgICAgICAgIHJlZ2V4ID0gcmUuY29tcGlsZShyZWdleCkKICAgICAgICBVUkxQQVRURVJOUy5pbnNlcnQocG9zaXRpb24sIChyZWdleCwgIl8iICsgbmFtZSwgZnVuYykpCgogICAgaWYgY29udmVydGVyIGlzIG5vdCBOb25lOgogICAgICAgIHJldHVybiByZWdpc3RlcnJlcihjb252ZXJ0ZXIpCiAgICBlbHNlOgogICAgICAgIHJldHVybiByZWdpc3RlcnJlcgo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACcAwAAAAAAAJwDAAAAAAAAAAAAAAAA8L8"
				],
				[
					40,
					1,
					"left_delete",
					null,
					"AgAAAFoFAAAAAAAAWgUAAAAAAAADAAAAYXBwVAUAAAAAAABUBQAAAAAAAAMAAABhcHA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAIAAABUBQAAAAAAAFcFAAAAAAAAAAAAAAAA8L9aBQAAAAAAAF0FAAAAAAAAAAAAAAAA8L8"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "store"
					},
					"CgAAAFcFAAAAAAAAWAUAAAAAAAAAAAAAVAUAAAAAAABVBQAAAAAAAAAAAABZBQAAAAAAAFoFAAAAAAAAAAAAAFUFAAAAAAAAVgUAAAAAAAAAAAAAWwUAAAAAAABcBQAAAAAAAAAAAABWBQAAAAAAAFcFAAAAAAAAAAAAAF0FAAAAAAAAXgUAAAAAAAAAAAAAVwUAAAAAAABYBQAAAAAAAAAAAABfBQAAAAAAAGAFAAAAAAAAAAAAAFgFAAAAAAAAWQUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAIAAABUBQAAAAAAAFQFAAAAAAAAAAAAAAAA8L9XBQAAAAAAAFcFAAAAAAAAAAAAAAAA8L8"
				],
				[
					44,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAASiIAAAAAAABKIgAAaW1wb3J0IGpzb24KaW1wb3J0IHJlCmltcG9ydCBzdHJpbmcKZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsCmZyb20gaW1wb3J0bGliIGltcG9ydCBpbXBvcnRfbW9kdWxlCmZyb20gbG9nZ2luZyBpbXBvcnQgZ2V0TG9nZ2VyCmZyb20gdGtpbnRlciBpbXBvcnQgVGssIFdpZGdldApmcm9tIHR5cGVzIGltcG9ydCBNb2R1bGVUeXBlCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIE9wdGlvbmFsCmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBwYXJzZV9xc2wsIHVybHBhcnNlCmZyb20gdXVpZCBpbXBvcnQgVVVJRAoKZnJvbSBweW9sb2FkIGltcG9ydCBhbm5vdGF0ZQoKZnJvbSAuIGltcG9ydCBhcHBsaWNhdGlvbiwgY29tcG9uZW50CmZyb20gLiBpbXBvcnQgc3RvcmUgYXMgc3RvcmVfCgpsb2cgPSBnZXRMb2dnZXIoX19uYW1lX18pCgoKSEFORExFUl9OQU1FID0gc2V0KHN0cmluZy5hc2NpaV9sZXR0ZXJzICsgIl8iKQpERUZBVUxUX0hBTkRMRVIgPSAiZGVmYXVsdCIKCgpAYW5ub3RhdGUKY2xhc3MgUGFnZVZpZXc6CiAgICAiIiIKICAgIEFwcGxpY3RhaW9ucyBwYWdlIHZpZXcsIHBlcmZvcm1zIHBhZ2Ugcm91dGluZywgY2FjaGluZyBhbmQgaGlzdG9yeSBmb3IgYQogICAgdGFrdGsgYXBwbGljYXRpb24uCiAgICAiIiIKCiAgICBoaXN0b3J5OiBsaXN0CiAgICBjdXJyZW50X3BhZ2U6IEFueQogICAgYXBwOiAiYXBwbGljYXRpb24uQXBwbGljYXRpb24iCiAgICBzdG9yZTogc3RvcmVfLlN0b3JlCiAgICBkZXN0cm95X2NhY2hlOiBpbnQKICAgIHBhY2thZ2U6IE1vZHVsZVR5cGUKICAgIGN1cnJlbnRfdXJsOiBPcHRpb25hbFtzdHJdCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgcGFyZW50OiBUayB8IFdpZGdldCwKICAgICAgICBwYWdlOiBNb2R1bGVUeXBlLAogICAgICAgIHN0b3JlOiAic3RvcmVfLlN0b3JlIiwKICAgICAgICBkZXN0cm95X2NhY2hlOiBpbnQgPSA1LAogICAgKToKICAgICAgICAiIiJcCiAgICAgICAgOnBhcmFtIHBhcmVudDogdGhlIHBhcmVudCB3aWRnZXQgdG8gdmlldyB0aGUgcGFnZXMgaW4sIHVzdWFsbHkgdGhlCiAgICAgICAgb3V0bGV0IG9mIGFuIGFwcHMgbGF5b3V0LgoKICAgICAgICA6cGFyYW0gcGFnZTogVGhlIG1vZHVsZSB0aGUgYXBwIHdpbGwgZmV0Y2ggcGFnZXMgZnJvbS4KCiAgICAgICAgOnBhcmFtIGRlc3Ryb3lfY2FjaGU6IEV4cGVyaW1lbnRhbCBkZXN0cm95IGNhY2hlCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5oaXN0b3J5ID0gW10KICAgICAgICBzZWxmLmN1cnJlbnRfcGFnZSA9IE5vbmUKICAgICAgICBzZWxmLnBhcmVudCA9IHBhcmVudAogICAgICAgIHNlbGYuY3VycmVudF93aWRnZXQgPSBOb25lCiAgICAgICAgc2VsZi5zdG9yZSA9IHN0b3JlCiAgICAgICAgc2VsZi5zdG9yZSA9IGFwcC5nZXRfc3RvcmUoKQogICAgICAgIHNlbGYuZGVzdHJveV9jYWNoZSA9IGRlc3Ryb3lfY2FjaGUKICAgICAgICBzZWxmLnBhY2thZ2UgPSBwYWdlCiAgICAgICAgc2VsZi5jdXJyZW50X3VybCA9IE5vbmUKCiAgICBkZWYgZ2VvbWV0cnkoc2VsZik6CiAgICAgICAgIiIiXAogICAgICAgIFByZXBhcmVzIHRoZSBwYXJlbnQncyBnZW9tZXRyeS4KICAgICAgICAiIiIKICAgICAgICBzZWxmLnBhcmVudC5jb2x1bW5jb25maWd1cmUoMCwgd2VpZ2h0PTEpCiAgICAgICAgc2VsZi5wYXJlbnQucm93Y29uZmlndXJlKDAsIHdlaWdodD0xKQoKICAgIGRlZiB1cmwoc2VsZiwgdXJsOiBzdHIsIHJlZGlyZWN0OiBib29sID0gVHJ1ZSk6CiAgICAgICAgIiIiCiAgICAgICAgVGFyZ2V0cyB0aGUgYXBwIHRvIHRoZSB1cmwgZm9sbG93aW5nIHJlZGlyZWN0cyBleGNlcHQKICAgICAgICByZWRpcmVjdCBwYXJhbWV0ZXIgc2V0IHRvIGZhbHNlLgoKICAgICAgICA6cmFpc2VzIHRha3RrLnBhZ2VzLlJlZGlyZWN0OiBJbiBjYXNlIHJlZHJlY3Qgc2V0IHRvIGZhbHNlIGFuZCBhCiAgICAgICAgcmVkaXJlY3Qgb2NjdXJlZAogICAgICAgICIiIgogICAgICAgIHRhcmdldCA9IHVybAogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNlbGYuZXhlY191cmwodGFyZ2V0KQogICAgICAgICAgICBleGNlcHQgUmVkaXJlY3QgYXMgcjoKICAgICAgICAgICAgICAgIHRhcmdldCA9IHIudXJsCiAgICAgICAgICAgICAgICBpZiBub3QgcmVkaXJlY3Q6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgdmlld19jb21wb25lbnQoc2VsZiwgY29tcG9uZW50czogInR1cGxlIiwgKiwgX2NhY2hlPXt9KToKICAgICAgICBpZiBzZWxmLmN1cnJlbnRfcGFnZSBpcyBOb25lOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfcGFnZSA9IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfcGFnZSArPSAxCiAgICAgICAgY3VycmVudCA9IHNlbGYuY3VycmVudF93aWRnZXQKICAgICAgICBzZWxmLmhpc3RvcnkuaW5zZXJ0KHNlbGYuY3VycmVudF9wYWdlLCBjb21wb25lbnRzKQogICAgICAgIHBhcmVudCA9IHNlbGYucGFyZW50CiAgICAgICAgbWFzdGVyID0gTm9uZQogICAgICAgIGZvciBjb21wb25lbnQgaW4gY29tcG9uZW50czoKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShjb21wb25lbnQsIHR5cGUpOgogICAgICAgICAgICAgICAgaWYgY29tcG9uZW50IG5vdCBpbiBfY2FjaGU6CiAgICAgICAgICAgICAgICAgICAgX2NhY2hlW2NvbXBvbmVudF0gPSBjb21wb25lbnQoKQogICAgICAgICAgICAgICAgY29tcG9uZW50ID0gX2NhY2hlW2NvbXBvbmVudF0KCiAgICAgICAgICAgIGNvbXBvbmVudCA9IGNvbXBvbmVudAogICAgICAgICAgICBwYXJlbnQuY29sdW1uY29uZmlndXJlKDAsIHdlaWdodD0xKQogICAgICAgICAgICBwYXJlbnQucm93Y29uZmlndXJlKDAsIHdlaWdodD0xKQogICAgICAgICAgICBjb21wb25lbnQucmVuZGVyKHBhcmVudCkKICAgICAgICAgICAgY29udGFpbmVyID0gY29tcG9uZW50LmNvbnRhaW5lcgogICAgICAgICAgICBjb250YWluZXIuZ3JpZChjb2x1bW49MCwgcm93PTAsIHN0aWNreT0ibnNldyIpCiAgICAgICAgICAgIG1hc3RlciA9IG1hc3RlciBvciBjb250YWluZXIKICAgICAgICAgICAgcGFyZW50ID0gY29tcG9uZW50Lm91dGxldAogICAgICAgIHNlbGYuY3VycmVudF93aWRnZXQgPSBtYXN0ZXIKICAgICAgICBpZiBjdXJyZW50IGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmRlc3Ryb3lfbGF0ZXIobWFzdGVyKQoKICAgIGRlZiBkZXN0cm95X2xhdGVyKHNlbGYsIHdpZGdldCwgY2FjaGU9W10pOgogICAgICAgIGNhY2hlLmFwcGVuZCh3aWRnZXQpCiAgICAgICAgaWYgbGVuKGNhY2hlKSA+IHNlbGYuZGVzdHJveV9jYWNoZToKICAgICAgICAgICAgY2FjaGUucG9wKDApLmRlc3Ryb3koKQoKICAgIGRlZiBiYWNrKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY3VycmVudF9wYWdlID4gMDoKICAgICAgICAgICAgc2VsZi5mb2N1c19wYWdlKHNlbGYuY3VycmVudF9wYWdlIC0gMSkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZm9yd2FyZChzZWxmKToKICAgICAgICBpZiBzZWxmLmN1cnJlbnRfcGFnZSA8IGxlbihzZWxmLmhpc3RvcnkpIC0gMToKICAgICAgICAgICAgc2VsZi5mb2N1c19wYWdlKHNlbGYuY3VycmVudF9wYWdlICsgMSkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZm9jdXNfcGFnZShzZWxmLCBpZHgpOgogICAgICAgIHBhZ2UgPSBzZWxmLmhpc3RvcnlbaWR4XQogICAgICAgIGlmIHNlbGYuY3VycmVudF93aWRnZXQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuY3VycmVudF93aWRnZXQuZGVzdHJveSgpCiAgICAgICAgc2VsZi5oaXN0b3J5W2lkeF0ucmVuZGVyKHNlbGYucGFyZW50KQogICAgICAgIHNlbGYuY3VycmVudF93aWRnZXQgPSBzZWxmLmhpc3RvcnlbaWR4XS5jb250YWluZXIKICAgICAgICBzZWxmLmN1cnJlbnRfd2lkZ2V0LmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKQogICAgICAgIHNlbGYuY3VycmVudF9wYWdlID0gaWR4CgogICAgZGVmIGV4ZWNfdXJsKHNlbGYsIGNtZCk6CiAgICAgICAgaWYgY21kLnN0cmlwKCIvIikgPT0gIiFjdXJyZW50IjoKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIE5vbmUsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm9rIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAidXJsIjogc2VsZi5jdXJyZW50X3VybCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICkKICAgICAgICBlbGlmIGNtZC5zdHJpcCgiLyIpID09ICIhYmFjayI6CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBOb25lLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJvayI6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgImNoYW5nZWQiOiBzZWxmLmJhY2soKSwKICAgICAgICAgICAgICAgICAgICAidXJsIjogc2VsZi5jdXJyZW50X3VybCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICkKICAgICAgICBlbGlmIGNtZC5zdHJpcCgiLyIpID09ICIhZm9yd2FyZCI6CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBOb25lLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJvayI6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgImNoYW5nZWQiOiBzZWxmLmZvcndhcmQoKSwKICAgICAgICAgICAgICAgICAgICAidXJsIjogc2VsZi5jdXJyZW50X3VybCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwYXJzZWQgPSB1cmxwYXJzZShjbWQpCiAgICAgICAgICAgIGFyZ3MgPSB7azoganNvbi5sb2Fkcyh2KSBmb3IgaywgdiBpbiBwYXJzZV9xc2wocGFyc2VkLnF1ZXJ5KX0KICAgICAgICAgICAgaGFuZGxlciA9IHBhcnNlZC5mcmFnbWVudAogICAgICAgICAgICBwYXRoID0gcGFyc2VkLnBhdGgKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgIkAiIGluIHBhdGgKICAgICAgICAgICAgICAgIGFuZCBsZW4oc2V0KHBhdGhbcGF0aC5pbmRleCgiQCIpICsgMSA6XSkgLSBIQU5ETEVSX05BTUUpID09IDAKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIHBhdGgsIGhhbmRsZXIgPSBwYXRoLnJzcGxpdCgiQCIsIDEpCiAgICAgICAgICAgIHNlbGYuY3VycmVudF91cmwgPSBwYXJzZWQucGF0aAogICAgICAgICAgICByZXR1cm4gc2VsZihwYXRoLCBoYW5kbGVyLCBhcmdzKQoKICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBtb2R1bGUsIGhhbmRsZXIsIHBhcmFtcz17fSwgLywgKiprd3BhcmFtcyk6CiAgICAgICAgZnJvbSAuY29tcG9uZW50IGltcG9ydCBDb21wb25lbnQKCiAgICAgICAgaWYgaXNpbnN0YW5jZShtb2R1bGUsIHN0cik6CiAgICAgICAgICAgIG1vZHVsZSwgdXJscGFyYW1zLCBsYXlvdXRzID0gc2VsZi5pbXBvcnRfbW9kdWxlKG1vZHVsZSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGZ1bmN0aW9uID0gZ2V0YXR0cihtb2R1bGUsIGhhbmRsZXIgb3IgREVGQVVMVF9IQU5ETEVSKQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlOgogICAgICAgICAgICByYWlzZSBFcnJvcjQwNChlKQogICAgICAgIGh0dHAgPSBjb21wID0gTm9uZQogICAgICAgIHBhZ2UgPSBmdW5jdGlvbigKICAgICAgICAgICAgc2VsZi5zdG9yZSwKICAgICAgICAgICAgKnVybHBhcmFtcywKICAgICAgICAgICAgKiprd3BhcmFtcywKICAgICAgICApCiAgICAgICAgaWYgcGFnZSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gKE5vbmUsIE5vbmUpCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHBhZ2UsIHR1cGxlKToKICAgICAgICAgICAgY29tcCwgaHR0cCA9IHBhZ2UKICAgICAgICBlbGlmIGlzaW5zdGFuY2UocGFnZSwgQ29tcG9uZW50KToKICAgICAgICAgICAgY29tcCA9IHBhZ2UKICAgICAgICBlbHNlOgogICAgICAgICAgICBodHRwID0gcGFnZQogICAgICAgIGlmIGNvbXAgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGxheW91dHMuYXBwZW5kKGNvbXApCiAgICAgICAgICAgIHNlbGYudmlld19jb21wb25lbnQodHVwbGUobGF5b3V0cykpCiAgICAgICAgcmV0dXJuICh0dXBsZShsYXlvdXRzKSwgaHR0cCkKCiAgICBkZWYgaW1wb3J0X21vZHVsZShzZWxmLCBwYXRoKToKICAgICAgICBtb2R1bGUgPSBzZWxmLnBhY2thZ2UKICAgICAgICBwYXJhbXMgPSBbXQogICAgICAgIGxheW91dHMgPSBbXQogICAgICAgIGlmIGhhc2F0dHIobW9kdWxlLCAibGF5b3V0Iik6CiAgICAgICAgICAgIGxheW91dHMuYXBwZW5kKG1vZHVsZS5sYXlvdXQpCiAgICAgICAgZm9yIHBhY2thZ2UgaW4gcGF0aC5zdHJpcCgiLyIpLnNwbGl0KCIvIik6CiAgICAgICAgICAgIGlmIG5vdCBwYWNrYWdlLnN0cmlwKCk6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBtb2R1bGUgPSBpbXBvcnRfbW9kdWxlKG1vZHVsZS5fX3BhY2thZ2VfXyArICIuIiArIHBhY2thZ2UpCiAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgICAgIGZvciByZWdleCwgbmFtZSwgY29udmVydGVyIGluIFVSTFBBVFRFUk5TOgogICAgICAgICAgICAgICAgICAgIGlmIG1hdGNoIDo9IHJlZ2V4LmZ1bGxtYXRjaChwYWNrYWdlKToKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlID0gaW1wb3J0X21vZHVsZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGUuX19wYWNrYWdlX18gKyAiLiIgKyBuYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW0gPSBjb252ZXJ0ZXIocGFja2FnZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBFcnJvcjQwNCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQocGFyYW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByYWlzZSBFcnJvcjQwNChwYXRoKQogICAgICAgICAgICBpZiBoYXNhdHRyKG1vZHVsZSwgImxheW91dCIpOgogICAgICAgICAgICAgICAgbGF5b3V0cy5hcHBlbmQobW9kdWxlLmxheW91dCkKCiAgICAgICAgcmV0dXJuIG1vZHVsZSwgcGFyYW1zLCBsYXlvdXRzCgoKY2xhc3MgRXJyb3I0MDQoVmFsdWVFcnJvcik6CiAgICBwYXNzCgoKY2xhc3MgUmVkaXJlY3QoRXhjZXB0aW9uKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB1cmw6IHN0cik6CiAgICAgICAgc2VsZi51cmwgPSB1cmwKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCkKCgpTSE9SVENVVFMgPSB7CiAgICAiaW50IjogcmUuY29tcGlsZShyIl5cZCskIiksCiAgICAiZGVjaW1hbCI6IHJlLmNvbXBpbGUociJeXGQrXC5cZCskIiksCiAgICAic3RyIjogcmUuY29tcGlsZShyIi4rIiksCiAgICAidXVpZCI6IHJlLmNvbXBpbGUoCiAgICAgICAgciJbXGRhLWZdezh9XC1bXGRhLWZdezR9XC1bXGRhLWZdezR9XC1bXGRhLWZdezR9XC1bXGRhLWZdezEyfSIsCiAgICApLAp9ClVSTFBBVFRFUk5TID0gWwogICAgKCJpbnQiLCBpbnQpLAogICAgKCJkZWNpbWFsIiwgRGVjaW1hbCksCiAgICAoInN0ciIsIHN0ciksCiAgICAoInV1aWQiLCBVVUlEKSwKXQpVUkxQQVRURVJOUyA9IFsoU0hPUlRDVVRTW25dLCBuLCBjKSBmb3IgbiwgYyBpbiBVUkxQQVRURVJOU10KCgpkZWYgcmVnaXN0ZXJfdXJscGF0dGVybihyZWdleCwgY29udmVydGVyPU5vbmUsIG5hbWU9Tm9uZSwgcG9zaXRpb249LTIpOgogICAgZGVmIHJlZ2lzdGVycmVyKGZ1bmMpOgogICAgICAgIG5vbmxvY2FsIG5hbWUsIHJlZ2V4CiAgICAgICAgaWYgbmFtZSBpcyBOb25lOgogICAgICAgICAgICBuYW1lID0gZnVuYy5fX25hbWVfXy5sb3dlcigpCiAgICAgICAgaWYgbGVuKHJlZ2V4KSA+IDIgYW5kIHJlZ2V4WzBdID09ICI8IiBhbmQgcmVnZXhbLTFdID09ICI+IjoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmVnZXggPSBTSE9SVENVVFNbcmVnZXhbMTotMV1dCiAgICAgICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIlVua25vd24gdXJsIHNob3J0Y3V0OiB7cmVnZXghcn0iKQogICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2UocmVnZXgsIHJlLlBhdHRlcm4pOgogICAgICAgICAgICByZWdleCA9IHJlLmNvbXBpbGUocmVnZXgpCiAgICAgICAgVVJMUEFUVEVSTlMuaW5zZXJ0KHBvc2l0aW9uLCAocmVnZXgsICJfIiArIG5hbWUsIGZ1bmMpKQoKICAgIGlmIGNvbnZlcnRlciBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gcmVnaXN0ZXJyZXIoY29udmVydGVyKQogICAgZWxzZToKICAgICAgICByZXR1cm4gcmVnaXN0ZXJyZXIK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAIAAABZBQAAAAAAAFkFAAAAAAAAAAAAAAAA8L9hBQAAAAAAAGEFAAAAAAAAAAAAAAAA8L8"
				],
				[
					72,
					1,
					"paste",
					null,
					"AQAAAKEWAAAAAAAAqxYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAChFgAAAAAAAKEWAAAAAAAAAAAAAAAA8L8"
				],
				[
					73,
					1,
					"insert",
					{
						"characters": "()"
					},
					"AgAAAKsWAAAAAAAArBYAAAAAAAAAAAAArBYAAAAAAACtFgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACrFgAAAAAAAKsWAAAAAAAAAAAAAAAA8L8"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": " if"
					},
					"AwAAAK0WAAAAAAAArhYAAAAAAAAAAAAArhYAAAAAAACvFgAAAAAAAAAAAACvFgAAAAAAALAWAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACtFgAAAAAAAK0WAAAAAAAAAAAAAAAA8L8"
				],
				[
					75,
					1,
					"insert",
					{
						"characters": " callable"
					},
					"CQAAALAWAAAAAAAAsRYAAAAAAAAAAAAAsRYAAAAAAACyFgAAAAAAAAAAAACyFgAAAAAAALMWAAAAAAAAAAAAALMWAAAAAAAAtBYAAAAAAAAAAAAAtBYAAAAAAAC1FgAAAAAAAAAAAAC1FgAAAAAAALYWAAAAAAAAAAAAALYWAAAAAAAAtxYAAAAAAAAAAAAAtxYAAAAAAAC4FgAAAAAAAAAAAAC4FgAAAAAAALkWAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwFgAAAAAAALAWAAAAAAAAAAAAAAAA8L8"
				],
				[
					76,
					1,
					"insert",
					{
						"characters": "()"
					},
					"AgAAALkWAAAAAAAAuhYAAAAAAAAAAAAAuhYAAAAAAAC7FgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC5FgAAAAAAALkWAAAAAAAAAAAAAAAA8L8"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": "self.stor"
					},
					"CQAAALoWAAAAAAAAuxYAAAAAAAAAAAAAuxYAAAAAAAC8FgAAAAAAAAAAAAC8FgAAAAAAAL0WAAAAAAAAAAAAAL0WAAAAAAAAvhYAAAAAAAAAAAAAvhYAAAAAAAC/FgAAAAAAAAAAAAC/FgAAAAAAAMAWAAAAAAAAAAAAAMAWAAAAAAAAwRYAAAAAAAAAAAAAwRYAAAAAAADCFgAAAAAAAAAAAADCFgAAAAAAAMMWAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC6FgAAAAAAALoWAAAAAAAAAAAAAAAA8L8"
				],
				[
					79,
					1,
					"insert",
					{
						"characters": "e"
					},
					"AQAAAMMWAAAAAAAAxBYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADDFgAAAAAAAMMWAAAAAAAAAAAAAAAA8L8"
				],
				[
					81,
					1,
					"insert",
					{
						"characters": " else"
					},
					"BQAAAMUWAAAAAAAAxhYAAAAAAAAAAAAAxhYAAAAAAADHFgAAAAAAAAAAAADHFgAAAAAAAMgWAAAAAAAAAAAAAMgWAAAAAAAAyRYAAAAAAAAAAAAAyRYAAAAAAADKFgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADFFgAAAAAAAMUWAAAAAAAAAAAAAAAA8L8"
				],
				[
					82,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAMoWAAAAAAAAyxYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADKFgAAAAAAAMoWAAAAAAAAAAAAAAAA8L8"
				],
				[
					85,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAdCIAAAAAAAB0IgAAaW1wb3J0IGpzb24KaW1wb3J0IHJlCmltcG9ydCBzdHJpbmcKZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsCmZyb20gaW1wb3J0bGliIGltcG9ydCBpbXBvcnRfbW9kdWxlCmZyb20gbG9nZ2luZyBpbXBvcnQgZ2V0TG9nZ2VyCmZyb20gdGtpbnRlciBpbXBvcnQgVGssIFdpZGdldApmcm9tIHR5cGVzIGltcG9ydCBNb2R1bGVUeXBlCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIE9wdGlvbmFsCmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBwYXJzZV9xc2wsIHVybHBhcnNlCmZyb20gdXVpZCBpbXBvcnQgVVVJRAoKZnJvbSBweW9sb2FkIGltcG9ydCBhbm5vdGF0ZQoKZnJvbSAuIGltcG9ydCBhcHBsaWNhdGlvbiwgY29tcG9uZW50CmZyb20gLiBpbXBvcnQgc3RvcmUgYXMgc3RvcmVfCgpsb2cgPSBnZXRMb2dnZXIoX19uYW1lX18pCgoKSEFORExFUl9OQU1FID0gc2V0KHN0cmluZy5hc2NpaV9sZXR0ZXJzICsgIl8iKQpERUZBVUxUX0hBTkRMRVIgPSAiZGVmYXVsdCIKCgpAYW5ub3RhdGUKY2xhc3MgUGFnZVZpZXc6CiAgICAiIiIKICAgIEFwcGxpY3RhaW9ucyBwYWdlIHZpZXcsIHBlcmZvcm1zIHBhZ2Ugcm91dGluZywgY2FjaGluZyBhbmQgaGlzdG9yeSBmb3IgYQogICAgdGFrdGsgYXBwbGljYXRpb24uCiAgICAiIiIKCiAgICBoaXN0b3J5OiBsaXN0CiAgICBjdXJyZW50X3BhZ2U6IEFueQogICAgYXBwOiAiYXBwbGljYXRpb24uQXBwbGljYXRpb24iCiAgICBzdG9yZTogc3RvcmVfLlN0b3JlCiAgICBkZXN0cm95X2NhY2hlOiBpbnQKICAgIHBhY2thZ2U6IE1vZHVsZVR5cGUKICAgIGN1cnJlbnRfdXJsOiBPcHRpb25hbFtzdHJdCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgcGFyZW50OiBUayB8IFdpZGdldCwKICAgICAgICBwYWdlOiBNb2R1bGVUeXBlLAogICAgICAgIHN0b3JlOiAic3RvcmVfLlN0b3JlIiwKICAgICAgICBkZXN0cm95X2NhY2hlOiBpbnQgPSA1LAogICAgKToKICAgICAgICAiIiJcCiAgICAgICAgOnBhcmFtIHBhcmVudDogdGhlIHBhcmVudCB3aWRnZXQgdG8gdmlldyB0aGUgcGFnZXMgaW4sIHVzdWFsbHkgdGhlCiAgICAgICAgb3V0bGV0IG9mIGFuIGFwcHMgbGF5b3V0LgoKICAgICAgICA6cGFyYW0gcGFnZTogVGhlIG1vZHVsZSB0aGUgYXBwIHdpbGwgZmV0Y2ggcGFnZXMgZnJvbS4KCiAgICAgICAgOnBhcmFtIGRlc3Ryb3lfY2FjaGU6IEV4cGVyaW1lbnRhbCBkZXN0cm95IGNhY2hlCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5oaXN0b3J5ID0gW10KICAgICAgICBzZWxmLmN1cnJlbnRfcGFnZSA9IE5vbmUKICAgICAgICBzZWxmLnBhcmVudCA9IHBhcmVudAogICAgICAgIHNlbGYuY3VycmVudF93aWRnZXQgPSBOb25lCiAgICAgICAgc2VsZi5zdG9yZSA9IHN0b3JlCiAgICAgICAgc2VsZi5zdG9yZSA9IGFwcC5nZXRfc3RvcmUoKQogICAgICAgIHNlbGYuZGVzdHJveV9jYWNoZSA9IGRlc3Ryb3lfY2FjaGUKICAgICAgICBzZWxmLnBhY2thZ2UgPSBwYWdlCiAgICAgICAgc2VsZi5jdXJyZW50X3VybCA9IE5vbmUKCiAgICBkZWYgZ2VvbWV0cnkoc2VsZik6CiAgICAgICAgIiIiXAogICAgICAgIFByZXBhcmVzIHRoZSBwYXJlbnQncyBnZW9tZXRyeS4KICAgICAgICAiIiIKICAgICAgICBzZWxmLnBhcmVudC5jb2x1bW5jb25maWd1cmUoMCwgd2VpZ2h0PTEpCiAgICAgICAgc2VsZi5wYXJlbnQucm93Y29uZmlndXJlKDAsIHdlaWdodD0xKQoKICAgIGRlZiB1cmwoc2VsZiwgdXJsOiBzdHIsIHJlZGlyZWN0OiBib29sID0gVHJ1ZSk6CiAgICAgICAgIiIiCiAgICAgICAgVGFyZ2V0cyB0aGUgYXBwIHRvIHRoZSB1cmwgZm9sbG93aW5nIHJlZGlyZWN0cyBleGNlcHQKICAgICAgICByZWRpcmVjdCBwYXJhbWV0ZXIgc2V0IHRvIGZhbHNlLgoKICAgICAgICA6cmFpc2VzIHRha3RrLnBhZ2VzLlJlZGlyZWN0OiBJbiBjYXNlIHJlZHJlY3Qgc2V0IHRvIGZhbHNlIGFuZCBhCiAgICAgICAgcmVkaXJlY3Qgb2NjdXJlZAogICAgICAgICIiIgogICAgICAgIHRhcmdldCA9IHVybAogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNlbGYuZXhlY191cmwodGFyZ2V0KQogICAgICAgICAgICBleGNlcHQgUmVkaXJlY3QgYXMgcjoKICAgICAgICAgICAgICAgIHRhcmdldCA9IHIudXJsCiAgICAgICAgICAgICAgICBpZiBub3QgcmVkaXJlY3Q6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgdmlld19jb21wb25lbnQoc2VsZiwgY29tcG9uZW50czogInR1cGxlIiwgKiwgX2NhY2hlPXt9KToKICAgICAgICBpZiBzZWxmLmN1cnJlbnRfcGFnZSBpcyBOb25lOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfcGFnZSA9IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfcGFnZSArPSAxCiAgICAgICAgY3VycmVudCA9IHNlbGYuY3VycmVudF93aWRnZXQKICAgICAgICBzZWxmLmhpc3RvcnkuaW5zZXJ0KHNlbGYuY3VycmVudF9wYWdlLCBjb21wb25lbnRzKQogICAgICAgIHBhcmVudCA9IHNlbGYucGFyZW50CiAgICAgICAgbWFzdGVyID0gTm9uZQogICAgICAgIGZvciBjb21wb25lbnQgaW4gY29tcG9uZW50czoKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShjb21wb25lbnQsIHR5cGUpOgogICAgICAgICAgICAgICAgaWYgY29tcG9uZW50IG5vdCBpbiBfY2FjaGU6CiAgICAgICAgICAgICAgICAgICAgX2NhY2hlW2NvbXBvbmVudF0gPSBjb21wb25lbnQoKQogICAgICAgICAgICAgICAgY29tcG9uZW50ID0gX2NhY2hlW2NvbXBvbmVudF0KCiAgICAgICAgICAgIGNvbXBvbmVudCA9IGNvbXBvbmVudAogICAgICAgICAgICBwYXJlbnQuY29sdW1uY29uZmlndXJlKDAsIHdlaWdodD0xKQogICAgICAgICAgICBwYXJlbnQucm93Y29uZmlndXJlKDAsIHdlaWdodD0xKQogICAgICAgICAgICBjb21wb25lbnQucmVuZGVyKHBhcmVudCkKICAgICAgICAgICAgY29udGFpbmVyID0gY29tcG9uZW50LmNvbnRhaW5lcgogICAgICAgICAgICBjb250YWluZXIuZ3JpZChjb2x1bW49MCwgcm93PTAsIHN0aWNreT0ibnNldyIpCiAgICAgICAgICAgIG1hc3RlciA9IG1hc3RlciBvciBjb250YWluZXIKICAgICAgICAgICAgcGFyZW50ID0gY29tcG9uZW50Lm91dGxldAogICAgICAgIHNlbGYuY3VycmVudF93aWRnZXQgPSBtYXN0ZXIKICAgICAgICBpZiBjdXJyZW50IGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmRlc3Ryb3lfbGF0ZXIobWFzdGVyKQoKICAgIGRlZiBkZXN0cm95X2xhdGVyKHNlbGYsIHdpZGdldCwgY2FjaGU9W10pOgogICAgICAgIGNhY2hlLmFwcGVuZCh3aWRnZXQpCiAgICAgICAgaWYgbGVuKGNhY2hlKSA+IHNlbGYuZGVzdHJveV9jYWNoZToKICAgICAgICAgICAgY2FjaGUucG9wKDApLmRlc3Ryb3koKQoKICAgIGRlZiBiYWNrKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY3VycmVudF9wYWdlID4gMDoKICAgICAgICAgICAgc2VsZi5mb2N1c19wYWdlKHNlbGYuY3VycmVudF9wYWdlIC0gMSkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZm9yd2FyZChzZWxmKToKICAgICAgICBpZiBzZWxmLmN1cnJlbnRfcGFnZSA8IGxlbihzZWxmLmhpc3RvcnkpIC0gMToKICAgICAgICAgICAgc2VsZi5mb2N1c19wYWdlKHNlbGYuY3VycmVudF9wYWdlICsgMSkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZm9jdXNfcGFnZShzZWxmLCBpZHgpOgogICAgICAgIHBhZ2UgPSBzZWxmLmhpc3RvcnlbaWR4XQogICAgICAgIGlmIHNlbGYuY3VycmVudF93aWRnZXQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuY3VycmVudF93aWRnZXQuZGVzdHJveSgpCiAgICAgICAgc2VsZi5oaXN0b3J5W2lkeF0ucmVuZGVyKHNlbGYucGFyZW50KQogICAgICAgIHNlbGYuY3VycmVudF93aWRnZXQgPSBzZWxmLmhpc3RvcnlbaWR4XS5jb250YWluZXIKICAgICAgICBzZWxmLmN1cnJlbnRfd2lkZ2V0LmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKQogICAgICAgIHNlbGYuY3VycmVudF9wYWdlID0gaWR4CgogICAgZGVmIGV4ZWNfdXJsKHNlbGYsIGNtZCk6CiAgICAgICAgaWYgY21kLnN0cmlwKCIvIikgPT0gIiFjdXJyZW50IjoKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIE5vbmUsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm9rIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAidXJsIjogc2VsZi5jdXJyZW50X3VybCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICkKICAgICAgICBlbGlmIGNtZC5zdHJpcCgiLyIpID09ICIhYmFjayI6CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBOb25lLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJvayI6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgImNoYW5nZWQiOiBzZWxmLmJhY2soKSwKICAgICAgICAgICAgICAgICAgICAidXJsIjogc2VsZi5jdXJyZW50X3VybCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICkKICAgICAgICBlbGlmIGNtZC5zdHJpcCgiLyIpID09ICIhZm9yd2FyZCI6CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBOb25lLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJvayI6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgImNoYW5nZWQiOiBzZWxmLmZvcndhcmQoKSwKICAgICAgICAgICAgICAgICAgICAidXJsIjogc2VsZi5jdXJyZW50X3VybCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwYXJzZWQgPSB1cmxwYXJzZShjbWQpCiAgICAgICAgICAgIGFyZ3MgPSB7azoganNvbi5sb2Fkcyh2KSBmb3IgaywgdiBpbiBwYXJzZV9xc2wocGFyc2VkLnF1ZXJ5KX0KICAgICAgICAgICAgaGFuZGxlciA9IHBhcnNlZC5mcmFnbWVudAogICAgICAgICAgICBwYXRoID0gcGFyc2VkLnBhdGgKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgIkAiIGluIHBhdGgKICAgICAgICAgICAgICAgIGFuZCBsZW4oc2V0KHBhdGhbcGF0aC5pbmRleCgiQCIpICsgMSA6XSkgLSBIQU5ETEVSX05BTUUpID09IDAKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIHBhdGgsIGhhbmRsZXIgPSBwYXRoLnJzcGxpdCgiQCIsIDEpCiAgICAgICAgICAgIHNlbGYuY3VycmVudF91cmwgPSBwYXJzZWQucGF0aAogICAgICAgICAgICByZXR1cm4gc2VsZihwYXRoLCBoYW5kbGVyLCBhcmdzKQoKICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBtb2R1bGUsIGhhbmRsZXIsIHBhcmFtcz17fSwgLywgKiprd3BhcmFtcyk6CiAgICAgICAgZnJvbSAuY29tcG9uZW50IGltcG9ydCBDb21wb25lbnQKCiAgICAgICAgaWYgaXNpbnN0YW5jZShtb2R1bGUsIHN0cik6CiAgICAgICAgICAgIG1vZHVsZSwgdXJscGFyYW1zLCBsYXlvdXRzID0gc2VsZi5pbXBvcnRfbW9kdWxlKG1vZHVsZSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGZ1bmN0aW9uID0gZ2V0YXR0cihtb2R1bGUsIGhhbmRsZXIgb3IgREVGQVVMVF9IQU5ETEVSKQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlOgogICAgICAgICAgICByYWlzZSBFcnJvcjQwNChlKQogICAgICAgIGh0dHAgPSBjb21wID0gTm9uZQogICAgICAgIHBhZ2UgPSBmdW5jdGlvbigKICAgICAgICAgICAgc2VsZi5zdG9yZSgpIGlmIGNhbGxhYmxlKHNlbGYuc3RvcmUpIGVsc2Ugc2VsZi5zdG9yZSwKICAgICAgICAgICAgKnVybHBhcmFtcywKICAgICAgICAgICAgKiprd3BhcmFtcywKICAgICAgICApCiAgICAgICAgaWYgcGFnZSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gKE5vbmUsIE5vbmUpCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHBhZ2UsIHR1cGxlKToKICAgICAgICAgICAgY29tcCwgaHR0cCA9IHBhZ2UKICAgICAgICBlbGlmIGlzaW5zdGFuY2UocGFnZSwgQ29tcG9uZW50KToKICAgICAgICAgICAgY29tcCA9IHBhZ2UKICAgICAgICBlbHNlOgogICAgICAgICAgICBodHRwID0gcGFnZQogICAgICAgIGlmIGNvbXAgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGxheW91dHMuYXBwZW5kKGNvbXApCiAgICAgICAgICAgIHNlbGYudmlld19jb21wb25lbnQodHVwbGUobGF5b3V0cykpCiAgICAgICAgcmV0dXJuICh0dXBsZShsYXlvdXRzKSwgaHR0cCkKCiAgICBkZWYgaW1wb3J0X21vZHVsZShzZWxmLCBwYXRoKToKICAgICAgICBtb2R1bGUgPSBzZWxmLnBhY2thZ2UKICAgICAgICBwYXJhbXMgPSBbXQogICAgICAgIGxheW91dHMgPSBbXQogICAgICAgIGlmIGhhc2F0dHIobW9kdWxlLCAibGF5b3V0Iik6CiAgICAgICAgICAgIGxheW91dHMuYXBwZW5kKG1vZHVsZS5sYXlvdXQpCiAgICAgICAgZm9yIHBhY2thZ2UgaW4gcGF0aC5zdHJpcCgiLyIpLnNwbGl0KCIvIik6CiAgICAgICAgICAgIGlmIG5vdCBwYWNrYWdlLnN0cmlwKCk6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBtb2R1bGUgPSBpbXBvcnRfbW9kdWxlKG1vZHVsZS5fX3BhY2thZ2VfXyArICIuIiArIHBhY2thZ2UpCiAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgICAgIGZvciByZWdleCwgbmFtZSwgY29udmVydGVyIGluIFVSTFBBVFRFUk5TOgogICAgICAgICAgICAgICAgICAgIGlmIG1hdGNoIDo9IHJlZ2V4LmZ1bGxtYXRjaChwYWNrYWdlKToKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlID0gaW1wb3J0X21vZHVsZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGUuX19wYWNrYWdlX18gKyAiLiIgKyBuYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW0gPSBjb252ZXJ0ZXIocGFja2FnZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBFcnJvcjQwNCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQocGFyYW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByYWlzZSBFcnJvcjQwNChwYXRoKQogICAgICAgICAgICBpZiBoYXNhdHRyKG1vZHVsZSwgImxheW91dCIpOgogICAgICAgICAgICAgICAgbGF5b3V0cy5hcHBlbmQobW9kdWxlLmxheW91dCkKCiAgICAgICAgcmV0dXJuIG1vZHVsZSwgcGFyYW1zLCBsYXlvdXRzCgoKY2xhc3MgRXJyb3I0MDQoVmFsdWVFcnJvcik6CiAgICBwYXNzCgoKY2xhc3MgUmVkaXJlY3QoRXhjZXB0aW9uKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB1cmw6IHN0cik6CiAgICAgICAgc2VsZi51cmwgPSB1cmwKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCkKCgpTSE9SVENVVFMgPSB7CiAgICAiaW50IjogcmUuY29tcGlsZShyIl5cZCskIiksCiAgICAiZGVjaW1hbCI6IHJlLmNvbXBpbGUociJeXGQrXC5cZCskIiksCiAgICAic3RyIjogcmUuY29tcGlsZShyIi4rIiksCiAgICAidXVpZCI6IHJlLmNvbXBpbGUoCiAgICAgICAgciJbXGRhLWZdezh9XC1bXGRhLWZdezR9XC1bXGRhLWZdezR9XC1bXGRhLWZdezR9XC1bXGRhLWZdezEyfSIsCiAgICApLAp9ClVSTFBBVFRFUk5TID0gWwogICAgKCJpbnQiLCBpbnQpLAogICAgKCJkZWNpbWFsIiwgRGVjaW1hbCksCiAgICAoInN0ciIsIHN0ciksCiAgICAoInV1aWQiLCBVVUlEKSwKXQpVUkxQQVRURVJOUyA9IFsoU0hPUlRDVVRTW25dLCBuLCBjKSBmb3IgbiwgYyBpbiBVUkxQQVRURVJOU10KCgpkZWYgcmVnaXN0ZXJfdXJscGF0dGVybihyZWdleCwgY29udmVydGVyPU5vbmUsIG5hbWU9Tm9uZSwgcG9zaXRpb249LTIpOgogICAgZGVmIHJlZ2lzdGVycmVyKGZ1bmMpOgogICAgICAgIG5vbmxvY2FsIG5hbWUsIHJlZ2V4CiAgICAgICAgaWYgbmFtZSBpcyBOb25lOgogICAgICAgICAgICBuYW1lID0gZnVuYy5fX25hbWVfXy5sb3dlcigpCiAgICAgICAgaWYgbGVuKHJlZ2V4KSA+IDIgYW5kIHJlZ2V4WzBdID09ICI8IiBhbmQgcmVnZXhbLTFdID09ICI+IjoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmVnZXggPSBTSE9SVENVVFNbcmVnZXhbMTotMV1dCiAgICAgICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIlVua25vd24gdXJsIHNob3J0Y3V0OiB7cmVnZXghcn0iKQogICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2UocmVnZXgsIHJlLlBhdHRlcm4pOgogICAgICAgICAgICByZWdleCA9IHJlLmNvbXBpbGUocmVnZXgpCiAgICAgICAgVVJMUEFUVEVSTlMuaW5zZXJ0KHBvc2l0aW9uLCAocmVnZXgsICJfIiArIG5hbWUsIGZ1bmMpKQoKICAgIGlmIGNvbnZlcnRlciBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gcmVnaXN0ZXJyZXIoY29udmVydGVyKQogICAgZWxzZToKICAgICAgICByZXR1cm4gcmVnaXN0ZXJyZXIK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADLFgAAAAAAAMsWAAAAAAAAAAAAAAAA8L8"
				],
				[
					89,
					1,
					"insert",
					{
						"characters": " |"
					},
					"AgAAAN8CAAAAAAAA4AIAAAAAAAAAAAAA4AIAAAAAAADhAgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADfAgAAAAAAAN8CAAAAAAAAAAAAAAAA8L8"
				],
				[
					90,
					1,
					"insert",
					{
						"characters": " Call"
					},
					"BQAAAOECAAAAAAAA4gIAAAAAAAAAAAAA4gIAAAAAAADjAgAAAAAAAAAAAADjAgAAAAAAAOQCAAAAAAAAAAAAAOQCAAAAAAAA5QIAAAAAAAAAAAAA5QIAAAAAAADmAgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADhAgAAAAAAAOECAAAAAAAAAAAAAAAA8L8"
				],
				[
					91,
					1,
					"insert",
					{
						"characters": "able"
					},
					"BAAAAOYCAAAAAAAA5wIAAAAAAAAAAAAA5wIAAAAAAADoAgAAAAAAAAAAAADoAgAAAAAAAOkCAAAAAAAAAAAAAOkCAAAAAAAA6gIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADmAgAAAAAAAOYCAAAAAAAAAAAAAAAA8L8"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": " |"
					},
					"AgAAAK0DAAAAAAAArgMAAAAAAAAAAAAArgMAAAAAAACvAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACtAwAAAAAAAK0DAAAAAAAAAAAAAAAA8L8"
				],
				[
					97,
					1,
					"insert",
					{
						"characters": " Cal"
					},
					"BAAAAK8DAAAAAAAAsAMAAAAAAAAAAAAAsAMAAAAAAACxAwAAAAAAAAAAAACxAwAAAAAAALIDAAAAAAAAAAAAALIDAAAAAAAAswMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACvAwAAAAAAAK8DAAAAAAAAAAAAAAAA8L8"
				],
				[
					98,
					1,
					"insert_dimensions",
					null,
					"AgAAALADAAAAAAAAsAMAAAAAAAADAAAAQ2FssAMAAAAAAAC4AwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACzAwAAAAAAALMDAAAAAAAAAAAAAAAA8L8"
				],
				[
					101,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAiiIAAAAAAACKIgAAaW1wb3J0IGpzb24KaW1wb3J0IHJlCmltcG9ydCBzdHJpbmcKZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsCmZyb20gaW1wb3J0bGliIGltcG9ydCBpbXBvcnRfbW9kdWxlCmZyb20gbG9nZ2luZyBpbXBvcnQgZ2V0TG9nZ2VyCmZyb20gdGtpbnRlciBpbXBvcnQgVGssIFdpZGdldApmcm9tIHR5cGVzIGltcG9ydCBNb2R1bGVUeXBlCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIE9wdGlvbmFsCmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBwYXJzZV9xc2wsIHVybHBhcnNlCmZyb20gdXVpZCBpbXBvcnQgVVVJRAoKZnJvbSBweW9sb2FkIGltcG9ydCBhbm5vdGF0ZQoKZnJvbSAuIGltcG9ydCBhcHBsaWNhdGlvbiwgY29tcG9uZW50CmZyb20gLiBpbXBvcnQgc3RvcmUgYXMgc3RvcmVfCgpsb2cgPSBnZXRMb2dnZXIoX19uYW1lX18pCgoKSEFORExFUl9OQU1FID0gc2V0KHN0cmluZy5hc2NpaV9sZXR0ZXJzICsgIl8iKQpERUZBVUxUX0hBTkRMRVIgPSAiZGVmYXVsdCIKCgpAYW5ub3RhdGUKY2xhc3MgUGFnZVZpZXc6CiAgICAiIiIKICAgIEFwcGxpY3RhaW9ucyBwYWdlIHZpZXcsIHBlcmZvcm1zIHBhZ2Ugcm91dGluZywgY2FjaGluZyBhbmQgaGlzdG9yeSBmb3IgYQogICAgdGFrdGsgYXBwbGljYXRpb24uCiAgICAiIiIKCiAgICBoaXN0b3J5OiBsaXN0CiAgICBjdXJyZW50X3BhZ2U6IEFueQogICAgYXBwOiAiYXBwbGljYXRpb24uQXBwbGljYXRpb24iCiAgICBzdG9yZTogc3RvcmVfLlN0b3JlIHwgQ2FsbGFibGUKICAgIGRlc3Ryb3lfY2FjaGU6IGludAogICAgcGFja2FnZTogTW9kdWxlVHlwZQogICAgY3VycmVudF91cmw6IE9wdGlvbmFsW3N0cl0KCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBwYXJlbnQ6IFRrIHwgV2lkZ2V0LAogICAgICAgIHBhZ2U6IE1vZHVsZVR5cGUsCiAgICAgICAgc3RvcmU6ICJzdG9yZV8uU3RvcmUgfCBDYWxsYWJsZSIsCiAgICAgICAgZGVzdHJveV9jYWNoZTogaW50ID0gNSwKICAgICk6CiAgICAgICAgIiIiXAogICAgICAgIDpwYXJhbSBwYXJlbnQ6IHRoZSBwYXJlbnQgd2lkZ2V0IHRvIHZpZXcgdGhlIHBhZ2VzIGluLCB1c3VhbGx5IHRoZQogICAgICAgIG91dGxldCBvZiBhbiBhcHBzIGxheW91dC4KCiAgICAgICAgOnBhcmFtIHBhZ2U6IFRoZSBtb2R1bGUgdGhlIGFwcCB3aWxsIGZldGNoIHBhZ2VzIGZyb20uCgogICAgICAgIDpwYXJhbSBkZXN0cm95X2NhY2hlOiBFeHBlcmltZW50YWwgZGVzdHJveSBjYWNoZQogICAgICAgICIiIgogICAgICAgIHNlbGYuaGlzdG9yeSA9IFtdCiAgICAgICAgc2VsZi5jdXJyZW50X3BhZ2UgPSBOb25lCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLmN1cnJlbnRfd2lkZ2V0ID0gTm9uZQogICAgICAgIHNlbGYuc3RvcmUgPSBzdG9yZQogICAgICAgIHNlbGYuc3RvcmUgPSBhcHAuZ2V0X3N0b3JlKCkKICAgICAgICBzZWxmLmRlc3Ryb3lfY2FjaGUgPSBkZXN0cm95X2NhY2hlCiAgICAgICAgc2VsZi5wYWNrYWdlID0gcGFnZQogICAgICAgIHNlbGYuY3VycmVudF91cmwgPSBOb25lCgogICAgZGVmIGdlb21ldHJ5KHNlbGYpOgogICAgICAgICIiIlwKICAgICAgICBQcmVwYXJlcyB0aGUgcGFyZW50J3MgZ2VvbWV0cnkuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5wYXJlbnQuY29sdW1uY29uZmlndXJlKDAsIHdlaWdodD0xKQogICAgICAgIHNlbGYucGFyZW50LnJvd2NvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKCiAgICBkZWYgdXJsKHNlbGYsIHVybDogc3RyLCByZWRpcmVjdDogYm9vbCA9IFRydWUpOgogICAgICAgICIiIgogICAgICAgIFRhcmdldHMgdGhlIGFwcCB0byB0aGUgdXJsIGZvbGxvd2luZyByZWRpcmVjdHMgZXhjZXB0CiAgICAgICAgcmVkaXJlY3QgcGFyYW1ldGVyIHNldCB0byBmYWxzZS4KCiAgICAgICAgOnJhaXNlcyB0YWt0ay5wYWdlcy5SZWRpcmVjdDogSW4gY2FzZSByZWRyZWN0IHNldCB0byBmYWxzZSBhbmQgYQogICAgICAgIHJlZGlyZWN0IG9jY3VyZWQKICAgICAgICAiIiIKICAgICAgICB0YXJnZXQgPSB1cmwKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBzZWxmLmV4ZWNfdXJsKHRhcmdldCkKICAgICAgICAgICAgZXhjZXB0IFJlZGlyZWN0IGFzIHI6CiAgICAgICAgICAgICAgICB0YXJnZXQgPSByLnVybAogICAgICAgICAgICAgICAgaWYgbm90IHJlZGlyZWN0OgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIHZpZXdfY29tcG9uZW50KHNlbGYsIGNvbXBvbmVudHM6ICJ0dXBsZSIsICosIF9jYWNoZT17fSk6CiAgICAgICAgaWYgc2VsZi5jdXJyZW50X3BhZ2UgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5jdXJyZW50X3BhZ2UgPSAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5jdXJyZW50X3BhZ2UgKz0gMQogICAgICAgIGN1cnJlbnQgPSBzZWxmLmN1cnJlbnRfd2lkZ2V0CiAgICAgICAgc2VsZi5oaXN0b3J5Lmluc2VydChzZWxmLmN1cnJlbnRfcGFnZSwgY29tcG9uZW50cykKICAgICAgICBwYXJlbnQgPSBzZWxmLnBhcmVudAogICAgICAgIG1hc3RlciA9IE5vbmUKICAgICAgICBmb3IgY29tcG9uZW50IGluIGNvbXBvbmVudHM6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY29tcG9uZW50LCB0eXBlKToKICAgICAgICAgICAgICAgIGlmIGNvbXBvbmVudCBub3QgaW4gX2NhY2hlOgogICAgICAgICAgICAgICAgICAgIF9jYWNoZVtjb21wb25lbnRdID0gY29tcG9uZW50KCkKICAgICAgICAgICAgICAgIGNvbXBvbmVudCA9IF9jYWNoZVtjb21wb25lbnRdCgogICAgICAgICAgICBjb21wb25lbnQgPSBjb21wb25lbnQKICAgICAgICAgICAgcGFyZW50LmNvbHVtbmNvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICAgICAgcGFyZW50LnJvd2NvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICAgICAgY29tcG9uZW50LnJlbmRlcihwYXJlbnQpCiAgICAgICAgICAgIGNvbnRhaW5lciA9IGNvbXBvbmVudC5jb250YWluZXIKICAgICAgICAgICAgY29udGFpbmVyLmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKQogICAgICAgICAgICBtYXN0ZXIgPSBtYXN0ZXIgb3IgY29udGFpbmVyCiAgICAgICAgICAgIHBhcmVudCA9IGNvbXBvbmVudC5vdXRsZXQKICAgICAgICBzZWxmLmN1cnJlbnRfd2lkZ2V0ID0gbWFzdGVyCiAgICAgICAgaWYgY3VycmVudCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5kZXN0cm95X2xhdGVyKG1hc3RlcikKCiAgICBkZWYgZGVzdHJveV9sYXRlcihzZWxmLCB3aWRnZXQsIGNhY2hlPVtdKToKICAgICAgICBjYWNoZS5hcHBlbmQod2lkZ2V0KQogICAgICAgIGlmIGxlbihjYWNoZSkgPiBzZWxmLmRlc3Ryb3lfY2FjaGU6CiAgICAgICAgICAgIGNhY2hlLnBvcCgwKS5kZXN0cm95KCkKCiAgICBkZWYgYmFjayhzZWxmKToKICAgICAgICBpZiBzZWxmLmN1cnJlbnRfcGFnZSA+IDA6CiAgICAgICAgICAgIHNlbGYuZm9jdXNfcGFnZShzZWxmLmN1cnJlbnRfcGFnZSAtIDEpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGZvcndhcmQoc2VsZik6CiAgICAgICAgaWYgc2VsZi5jdXJyZW50X3BhZ2UgPCBsZW4oc2VsZi5oaXN0b3J5KSAtIDE6CiAgICAgICAgICAgIHNlbGYuZm9jdXNfcGFnZShzZWxmLmN1cnJlbnRfcGFnZSArIDEpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGZvY3VzX3BhZ2Uoc2VsZiwgaWR4KToKICAgICAgICBwYWdlID0gc2VsZi5oaXN0b3J5W2lkeF0KICAgICAgICBpZiBzZWxmLmN1cnJlbnRfd2lkZ2V0IGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfd2lkZ2V0LmRlc3Ryb3koKQogICAgICAgIHNlbGYuaGlzdG9yeVtpZHhdLnJlbmRlcihzZWxmLnBhcmVudCkKICAgICAgICBzZWxmLmN1cnJlbnRfd2lkZ2V0ID0gc2VsZi5oaXN0b3J5W2lkeF0uY29udGFpbmVyCiAgICAgICAgc2VsZi5jdXJyZW50X3dpZGdldC5ncmlkKGNvbHVtbj0wLCByb3c9MCwgc3RpY2t5PSJuc2V3IikKICAgICAgICBzZWxmLmN1cnJlbnRfcGFnZSA9IGlkeAoKICAgIGRlZiBleGVjX3VybChzZWxmLCBjbWQpOgogICAgICAgIGlmIGNtZC5zdHJpcCgiLyIpID09ICIhY3VycmVudCI6CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBOb25lLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJvayI6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgInVybCI6IHNlbGYuY3VycmVudF91cmwsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICApCiAgICAgICAgZWxpZiBjbWQuc3RyaXAoIi8iKSA9PSAiIWJhY2siOgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgTm9uZSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAib2siOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICJjaGFuZ2VkIjogc2VsZi5iYWNrKCksCiAgICAgICAgICAgICAgICAgICAgInVybCI6IHNlbGYuY3VycmVudF91cmwsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICApCiAgICAgICAgZWxpZiBjbWQuc3RyaXAoIi8iKSA9PSAiIWZvcndhcmQiOgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgTm9uZSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAib2siOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICJjaGFuZ2VkIjogc2VsZi5mb3J3YXJkKCksCiAgICAgICAgICAgICAgICAgICAgInVybCI6IHNlbGYuY3VycmVudF91cmwsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGFyc2VkID0gdXJscGFyc2UoY21kKQogICAgICAgICAgICBhcmdzID0ge2s6IGpzb24ubG9hZHModikgZm9yIGssIHYgaW4gcGFyc2VfcXNsKHBhcnNlZC5xdWVyeSl9CiAgICAgICAgICAgIGhhbmRsZXIgPSBwYXJzZWQuZnJhZ21lbnQKICAgICAgICAgICAgcGF0aCA9IHBhcnNlZC5wYXRoCiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICJAIiBpbiBwYXRoCiAgICAgICAgICAgICAgICBhbmQgbGVuKHNldChwYXRoW3BhdGguaW5kZXgoIkAiKSArIDEgOl0pIC0gSEFORExFUl9OQU1FKSA9PSAwCiAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICBwYXRoLCBoYW5kbGVyID0gcGF0aC5yc3BsaXQoIkAiLCAxKQogICAgICAgICAgICBzZWxmLmN1cnJlbnRfdXJsID0gcGFyc2VkLnBhdGgKICAgICAgICAgICAgcmV0dXJuIHNlbGYocGF0aCwgaGFuZGxlciwgYXJncykKCiAgICBkZWYgX19jYWxsX18oc2VsZiwgbW9kdWxlLCBoYW5kbGVyLCBwYXJhbXM9e30sIC8sICoqa3dwYXJhbXMpOgogICAgICAgIGZyb20gLmNvbXBvbmVudCBpbXBvcnQgQ29tcG9uZW50CgogICAgICAgIGlmIGlzaW5zdGFuY2UobW9kdWxlLCBzdHIpOgogICAgICAgICAgICBtb2R1bGUsIHVybHBhcmFtcywgbGF5b3V0cyA9IHNlbGYuaW1wb3J0X21vZHVsZShtb2R1bGUpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmdW5jdGlvbiA9IGdldGF0dHIobW9kdWxlLCBoYW5kbGVyIG9yIERFRkFVTFRfSEFORExFUikKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgRXJyb3I0MDQoZSkKICAgICAgICBodHRwID0gY29tcCA9IE5vbmUKICAgICAgICBwYWdlID0gZnVuY3Rpb24oCiAgICAgICAgICAgIHNlbGYuc3RvcmUoKSBpZiBjYWxsYWJsZShzZWxmLnN0b3JlKSBlbHNlIHNlbGYuc3RvcmUsCiAgICAgICAgICAgICp1cmxwYXJhbXMsCiAgICAgICAgICAgICoqa3dwYXJhbXMsCiAgICAgICAgKQogICAgICAgIGlmIHBhZ2UgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIChOb25lLCBOb25lKQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShwYWdlLCB0dXBsZSk6CiAgICAgICAgICAgIGNvbXAsIGh0dHAgPSBwYWdlCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHBhZ2UsIENvbXBvbmVudCk6CiAgICAgICAgICAgIGNvbXAgPSBwYWdlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaHR0cCA9IHBhZ2UKICAgICAgICBpZiBjb21wIGlzIG5vdCBOb25lOgogICAgICAgICAgICBsYXlvdXRzLmFwcGVuZChjb21wKQogICAgICAgICAgICBzZWxmLnZpZXdfY29tcG9uZW50KHR1cGxlKGxheW91dHMpKQogICAgICAgIHJldHVybiAodHVwbGUobGF5b3V0cyksIGh0dHApCgogICAgZGVmIGltcG9ydF9tb2R1bGUoc2VsZiwgcGF0aCk6CiAgICAgICAgbW9kdWxlID0gc2VsZi5wYWNrYWdlCiAgICAgICAgcGFyYW1zID0gW10KICAgICAgICBsYXlvdXRzID0gW10KICAgICAgICBpZiBoYXNhdHRyKG1vZHVsZSwgImxheW91dCIpOgogICAgICAgICAgICBsYXlvdXRzLmFwcGVuZChtb2R1bGUubGF5b3V0KQogICAgICAgIGZvciBwYWNrYWdlIGluIHBhdGguc3RyaXAoIi8iKS5zcGxpdCgiLyIpOgogICAgICAgICAgICBpZiBub3QgcGFja2FnZS5zdHJpcCgpOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbW9kdWxlID0gaW1wb3J0X21vZHVsZShtb2R1bGUuX19wYWNrYWdlX18gKyAiLiIgKyBwYWNrYWdlKQogICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICBmb3IgcmVnZXgsIG5hbWUsIGNvbnZlcnRlciBpbiBVUkxQQVRURVJOUzoKICAgICAgICAgICAgICAgICAgICBpZiBtYXRjaCA6PSByZWdleC5mdWxsbWF0Y2gocGFja2FnZSk6CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZSA9IGltcG9ydF9tb2R1bGUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlLl9fcGFja2FnZV9fICsgIi4iICsgbmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtID0gY29udmVydGVyKHBhY2thZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXJyb3I0MDQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKHBhcmFtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXJyb3I0MDQocGF0aCkKICAgICAgICAgICAgaWYgaGFzYXR0cihtb2R1bGUsICJsYXlvdXQiKToKICAgICAgICAgICAgICAgIGxheW91dHMuYXBwZW5kKG1vZHVsZS5sYXlvdXQpCgogICAgICAgIHJldHVybiBtb2R1bGUsIHBhcmFtcywgbGF5b3V0cwoKCmNsYXNzIEVycm9yNDA0KFZhbHVlRXJyb3IpOgogICAgcGFzcwoKCmNsYXNzIFJlZGlyZWN0KEV4Y2VwdGlvbik6CiAgICBkZWYgX19pbml0X18oc2VsZiwgdXJsOiBzdHIpOgogICAgICAgIHNlbGYudXJsID0gdXJsCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCgoKU0hPUlRDVVRTID0gewogICAgImludCI6IHJlLmNvbXBpbGUociJeXGQrJCIpLAogICAgImRlY2ltYWwiOiByZS5jb21waWxlKHIiXlxkK1wuXGQrJCIpLAogICAgInN0ciI6IHJlLmNvbXBpbGUociIuKyIpLAogICAgInV1aWQiOiByZS5jb21waWxlKAogICAgICAgIHIiW1xkYS1mXXs4fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXsxMn0iLAogICAgKSwKfQpVUkxQQVRURVJOUyA9IFsKICAgICgiaW50IiwgaW50KSwKICAgICgiZGVjaW1hbCIsIERlY2ltYWwpLAogICAgKCJzdHIiLCBzdHIpLAogICAgKCJ1dWlkIiwgVVVJRCksCl0KVVJMUEFUVEVSTlMgPSBbKFNIT1JUQ1VUU1tuXSwgbiwgYykgZm9yIG4sIGMgaW4gVVJMUEFUVEVSTlNdCgoKZGVmIHJlZ2lzdGVyX3VybHBhdHRlcm4ocmVnZXgsIGNvbnZlcnRlcj1Ob25lLCBuYW1lPU5vbmUsIHBvc2l0aW9uPS0yKToKICAgIGRlZiByZWdpc3RlcnJlcihmdW5jKToKICAgICAgICBub25sb2NhbCBuYW1lLCByZWdleAogICAgICAgIGlmIG5hbWUgaXMgTm9uZToKICAgICAgICAgICAgbmFtZSA9IGZ1bmMuX19uYW1lX18ubG93ZXIoKQogICAgICAgIGlmIGxlbihyZWdleCkgPiAyIGFuZCByZWdleFswXSA9PSAiPCIgYW5kIHJlZ2V4Wy0xXSA9PSAiPiI6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJlZ2V4ID0gU0hPUlRDVVRTW3JlZ2V4WzE6LTFdXQogICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJVbmtub3duIHVybCBzaG9ydGN1dDoge3JlZ2V4IXJ9IikKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKHJlZ2V4LCByZS5QYXR0ZXJuKToKICAgICAgICAgICAgcmVnZXggPSByZS5jb21waWxlKHJlZ2V4KQogICAgICAgIFVSTFBBVFRFUk5TLmluc2VydChwb3NpdGlvbiwgKHJlZ2V4LCAiXyIgKyBuYW1lLCBmdW5jKSkKCiAgICBpZiBjb252ZXJ0ZXIgaXMgbm90IE5vbmU6CiAgICAgICAgcmV0dXJuIHJlZ2lzdGVycmVyKGNvbnZlcnRlcikKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIHJlZ2lzdGVycmVyCg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC4AwAAAAAAALgDAAAAAAAAAAAAAAAA8L8"
				],
				[
					106,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAN4AAAAAAAAA3wAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADeAAAAAAAAAN4AAAAAAAAAAAAAAAAA8L8"
				],
				[
					107,
					1,
					"insert",
					{
						"characters": " Call"
					},
					"BQAAAN8AAAAAAAAA4AAAAAAAAAAAAAAA4AAAAAAAAADhAAAAAAAAAAAAAADhAAAAAAAAAOIAAAAAAAAAAAAAAOIAAAAAAAAA4wAAAAAAAAAAAAAA4wAAAAAAAADkAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADfAAAAAAAAAN8AAAAAAAAAAAAAAAAA8L8"
				],
				[
					108,
					1,
					"insert_dimensions",
					null,
					"AgAAAOAAAAAAAAAA4AAAAAAAAAAEAAAAQ2FsbOAAAAAAAAAA6AAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADkAAAAAAAAAOQAAAAAAAAAAAAAAAAA8L8"
				],
				[
					111,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAlCIAAAAAAACUIgAAaW1wb3J0IGpzb24KaW1wb3J0IHJlCmltcG9ydCBzdHJpbmcKZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsCmZyb20gaW1wb3J0bGliIGltcG9ydCBpbXBvcnRfbW9kdWxlCmZyb20gbG9nZ2luZyBpbXBvcnQgZ2V0TG9nZ2VyCmZyb20gdGtpbnRlciBpbXBvcnQgVGssIFdpZGdldApmcm9tIHR5cGVzIGltcG9ydCBNb2R1bGVUeXBlCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIE9wdGlvbmFsLCBDYWxsYWJsZQpmcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgcGFyc2VfcXNsLCB1cmxwYXJzZQpmcm9tIHV1aWQgaW1wb3J0IFVVSUQKCmZyb20gcHlvbG9hZCBpbXBvcnQgYW5ub3RhdGUKCmZyb20gLiBpbXBvcnQgYXBwbGljYXRpb24sIGNvbXBvbmVudApmcm9tIC4gaW1wb3J0IHN0b3JlIGFzIHN0b3JlXwoKbG9nID0gZ2V0TG9nZ2VyKF9fbmFtZV9fKQoKCkhBTkRMRVJfTkFNRSA9IHNldChzdHJpbmcuYXNjaWlfbGV0dGVycyArICJfIikKREVGQVVMVF9IQU5ETEVSID0gImRlZmF1bHQiCgoKQGFubm90YXRlCmNsYXNzIFBhZ2VWaWV3OgogICAgIiIiCiAgICBBcHBsaWN0YWlvbnMgcGFnZSB2aWV3LCBwZXJmb3JtcyBwYWdlIHJvdXRpbmcsIGNhY2hpbmcgYW5kIGhpc3RvcnkgZm9yIGEKICAgIHRha3RrIGFwcGxpY2F0aW9uLgogICAgIiIiCgogICAgaGlzdG9yeTogbGlzdAogICAgY3VycmVudF9wYWdlOiBBbnkKICAgIGFwcDogImFwcGxpY2F0aW9uLkFwcGxpY2F0aW9uIgogICAgc3RvcmU6IHN0b3JlXy5TdG9yZSB8IENhbGxhYmxlCiAgICBkZXN0cm95X2NhY2hlOiBpbnQKICAgIHBhY2thZ2U6IE1vZHVsZVR5cGUKICAgIGN1cnJlbnRfdXJsOiBPcHRpb25hbFtzdHJdCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgcGFyZW50OiBUayB8IFdpZGdldCwKICAgICAgICBwYWdlOiBNb2R1bGVUeXBlLAogICAgICAgIHN0b3JlOiAic3RvcmVfLlN0b3JlIHwgQ2FsbGFibGUiLAogICAgICAgIGRlc3Ryb3lfY2FjaGU6IGludCA9IDUsCiAgICApOgogICAgICAgICIiIlwKICAgICAgICA6cGFyYW0gcGFyZW50OiB0aGUgcGFyZW50IHdpZGdldCB0byB2aWV3IHRoZSBwYWdlcyBpbiwgdXN1YWxseSB0aGUKICAgICAgICBvdXRsZXQgb2YgYW4gYXBwcyBsYXlvdXQuCgogICAgICAgIDpwYXJhbSBwYWdlOiBUaGUgbW9kdWxlIHRoZSBhcHAgd2lsbCBmZXRjaCBwYWdlcyBmcm9tLgoKICAgICAgICA6cGFyYW0gZGVzdHJveV9jYWNoZTogRXhwZXJpbWVudGFsIGRlc3Ryb3kgY2FjaGUKICAgICAgICAiIiIKICAgICAgICBzZWxmLmhpc3RvcnkgPSBbXQogICAgICAgIHNlbGYuY3VycmVudF9wYWdlID0gTm9uZQogICAgICAgIHNlbGYucGFyZW50ID0gcGFyZW50CiAgICAgICAgc2VsZi5jdXJyZW50X3dpZGdldCA9IE5vbmUKICAgICAgICBzZWxmLnN0b3JlID0gc3RvcmUKICAgICAgICBzZWxmLnN0b3JlID0gYXBwLmdldF9zdG9yZSgpCiAgICAgICAgc2VsZi5kZXN0cm95X2NhY2hlID0gZGVzdHJveV9jYWNoZQogICAgICAgIHNlbGYucGFja2FnZSA9IHBhZ2UKICAgICAgICBzZWxmLmN1cnJlbnRfdXJsID0gTm9uZQoKICAgIGRlZiBnZW9tZXRyeShzZWxmKToKICAgICAgICAiIiJcCiAgICAgICAgUHJlcGFyZXMgdGhlIHBhcmVudCdzIGdlb21ldHJ5LgogICAgICAgICIiIgogICAgICAgIHNlbGYucGFyZW50LmNvbHVtbmNvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICBzZWxmLnBhcmVudC5yb3djb25maWd1cmUoMCwgd2VpZ2h0PTEpCgogICAgZGVmIHVybChzZWxmLCB1cmw6IHN0ciwgcmVkaXJlY3Q6IGJvb2wgPSBUcnVlKToKICAgICAgICAiIiIKICAgICAgICBUYXJnZXRzIHRoZSBhcHAgdG8gdGhlIHVybCBmb2xsb3dpbmcgcmVkaXJlY3RzIGV4Y2VwdAogICAgICAgIHJlZGlyZWN0IHBhcmFtZXRlciBzZXQgdG8gZmFsc2UuCgogICAgICAgIDpyYWlzZXMgdGFrdGsucGFnZXMuUmVkaXJlY3Q6IEluIGNhc2UgcmVkcmVjdCBzZXQgdG8gZmFsc2UgYW5kIGEKICAgICAgICByZWRpcmVjdCBvY2N1cmVkCiAgICAgICAgIiIiCiAgICAgICAgdGFyZ2V0ID0gdXJsCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5leGVjX3VybCh0YXJnZXQpCiAgICAgICAgICAgIGV4Y2VwdCBSZWRpcmVjdCBhcyByOgogICAgICAgICAgICAgICAgdGFyZ2V0ID0gci51cmwKICAgICAgICAgICAgICAgIGlmIG5vdCByZWRpcmVjdDoKICAgICAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiB2aWV3X2NvbXBvbmVudChzZWxmLCBjb21wb25lbnRzOiAidHVwbGUiLCAqLCBfY2FjaGU9e30pOgogICAgICAgIGlmIHNlbGYuY3VycmVudF9wYWdlIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuY3VycmVudF9wYWdlID0gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuY3VycmVudF9wYWdlICs9IDEKICAgICAgICBjdXJyZW50ID0gc2VsZi5jdXJyZW50X3dpZGdldAogICAgICAgIHNlbGYuaGlzdG9yeS5pbnNlcnQoc2VsZi5jdXJyZW50X3BhZ2UsIGNvbXBvbmVudHMpCiAgICAgICAgcGFyZW50ID0gc2VsZi5wYXJlbnQKICAgICAgICBtYXN0ZXIgPSBOb25lCiAgICAgICAgZm9yIGNvbXBvbmVudCBpbiBjb21wb25lbnRzOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGNvbXBvbmVudCwgdHlwZSk6CiAgICAgICAgICAgICAgICBpZiBjb21wb25lbnQgbm90IGluIF9jYWNoZToKICAgICAgICAgICAgICAgICAgICBfY2FjaGVbY29tcG9uZW50XSA9IGNvbXBvbmVudCgpCiAgICAgICAgICAgICAgICBjb21wb25lbnQgPSBfY2FjaGVbY29tcG9uZW50XQoKICAgICAgICAgICAgY29tcG9uZW50ID0gY29tcG9uZW50CiAgICAgICAgICAgIHBhcmVudC5jb2x1bW5jb25maWd1cmUoMCwgd2VpZ2h0PTEpCiAgICAgICAgICAgIHBhcmVudC5yb3djb25maWd1cmUoMCwgd2VpZ2h0PTEpCiAgICAgICAgICAgIGNvbXBvbmVudC5yZW5kZXIocGFyZW50KQogICAgICAgICAgICBjb250YWluZXIgPSBjb21wb25lbnQuY29udGFpbmVyCiAgICAgICAgICAgIGNvbnRhaW5lci5ncmlkKGNvbHVtbj0wLCByb3c9MCwgc3RpY2t5PSJuc2V3IikKICAgICAgICAgICAgbWFzdGVyID0gbWFzdGVyIG9yIGNvbnRhaW5lcgogICAgICAgICAgICBwYXJlbnQgPSBjb21wb25lbnQub3V0bGV0CiAgICAgICAgc2VsZi5jdXJyZW50X3dpZGdldCA9IG1hc3RlcgogICAgICAgIGlmIGN1cnJlbnQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuZGVzdHJveV9sYXRlcihtYXN0ZXIpCgogICAgZGVmIGRlc3Ryb3lfbGF0ZXIoc2VsZiwgd2lkZ2V0LCBjYWNoZT1bXSk6CiAgICAgICAgY2FjaGUuYXBwZW5kKHdpZGdldCkKICAgICAgICBpZiBsZW4oY2FjaGUpID4gc2VsZi5kZXN0cm95X2NhY2hlOgogICAgICAgICAgICBjYWNoZS5wb3AoMCkuZGVzdHJveSgpCgogICAgZGVmIGJhY2soc2VsZik6CiAgICAgICAgaWYgc2VsZi5jdXJyZW50X3BhZ2UgPiAwOgogICAgICAgICAgICBzZWxmLmZvY3VzX3BhZ2Uoc2VsZi5jdXJyZW50X3BhZ2UgLSAxKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBmb3J3YXJkKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY3VycmVudF9wYWdlIDwgbGVuKHNlbGYuaGlzdG9yeSkgLSAxOgogICAgICAgICAgICBzZWxmLmZvY3VzX3BhZ2Uoc2VsZi5jdXJyZW50X3BhZ2UgKyAxKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBmb2N1c19wYWdlKHNlbGYsIGlkeCk6CiAgICAgICAgcGFnZSA9IHNlbGYuaGlzdG9yeVtpZHhdCiAgICAgICAgaWYgc2VsZi5jdXJyZW50X3dpZGdldCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5jdXJyZW50X3dpZGdldC5kZXN0cm95KCkKICAgICAgICBzZWxmLmhpc3RvcnlbaWR4XS5yZW5kZXIoc2VsZi5wYXJlbnQpCiAgICAgICAgc2VsZi5jdXJyZW50X3dpZGdldCA9IHNlbGYuaGlzdG9yeVtpZHhdLmNvbnRhaW5lcgogICAgICAgIHNlbGYuY3VycmVudF93aWRnZXQuZ3JpZChjb2x1bW49MCwgcm93PTAsIHN0aWNreT0ibnNldyIpCiAgICAgICAgc2VsZi5jdXJyZW50X3BhZ2UgPSBpZHgKCiAgICBkZWYgZXhlY191cmwoc2VsZiwgY21kKToKICAgICAgICBpZiBjbWQuc3RyaXAoIi8iKSA9PSAiIWN1cnJlbnQiOgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgTm9uZSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAib2siOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICJ1cmwiOiBzZWxmLmN1cnJlbnRfdXJsLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKQogICAgICAgIGVsaWYgY21kLnN0cmlwKCIvIikgPT0gIiFiYWNrIjoKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIE5vbmUsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm9rIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAiY2hhbmdlZCI6IHNlbGYuYmFjaygpLAogICAgICAgICAgICAgICAgICAgICJ1cmwiOiBzZWxmLmN1cnJlbnRfdXJsLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKQogICAgICAgIGVsaWYgY21kLnN0cmlwKCIvIikgPT0gIiFmb3J3YXJkIjoKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIE5vbmUsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm9rIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAiY2hhbmdlZCI6IHNlbGYuZm9yd2FyZCgpLAogICAgICAgICAgICAgICAgICAgICJ1cmwiOiBzZWxmLmN1cnJlbnRfdXJsLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHBhcnNlZCA9IHVybHBhcnNlKGNtZCkKICAgICAgICAgICAgYXJncyA9IHtrOiBqc29uLmxvYWRzKHYpIGZvciBrLCB2IGluIHBhcnNlX3FzbChwYXJzZWQucXVlcnkpfQogICAgICAgICAgICBoYW5kbGVyID0gcGFyc2VkLmZyYWdtZW50CiAgICAgICAgICAgIHBhdGggPSBwYXJzZWQucGF0aAogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAiQCIgaW4gcGF0aAogICAgICAgICAgICAgICAgYW5kIGxlbihzZXQocGF0aFtwYXRoLmluZGV4KCJAIikgKyAxIDpdKSAtIEhBTkRMRVJfTkFNRSkgPT0gMAogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgcGF0aCwgaGFuZGxlciA9IHBhdGgucnNwbGl0KCJAIiwgMSkKICAgICAgICAgICAgc2VsZi5jdXJyZW50X3VybCA9IHBhcnNlZC5wYXRoCiAgICAgICAgICAgIHJldHVybiBzZWxmKHBhdGgsIGhhbmRsZXIsIGFyZ3MpCgogICAgZGVmIF9fY2FsbF9fKHNlbGYsIG1vZHVsZSwgaGFuZGxlciwgcGFyYW1zPXt9LCAvLCAqKmt3cGFyYW1zKToKICAgICAgICBmcm9tIC5jb21wb25lbnQgaW1wb3J0IENvbXBvbmVudAoKICAgICAgICBpZiBpc2luc3RhbmNlKG1vZHVsZSwgc3RyKToKICAgICAgICAgICAgbW9kdWxlLCB1cmxwYXJhbXMsIGxheW91dHMgPSBzZWxmLmltcG9ydF9tb2R1bGUobW9kdWxlKQogICAgICAgIHRyeToKICAgICAgICAgICAgZnVuY3Rpb24gPSBnZXRhdHRyKG1vZHVsZSwgaGFuZGxlciBvciBERUZBVUxUX0hBTkRMRVIpCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIEVycm9yNDA0KGUpCiAgICAgICAgaHR0cCA9IGNvbXAgPSBOb25lCiAgICAgICAgcGFnZSA9IGZ1bmN0aW9uKAogICAgICAgICAgICBzZWxmLnN0b3JlKCkgaWYgY2FsbGFibGUoc2VsZi5zdG9yZSkgZWxzZSBzZWxmLnN0b3JlLAogICAgICAgICAgICAqdXJscGFyYW1zLAogICAgICAgICAgICAqKmt3cGFyYW1zLAogICAgICAgICkKICAgICAgICBpZiBwYWdlIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiAoTm9uZSwgTm9uZSkKICAgICAgICBlbGlmIGlzaW5zdGFuY2UocGFnZSwgdHVwbGUpOgogICAgICAgICAgICBjb21wLCBodHRwID0gcGFnZQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShwYWdlLCBDb21wb25lbnQpOgogICAgICAgICAgICBjb21wID0gcGFnZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGh0dHAgPSBwYWdlCiAgICAgICAgaWYgY29tcCBpcyBub3QgTm9uZToKICAgICAgICAgICAgbGF5b3V0cy5hcHBlbmQoY29tcCkKICAgICAgICAgICAgc2VsZi52aWV3X2NvbXBvbmVudCh0dXBsZShsYXlvdXRzKSkKICAgICAgICByZXR1cm4gKHR1cGxlKGxheW91dHMpLCBodHRwKQoKICAgIGRlZiBpbXBvcnRfbW9kdWxlKHNlbGYsIHBhdGgpOgogICAgICAgIG1vZHVsZSA9IHNlbGYucGFja2FnZQogICAgICAgIHBhcmFtcyA9IFtdCiAgICAgICAgbGF5b3V0cyA9IFtdCiAgICAgICAgaWYgaGFzYXR0cihtb2R1bGUsICJsYXlvdXQiKToKICAgICAgICAgICAgbGF5b3V0cy5hcHBlbmQobW9kdWxlLmxheW91dCkKICAgICAgICBmb3IgcGFja2FnZSBpbiBwYXRoLnN0cmlwKCIvIikuc3BsaXQoIi8iKToKICAgICAgICAgICAgaWYgbm90IHBhY2thZ2Uuc3RyaXAoKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG1vZHVsZSA9IGltcG9ydF9tb2R1bGUobW9kdWxlLl9fcGFja2FnZV9fICsgIi4iICsgcGFja2FnZSkKICAgICAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICAgICAgZm9yIHJlZ2V4LCBuYW1lLCBjb252ZXJ0ZXIgaW4gVVJMUEFUVEVSTlM6CiAgICAgICAgICAgICAgICAgICAgaWYgbWF0Y2ggOj0gcmVnZXguZnVsbG1hdGNoKHBhY2thZ2UpOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGUgPSBpbXBvcnRfbW9kdWxlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5fX3BhY2thZ2VfXyArICIuIiArIG5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbSA9IGNvbnZlcnRlcihwYWNrYWdlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIEVycm9yNDA0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChwYXJhbSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEVycm9yNDA0KHBhdGgpCiAgICAgICAgICAgIGlmIGhhc2F0dHIobW9kdWxlLCAibGF5b3V0Iik6CiAgICAgICAgICAgICAgICBsYXlvdXRzLmFwcGVuZChtb2R1bGUubGF5b3V0KQoKICAgICAgICByZXR1cm4gbW9kdWxlLCBwYXJhbXMsIGxheW91dHMKCgpjbGFzcyBFcnJvcjQwNChWYWx1ZUVycm9yKToKICAgIHBhc3MKCgpjbGFzcyBSZWRpcmVjdChFeGNlcHRpb24pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHVybDogc3RyKToKICAgICAgICBzZWxmLnVybCA9IHVybAogICAgICAgIHN1cGVyKCkuX19pbml0X18oKQoKClNIT1JUQ1VUUyA9IHsKICAgICJpbnQiOiByZS5jb21waWxlKHIiXlxkKyQiKSwKICAgICJkZWNpbWFsIjogcmUuY29tcGlsZShyIl5cZCtcLlxkKyQiKSwKICAgICJzdHIiOiByZS5jb21waWxlKHIiLisiKSwKICAgICJ1dWlkIjogcmUuY29tcGlsZSgKICAgICAgICByIltcZGEtZl17OH1cLVtcZGEtZl17NH1cLVtcZGEtZl17NH1cLVtcZGEtZl17NH1cLVtcZGEtZl17MTJ9IiwKICAgICksCn0KVVJMUEFUVEVSTlMgPSBbCiAgICAoImludCIsIGludCksCiAgICAoImRlY2ltYWwiLCBEZWNpbWFsKSwKICAgICgic3RyIiwgc3RyKSwKICAgICgidXVpZCIsIFVVSUQpLApdClVSTFBBVFRFUk5TID0gWyhTSE9SVENVVFNbbl0sIG4sIGMpIGZvciBuLCBjIGluIFVSTFBBVFRFUk5TXQoKCmRlZiByZWdpc3Rlcl91cmxwYXR0ZXJuKHJlZ2V4LCBjb252ZXJ0ZXI9Tm9uZSwgbmFtZT1Ob25lLCBwb3NpdGlvbj0tMik6CiAgICBkZWYgcmVnaXN0ZXJyZXIoZnVuYyk6CiAgICAgICAgbm9ubG9jYWwgbmFtZSwgcmVnZXgKICAgICAgICBpZiBuYW1lIGlzIE5vbmU6CiAgICAgICAgICAgIG5hbWUgPSBmdW5jLl9fbmFtZV9fLmxvd2VyKCkKICAgICAgICBpZiBsZW4ocmVnZXgpID4gMiBhbmQgcmVnZXhbMF0gPT0gIjwiIGFuZCByZWdleFstMV0gPT0gIj4iOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZWdleCA9IFNIT1JUQ1VUU1tyZWdleFsxOi0xXV0KICAgICAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiVW5rbm93biB1cmwgc2hvcnRjdXQ6IHtyZWdleCFyfSIpCiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShyZWdleCwgcmUuUGF0dGVybik6CiAgICAgICAgICAgIHJlZ2V4ID0gcmUuY29tcGlsZShyZWdleCkKICAgICAgICBVUkxQQVRURVJOUy5pbnNlcnQocG9zaXRpb24sIChyZWdleCwgIl8iICsgbmFtZSwgZnVuYykpCgogICAgaWYgY29udmVydGVyIGlzIG5vdCBOb25lOgogICAgICAgIHJldHVybiByZWdpc3RlcnJlcihjb252ZXJ0ZXIpCiAgICBlbHNlOgogICAgICAgIHJldHVybiByZWdpc3RlcnJlcgo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADoAAAAAAAAAOgAAAAAAAAAAAAAAAAA8L8"
				],
				[
					119,
					1,
					"delete_word",
					{
						"forward": false
					},
					"AQAAAIIFAAAAAAAAggUAAAAAAAAlAAAAICAgICAgICBzZWxmLnN0b3JlID0gYXBwLmdldF9zdG9yZSgpCg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCBQAAAAAAAKcFAAAAAAAAAAAAAAAA8L8"
				],
				[
					122,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAbyIAAAAAAABvIgAAaW1wb3J0IGpzb24KaW1wb3J0IHJlCmltcG9ydCBzdHJpbmcKZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsCmZyb20gaW1wb3J0bGliIGltcG9ydCBpbXBvcnRfbW9kdWxlCmZyb20gbG9nZ2luZyBpbXBvcnQgZ2V0TG9nZ2VyCmZyb20gdGtpbnRlciBpbXBvcnQgVGssIFdpZGdldApmcm9tIHR5cGVzIGltcG9ydCBNb2R1bGVUeXBlCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIE9wdGlvbmFsLCBDYWxsYWJsZQpmcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgcGFyc2VfcXNsLCB1cmxwYXJzZQpmcm9tIHV1aWQgaW1wb3J0IFVVSUQKCmZyb20gcHlvbG9hZCBpbXBvcnQgYW5ub3RhdGUKCmZyb20gLiBpbXBvcnQgYXBwbGljYXRpb24sIGNvbXBvbmVudApmcm9tIC4gaW1wb3J0IHN0b3JlIGFzIHN0b3JlXwoKbG9nID0gZ2V0TG9nZ2VyKF9fbmFtZV9fKQoKCkhBTkRMRVJfTkFNRSA9IHNldChzdHJpbmcuYXNjaWlfbGV0dGVycyArICJfIikKREVGQVVMVF9IQU5ETEVSID0gImRlZmF1bHQiCgoKQGFubm90YXRlCmNsYXNzIFBhZ2VWaWV3OgogICAgIiIiCiAgICBBcHBsaWN0YWlvbnMgcGFnZSB2aWV3LCBwZXJmb3JtcyBwYWdlIHJvdXRpbmcsIGNhY2hpbmcgYW5kIGhpc3RvcnkgZm9yIGEKICAgIHRha3RrIGFwcGxpY2F0aW9uLgogICAgIiIiCgogICAgaGlzdG9yeTogbGlzdAogICAgY3VycmVudF9wYWdlOiBBbnkKICAgIGFwcDogImFwcGxpY2F0aW9uLkFwcGxpY2F0aW9uIgogICAgc3RvcmU6IHN0b3JlXy5TdG9yZSB8IENhbGxhYmxlCiAgICBkZXN0cm95X2NhY2hlOiBpbnQKICAgIHBhY2thZ2U6IE1vZHVsZVR5cGUKICAgIGN1cnJlbnRfdXJsOiBPcHRpb25hbFtzdHJdCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgcGFyZW50OiBUayB8IFdpZGdldCwKICAgICAgICBwYWdlOiBNb2R1bGVUeXBlLAogICAgICAgIHN0b3JlOiAic3RvcmVfLlN0b3JlIHwgQ2FsbGFibGUiLAogICAgICAgIGRlc3Ryb3lfY2FjaGU6IGludCA9IDUsCiAgICApOgogICAgICAgICIiIlwKICAgICAgICA6cGFyYW0gcGFyZW50OiB0aGUgcGFyZW50IHdpZGdldCB0byB2aWV3IHRoZSBwYWdlcyBpbiwgdXN1YWxseSB0aGUKICAgICAgICBvdXRsZXQgb2YgYW4gYXBwcyBsYXlvdXQuCgogICAgICAgIDpwYXJhbSBwYWdlOiBUaGUgbW9kdWxlIHRoZSBhcHAgd2lsbCBmZXRjaCBwYWdlcyBmcm9tLgoKICAgICAgICA6cGFyYW0gZGVzdHJveV9jYWNoZTogRXhwZXJpbWVudGFsIGRlc3Ryb3kgY2FjaGUKICAgICAgICAiIiIKICAgICAgICBzZWxmLmhpc3RvcnkgPSBbXQogICAgICAgIHNlbGYuY3VycmVudF9wYWdlID0gTm9uZQogICAgICAgIHNlbGYucGFyZW50ID0gcGFyZW50CiAgICAgICAgc2VsZi5jdXJyZW50X3dpZGdldCA9IE5vbmUKICAgICAgICBzZWxmLnN0b3JlID0gc3RvcmUKICAgICAgICBzZWxmLmRlc3Ryb3lfY2FjaGUgPSBkZXN0cm95X2NhY2hlCiAgICAgICAgc2VsZi5wYWNrYWdlID0gcGFnZQogICAgICAgIHNlbGYuY3VycmVudF91cmwgPSBOb25lCgogICAgZGVmIGdlb21ldHJ5KHNlbGYpOgogICAgICAgICIiIlwKICAgICAgICBQcmVwYXJlcyB0aGUgcGFyZW50J3MgZ2VvbWV0cnkuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5wYXJlbnQuY29sdW1uY29uZmlndXJlKDAsIHdlaWdodD0xKQogICAgICAgIHNlbGYucGFyZW50LnJvd2NvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKCiAgICBkZWYgdXJsKHNlbGYsIHVybDogc3RyLCByZWRpcmVjdDogYm9vbCA9IFRydWUpOgogICAgICAgICIiIgogICAgICAgIFRhcmdldHMgdGhlIGFwcCB0byB0aGUgdXJsIGZvbGxvd2luZyByZWRpcmVjdHMgZXhjZXB0CiAgICAgICAgcmVkaXJlY3QgcGFyYW1ldGVyIHNldCB0byBmYWxzZS4KCiAgICAgICAgOnJhaXNlcyB0YWt0ay5wYWdlcy5SZWRpcmVjdDogSW4gY2FzZSByZWRyZWN0IHNldCB0byBmYWxzZSBhbmQgYQogICAgICAgIHJlZGlyZWN0IG9jY3VyZWQKICAgICAgICAiIiIKICAgICAgICB0YXJnZXQgPSB1cmwKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBzZWxmLmV4ZWNfdXJsKHRhcmdldCkKICAgICAgICAgICAgZXhjZXB0IFJlZGlyZWN0IGFzIHI6CiAgICAgICAgICAgICAgICB0YXJnZXQgPSByLnVybAogICAgICAgICAgICAgICAgaWYgbm90IHJlZGlyZWN0OgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIHZpZXdfY29tcG9uZW50KHNlbGYsIGNvbXBvbmVudHM6ICJ0dXBsZSIsICosIF9jYWNoZT17fSk6CiAgICAgICAgaWYgc2VsZi5jdXJyZW50X3BhZ2UgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5jdXJyZW50X3BhZ2UgPSAwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5jdXJyZW50X3BhZ2UgKz0gMQogICAgICAgIGN1cnJlbnQgPSBzZWxmLmN1cnJlbnRfd2lkZ2V0CiAgICAgICAgc2VsZi5oaXN0b3J5Lmluc2VydChzZWxmLmN1cnJlbnRfcGFnZSwgY29tcG9uZW50cykKICAgICAgICBwYXJlbnQgPSBzZWxmLnBhcmVudAogICAgICAgIG1hc3RlciA9IE5vbmUKICAgICAgICBmb3IgY29tcG9uZW50IGluIGNvbXBvbmVudHM6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY29tcG9uZW50LCB0eXBlKToKICAgICAgICAgICAgICAgIGlmIGNvbXBvbmVudCBub3QgaW4gX2NhY2hlOgogICAgICAgICAgICAgICAgICAgIF9jYWNoZVtjb21wb25lbnRdID0gY29tcG9uZW50KCkKICAgICAgICAgICAgICAgIGNvbXBvbmVudCA9IF9jYWNoZVtjb21wb25lbnRdCgogICAgICAgICAgICBjb21wb25lbnQgPSBjb21wb25lbnQKICAgICAgICAgICAgcGFyZW50LmNvbHVtbmNvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICAgICAgcGFyZW50LnJvd2NvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICAgICAgY29tcG9uZW50LnJlbmRlcihwYXJlbnQpCiAgICAgICAgICAgIGNvbnRhaW5lciA9IGNvbXBvbmVudC5jb250YWluZXIKICAgICAgICAgICAgY29udGFpbmVyLmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKQogICAgICAgICAgICBtYXN0ZXIgPSBtYXN0ZXIgb3IgY29udGFpbmVyCiAgICAgICAgICAgIHBhcmVudCA9IGNvbXBvbmVudC5vdXRsZXQKICAgICAgICBzZWxmLmN1cnJlbnRfd2lkZ2V0ID0gbWFzdGVyCiAgICAgICAgaWYgY3VycmVudCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5kZXN0cm95X2xhdGVyKG1hc3RlcikKCiAgICBkZWYgZGVzdHJveV9sYXRlcihzZWxmLCB3aWRnZXQsIGNhY2hlPVtdKToKICAgICAgICBjYWNoZS5hcHBlbmQod2lkZ2V0KQogICAgICAgIGlmIGxlbihjYWNoZSkgPiBzZWxmLmRlc3Ryb3lfY2FjaGU6CiAgICAgICAgICAgIGNhY2hlLnBvcCgwKS5kZXN0cm95KCkKCiAgICBkZWYgYmFjayhzZWxmKToKICAgICAgICBpZiBzZWxmLmN1cnJlbnRfcGFnZSA+IDA6CiAgICAgICAgICAgIHNlbGYuZm9jdXNfcGFnZShzZWxmLmN1cnJlbnRfcGFnZSAtIDEpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGZvcndhcmQoc2VsZik6CiAgICAgICAgaWYgc2VsZi5jdXJyZW50X3BhZ2UgPCBsZW4oc2VsZi5oaXN0b3J5KSAtIDE6CiAgICAgICAgICAgIHNlbGYuZm9jdXNfcGFnZShzZWxmLmN1cnJlbnRfcGFnZSArIDEpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGZvY3VzX3BhZ2Uoc2VsZiwgaWR4KToKICAgICAgICBwYWdlID0gc2VsZi5oaXN0b3J5W2lkeF0KICAgICAgICBpZiBzZWxmLmN1cnJlbnRfd2lkZ2V0IGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfd2lkZ2V0LmRlc3Ryb3koKQogICAgICAgIHNlbGYuaGlzdG9yeVtpZHhdLnJlbmRlcihzZWxmLnBhcmVudCkKICAgICAgICBzZWxmLmN1cnJlbnRfd2lkZ2V0ID0gc2VsZi5oaXN0b3J5W2lkeF0uY29udGFpbmVyCiAgICAgICAgc2VsZi5jdXJyZW50X3dpZGdldC5ncmlkKGNvbHVtbj0wLCByb3c9MCwgc3RpY2t5PSJuc2V3IikKICAgICAgICBzZWxmLmN1cnJlbnRfcGFnZSA9IGlkeAoKICAgIGRlZiBleGVjX3VybChzZWxmLCBjbWQpOgogICAgICAgIGlmIGNtZC5zdHJpcCgiLyIpID09ICIhY3VycmVudCI6CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBOb25lLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJvayI6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgInVybCI6IHNlbGYuY3VycmVudF91cmwsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICApCiAgICAgICAgZWxpZiBjbWQuc3RyaXAoIi8iKSA9PSAiIWJhY2siOgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgTm9uZSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAib2siOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICJjaGFuZ2VkIjogc2VsZi5iYWNrKCksCiAgICAgICAgICAgICAgICAgICAgInVybCI6IHNlbGYuY3VycmVudF91cmwsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICApCiAgICAgICAgZWxpZiBjbWQuc3RyaXAoIi8iKSA9PSAiIWZvcndhcmQiOgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgTm9uZSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAib2siOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICJjaGFuZ2VkIjogc2VsZi5mb3J3YXJkKCksCiAgICAgICAgICAgICAgICAgICAgInVybCI6IHNlbGYuY3VycmVudF91cmwsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGFyc2VkID0gdXJscGFyc2UoY21kKQogICAgICAgICAgICBhcmdzID0ge2s6IGpzb24ubG9hZHModikgZm9yIGssIHYgaW4gcGFyc2VfcXNsKHBhcnNlZC5xdWVyeSl9CiAgICAgICAgICAgIGhhbmRsZXIgPSBwYXJzZWQuZnJhZ21lbnQKICAgICAgICAgICAgcGF0aCA9IHBhcnNlZC5wYXRoCiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICJAIiBpbiBwYXRoCiAgICAgICAgICAgICAgICBhbmQgbGVuKHNldChwYXRoW3BhdGguaW5kZXgoIkAiKSArIDEgOl0pIC0gSEFORExFUl9OQU1FKSA9PSAwCiAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICBwYXRoLCBoYW5kbGVyID0gcGF0aC5yc3BsaXQoIkAiLCAxKQogICAgICAgICAgICBzZWxmLmN1cnJlbnRfdXJsID0gcGFyc2VkLnBhdGgKICAgICAgICAgICAgcmV0dXJuIHNlbGYocGF0aCwgaGFuZGxlciwgYXJncykKCiAgICBkZWYgX19jYWxsX18oc2VsZiwgbW9kdWxlLCBoYW5kbGVyLCBwYXJhbXM9e30sIC8sICoqa3dwYXJhbXMpOgogICAgICAgIGZyb20gLmNvbXBvbmVudCBpbXBvcnQgQ29tcG9uZW50CgogICAgICAgIGlmIGlzaW5zdGFuY2UobW9kdWxlLCBzdHIpOgogICAgICAgICAgICBtb2R1bGUsIHVybHBhcmFtcywgbGF5b3V0cyA9IHNlbGYuaW1wb3J0X21vZHVsZShtb2R1bGUpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmdW5jdGlvbiA9IGdldGF0dHIobW9kdWxlLCBoYW5kbGVyIG9yIERFRkFVTFRfSEFORExFUikKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgRXJyb3I0MDQoZSkKICAgICAgICBodHRwID0gY29tcCA9IE5vbmUKICAgICAgICBwYWdlID0gZnVuY3Rpb24oCiAgICAgICAgICAgIHNlbGYuc3RvcmUoKSBpZiBjYWxsYWJsZShzZWxmLnN0b3JlKSBlbHNlIHNlbGYuc3RvcmUsCiAgICAgICAgICAgICp1cmxwYXJhbXMsCiAgICAgICAgICAgICoqa3dwYXJhbXMsCiAgICAgICAgKQogICAgICAgIGlmIHBhZ2UgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIChOb25lLCBOb25lKQogICAgICAgIGVsaWYgaXNpbnN0YW5jZShwYWdlLCB0dXBsZSk6CiAgICAgICAgICAgIGNvbXAsIGh0dHAgPSBwYWdlCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHBhZ2UsIENvbXBvbmVudCk6CiAgICAgICAgICAgIGNvbXAgPSBwYWdlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaHR0cCA9IHBhZ2UKICAgICAgICBpZiBjb21wIGlzIG5vdCBOb25lOgogICAgICAgICAgICBsYXlvdXRzLmFwcGVuZChjb21wKQogICAgICAgICAgICBzZWxmLnZpZXdfY29tcG9uZW50KHR1cGxlKGxheW91dHMpKQogICAgICAgIHJldHVybiAodHVwbGUobGF5b3V0cyksIGh0dHApCgogICAgZGVmIGltcG9ydF9tb2R1bGUoc2VsZiwgcGF0aCk6CiAgICAgICAgbW9kdWxlID0gc2VsZi5wYWNrYWdlCiAgICAgICAgcGFyYW1zID0gW10KICAgICAgICBsYXlvdXRzID0gW10KICAgICAgICBpZiBoYXNhdHRyKG1vZHVsZSwgImxheW91dCIpOgogICAgICAgICAgICBsYXlvdXRzLmFwcGVuZChtb2R1bGUubGF5b3V0KQogICAgICAgIGZvciBwYWNrYWdlIGluIHBhdGguc3RyaXAoIi8iKS5zcGxpdCgiLyIpOgogICAgICAgICAgICBpZiBub3QgcGFja2FnZS5zdHJpcCgpOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbW9kdWxlID0gaW1wb3J0X21vZHVsZShtb2R1bGUuX19wYWNrYWdlX18gKyAiLiIgKyBwYWNrYWdlKQogICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICBmb3IgcmVnZXgsIG5hbWUsIGNvbnZlcnRlciBpbiBVUkxQQVRURVJOUzoKICAgICAgICAgICAgICAgICAgICBpZiBtYXRjaCA6PSByZWdleC5mdWxsbWF0Y2gocGFja2FnZSk6CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZSA9IGltcG9ydF9tb2R1bGUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlLl9fcGFja2FnZV9fICsgIi4iICsgbmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtID0gY29udmVydGVyKHBhY2thZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXJyb3I0MDQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKHBhcmFtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXJyb3I0MDQocGF0aCkKICAgICAgICAgICAgaWYgaGFzYXR0cihtb2R1bGUsICJsYXlvdXQiKToKICAgICAgICAgICAgICAgIGxheW91dHMuYXBwZW5kKG1vZHVsZS5sYXlvdXQpCgogICAgICAgIHJldHVybiBtb2R1bGUsIHBhcmFtcywgbGF5b3V0cwoKCmNsYXNzIEVycm9yNDA0KFZhbHVlRXJyb3IpOgogICAgcGFzcwoKCmNsYXNzIFJlZGlyZWN0KEV4Y2VwdGlvbik6CiAgICBkZWYgX19pbml0X18oc2VsZiwgdXJsOiBzdHIpOgogICAgICAgIHNlbGYudXJsID0gdXJsCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCgoKU0hPUlRDVVRTID0gewogICAgImludCI6IHJlLmNvbXBpbGUociJeXGQrJCIpLAogICAgImRlY2ltYWwiOiByZS5jb21waWxlKHIiXlxkK1wuXGQrJCIpLAogICAgInN0ciI6IHJlLmNvbXBpbGUociIuKyIpLAogICAgInV1aWQiOiByZS5jb21waWxlKAogICAgICAgIHIiW1xkYS1mXXs4fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXs0fVwtW1xkYS1mXXsxMn0iLAogICAgKSwKfQpVUkxQQVRURVJOUyA9IFsKICAgICgiaW50IiwgaW50KSwKICAgICgiZGVjaW1hbCIsIERlY2ltYWwpLAogICAgKCJzdHIiLCBzdHIpLAogICAgKCJ1dWlkIiwgVVVJRCksCl0KVVJMUEFUVEVSTlMgPSBbKFNIT1JUQ1VUU1tuXSwgbiwgYykgZm9yIG4sIGMgaW4gVVJMUEFUVEVSTlNdCgoKZGVmIHJlZ2lzdGVyX3VybHBhdHRlcm4ocmVnZXgsIGNvbnZlcnRlcj1Ob25lLCBuYW1lPU5vbmUsIHBvc2l0aW9uPS0yKToKICAgIGRlZiByZWdpc3RlcnJlcihmdW5jKToKICAgICAgICBub25sb2NhbCBuYW1lLCByZWdleAogICAgICAgIGlmIG5hbWUgaXMgTm9uZToKICAgICAgICAgICAgbmFtZSA9IGZ1bmMuX19uYW1lX18ubG93ZXIoKQogICAgICAgIGlmIGxlbihyZWdleCkgPiAyIGFuZCByZWdleFswXSA9PSAiPCIgYW5kIHJlZ2V4Wy0xXSA9PSAiPiI6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJlZ2V4ID0gU0hPUlRDVVRTW3JlZ2V4WzE6LTFdXQogICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJVbmtub3duIHVybCBzaG9ydGN1dDoge3JlZ2V4IXJ9IikKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKHJlZ2V4LCByZS5QYXR0ZXJuKToKICAgICAgICAgICAgcmVnZXggPSByZS5jb21waWxlKHJlZ2V4KQogICAgICAgIFVSTFBBVFRFUk5TLmluc2VydChwb3NpdGlvbiwgKHJlZ2V4LCAiXyIgKyBuYW1lLCBmdW5jKSkKCiAgICBpZiBjb252ZXJ0ZXIgaXMgbm90IE5vbmU6CiAgICAgICAgcmV0dXJuIHJlZ2lzdGVycmVyKGNvbnZlcnRlcikKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIHJlZ2lzdGVycmVyCg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCBQAAAAAAAIIFAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "examples/todoapp/todoapp/taktk.py",
			"settings":
			{
				"buffer_size": 3812,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"left_delete",
					null,
					"AQAAANAGAAAAAAAA0AYAAAAAAAA0AAAAICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGUpCg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANAGAAAAAAAABAcAAAAAAAAAAAAAAADwvw"
				],
				[
					11,
					1,
					"left_delete",
					null,
					"AQAAAIgGAAAAAAAAiAYAAAAAAAANAAAAICAgICAgICB0cnk6Cg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIgGAAAAAAAAlQYAAAAAAAAAAAAAAADwvw"
				],
				[
					13,
					1,
					"left_delete",
					null,
					"AQAAAJAGAAAAAAAAkAYAAAAAAAAEAAAAICAgIA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJQGAAAAAAAAlAYAAAAAAAAAAAAAAADwvw"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": "get_"
					},
					"BAAAAK8GAAAAAAAAsAYAAAAAAAAAAAAAsAYAAAAAAACxBgAAAAAAAAAAAACxBgAAAAAAALIGAAAAAAAAAAAAALIGAAAAAAAAswYAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAK8GAAAAAAAArwYAAAAAAAAAAAAAAADwvw"
				],
				[
					17,
					1,
					"insert",
					{
						"characters": "()"
					},
					"AgAAALgGAAAAAAAAuQYAAAAAAAAAAAAAuQYAAAAAAAC6BgAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALgGAAAAAAAAuAYAAAAAAAAAAAAAAADwvw"
				],
				[
					20,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAA3g4AAAAAAADeDgAAaW1wb3J0IHRha3RrCmltcG9ydCB0YWt0ay5hcHBsaWNhdGlvbgppbXBvcnQgdGFrdGsuY29tcG9uZW50CmltcG9ydCB0YWt0ay5kaWN0aW9uYXJ5CmltcG9ydCB0YWt0ay5tZW51CmltcG9ydCB0YWt0ay5ub3RpZmljYXRpb24KaW1wb3J0IHRha3RrLndyaXRlYWJsZQoKCmZyb20gLiBpbXBvcnQgcGFnZXMKCmZyb20gLmFkbWluIGltcG9ydCBESVIKCnJlY2VudF9maWxlcyA9IFsiYW1hLnB5IiwgInRlc3QucHkiLCAidHRrYm9vdHN0cmFwLnB5IiwgImxhYmVsLnB5Il0KCgpjbGFzcyBBcHBsaWNhdGlvbih0YWt0ay5hcHBsaWNhdGlvbi5BcHBsaWNhdGlvbik6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygKICAgICAgICAgICAgaWNvbj0iQGljb24iLAogICAgICAgICAgICBkaWN0aW9uYXJpZXM9RElSIC8gImRpY3Rpb25hcmllcyIsCiAgICAgICAgICAgIG1lZGlhX3BhdGg9RElSIC8gIm1lZGlhIiwKICAgICAgICAgICAgcGFyYW1zPWRpY3QoCiAgICAgICAgICAgICAgICB0aGVtZW5hbWU9ImRhcmtseSIsCiAgICAgICAgICAgICAgICBtaW5zaXplPSg4MDAsIDQwMCksCiAgICAgICAgICAgICksCiAgICAgICAgICAgIGFkZHJlc3M9KCIiLCA1Njc4OSksCiAgICAgICAgICAgIG1lbnU9dGFrdGsubWFrZV9tZW51KAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJAZmlsZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIkBvcGVuIjogbGFtYmRhOiBOb25lLAogICAgICAgICAgICAgICAgICAgICAgICAiIXNlcCI6IE5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICJAL21lbnUucXVpdCI6IGV4aXQsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiQHByZWZlcmVuY2VzIjogewogICAgICAgICAgICAgICAgICAgICAgICAiQGxhbmd1YWdlIjoge30sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiQHF1aXQiOiBleGl0LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9ucz0ibWVudSIsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHN0b3JlPSgKICAgICAgICAgICAgICAgIERJUiAvICJzdG9yZS5qc29uIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibGFuZ3VhZ2UiOiAiZW5nbGlzaCIsCiAgICAgICAgICAgICAgICAgICAgInRoZW1lIjogImRhcmtseSIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICApLAogICAgICAgICAgICBwYWdlcz1wYWdlcywKICAgICAgICAgICAgbGF5b3V0PUxheW91dCwKICAgICAgICApCgogICAgZGVmIGluaXQoc2VsZik6CiAgICAgICAgc2VsZi5tZW51WyJAcHJlZmVyZW5jZXMvQGxhbmd1YWdlIl0gPSB7CiAgICAgICAgICAgIGxhbmc6IHNlbGYuZGljdGlvbmFyaWVzLmdldChsYW5nKS5pbnN0YWxsCiAgICAgICAgICAgIGZvciBsYW5nIGluIHNlbGYuZGljdGlvbmFyaWVzLmxhbmd1YWdlcwogICAgICAgIH0KICAgICAgICBzdHlsZSA9IHNlbGYucm9vdC5zdHlsZQogICAgICAgIHNlbGYubWVudVsiQHByZWZlcmVuY2VzL0B0aGVtZSJdID0gewogICAgICAgICAgICB0OiBsYW1iZGEgcz1zZWxmLnNldF90aGVtZSwgdD10OiBzKHQpIGZvciB0IGluIHN0eWxlLnRoZW1lX25hbWVzKCkKICAgICAgICB9CiAgICAgICAgc2VsZi5yb290LnN0eWxlLnRoZW1lX3VzZShzZWxmLmdldF9zdG9yZSgpWyJ0aGVtZSJdKQogICAgICAgIHNlbGYubWVudS51cGRhdGUoKQogICAgICAgIHNlbGYuc2V0X2xhbmd1YWdlKHNlbGYuZ2V0X3N0b3JlKClbImxhbmd1YWdlIl0pCiAgICAgICAgdGFrdGsuZGljdGlvbmFyeS5EaWN0aW9uYXJ5LnN1YnNjcmliZShOb25lLCBzZWxmLnVwZGF0ZV9sYW5ndWFnZSkKCiAgICBkZWYgc2V0X3RoZW1lKHNlbGYsIHRoZW1lKToKICAgICAgICBmcm9tIGJ1aWx0aW5zIGltcG9ydCBfCgogICAgICAgIHNlbGYucm9vdC5zdHlsZS50aGVtZV91c2UodGhlbWUpCiAgICAgICAgc2VsZi5zdG9yZVsidGhlbWUiXSA9IHRoZW1lCiAgICAgICAgdGFrdGsubm90aWZ5KAogICAgICAgICAgICAiVG9kb3MiLAogICAgICAgICAgICBfKCJwcmVmZXJlbmNlcy5zdWNjZXNzX21vZGlmaWVkIiksCiAgICAgICAgICAgIGJvb3RzdHlsZT0iaW5mbyIsCiAgICAgICAgICAgIGR1cmF0aW9uPTEwMDAwLAogICAgICAgICkKCiAgICBkZWYgYmFjayhzZWxmKToKICAgICAgICBzZWxmLnZpZXcuYmFjaygpCgogICAgZGVmIGZvcndhcmQoc2VsZik6CiAgICAgICAgc2VsZi52aWV3LmZvcndhcmQoKQoKICAgIGRlZiB1cGRhdGVfbGFuZ3VhZ2Uoc2VsZik6CiAgICAgICAgc3RvcmUgPSBzZWxmLmdldF9zdG9yZSgpCiAgICAgICAgc3RvcmVbImxhbmd1YWdlIl0gPSBfLmxhbmd1YWdlCiAgICAgICAgc3RvcmUuc2F2ZSgpCiAgICAgICAgdGFrdGsubm90aWZpY2F0aW9uLk5vdGlmaWNhdGlvbigKICAgICAgICAgICAgIlRvZG9zIiwKICAgICAgICAgICAgXygicHJlZmVyZW5jZXMuc3VjY2Vzc19tb2RpZmllZCIpLAogICAgICAgICAgICBib290c3R5bGU9ImluZm8iLAogICAgICAgICAgICBkdXJhdGlvbj0xMDAwMCwKICAgICAgICApLnNob3coKQoKCkB0YWt0ay5jb21wb25lbnQuY29tcG9uZW50CmRlZiBMYXlvdXQoc2VsZik6CiAgICByIiIiCiAgICBcZnJhbWUKICAgICAgICBcZnJhbWUgcGFkZGluZz01IHBvczpwYWNrCiAgICAgICAgICAgIFxidXR0b24gY29tbWFuZD17YmFja30gICAgICAgIGltYWdlPTxpbWc6QGJhY2t3YXJke3dpZHRoOiAyMH0+IFwKICAgICAgICAgICAgICAgIHBvczpncmlkPTAsMCBwb3M6c3RpY2t5PSd3JyBib290c3R5bGU9J2Rhcmsgb3V0bGluZScKICAgICAgICAgICAgXGJ1dHRvbiBjb21tYW5kPXtndF91c2Vyc31cCiAgICAgICAgICAgICAgICBpbWFnZT08aW1nOkB1c2Vycy1iZXR3ZWVuLWxpbmVze2hlaWdodDogMjB9PiBwb3M6Z3JpZD0xLDBcCiAgICAgICAgICAgICAgICBwb3M6c3RpY2t5PSd3JyBib290c3R5bGU9J2Rhcmsgb3V0bGluZScKICAgICAgICAgICAgXGJ1dHRvbiBjb21tYW5kPXtndF90b2Rvc31cCiAgICAgICAgICAgICAgICBpbWFnZT08aW1nOkBjaGVjay1kb3VibGV7aGVpZ2h0OiAyMH0+IHBvczpncmlkPTIsMFwKICAgICAgICAgICAgICAgIHBvczpzdGlja3k9J3cnIGJvb3RzdHlsZT0nZGFyayBvdXRsaW5lJwogICAgICAgICAgICBcbGFiZWxcCiAgICAgICAgICAgICAgICB0ZXh0PXtmJ2xvZ2dlZCBpbiBhczoge1VzZXIuY3VycmVudCgpLm5hbWV9JyBpZiBVc2VyLmN1cnJlbnQoKSBlbHNlICJub3QgbG9nZ2VkIGluISJ9XAogICAgICAgICAgICAgICAgcG9zOmdyaWQ9MywwCiAgICAgICAgICAgIFxidXR0b24gY29tbWFuZD17Zm9yd2FyZH0gaW1hZ2U9PGltZzpAZm9yd2FyZHt3aWR0aDogMjB9PlwKICAgICAgICAgICAgICAgIHBvczpncmlkPTUsMCBwb3M6c3RpY2t5PSdlJyBib290c3R5bGU9J2Rhcmsgb3V0bGluZScKICAgICAgICBcZnJhbWU6b3V0bGV0IHBvczpwYWNrCiAgICAiIiIKICAgIGZyb20gLmFkbWluIGltcG9ydCBVc2VyCgogICAgdXNlciA9IE5vbmUKCiAgICBkZWYgYmFjaygpOgogICAgICAgIHRha3RrLmFwcGxpY2F0aW9uLmJhY2soKQoKICAgIGRlZiBmb3J3YXJkKCk6CiAgICAgICAgdGFrdGsuYXBwbGljYXRpb24uZm9yd2FyZCgpCgogICAgZGVmIGd0X3VzZXJzKCk6CiAgICAgICAgdGFrdGsuYXBwbGljYXRpb24oInVzZXJzIikKCiAgICBkZWYgZ3RfdG9kb3MoKToKICAgICAgICB0YWt0ay5hcHBsaWNhdGlvbigidG9kb3MiKQoKICAgIHJldHVybiBsb2NhbHMoKSB8IGdsb2JhbHMoKQo",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALoGAAAAAAAAugYAAAAAAAAAAAAAAADwvw"
				],
				[
					39,
					1,
					"",
					null,
					"AQAAANQHAAAAAAAA5AcAAAAAAAAKAAAAc2VsZi5zdG9yZQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANQHAAAAAAAA3gcAAAAAAAAAAAAAAADwvw"
				],
				[
					42,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAA5A4AAAAAAADkDgAAaW1wb3J0IHRha3RrCmltcG9ydCB0YWt0ay5hcHBsaWNhdGlvbgppbXBvcnQgdGFrdGsuY29tcG9uZW50CmltcG9ydCB0YWt0ay5kaWN0aW9uYXJ5CmltcG9ydCB0YWt0ay5tZW51CmltcG9ydCB0YWt0ay5ub3RpZmljYXRpb24KaW1wb3J0IHRha3RrLndyaXRlYWJsZQoKCmZyb20gLiBpbXBvcnQgcGFnZXMKCmZyb20gLmFkbWluIGltcG9ydCBESVIKCnJlY2VudF9maWxlcyA9IFsiYW1hLnB5IiwgInRlc3QucHkiLCAidHRrYm9vdHN0cmFwLnB5IiwgImxhYmVsLnB5Il0KCgpjbGFzcyBBcHBsaWNhdGlvbih0YWt0ay5hcHBsaWNhdGlvbi5BcHBsaWNhdGlvbik6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygKICAgICAgICAgICAgaWNvbj0iQGljb24iLAogICAgICAgICAgICBkaWN0aW9uYXJpZXM9RElSIC8gImRpY3Rpb25hcmllcyIsCiAgICAgICAgICAgIG1lZGlhX3BhdGg9RElSIC8gIm1lZGlhIiwKICAgICAgICAgICAgcGFyYW1zPWRpY3QoCiAgICAgICAgICAgICAgICB0aGVtZW5hbWU9ImRhcmtseSIsCiAgICAgICAgICAgICAgICBtaW5zaXplPSg4MDAsIDQwMCksCiAgICAgICAgICAgICksCiAgICAgICAgICAgIGFkZHJlc3M9KCIiLCA1Njc4OSksCiAgICAgICAgICAgIG1lbnU9dGFrdGsubWFrZV9tZW51KAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJAZmlsZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIkBvcGVuIjogbGFtYmRhOiBOb25lLAogICAgICAgICAgICAgICAgICAgICAgICAiIXNlcCI6IE5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICJAL21lbnUucXVpdCI6IGV4aXQsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiQHByZWZlcmVuY2VzIjogewogICAgICAgICAgICAgICAgICAgICAgICAiQGxhbmd1YWdlIjoge30sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiQHF1aXQiOiBleGl0LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9ucz0ibWVudSIsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHN0b3JlPSgKICAgICAgICAgICAgICAgIERJUiAvICJzdG9yZS5qc29uIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibGFuZ3VhZ2UiOiAiZW5nbGlzaCIsCiAgICAgICAgICAgICAgICAgICAgInRoZW1lIjogImRhcmtseSIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICApLAogICAgICAgICAgICBwYWdlcz1wYWdlcywKICAgICAgICAgICAgbGF5b3V0PUxheW91dCwKICAgICAgICApCgogICAgZGVmIGluaXQoc2VsZik6CiAgICAgICAgc2VsZi5tZW51WyJAcHJlZmVyZW5jZXMvQGxhbmd1YWdlIl0gPSB7CiAgICAgICAgICAgIGxhbmc6IHNlbGYuZGljdGlvbmFyaWVzLmdldChsYW5nKS5pbnN0YWxsCiAgICAgICAgICAgIGZvciBsYW5nIGluIHNlbGYuZGljdGlvbmFyaWVzLmxhbmd1YWdlcwogICAgICAgIH0KICAgICAgICBzdHlsZSA9IHNlbGYucm9vdC5zdHlsZQogICAgICAgIHNlbGYubWVudVsiQHByZWZlcmVuY2VzL0B0aGVtZSJdID0gewogICAgICAgICAgICB0OiBsYW1iZGEgcz1zZWxmLnNldF90aGVtZSwgdD10OiBzKHQpIGZvciB0IGluIHN0eWxlLnRoZW1lX25hbWVzKCkKICAgICAgICB9CiAgICAgICAgc2VsZi5yb290LnN0eWxlLnRoZW1lX3VzZShzZWxmLmdldF9zdG9yZSgpWyJ0aGVtZSJdKQogICAgICAgIHNlbGYubWVudS51cGRhdGUoKQogICAgICAgIHNlbGYuc2V0X2xhbmd1YWdlKHNlbGYuZ2V0X3N0b3JlKClbImxhbmd1YWdlIl0pCiAgICAgICAgdGFrdGsuZGljdGlvbmFyeS5EaWN0aW9uYXJ5LnN1YnNjcmliZShOb25lLCBzZWxmLnVwZGF0ZV9sYW5ndWFnZSkKCiAgICBkZWYgc2V0X3RoZW1lKHNlbGYsIHRoZW1lKToKICAgICAgICBmcm9tIGJ1aWx0aW5zIGltcG9ydCBfCgogICAgICAgIHNlbGYucm9vdC5zdHlsZS50aGVtZV91c2UodGhlbWUpCiAgICAgICAgc2VsZi5nZXRfc3RvcmUoKVsidGhlbWUiXSA9IHRoZW1lCiAgICAgICAgdGFrdGsubm90aWZ5KAogICAgICAgICAgICAiVG9kb3MiLAogICAgICAgICAgICBfKCJwcmVmZXJlbmNlcy5zdWNjZXNzX21vZGlmaWVkIiksCiAgICAgICAgICAgIGJvb3RzdHlsZT0iaW5mbyIsCiAgICAgICAgICAgIGR1cmF0aW9uPTEwMDAwLAogICAgICAgICkKCiAgICBkZWYgYmFjayhzZWxmKToKICAgICAgICBzZWxmLnZpZXcuYmFjaygpCgogICAgZGVmIGZvcndhcmQoc2VsZik6CiAgICAgICAgc2VsZi52aWV3LmZvcndhcmQoKQoKICAgIGRlZiB1cGRhdGVfbGFuZ3VhZ2Uoc2VsZik6CiAgICAgICAgc3RvcmUgPSBzZWxmLmdldF9zdG9yZSgpCiAgICAgICAgc3RvcmVbImxhbmd1YWdlIl0gPSBfLmxhbmd1YWdlCiAgICAgICAgc3RvcmUuc2F2ZSgpCiAgICAgICAgdGFrdGsubm90aWZpY2F0aW9uLk5vdGlmaWNhdGlvbigKICAgICAgICAgICAgIlRvZG9zIiwKICAgICAgICAgICAgXygicHJlZmVyZW5jZXMuc3VjY2Vzc19tb2RpZmllZCIpLAogICAgICAgICAgICBib290c3R5bGU9ImluZm8iLAogICAgICAgICAgICBkdXJhdGlvbj0xMDAwMCwKICAgICAgICApLnNob3coKQoKCkB0YWt0ay5jb21wb25lbnQuY29tcG9uZW50CmRlZiBMYXlvdXQoc2VsZik6CiAgICByIiIiCiAgICBcZnJhbWUKICAgICAgICBcZnJhbWUgcGFkZGluZz01IHBvczpwYWNrCiAgICAgICAgICAgIFxidXR0b24gY29tbWFuZD17YmFja30gICAgICAgIGltYWdlPTxpbWc6QGJhY2t3YXJke3dpZHRoOiAyMH0+IFwKICAgICAgICAgICAgICAgIHBvczpncmlkPTAsMCBwb3M6c3RpY2t5PSd3JyBib290c3R5bGU9J2Rhcmsgb3V0bGluZScKICAgICAgICAgICAgXGJ1dHRvbiBjb21tYW5kPXtndF91c2Vyc31cCiAgICAgICAgICAgICAgICBpbWFnZT08aW1nOkB1c2Vycy1iZXR3ZWVuLWxpbmVze2hlaWdodDogMjB9PiBwb3M6Z3JpZD0xLDBcCiAgICAgICAgICAgICAgICBwb3M6c3RpY2t5PSd3JyBib290c3R5bGU9J2Rhcmsgb3V0bGluZScKICAgICAgICAgICAgXGJ1dHRvbiBjb21tYW5kPXtndF90b2Rvc31cCiAgICAgICAgICAgICAgICBpbWFnZT08aW1nOkBjaGVjay1kb3VibGV7aGVpZ2h0OiAyMH0+IHBvczpncmlkPTIsMFwKICAgICAgICAgICAgICAgIHBvczpzdGlja3k9J3cnIGJvb3RzdHlsZT0nZGFyayBvdXRsaW5lJwogICAgICAgICAgICBcbGFiZWxcCiAgICAgICAgICAgICAgICB0ZXh0PXtmJ2xvZ2dlZCBpbiBhczoge1VzZXIuY3VycmVudCgpLm5hbWV9JyBpZiBVc2VyLmN1cnJlbnQoKSBlbHNlICJub3QgbG9nZ2VkIGluISJ9XAogICAgICAgICAgICAgICAgcG9zOmdyaWQ9MywwCiAgICAgICAgICAgIFxidXR0b24gY29tbWFuZD17Zm9yd2FyZH0gaW1hZ2U9PGltZzpAZm9yd2FyZHt3aWR0aDogMjB9PlwKICAgICAgICAgICAgICAgIHBvczpncmlkPTUsMCBwb3M6c3RpY2t5PSdlJyBib290c3R5bGU9J2Rhcmsgb3V0bGluZScKICAgICAgICBcZnJhbWU6b3V0bGV0IHBvczpwYWNrCiAgICAiIiIKICAgIGZyb20gLmFkbWluIGltcG9ydCBVc2VyCgogICAgdXNlciA9IE5vbmUKCiAgICBkZWYgYmFjaygpOgogICAgICAgIHRha3RrLmFwcGxpY2F0aW9uLmJhY2soKQoKICAgIGRlZiBmb3J3YXJkKCk6CiAgICAgICAgdGFrdGsuYXBwbGljYXRpb24uZm9yd2FyZCgpCgogICAgZGVmIGd0X3VzZXJzKCk6CiAgICAgICAgdGFrdGsuYXBwbGljYXRpb24oInVzZXJzIikKCiAgICBkZWYgZ3RfdG9kb3MoKToKICAgICAgICB0YWt0ay5hcHBsaWNhdGlvbigidG9kb3MiKQoKICAgIHJldHVybiBsb2NhbHMoKSB8IGdsb2JhbHMoKQo",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANoHAAAAAAAA5AcAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "src/taktk/component.py",
			"settings":
			{
				"buffer_size": 16980,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					564,
					1,
					"left_delete",
					null,
					"AQAAAO4uAAAAAAAA7i4AAAAAAAAdAAAAICAgICAgICAgICAgcHJpbnQobmFtZXNwYWNlKQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuLgAAAAAAAAsvAAAAAAAAAAAAAAAA8L8"
				],
				[
					567,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAmEEAAAAAAACYQQAAIiIiClRoZSBtYWluIGNvbXBvbmVudHMgdG9vbC4KCkNvcHlyaWdodCAoQykgMjAyNCAga2VuLW1vcmVsClRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyCnRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlCkZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyCnZlcnNpb24uCgpUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwgYnV0IFdJVEhPVVQgQU5ZCldBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEKUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgpZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoCnRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiIiIgoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgVHlwZSwgQW55CmZyb20gaW5zcGVjdCBpbXBvcnQgX2VtcHR5Cgpmcm9tIHB5b2xvYWQgaW1wb3J0IGFubm90YXRlCgpmcm9tIC4gaW1wb3J0IE5pbCwgcmVzb2x2ZQpmcm9tIC4gaW1wb3J0IHRlbXBsYXRlLCB3cml0ZWFibGUKCkF0dHJTcGVjID0gZGljdFtzdHIsIHR1cGxlW1R5cGUsIE9wdGlvbmFsW0FueV1dXQoKCmNsYXNzIEF0dHJpYnV0ZU1hbmFnZXI6CiAgICAiIiJBbiBvYmplY3QgdG8gbWFuYWdlIGNvbXBvbmVudCBhdHRyaWJ1dGVzLiIiIgoKICAgIF9wYXJhbXM6IGRpY3RbQXR0clNwZWNdCiAgICBfc3Vic2NyaWJlcjogd3JpdGVhYmxlLlN1YnNjcmliZXIKICAgIF9zdWJzY3JpYmVhYmxlOiB3cml0ZWFibGUuU3Vic2NyaWJlYWJsZQoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIGNvbXBvbmVudDogIkJhc2VDb21wb25lbnQiLAogICAgICAgIHJhd19rd2FyZ3M6IGRpY3Rbc3RyLCBzdHJdID0ge30sCiAgICAgICAga3dhcmdzOiBkaWN0W3N0ciwgQW55XSA9IHt9LAogICAgKToKICAgICAgICAiIiJDcmVhdGUgdGhlIEF0dGlidXRlIG1hbmFnZXIgZnJvbSBjb21wb25lbnQgYW5kIGFyZ3MuIiIiCiAgICAgICAgc2VsZi5fY29tcG9uZW50ID0gY29tcG9uZW50CiAgICAgICAgc2VsZi5fcGFyYW1zID0ge30KICAgICAgICBmb3IgbmFtZSwgYW5uLCBkZWZhdWx0IGluIGNvbXBvbmVudC5nZXRfcGFyYW1zKCk6CiAgICAgICAgICAgIHNlbGYuX3BhcmFtc1tuYW1lXSA9IChhbm4sIGRlZmF1bHQpCiAgICAgICAgc2VsZi5fc3Vic2NyaWJlciA9IHdyaXRlYWJsZS5TdWJzY3JpYmVyKCkKICAgICAgICBzZWxmLl9zdWJzY3JpYmVhYmxlID0gd3JpdGVhYmxlLlN1YnNjcmliZWFibGUoKQogICAgICAgIHNlbGYuX3N1YnNjcmliZSA9IHNlbGYuX3N1YnNjcmliZWFibGUuc3Vic2NyaWJlCiAgICAgICAgc2VsZi5fYXJncyA9IHt9CiAgICAgICAgc2VsZi5fbGFzdCA9IE5vbmUKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiByYXdfa3dhcmdzLml0ZW1zKCk6CiAgICAgICAgICAgIHN1YiwgdmFsID0gdGVtcGxhdGUuZXZhbHVhdGVfbGl0ZXJhbCgKICAgICAgICAgICAgICAgIHZhbHVlLCBzZWxmLl9jb21wb25lbnQubmFtZXNwYWNlCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5fYXJnc1trZXldID0gKHN1YiwgdmFsKQogICAgICAgICAgICBpZiBzdWI6CiAgICAgICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVyLnN1YnNjcmliZV90byh2YWwsIHNlbGYuX3VwZGF0ZSkKICAgICAgICBzZWxmLl9hcmdzLnVwZGF0ZShrd2FyZ3MpCiAgICAgICAgc2VsZi5fY29sbGVjdF92YWx1ZXMoKQoKICAgIGRlZiBfdXBkYXRlKHNlbGYpOgogICAgICAgIHZhbHMgPSBzZWxmLl92YWx1ZXMuY29weSgpCiAgICAgICAgc2VsZi5fY29sbGVjdF92YWx1ZXMoKQogICAgICAgIGlmIHNlbGYuX3ZhbHVlcyAhPSB2YWxzOgogICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVhYmxlLndhcm5fc3Vic2NyaWJlcnMoKQoKICAgIGRlZiBfY29sbGVjdF92YWx1ZXMoc2VsZik6CiAgICAgICAgc2VsZi5fdmFsdWVzID0ge30KCiAgICAgICAgZGVmIGZpbHRlcnModmFsLCBnZXQsIGFubiwgZGVmYXVsdCk6CiAgICAgICAgICAgIGZyb20gLiBpbXBvcnQgbWVkaWEsIHdyaXRlYWJsZQogICAgICAgICAgICBmcm9tIHRraW50ZXIgaW1wb3J0IEltYWdlCgogICAgICAgICAgICBpZiB2YWwgaXMgTmlsOgogICAgICAgICAgICAgICAgdmFsID0gZGVmYXVsdAogICAgICAgICAgICBpZiBhbm4gaXMgd3JpdGVhYmxlLldyaXRlYWJsZSBhbmQgaXNpbnN0YW5jZSgKICAgICAgICAgICAgICAgIHZhbCwgd3JpdGVhYmxlLldyaXRlYWJsZQogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgcmV0dXJuIHZhbAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgZ2V0OgogICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5nZXQoKQogICAgICAgICAgICAgICAgaWYgYW5uIGlzIEltYWdlIG9yICgKICAgICAgICAgICAgICAgICAgICBpc2luc3RhbmNlKGFubiwgdHlwZSkKICAgICAgICAgICAgICAgICAgICBhbmQgaXNzdWJjbGFzcyhhbm4sIEltYWdlKQogICAgICAgICAgICAgICAgICAgIGFuZCBpc2luc3RhbmNlKHZhbCwgbWVkaWEuSW1hZ2UpCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5nZXQoKQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWwsIG1lZGlhLkltYWdlKToKICAgICAgICAgICAgICAgICAgICBwcmludCh2YWwpCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsCgogICAgICAgIGRlZiBzZXRfcGFyYW0ob2JqLCBrZXksIHZhbHVlLCBhbm5vdGF0aW9uLCBkZWZhdWx0KToKICAgICAgICAgICAgZ2V0LCB2YWwgPSB2YWx1ZQogICAgICAgICAgICBpZiAiOiIgaW4ga2V5OgogICAgICAgICAgICAgICAgcHJlLCBrZXkgPSBrZXkuc3BsaXQoIjoiLCAxKQoKICAgICAgICAgICAgICAgIGlmIHByZSBub3QgaW4gb2JqIG9yIG5vdCBpc2luc3RhbmNlKG9ialtwcmVdLCBkaWN0KToKICAgICAgICAgICAgICAgICAgICBvYmpbcHJlXSA9IHt9CiAgICAgICAgICAgICAgICBzZXRfcGFyYW0ob2JqW3ByZV0sIGtleSwgdmFsdWUsIGFubm90YXRpb24sIGRlZmF1bHQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBvYmpba2V5XSA9IGZpbHRlcnModmFsLCBnZXQsIGFubm90YXRpb24sIGRlZmF1bHQpCgogICAgICAgIGZvciBrZXksIHZhbHVlIGluIHNlbGYuX2FyZ3MuaXRlbXMoKToKICAgICAgICAgICAgaWYga2V5IGluIHNlbGYuX3BhcmFtczoKICAgICAgICAgICAgICAgIGFubiwgdmFsID0gc2VsZi5fcGFyYW1zW2tleV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGFubiA9IHZhbCA9IE5vbmUKICAgICAgICAgICAgc2V0X3BhcmFtKHNlbGYuX3ZhbHVlcywga2V5LCB2YWx1ZSwgYW5uLCB2YWwpCgogICAgZGVmIF9nZXRfd3JpdGVhYmxlKHNlbGYsIG5hbWUpOgogICAgICAgIHZhbCA9IHNlbGYuX2FyZ3NbbmFtZV1bMV0KICAgICAgICBpZiBpc2luc3RhbmNlKHZhbCwgd3JpdGVhYmxlLldyaXRlYWJsZSk6CiAgICAgICAgICAgIHJldHVybiB2YWwKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJTb3JyeS4uLiIpCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGF0dHI6IHN0cik6CiAgICAgICAgIiIiR2V0IGF0dHJpYnV0ZSBmcm9tIHZhbHVlcy4iIiIKICAgICAgICBpZiBhdHRyWzBdID09ICJfIjoKICAgICAgICAgICAgcmV0dXJuIHN1cGVyKCkuX19nZXRhdHRyX18oYXR0cikKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVzW2F0dHJdCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoKSBmcm9tIGUKCgpjbGFzcyBCYXNlQ29tcG9uZW50KHdyaXRlYWJsZS5TdWJzY3JpYmVyKToKICAgICIiIlRoZSBiYXNlIGNvbXBvbmVudCBjbGFzcy4iIiIKCiAgICBwYXJlbnQgPSBOb25lCiAgICBjaGlsZHJlbjogbGlzdAogICAgX3Bvc18gPSBOb25lCiAgICBjb250YWluZXIgPSBOb25lCiAgICBvdXRsZXQgPSBOb25lCiAgICBfYWxpZ25lciA9IE5vbmUKCiAgICBkZWYgX2luaXRfc3ViY2xhc3MoY2xzKToKICAgICAgICBpZiBub3QgaGFzYXR0cihjbHMsICJBdHRycyIpOgogICAgICAgICAgICBjbHMuQXR0cnMgPSB0eXBlKGNscy5fX25hbWVfXyArICIuQXR0cnMiLCAoKSwge30pCiAgICAgICAgY2xzLkF0dHJzID0gZGF0YWNsYXNzKGNscy5BdHRycykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBnZXRfcGFyYW1zKGNscykgLT4gdHVwbGVbdHVwbGVbc3RyLCB0eXBlLCBBbnldXToKICAgICAgICAiIiJHZXQgYW4gaXRlcmFibGUgb2YgdHVwbGVzIChuYW1lLCBhbm5vdGF0aW9uLCBkZWZhdWx0KS4iIiIKICAgICAgICBhbm5zID0ge30KICAgICAgICBwYXJhbXMgPSBbXQogICAgICAgIGZvciBuYW1lLCBhbm4gaW4gY2xzLkF0dHJzLl9fYW5ub3RhdGlvbnNfXy5pdGVtcygpOgogICAgICAgICAgICBhbm5zW25hbWVdID0gYW5uCiAgICAgICAgZm9yIG5hbWUsIHZhbCBpbiB2YXJzKGNscy5BdHRycykuaXRlbXMoKToKICAgICAgICAgICAgaWYgbmFtZSBpbiBhbm5zOgogICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgobmFtZSwgYW5uc1tuYW1lXSwgdmFsKSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoKG5hbWUsIF9lbXB0eSwgdmFsKSkKICAgICAgICByZXR1cm4gdHVwbGUocGFyYW1zKQoKICAgIF9faW5pdF9zdWJjbGFzc19fID0gX2luaXRfc3ViY2xhc3MKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBuYW1lc3BhY2U6ICJ3cml0ZWFibGUuTmFtZXNwYWNlIiA9IHt9LAogICAgICAgIHBhcmVudD1Ob25lLAogICAgICAgIGF0dHJzOiBkaWN0W3N0cl0gPSB7fSwKICAgICAgICBwYXJhbXM6IGRpY3Rbc3RyXSA9IHt9LAogICAgKToKICAgICAgICAiIiJJbml0aWFsaXplIEJhc2UgQ29tcG9uZW50LiIiIgogICAgICAgIHdyaXRlYWJsZS5TdWJzY3JpYmVyLl9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5jaGlsZHJlbiA9IFtdCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IG5hbWVzcGFjZQogICAgICAgIGlmIHBhcmVudCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5wYXJlbnQuY2hpbGRyZW4uYXBwZW5kKHNlbGYpCiAgICAgICAgc2VsZi5yYXdfYXR0cnMgPSBhdHRycwogICAgICAgIHNlbGYuYXR0cnMgPSBBdHRyaWJ1dGVNYW5hZ2VyKHNlbGYsIGF0dHJzKQogICAgICAgIHNlbGYuYXR0cnMuX3N1YnNjcmliZShzZWxmLCBzZWxmLl91cGRhdGUpCgogICAgZGVmIGJpbmRfYXR0cnMoc2VsZiwgYXR0cnM6IGRpY3Rbc3RyXSk6CiAgICAgICAgIiIiQmluZCB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZXMgdG8gdGhlIGNvbXBvbmVudC4iIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuYXR0cnMgPSBzZWxmLl9fY2xhc3NfXy5BdHRycygqKmF0dHJzKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKAogICAgICAgICAgICAgICAgZiJlcnJvciB3aGlsZSBiaW5kaW5nIGFyZ3VtZW50cyB0byB7c2VsZi5fX2NsYXNzX18hcn0iLAogICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgIHNlbGYuQXR0cnMsCiAgICAgICAgICAgICkgZnJvbSBOb25lCgogICAgZGVmIF9hbGlnbl93aWRnZXQoc2VsZiwgd2lkZ2V0LCBwYXJhbXM6IGRpY3Rbc3RyXSk6CiAgICAgICAgaWYgc2VsZi5fY2hpbGRyZW5fYWxpZ24gPT0gInIiOgogICAgICAgICAgICB3aWRnZXQuZ3JpZChjb2x1bW49c2VsZi5fYWxpZ25fb2Zmc2V0LCByb3c9MCwgKipwYXJhbXMpCiAgICAgICAgZWxpZiBzZWxmLl9jaGlsZHJlbl9hbGlnbiA9PSAiYyI6CiAgICAgICAgICAgIHdpZGdldC5ncmlkKHJvdz1zZWxmLl9hbGlnbl9vZmZzZXQsIGNvbHVtbj0wLCAqKnBhcmFtcykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ1bmtub3duIGFsaWduIG9mZnNldDoiLCBzZWxmLl9jaGlsZHJlbl9hbGlnbikKICAgICAgICBzZWxmLl9hbGlnbl9vZmZzZXQgKz0gMQoKICAgIGRlZiB1cGRhdGUoc2VsZik6CiAgICAgICAgc2VsZi5hdHRycy5fY29sbGVjdF92YWx1ZXMoKQogICAgICAgIGZvciBjaGlsZCBpbiBzZWxmLmNoaWxkcmVuOgogICAgICAgICAgICBjaGlsZC51cGRhdGUoKQogICAgICAgIHNlbGYuX3VwZGF0ZSgpCgogICAgZGVmIF91cGRhdGUoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBtYWtlX2JpbmRpbmdzKHNlbGYpOgogICAgICAgIGZvciBldmVudCwgaGFuZGxlciBpbiBzZWxmLmV2ZW50X2JpbmRzLml0ZW1zKCk6CiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmJpbmQoZiI8e2V2ZW50fT4iLCByZXNvbHZlKGhhbmRsZXIpKQoKICAgIGRlZiBjcmVhdGUoc2VsZik6CiAgICAgICAgc2VsZi5ldmVudF9iaW5kcyA9IHt9CgogICAgZGVmIGluaXRfZ2VvbWV0cnkoc2VsZik6CiAgICAgICAgZ3JpZF9wYXJhbXMgPSAoInN0aWNreSIsKQogICAgICAgIHBhY2tfcGFyYW1zID0gKAogICAgICAgICAgICAic2lkZSIsCiAgICAgICAgICAgICJhbmNob3IiLAogICAgICAgICAgICAiZXhwYW5kIiwKICAgICAgICAgICAgImZpbGwiLAogICAgICAgICAgICAiaXBhZHgiLAogICAgICAgICAgICAicGFkeCIsCiAgICAgICAgICAgICJpcGFkeSIsCiAgICAgICAgICAgICJwYWR5IiwKICAgICAgICApCiAgICAgICAgaWYgaGFzYXR0cihzZWxmLmF0dHJzLCAibGF5IikgYW5kIHNlbGYuYXR0cnMubGF5OgogICAgICAgICAgICBsYXkgPSBzZWxmLmF0dHJzLmxheQogICAgICAgICAgICBpZiAidyIgaW4gbGF5OgogICAgICAgICAgICAgICAgaWYgIngiIGluIGxheVsidyJdOgogICAgICAgICAgICAgICAgICAgIGxheXggPSByZXNvbHZlKGxheVsidyJdWyJ4Il0pCiAgICAgICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShsYXl4LCBzdHIpOgogICAgICAgICAgICAgICAgICAgICAgICBsYXl4ID0gZGljdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dXBsZShtYXAoc3RyLnN0cmlwLCB4LnNwbGl0KCI6IiwgMSkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIGxheXguc3BsaXQoIiwiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgZm9yIGNvbCwgd2VpZ2h0IGluIGxheXguaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdXRsZXQuY29sdW1uY29uZmlndXJlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50KGNvbCksIHdlaWdodD1pbnQod2VpZ2h0KQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBpZiAieSIgaW4gbGF5WyJ3Il06CiAgICAgICAgICAgICAgICAgICAgbGF5eSA9IHJlc29sdmUoc2VsZi5hdHRycy5sYXlbInciXVsieSJdKQogICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UobGF5eSwgc3RyKToKICAgICAgICAgICAgICAgICAgICAgICAgbGF5eSA9IGRpY3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGUobWFwKHN0ci5zdHJpcCwgeC5zcGxpdCgiOiIsIDEpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgeCBpbiBsYXl5LnNwbGl0KCIsIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGZvciBjb2wsIHdlaWdodCBpbiBsYXl5Lml0ZW1zKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3V0bGV0LmNvbHVtbmNvbmZpZ3VyZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludChjb2wpLCB3ZWlnaHQ9aW50KHdlaWdodCkKICAgICAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICBpZiBoYXNhdHRyKHNlbGYuYXR0cnMsICJwb3MiKToKICAgICAgICAgICAgcG9zID0gc2VsZi5hdHRycy5wb3MKICAgICAgICAgICAgaWYgInBhY2siIGluIHBvcyBhbmQgcG9zWyJwYWNrIl06CiAgICAgICAgICAgICAgICBwYXJhbXMgPSB7azogdiBmb3IgaywgdiBpbiBwb3MuaXRlbXMoKSBpZiBrIGluIHBhY2tfcGFyYW1zfQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShwb3NbInBhY2siXSwgc3RyKToKICAgICAgICAgICAgICAgICAgICBwYXJhbXNbInNpZGUiXSA9IHBvc1sicGFjayJdCiAgICAgICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5wYWNrKCoqcGFyYW1zKQogICAgICAgICAgICBlbGlmICJncmlkIiBpbiBwb3M6CiAgICAgICAgICAgICAgICBncmlkID0ge2s6IHYgZm9yIGssIHYgaW4gcG9zLml0ZW1zKCkgaWYgayBpbiBncmlkX3BhcmFtc30KICAgICAgICAgICAgICAgIGNvb3JkID0gcmVzb2x2ZShwb3NbImdyaWQiXSkKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY29vcmQsIHR1cGxlKToKICAgICAgICAgICAgICAgICAgICBpZiBsZW4oY29vcmQpID09IDI6CiAgICAgICAgICAgICAgICAgICAgICAgICh4LCB5KSA9IGNvb3JkCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbImNvbHVtbiJdID0geAogICAgICAgICAgICAgICAgICAgICAgICBncmlkWyJyb3ciXSA9IHkKICAgICAgICAgICAgICAgICAgICBlbGlmIGxlbihjb29yZCkgPT0gNDoKICAgICAgICAgICAgICAgICAgICAgICAgKHgsIHksIHhzLCB5cykgPSBjb29yZAogICAgICAgICAgICAgICAgICAgICAgICBncmlkWyJjb2x1bW4iXSA9IHgKICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFsicm93Il0gPSB5CiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbImNvbHVtbnNwYW4iXSA9IHhzCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbInJvd3NwYW4iXSA9IHlzCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3JvbmcgZ3JpZCB0dXBsZSIsIGNvb3JkKQogICAgICAgICAgICAgICAgc2VsZi5jb250YWluZXIuZ3JpZCgqKmdyaWQpCgoKY2xhc3MgVGtDb21wb25lbnQoQmFzZUNvbXBvbmVudCk6CiAgICBXaWRnZXQgPSBOb25lCiAgICBfYXR0cl9pZ25vcmUgPSAoKQogICAgX3BhcmFtcyA9IE5vbmUKCiAgICBkZWYgX19pbml0X3N1YmNsYXNzX18oY2xzKToKICAgICAgICBjbHMuQXR0cnMgPSBkYXRhY2xhc3MoY2xzLkF0dHJzKQogICAgICAgIHNhbWUgPSBbCiAgICAgICAgICAgIHgKICAgICAgICAgICAgZm9yIHggaW4gZGlyKGNscy5BdHRycykKICAgICAgICAgICAgaWYgbm90IHguc3RhcnRzd2l0aCgiXyIpIGFuZCB4IG5vdCBpbiBjbHMuX2F0dHJfaWdub3JlCiAgICAgICAgXQogICAgICAgIGNscy5jb25mX2FsaWFzc2VzID0gewogICAgICAgICAgICAqKmRpY3QoemlwKHNhbWUsIHNhbWUpKSwKICAgICAgICB9CiAgICAgICAgZGVsIHNhbWUKCiAgICBkZWYgY3JlYXRlKHNlbGYsIHBhcmVudCk6CiAgICAgICAgc3VwZXIoKS5jcmVhdGUoKQogICAgICAgIHNlbGYuX3BhcmFtcyA9IHBhcmFtcyA9IHsKICAgICAgICAgICAgKip7CiAgICAgICAgICAgICAgICBzZWxmLmNvbmZfYWxpYXNzZXNba106IHYKICAgICAgICAgICAgICAgIGZvciBrLCB2IGluIHNlbGYuYXR0cnMuX3ZhbHVlcy5pdGVtcygpCiAgICAgICAgICAgICAgICBpZiBrIGluIHNlbGYuY29uZl9hbGlhc3NlcyBhbmQgdiBpcyBub3QgTmlsCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2VsZi5fY3JlYXRlKHBhcmVudCwgcGFyYW1zKQogICAgICAgIHNlbGYubWFrZV9iaW5kaW5ncygpCiAgICAgICAgc2VsZi5pbml0X2dlb21ldHJ5KCkKICAgICAgICBmb3IgY2hpbGQgaW4gc2VsZi5jaGlsZHJlbjoKICAgICAgICAgICAgY2hpbGQuY3JlYXRlKHNlbGYub3V0bGV0KQoKICAgIGRlZiBfY3JlYXRlKHNlbGYsIHBhcmVudCwgcGFyYW1zPXt9KToKICAgICAgICBzZWxmLm91dGxldCA9IHNlbGYuY29udGFpbmVyID0gc2VsZi5XaWRnZXQocGFyZW50LCAqKnBhcmFtcykKCiAgICBkZWYgX3VwZGF0ZShzZWxmKToKICAgICAgICBmb3IgaywgdiBpbiB7CiAgICAgICAgICAgIHNlbGYuY29uZl9hbGlhc3Nlc1trXTogdgogICAgICAgICAgICBmb3IgaywgdiBpbiBzZWxmLmF0dHJzLl92YWx1ZXMuaXRlbXMoKQogICAgICAgICAgICBpZiBrIGluIHNlbGYuY29uZl9hbGlhc3NlcyBhbmQgdiBpcyBub3QgTmlsCiAgICAgICAgfS5pdGVtcygpOgogICAgICAgICAgICBpZiBrID09ICJ0ZXh0IjoKICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyWyJ0ZXh0Il0gPSB2CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNvbmZpZ3VyZSgqKntrOiB2fSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHJhaXNlCgoKY2xhc3MgRW51bUNvbXBvbmVudChCYXNlQ29tcG9uZW50KToKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIGl0ZXJhYmxlX2V4cHI6IHN0ciwKICAgICAgICBhbGlhc2VzOiB0dXBsZVtzdHIsIHN0cl0sCiAgICAgICAgbmFtZXNwYWNlOiB3cml0ZWFibGUuTmFtZXNwYWNlLAogICAgICAgIHBhcmVudDogIk9wdGlvbmFsW0Jhc2VDb21wb25lbnRdIiA9IE5vbmUsCiAgICAgICAgdGVtcGxhdGVzOiBsaXN0W3RlbXBsYXRlLlRlbXBsYXRlLkl0ZW1dID0gW10sCiAgICApOgogICAgICAgIHdyaXRlYWJsZS5TdWJzY3JpYmVyLl9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5zdWJzY3JpYmVfdG8obmFtZXNwYWNlLCBzZWxmLnVwZGF0ZSkKICAgICAgICBzZWxmLmNoaWxkcmVuID0gW10KICAgICAgICBzZWxmLnBhcmVudCA9IHBhcmVudAogICAgICAgIHNlbGYubmFtZXNwYWNlID0gbmFtZXNwYWNlCiAgICAgICAgc2VsZi5pdGVyYWJsZV9leHByID0gaXRlcmFibGVfZXhwcgogICAgICAgIHNlbGYuYWxpYXNlcyA9IGFsaWFzZXMKICAgICAgICBzZWxmLnRlbXBsYXRlcyA9IHRlbXBsYXRlcyAgIyB0ZW1wbGF0ZQogICAgICAgIGlmIHBhcmVudCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5wYXJlbnQuY2hpbGRyZW4uYXBwZW5kKHNlbGYpCiAgICAgICAgc2VsZi5jb250ZW50ID0gTm9uZQogICAgICAgIHNlbGYuY29udGVudHMgPSBbXQogICAgICAgIHNlbGYuX2xhc3QgPSBOb25lCgogICAgZGVmIGNyZWF0ZShzZWxmLCBwYXJlbnQ9Tm9uZSk6CiAgICAgICAgcGFyZW50ID0gcGFyZW50IG9yIHNlbGYucGFyZW50Lm91dGxldAogICAgICAgIHNlbGYuY29udGVudHMgPSBbXQogICAgICAgIGl0ZXJhYmxlID0gZXZhbChzZWxmLml0ZXJhYmxlX2V4cHIsIHt9LCBzZWxmLm5hbWVzcGFjZSkKICAgICAgICBzZWxmLl9sYXN0ID0gaXRlcmFibGUKICAgICAgICBmb3IgaWR4LCB2YWwgaW4gZW51bWVyYXRlKGl0ZXJhYmxlKToKICAgICAgICAgICAgYWlkeCwgYXZhbCA9IHNlbGYuYWxpYXNlcwogICAgICAgICAgICBuYW1lc3BhY2UgPSB3cml0ZWFibGUuTmFtZXNwYWNlKHBhcmVudHM9W3NlbGYubmFtZXNwYWNlXSkKICAgICAgICAgICAgbmFtZXNwYWNlW2FpZHhdID0gaWR4CiAgICAgICAgICAgIG5hbWVzcGFjZVthdmFsXSA9IHZhbAogICAgICAgICAgICBmb3IgdGVtcGxhdGVfaXRlbSBpbiBzZWxmLnRlbXBsYXRlczoKICAgICAgICAgICAgICAgIGNvbXAgPSB0ZW1wbGF0ZV9pdGVtLnJlbmRlcihzZWxmLCBuYW1lc3BhY2UpCiAgICAgICAgICAgICAgICBjb21wLmNyZWF0ZShwYXJlbnQpCiAgICAgICAgICAgICAgICBzZWxmLmNvbnRlbnRzLmFwcGVuZCgobmFtZXNwYWNlLCBjb21wKSkKCiAgICBkZWYgdXBkYXRlKHNlbGYpOgogICAgICAgIHZhbHVlID0gZXZhbChzZWxmLml0ZXJhYmxlX2V4cHIsIHt9LCBzZWxmLm5hbWVzcGFjZSkKICAgICAgICBpZiB2YWx1ZSAhPSBzZWxmLl9sYXN0OgogICAgICAgICAgICBjb250ZW50cyA9IHNlbGYuY29udGVudHMuY29weSgpCiAgICAgICAgICAgIHNlbGYuY3JlYXRlKHNlbGYucmVuZGVyX3BhcmVudCkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5wYXJlbnQudXBkYXRlKCkgICMgZm9yIHNtb290aGVyIHJlbmRlcnJpbmcKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgZm9yIG5hbWVzcGFjZSwgY29tcCBpbiBjb250ZW50czoKICAgICAgICAgICAgICAgIGRlbCBjb21wLCBuYW1lc3BhY2UKCgpjbGFzcyBJZkNvbXBvbmVudChCYXNlQ29tcG9uZW50KToKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIGNvbmRpdGlvbiwKICAgICAgICBuYW1lc3BhY2UsCiAgICAgICAgcGFyZW50OiAiT3B0aW9uYWxbQmFzZUNvbXBvbmVudF0iID0gTm9uZSwKICAgICAgICB0ZW1wbGF0ZTogbGlzdCA9IFtdLAogICAgKToKICAgICAgICB3cml0ZWFibGUuU3Vic2NyaWJlci5fX2luaXRfXyhzZWxmKQogICAgICAgIHNlbGYuc3Vic2NyaWJlX3RvKG5hbWVzcGFjZSwgc2VsZi51cGRhdGUpCiAgICAgICAgc2VsZi5jaGlsZHJlbiA9IFtdCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IG5hbWVzcGFjZQogICAgICAgIHNlbGYuY29uZGl0aW9uID0gY29uZGl0aW9uCiAgICAgICAgc2VsZi50ZW1wbGF0ZSA9IHRlbXBsYXRlICAjIHRlbXBsYXRlCiAgICAgICAgaWYgcGFyZW50IGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLnBhcmVudC5jaGlsZHJlbi5hcHBlbmQoc2VsZikKICAgICAgICBzZWxmLmNvbnRlbnQgPSBOb25lCiAgICAgICAgc2VsZi5fbGFzdCA9IE5vbmUKCiAgICBkZWYgY3JlYXRlKHNlbGYsIHBhcmVudD1Ob25lKToKICAgICAgICBwYXJlbnQgPSBwYXJlbnQgb3Igc2VsZi5wYXJlbnQub3V0bGV0CiAgICAgICAgc2VsZi5yZW5kZXJfcGFyZW50ID0gcGFyZW50CiAgICAgICAgc2VsZi5fbGFzdCA9IGV2YWwoc2VsZi5jb25kaXRpb24sIHt9LCBzZWxmLm5hbWVzcGFjZSkKICAgICAgICBpZiBzZWxmLl9sYXN0OgogICAgICAgICAgICBmb3IgdGVtcGxhdGUgaW4gc2VsZi50ZW1wbGF0ZToKICAgICAgICAgICAgICAgIHRlbXBsYXRlLnJlbmRlcihzZWxmLCBzZWxmLm5hbWVzcGFjZSkuY3JlYXRlKHBhcmVudCkKCiAgICBkZWYgdXBkYXRlKHNlbGYpOgogICAgICAgIGNvbmQgPSBldmFsKHNlbGYuY29uZGl0aW9uLCB7fSwgc2VsZi5uYW1lc3BhY2UpCiAgICAgICAgaWYgY29uZCAhPSBzZWxmLl9sYXN0OgogICAgICAgICAgICBkZWwgc2VsZi5jb250ZW50CiAgICAgICAgICAgIHNlbGYuY3JlYXRlKHNlbGYucmVuZGVyX3BhcmVudCkKCgpjbGFzcyBDb21wb25lbnQoQmFzZUNvbXBvbmVudCk6CiAgICBjb2RlOiBPcHRpb25hbFtzdHJdID0gTm9uZQogICAgX3RlbXBsYXRlX2NhY2hlOiB0dXBsZVtPcHRpb25hbFtzdHJdLCBPcHRpb25hbFt0ZW1wbGF0ZS5UZW1wbGF0ZV1dID0gKAogICAgICAgIE5vbmUsCiAgICAgICAgTm9uZSwKICAgICkKCiAgICBkZWYgaW5pdChzZWxmKToKICAgICAgICBwYXNzCgogICAgQGFubm90YXRlCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaXRlbTogc3RyKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLm5hbWVzcGFjZVtpdGVtXQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0dXJuIGdsb2JhbHMoKVtpdGVtXQogICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgSW5kZXhFcnJvcihpdGVtKSBmcm9tIGUKCiAgICBkZWYgX19pbml0X3N1YmNsYXNzX18oY2xzKToKICAgICAgICBjbHMuZ2V0X3RlbXBsYXRlKCkKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBnZXRfdGVtcGxhdGUoY2xzKToKICAgICAgICBjb2RlID0gY2xzLmNvZGUgb3IgY2xzLl9fZG9jX18KICAgICAgICBpZiBjbHMuX3RlbXBsYXRlX2NhY2hlWzBdICE9IGNvZGU6CiAgICAgICAgICAgIGNscy5fdGVtcGxhdGVfY2FjaGUgPSBjb2RlLCB0ZW1wbGF0ZS5UZW1wbGF0ZS5wYXJzZShjb2RlKQogICAgICAgIHJldHVybiBjbHMuX3RlbXBsYXRlX2NhY2hlWzFdCgogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGl0ZW06IHN0ciwgdmFsdWUpOgogICAgICAgIHNlbGYubmFtZXNwYWNlW2l0ZW1dID0gdmFsdWUKCiAgICBkZWYgX19pbml0X18oc2VsZiwgKipwYXJhbXMpOgogICAgICAgIHdyaXRlYWJsZS5TdWJzY3JpYmVyLl9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5hdHRycyA9IEF0dHJpYnV0ZU1hbmFnZXIoCiAgICAgICAgICAgIHNlbGYsIHt9LCB7azogKEZhbHNlLCB2KSBmb3IgaywgdiBpbiBwYXJhbXMuaXRlbXMoKX0KICAgICAgICApCiAgICAgICAgc2VsZi5hdHRycy5fc3Vic2NyaWJlKHNlbGYsIHNlbGYuX3VwZGF0ZSkKCiAgICAgICAgc2VsZi5uYW1lc3BhY2UgPSB3cml0ZWFibGUuTmFtZXNwYWNlKCkKICAgICAgICBzZWxmLnN1YnNjcmliZV90byhzZWxmLm5hbWVzcGFjZSwgc2VsZi51cGRhdGUpCiAgICAgICAgZm9yIGF0dHJfbmFtZSBpbiBkaXIoc2VsZik6CiAgICAgICAgICAgIGlmIG5vdCBhdHRyX25hbWUuc3RhcnRzd2l0aCgiXyIpOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHNlbGYubmFtZXNwYWNlW2F0dHJfbmFtZV0gPSBnZXRhdHRyKHNlbGYsIGF0dHJfbmFtZSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgc2VsZi5pbml0KCkKICAgICAgICBzZWxmLnJlbmRlcnJlZCA9IEZhbHNlCiAgICAgICAgc2VsZi5fY29tcG9uZW50XyA9IHNlbGYuZ2V0X3RlbXBsYXRlKCkuZXZhbChzZWxmLm5hbWVzcGFjZSkKCiAgICBkZWYgcmVuZGVyKHNlbGYsIG1hc3Rlcik6CiAgICAgICAgc2VsZi5fY29tcG9uZW50Xy5jcmVhdGUobWFzdGVyKQogICAgICAgIHNlbGYucmVkZXJyZWQgPSBUcnVlCiAgICAgICAgcmV0dXJuIHNlbGYuY29udGFpbmVyCgogICAgZGVmIHVwZGF0ZShzZWxmKToKICAgICAgICBpZiBzZWxmLnJlbmRlcnJlZDoKICAgICAgICAgICAgc2VsZi5fY29tcG9uZW50Xy51cGRhdGUoKQoKICAgIGRlZiBleHBvc2Uoc2VsZiwgZnVuYyk6CiAgICAgICAgc2VsZi5uYW1lc3BhY2VbZnVuYy5fX25hbWVfX10gPSBmdW5jCgogICAgQHByb3BlcnR5CiAgICBkZWYgY29udGFpbmVyKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9jb21wb25lbnRfLmNvbnRhaW5lcgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG91dGxldChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG91dCA9IHNlbGZbIm91dGxldCJdCiAgICAgICAgICAgIGlmIG91dCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiBvdXQub3V0bGV0CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGV4Y2VwdCBOYW1lRXJyb3I6CiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgZGVmIGNyZWF0ZV90ayhzZWxmLCByb290PU5vbmUpOgogICAgICAgICIiIkNyZWF0ZSB0aGUgY29tcG9uZW50IGluIGEgZnVsbCBUayB3aW5kb3cuIiIiCiAgICAgICAgcm9vdC5jb2x1bW5jb25maWd1cmUoMCwgd2VpZ2h0PTEpCiAgICAgICAgcm9vdC5yb3djb25maWd1cmUoMCwgd2VpZ2h0PTEpCgogICAgICAgIHNlbGYucmVuZGVyKHJvb3QpLmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKQogICAgICAgIHJldHVybiByb290CgogICAgZGVmIHBvcHVwKHNlbGYsICoqcGFyYW1zKToKICAgICAgICAiIiJDcmVhdGUgdGhlIGNvbXBvbmVudCBpbiBhIGZ1bGwgVGsgd2luZG93LiIiIgogICAgICAgIGZyb20gdGtpbnRlciBpbXBvcnQgVG9wbGV2ZWwKCiAgICAgICAgcm9vdCA9IFRvcGxldmVsKCkKICAgICAgICByb290LmNvbHVtbmNvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICByb290LnJvd2NvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKCiAgICAgICAgc2VsZi5yZW5kZXIocm9vdCkuZ3JpZChjb2x1bW49MCwgcm93PTAsIHN0aWNreT0ibnNldyIpCiAgICAgICAgcmV0dXJuIHJvb3QKCgpkZWYgY29tcG9uZW50KGZ1bmMpOgogICAgZGVmIGNvbXBvbmVudF9pbml0KHNlbGYpOgogICAgICAgIHZhciA9IGZ1bmMoc2VsZikKICAgICAgICBpZiB2YXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYubmFtZXNwYWNlLnZhcnMudXBkYXRlKHZhcikKCiAgICByZXR1cm4gdHlwZSgKICAgICAgICBmdW5jLl9fbmFtZV9fLAogICAgICAgIChDb21wb25lbnQsKSwKICAgICAgICB7CiAgICAgICAgICAgICJpbml0IjogY29tcG9uZW50X2luaXQsCiAgICAgICAgICAgICJfX2RvY19fIjogZnVuYy5fX2RvY19fLAogICAgICAgIH0sCiAgICApCg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuLgAAAAAAAO4uAAAAAAAAAAAAAAAA8L8"
				],
				[
					578,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAFoqAAAAAAAAWyoAAAAAAAAAAAAAWyoAAAAAAABrKgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABaKgAAAAAAAFoqAAAAAAAAAAAAAAAA8L8"
				],
				[
					579,
					3,
					"left_delete",
					null,
					"AwAAAGcqAAAAAAAAZyoAAAAAAAAEAAAAICAgIGMqAAAAAAAAYyoAAAAAAAAEAAAAICAgIF8qAAAAAAAAXyoAAAAAAAAEAAAAICAgIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABrKgAAAAAAAGsqAAAAAAAAAAAAAAAA8L8"
				],
				[
					580,
					1,
					"insert",
					{
						"characters": "\ndef"
					},
					"BgAAAF8qAAAAAAAAYCoAAAAAAAAAAAAAYCoAAAAAAABkKgAAAAAAAAAAAABbKgAAAAAAAFsqAAAAAAAABAAAACAgICBgKgAAAAAAAGEqAAAAAAAAAAAAAGEqAAAAAAAAYioAAAAAAAAAAAAAYioAAAAAAABjKgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABfKgAAAAAAAF8qAAAAAAAAAAAAAAAA8L8"
				],
				[
					581,
					1,
					"insert",
					{
						"characters": " __del__"
					},
					"CAAAAGMqAAAAAAAAZCoAAAAAAAAAAAAAZCoAAAAAAABlKgAAAAAAAAAAAABlKgAAAAAAAGYqAAAAAAAAAAAAAGYqAAAAAAAAZyoAAAAAAAAAAAAAZyoAAAAAAABoKgAAAAAAAAAAAABoKgAAAAAAAGkqAAAAAAAAAAAAAGkqAAAAAAAAaioAAAAAAAAAAAAAaioAAAAAAABrKgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABjKgAAAAAAAGMqAAAAAAAAAAAAAAAA8L8"
				],
				[
					582,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAGsqAAAAAAAAbSoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABrKgAAAAAAAGsqAAAAAAAAAAAAAAAA8L8"
				],
				[
					583,
					1,
					"insert",
					{
						"characters": "self"
					},
					"BAAAAGwqAAAAAAAAbSoAAAAAAAAAAAAAbSoAAAAAAABuKgAAAAAAAAAAAABuKgAAAAAAAG8qAAAAAAAAAAAAAG8qAAAAAAAAcCoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABsKgAAAAAAAGwqAAAAAAAAAAAAAAAA8L8"
				],
				[
					585,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAHEqAAAAAAAAcioAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABxKgAAAAAAAHEqAAAAAAAAAAAAAAAA8L8"
				],
				[
					586,
					1,
					"insert",
					{
						"characters": "\nif"
					},
					"BQAAAHIqAAAAAAAAcyoAAAAAAAAAAAAAcyoAAAAAAAB3KgAAAAAAAAAAAAB3KgAAAAAAAHsqAAAAAAAAAAAAAHsqAAAAAAAAfCoAAAAAAAAAAAAAfCoAAAAAAAB9KgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByKgAAAAAAAHIqAAAAAAAAAAAAAAAA8L8"
				],
				[
					587,
					2,
					"left_delete",
					null,
					"AgAAAHwqAAAAAAAAfCoAAAAAAAABAAAAZnsqAAAAAAAAeyoAAAAAAAABAAAAaQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB9KgAAAAAAAH0qAAAAAAAAAAAAAAAA8L8"
				],
				[
					588,
					1,
					"insert",
					{
						"characters": "for"
					},
					"AwAAAHsqAAAAAAAAfCoAAAAAAAAAAAAAfCoAAAAAAAB9KgAAAAAAAAAAAAB9KgAAAAAAAH4qAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB7KgAAAAAAAHsqAAAAAAAAAAAAAAAA8L8"
				],
				[
					589,
					1,
					"insert",
					{
						"characters": " child"
					},
					"BgAAAH4qAAAAAAAAfyoAAAAAAAAAAAAAfyoAAAAAAACAKgAAAAAAAAAAAACAKgAAAAAAAIEqAAAAAAAAAAAAAIEqAAAAAAAAgioAAAAAAAAAAAAAgioAAAAAAACDKgAAAAAAAAAAAACDKgAAAAAAAIQqAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB+KgAAAAAAAH4qAAAAAAAAAAAAAAAA8L8"
				],
				[
					590,
					1,
					"insert",
					{
						"characters": " in"
					},
					"AwAAAIQqAAAAAAAAhSoAAAAAAAAAAAAAhSoAAAAAAACGKgAAAAAAAAAAAACGKgAAAAAAAIcqAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACEKgAAAAAAAIQqAAAAAAAAAAAAAAAA8L8"
				],
				[
					591,
					1,
					"insert",
					{
						"characters": " self.chi"
					},
					"CQAAAIcqAAAAAAAAiCoAAAAAAAAAAAAAiCoAAAAAAACJKgAAAAAAAAAAAACJKgAAAAAAAIoqAAAAAAAAAAAAAIoqAAAAAAAAiyoAAAAAAAAAAAAAiyoAAAAAAACMKgAAAAAAAAAAAACMKgAAAAAAAI0qAAAAAAAAAAAAAI0qAAAAAAAAjioAAAAAAAAAAAAAjioAAAAAAACPKgAAAAAAAAAAAACPKgAAAAAAAJAqAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACHKgAAAAAAAIcqAAAAAAAAAAAAAAAA8L8"
				],
				[
					592,
					1,
					"insert",
					{
						"characters": "ldren:"
					},
					"BgAAAJAqAAAAAAAAkSoAAAAAAAAAAAAAkSoAAAAAAACSKgAAAAAAAAAAAACSKgAAAAAAAJMqAAAAAAAAAAAAAJMqAAAAAAAAlCoAAAAAAAAAAAAAlCoAAAAAAACVKgAAAAAAAAAAAACVKgAAAAAAAJYqAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACQKgAAAAAAAJAqAAAAAAAAAAAAAAAA8L8"
				],
				[
					596,
					1,
					"insert",
					{
						"characters": "[:]"
					},
					"AwAAAJUqAAAAAAAAlioAAAAAAAAAAAAAlioAAAAAAACXKgAAAAAAAAAAAACXKgAAAAAAAJgqAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACVKgAAAAAAAJUqAAAAAAAAAAAAAAAA8L8"
				],
				[
					598,
					1,
					"insert",
					{
						"characters": "\ndel"
					},
					"BgAAAJkqAAAAAAAAmioAAAAAAAAAAAAAmioAAAAAAACiKgAAAAAAAAAAAACiKgAAAAAAAKYqAAAAAAAAAAAAAKYqAAAAAAAApyoAAAAAAAAAAAAApyoAAAAAAACoKgAAAAAAAAAAAACoKgAAAAAAAKkqAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACZKgAAAAAAAJkqAAAAAAAAAAAAAAAA8L8"
				],
				[
					599,
					1,
					"insert",
					{
						"characters": " child"
					},
					"BgAAAKkqAAAAAAAAqioAAAAAAAAAAAAAqioAAAAAAACrKgAAAAAAAAAAAACrKgAAAAAAAKwqAAAAAAAAAAAAAKwqAAAAAAAArSoAAAAAAAAAAAAArSoAAAAAAACuKgAAAAAAAAAAAACuKgAAAAAAAK8qAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACpKgAAAAAAAKkqAAAAAAAAAAAAAAAA8L8"
				],
				[
					602,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAA7UEAAAAAAADtQQAAIiIiClRoZSBtYWluIGNvbXBvbmVudHMgdG9vbC4KCkNvcHlyaWdodCAoQykgMjAyNCAga2VuLW1vcmVsClRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyCnRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlCkZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyCnZlcnNpb24uCgpUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwgYnV0IFdJVEhPVVQgQU5ZCldBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEKUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgpZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoCnRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiIiIgoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgVHlwZSwgQW55CmZyb20gaW5zcGVjdCBpbXBvcnQgX2VtcHR5Cgpmcm9tIHB5b2xvYWQgaW1wb3J0IGFubm90YXRlCgpmcm9tIC4gaW1wb3J0IE5pbCwgcmVzb2x2ZQpmcm9tIC4gaW1wb3J0IHRlbXBsYXRlLCB3cml0ZWFibGUKCkF0dHJTcGVjID0gZGljdFtzdHIsIHR1cGxlW1R5cGUsIE9wdGlvbmFsW0FueV1dXQoKCmNsYXNzIEF0dHJpYnV0ZU1hbmFnZXI6CiAgICAiIiJBbiBvYmplY3QgdG8gbWFuYWdlIGNvbXBvbmVudCBhdHRyaWJ1dGVzLiIiIgoKICAgIF9wYXJhbXM6IGRpY3RbQXR0clNwZWNdCiAgICBfc3Vic2NyaWJlcjogd3JpdGVhYmxlLlN1YnNjcmliZXIKICAgIF9zdWJzY3JpYmVhYmxlOiB3cml0ZWFibGUuU3Vic2NyaWJlYWJsZQoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIGNvbXBvbmVudDogIkJhc2VDb21wb25lbnQiLAogICAgICAgIHJhd19rd2FyZ3M6IGRpY3Rbc3RyLCBzdHJdID0ge30sCiAgICAgICAga3dhcmdzOiBkaWN0W3N0ciwgQW55XSA9IHt9LAogICAgKToKICAgICAgICAiIiJDcmVhdGUgdGhlIEF0dGlidXRlIG1hbmFnZXIgZnJvbSBjb21wb25lbnQgYW5kIGFyZ3MuIiIiCiAgICAgICAgc2VsZi5fY29tcG9uZW50ID0gY29tcG9uZW50CiAgICAgICAgc2VsZi5fcGFyYW1zID0ge30KICAgICAgICBmb3IgbmFtZSwgYW5uLCBkZWZhdWx0IGluIGNvbXBvbmVudC5nZXRfcGFyYW1zKCk6CiAgICAgICAgICAgIHNlbGYuX3BhcmFtc1tuYW1lXSA9IChhbm4sIGRlZmF1bHQpCiAgICAgICAgc2VsZi5fc3Vic2NyaWJlciA9IHdyaXRlYWJsZS5TdWJzY3JpYmVyKCkKICAgICAgICBzZWxmLl9zdWJzY3JpYmVhYmxlID0gd3JpdGVhYmxlLlN1YnNjcmliZWFibGUoKQogICAgICAgIHNlbGYuX3N1YnNjcmliZSA9IHNlbGYuX3N1YnNjcmliZWFibGUuc3Vic2NyaWJlCiAgICAgICAgc2VsZi5fYXJncyA9IHt9CiAgICAgICAgc2VsZi5fbGFzdCA9IE5vbmUKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiByYXdfa3dhcmdzLml0ZW1zKCk6CiAgICAgICAgICAgIHN1YiwgdmFsID0gdGVtcGxhdGUuZXZhbHVhdGVfbGl0ZXJhbCgKICAgICAgICAgICAgICAgIHZhbHVlLCBzZWxmLl9jb21wb25lbnQubmFtZXNwYWNlCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5fYXJnc1trZXldID0gKHN1YiwgdmFsKQogICAgICAgICAgICBpZiBzdWI6CiAgICAgICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVyLnN1YnNjcmliZV90byh2YWwsIHNlbGYuX3VwZGF0ZSkKICAgICAgICBzZWxmLl9hcmdzLnVwZGF0ZShrd2FyZ3MpCiAgICAgICAgc2VsZi5fY29sbGVjdF92YWx1ZXMoKQoKICAgIGRlZiBfdXBkYXRlKHNlbGYpOgogICAgICAgIHZhbHMgPSBzZWxmLl92YWx1ZXMuY29weSgpCiAgICAgICAgc2VsZi5fY29sbGVjdF92YWx1ZXMoKQogICAgICAgIGlmIHNlbGYuX3ZhbHVlcyAhPSB2YWxzOgogICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVhYmxlLndhcm5fc3Vic2NyaWJlcnMoKQoKICAgIGRlZiBfY29sbGVjdF92YWx1ZXMoc2VsZik6CiAgICAgICAgc2VsZi5fdmFsdWVzID0ge30KCiAgICAgICAgZGVmIGZpbHRlcnModmFsLCBnZXQsIGFubiwgZGVmYXVsdCk6CiAgICAgICAgICAgIGZyb20gLiBpbXBvcnQgbWVkaWEsIHdyaXRlYWJsZQogICAgICAgICAgICBmcm9tIHRraW50ZXIgaW1wb3J0IEltYWdlCgogICAgICAgICAgICBpZiB2YWwgaXMgTmlsOgogICAgICAgICAgICAgICAgdmFsID0gZGVmYXVsdAogICAgICAgICAgICBpZiBhbm4gaXMgd3JpdGVhYmxlLldyaXRlYWJsZSBhbmQgaXNpbnN0YW5jZSgKICAgICAgICAgICAgICAgIHZhbCwgd3JpdGVhYmxlLldyaXRlYWJsZQogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgcmV0dXJuIHZhbAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgZ2V0OgogICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5nZXQoKQogICAgICAgICAgICAgICAgaWYgYW5uIGlzIEltYWdlIG9yICgKICAgICAgICAgICAgICAgICAgICBpc2luc3RhbmNlKGFubiwgdHlwZSkKICAgICAgICAgICAgICAgICAgICBhbmQgaXNzdWJjbGFzcyhhbm4sIEltYWdlKQogICAgICAgICAgICAgICAgICAgIGFuZCBpc2luc3RhbmNlKHZhbCwgbWVkaWEuSW1hZ2UpCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5nZXQoKQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWwsIG1lZGlhLkltYWdlKToKICAgICAgICAgICAgICAgICAgICBwcmludCh2YWwpCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsCgogICAgICAgIGRlZiBzZXRfcGFyYW0ob2JqLCBrZXksIHZhbHVlLCBhbm5vdGF0aW9uLCBkZWZhdWx0KToKICAgICAgICAgICAgZ2V0LCB2YWwgPSB2YWx1ZQogICAgICAgICAgICBpZiAiOiIgaW4ga2V5OgogICAgICAgICAgICAgICAgcHJlLCBrZXkgPSBrZXkuc3BsaXQoIjoiLCAxKQoKICAgICAgICAgICAgICAgIGlmIHByZSBub3QgaW4gb2JqIG9yIG5vdCBpc2luc3RhbmNlKG9ialtwcmVdLCBkaWN0KToKICAgICAgICAgICAgICAgICAgICBvYmpbcHJlXSA9IHt9CiAgICAgICAgICAgICAgICBzZXRfcGFyYW0ob2JqW3ByZV0sIGtleSwgdmFsdWUsIGFubm90YXRpb24sIGRlZmF1bHQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBvYmpba2V5XSA9IGZpbHRlcnModmFsLCBnZXQsIGFubm90YXRpb24sIGRlZmF1bHQpCgogICAgICAgIGZvciBrZXksIHZhbHVlIGluIHNlbGYuX2FyZ3MuaXRlbXMoKToKICAgICAgICAgICAgaWYga2V5IGluIHNlbGYuX3BhcmFtczoKICAgICAgICAgICAgICAgIGFubiwgdmFsID0gc2VsZi5fcGFyYW1zW2tleV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGFubiA9IHZhbCA9IE5vbmUKICAgICAgICAgICAgc2V0X3BhcmFtKHNlbGYuX3ZhbHVlcywga2V5LCB2YWx1ZSwgYW5uLCB2YWwpCgogICAgZGVmIF9nZXRfd3JpdGVhYmxlKHNlbGYsIG5hbWUpOgogICAgICAgIHZhbCA9IHNlbGYuX2FyZ3NbbmFtZV1bMV0KICAgICAgICBpZiBpc2luc3RhbmNlKHZhbCwgd3JpdGVhYmxlLldyaXRlYWJsZSk6CiAgICAgICAgICAgIHJldHVybiB2YWwKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJTb3JyeS4uLiIpCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGF0dHI6IHN0cik6CiAgICAgICAgIiIiR2V0IGF0dHJpYnV0ZSBmcm9tIHZhbHVlcy4iIiIKICAgICAgICBpZiBhdHRyWzBdID09ICJfIjoKICAgICAgICAgICAgcmV0dXJuIHN1cGVyKCkuX19nZXRhdHRyX18oYXR0cikKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVzW2F0dHJdCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoKSBmcm9tIGUKCgpjbGFzcyBCYXNlQ29tcG9uZW50KHdyaXRlYWJsZS5TdWJzY3JpYmVyKToKICAgICIiIlRoZSBiYXNlIGNvbXBvbmVudCBjbGFzcy4iIiIKCiAgICBwYXJlbnQgPSBOb25lCiAgICBjaGlsZHJlbjogbGlzdAogICAgX3Bvc18gPSBOb25lCiAgICBjb250YWluZXIgPSBOb25lCiAgICBvdXRsZXQgPSBOb25lCiAgICBfYWxpZ25lciA9IE5vbmUKCiAgICBkZWYgX2luaXRfc3ViY2xhc3MoY2xzKToKICAgICAgICBpZiBub3QgaGFzYXR0cihjbHMsICJBdHRycyIpOgogICAgICAgICAgICBjbHMuQXR0cnMgPSB0eXBlKGNscy5fX25hbWVfXyArICIuQXR0cnMiLCAoKSwge30pCiAgICAgICAgY2xzLkF0dHJzID0gZGF0YWNsYXNzKGNscy5BdHRycykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBnZXRfcGFyYW1zKGNscykgLT4gdHVwbGVbdHVwbGVbc3RyLCB0eXBlLCBBbnldXToKICAgICAgICAiIiJHZXQgYW4gaXRlcmFibGUgb2YgdHVwbGVzIChuYW1lLCBhbm5vdGF0aW9uLCBkZWZhdWx0KS4iIiIKICAgICAgICBhbm5zID0ge30KICAgICAgICBwYXJhbXMgPSBbXQogICAgICAgIGZvciBuYW1lLCBhbm4gaW4gY2xzLkF0dHJzLl9fYW5ub3RhdGlvbnNfXy5pdGVtcygpOgogICAgICAgICAgICBhbm5zW25hbWVdID0gYW5uCiAgICAgICAgZm9yIG5hbWUsIHZhbCBpbiB2YXJzKGNscy5BdHRycykuaXRlbXMoKToKICAgICAgICAgICAgaWYgbmFtZSBpbiBhbm5zOgogICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgobmFtZSwgYW5uc1tuYW1lXSwgdmFsKSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoKG5hbWUsIF9lbXB0eSwgdmFsKSkKICAgICAgICByZXR1cm4gdHVwbGUocGFyYW1zKQoKICAgIF9faW5pdF9zdWJjbGFzc19fID0gX2luaXRfc3ViY2xhc3MKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBuYW1lc3BhY2U6ICJ3cml0ZWFibGUuTmFtZXNwYWNlIiA9IHt9LAogICAgICAgIHBhcmVudD1Ob25lLAogICAgICAgIGF0dHJzOiBkaWN0W3N0cl0gPSB7fSwKICAgICAgICBwYXJhbXM6IGRpY3Rbc3RyXSA9IHt9LAogICAgKToKICAgICAgICAiIiJJbml0aWFsaXplIEJhc2UgQ29tcG9uZW50LiIiIgogICAgICAgIHdyaXRlYWJsZS5TdWJzY3JpYmVyLl9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5jaGlsZHJlbiA9IFtdCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IG5hbWVzcGFjZQogICAgICAgIGlmIHBhcmVudCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5wYXJlbnQuY2hpbGRyZW4uYXBwZW5kKHNlbGYpCiAgICAgICAgc2VsZi5yYXdfYXR0cnMgPSBhdHRycwogICAgICAgIHNlbGYuYXR0cnMgPSBBdHRyaWJ1dGVNYW5hZ2VyKHNlbGYsIGF0dHJzKQogICAgICAgIHNlbGYuYXR0cnMuX3N1YnNjcmliZShzZWxmLCBzZWxmLl91cGRhdGUpCgogICAgZGVmIGJpbmRfYXR0cnMoc2VsZiwgYXR0cnM6IGRpY3Rbc3RyXSk6CiAgICAgICAgIiIiQmluZCB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZXMgdG8gdGhlIGNvbXBvbmVudC4iIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuYXR0cnMgPSBzZWxmLl9fY2xhc3NfXy5BdHRycygqKmF0dHJzKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKAogICAgICAgICAgICAgICAgZiJlcnJvciB3aGlsZSBiaW5kaW5nIGFyZ3VtZW50cyB0byB7c2VsZi5fX2NsYXNzX18hcn0iLAogICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgIHNlbGYuQXR0cnMsCiAgICAgICAgICAgICkgZnJvbSBOb25lCgogICAgZGVmIF9hbGlnbl93aWRnZXQoc2VsZiwgd2lkZ2V0LCBwYXJhbXM6IGRpY3Rbc3RyXSk6CiAgICAgICAgaWYgc2VsZi5fY2hpbGRyZW5fYWxpZ24gPT0gInIiOgogICAgICAgICAgICB3aWRnZXQuZ3JpZChjb2x1bW49c2VsZi5fYWxpZ25fb2Zmc2V0LCByb3c9MCwgKipwYXJhbXMpCiAgICAgICAgZWxpZiBzZWxmLl9jaGlsZHJlbl9hbGlnbiA9PSAiYyI6CiAgICAgICAgICAgIHdpZGdldC5ncmlkKHJvdz1zZWxmLl9hbGlnbl9vZmZzZXQsIGNvbHVtbj0wLCAqKnBhcmFtcykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ1bmtub3duIGFsaWduIG9mZnNldDoiLCBzZWxmLl9jaGlsZHJlbl9hbGlnbikKICAgICAgICBzZWxmLl9hbGlnbl9vZmZzZXQgKz0gMQoKICAgIGRlZiB1cGRhdGUoc2VsZik6CiAgICAgICAgc2VsZi5hdHRycy5fY29sbGVjdF92YWx1ZXMoKQogICAgICAgIGZvciBjaGlsZCBpbiBzZWxmLmNoaWxkcmVuOgogICAgICAgICAgICBjaGlsZC51cGRhdGUoKQogICAgICAgIHNlbGYuX3VwZGF0ZSgpCgogICAgZGVmIF91cGRhdGUoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBtYWtlX2JpbmRpbmdzKHNlbGYpOgogICAgICAgIGZvciBldmVudCwgaGFuZGxlciBpbiBzZWxmLmV2ZW50X2JpbmRzLml0ZW1zKCk6CiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmJpbmQoZiI8e2V2ZW50fT4iLCByZXNvbHZlKGhhbmRsZXIpKQoKICAgIGRlZiBjcmVhdGUoc2VsZik6CiAgICAgICAgc2VsZi5ldmVudF9iaW5kcyA9IHt9CgogICAgZGVmIGluaXRfZ2VvbWV0cnkoc2VsZik6CiAgICAgICAgZ3JpZF9wYXJhbXMgPSAoInN0aWNreSIsKQogICAgICAgIHBhY2tfcGFyYW1zID0gKAogICAgICAgICAgICAic2lkZSIsCiAgICAgICAgICAgICJhbmNob3IiLAogICAgICAgICAgICAiZXhwYW5kIiwKICAgICAgICAgICAgImZpbGwiLAogICAgICAgICAgICAiaXBhZHgiLAogICAgICAgICAgICAicGFkeCIsCiAgICAgICAgICAgICJpcGFkeSIsCiAgICAgICAgICAgICJwYWR5IiwKICAgICAgICApCiAgICAgICAgaWYgaGFzYXR0cihzZWxmLmF0dHJzLCAibGF5IikgYW5kIHNlbGYuYXR0cnMubGF5OgogICAgICAgICAgICBsYXkgPSBzZWxmLmF0dHJzLmxheQogICAgICAgICAgICBpZiAidyIgaW4gbGF5OgogICAgICAgICAgICAgICAgaWYgIngiIGluIGxheVsidyJdOgogICAgICAgICAgICAgICAgICAgIGxheXggPSByZXNvbHZlKGxheVsidyJdWyJ4Il0pCiAgICAgICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShsYXl4LCBzdHIpOgogICAgICAgICAgICAgICAgICAgICAgICBsYXl4ID0gZGljdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dXBsZShtYXAoc3RyLnN0cmlwLCB4LnNwbGl0KCI6IiwgMSkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIGxheXguc3BsaXQoIiwiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgZm9yIGNvbCwgd2VpZ2h0IGluIGxheXguaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdXRsZXQuY29sdW1uY29uZmlndXJlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50KGNvbCksIHdlaWdodD1pbnQod2VpZ2h0KQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBpZiAieSIgaW4gbGF5WyJ3Il06CiAgICAgICAgICAgICAgICAgICAgbGF5eSA9IHJlc29sdmUoc2VsZi5hdHRycy5sYXlbInciXVsieSJdKQogICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UobGF5eSwgc3RyKToKICAgICAgICAgICAgICAgICAgICAgICAgbGF5eSA9IGRpY3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGUobWFwKHN0ci5zdHJpcCwgeC5zcGxpdCgiOiIsIDEpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgeCBpbiBsYXl5LnNwbGl0KCIsIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGZvciBjb2wsIHdlaWdodCBpbiBsYXl5Lml0ZW1zKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3V0bGV0LmNvbHVtbmNvbmZpZ3VyZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludChjb2wpLCB3ZWlnaHQ9aW50KHdlaWdodCkKICAgICAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICBpZiBoYXNhdHRyKHNlbGYuYXR0cnMsICJwb3MiKToKICAgICAgICAgICAgcG9zID0gc2VsZi5hdHRycy5wb3MKICAgICAgICAgICAgaWYgInBhY2siIGluIHBvcyBhbmQgcG9zWyJwYWNrIl06CiAgICAgICAgICAgICAgICBwYXJhbXMgPSB7azogdiBmb3IgaywgdiBpbiBwb3MuaXRlbXMoKSBpZiBrIGluIHBhY2tfcGFyYW1zfQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShwb3NbInBhY2siXSwgc3RyKToKICAgICAgICAgICAgICAgICAgICBwYXJhbXNbInNpZGUiXSA9IHBvc1sicGFjayJdCiAgICAgICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5wYWNrKCoqcGFyYW1zKQogICAgICAgICAgICBlbGlmICJncmlkIiBpbiBwb3M6CiAgICAgICAgICAgICAgICBncmlkID0ge2s6IHYgZm9yIGssIHYgaW4gcG9zLml0ZW1zKCkgaWYgayBpbiBncmlkX3BhcmFtc30KICAgICAgICAgICAgICAgIGNvb3JkID0gcmVzb2x2ZShwb3NbImdyaWQiXSkKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY29vcmQsIHR1cGxlKToKICAgICAgICAgICAgICAgICAgICBpZiBsZW4oY29vcmQpID09IDI6CiAgICAgICAgICAgICAgICAgICAgICAgICh4LCB5KSA9IGNvb3JkCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbImNvbHVtbiJdID0geAogICAgICAgICAgICAgICAgICAgICAgICBncmlkWyJyb3ciXSA9IHkKICAgICAgICAgICAgICAgICAgICBlbGlmIGxlbihjb29yZCkgPT0gNDoKICAgICAgICAgICAgICAgICAgICAgICAgKHgsIHksIHhzLCB5cykgPSBjb29yZAogICAgICAgICAgICAgICAgICAgICAgICBncmlkWyJjb2x1bW4iXSA9IHgKICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFsicm93Il0gPSB5CiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbImNvbHVtbnNwYW4iXSA9IHhzCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbInJvd3NwYW4iXSA9IHlzCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3JvbmcgZ3JpZCB0dXBsZSIsIGNvb3JkKQogICAgICAgICAgICAgICAgc2VsZi5jb250YWluZXIuZ3JpZCgqKmdyaWQpCgoKY2xhc3MgVGtDb21wb25lbnQoQmFzZUNvbXBvbmVudCk6CiAgICBXaWRnZXQgPSBOb25lCiAgICBfYXR0cl9pZ25vcmUgPSAoKQogICAgX3BhcmFtcyA9IE5vbmUKCiAgICBkZWYgX19pbml0X3N1YmNsYXNzX18oY2xzKToKICAgICAgICBjbHMuQXR0cnMgPSBkYXRhY2xhc3MoY2xzLkF0dHJzKQogICAgICAgIHNhbWUgPSBbCiAgICAgICAgICAgIHgKICAgICAgICAgICAgZm9yIHggaW4gZGlyKGNscy5BdHRycykKICAgICAgICAgICAgaWYgbm90IHguc3RhcnRzd2l0aCgiXyIpIGFuZCB4IG5vdCBpbiBjbHMuX2F0dHJfaWdub3JlCiAgICAgICAgXQogICAgICAgIGNscy5jb25mX2FsaWFzc2VzID0gewogICAgICAgICAgICAqKmRpY3QoemlwKHNhbWUsIHNhbWUpKSwKICAgICAgICB9CiAgICAgICAgZGVsIHNhbWUKCiAgICBkZWYgY3JlYXRlKHNlbGYsIHBhcmVudCk6CiAgICAgICAgc3VwZXIoKS5jcmVhdGUoKQogICAgICAgIHNlbGYuX3BhcmFtcyA9IHBhcmFtcyA9IHsKICAgICAgICAgICAgKip7CiAgICAgICAgICAgICAgICBzZWxmLmNvbmZfYWxpYXNzZXNba106IHYKICAgICAgICAgICAgICAgIGZvciBrLCB2IGluIHNlbGYuYXR0cnMuX3ZhbHVlcy5pdGVtcygpCiAgICAgICAgICAgICAgICBpZiBrIGluIHNlbGYuY29uZl9hbGlhc3NlcyBhbmQgdiBpcyBub3QgTmlsCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2VsZi5fY3JlYXRlKHBhcmVudCwgcGFyYW1zKQogICAgICAgIHNlbGYubWFrZV9iaW5kaW5ncygpCiAgICAgICAgc2VsZi5pbml0X2dlb21ldHJ5KCkKICAgICAgICBmb3IgY2hpbGQgaW4gc2VsZi5jaGlsZHJlbjoKICAgICAgICAgICAgY2hpbGQuY3JlYXRlKHNlbGYub3V0bGV0KQoKICAgIGRlZiBfY3JlYXRlKHNlbGYsIHBhcmVudCwgcGFyYW1zPXt9KToKICAgICAgICBzZWxmLm91dGxldCA9IHNlbGYuY29udGFpbmVyID0gc2VsZi5XaWRnZXQocGFyZW50LCAqKnBhcmFtcykKCiAgICBkZWYgX3VwZGF0ZShzZWxmKToKICAgICAgICBmb3IgaywgdiBpbiB7CiAgICAgICAgICAgIHNlbGYuY29uZl9hbGlhc3Nlc1trXTogdgogICAgICAgICAgICBmb3IgaywgdiBpbiBzZWxmLmF0dHJzLl92YWx1ZXMuaXRlbXMoKQogICAgICAgICAgICBpZiBrIGluIHNlbGYuY29uZl9hbGlhc3NlcyBhbmQgdiBpcyBub3QgTmlsCiAgICAgICAgfS5pdGVtcygpOgogICAgICAgICAgICBpZiBrID09ICJ0ZXh0IjoKICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyWyJ0ZXh0Il0gPSB2CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNvbmZpZ3VyZSgqKntrOiB2fSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHJhaXNlCgogICAgZGVmIF9fZGVsX18oc2VsZik6CiAgICAgICAgZm9yIGNoaWxkIGluIHNlbGYuY2hpbGRyZW5bOl06CiAgICAgICAgICAgIGRlbCBjaGlsZAoKCmNsYXNzIEVudW1Db21wb25lbnQoQmFzZUNvbXBvbmVudCk6CiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBpdGVyYWJsZV9leHByOiBzdHIsCiAgICAgICAgYWxpYXNlczogdHVwbGVbc3RyLCBzdHJdLAogICAgICAgIG5hbWVzcGFjZTogd3JpdGVhYmxlLk5hbWVzcGFjZSwKICAgICAgICBwYXJlbnQ6ICJPcHRpb25hbFtCYXNlQ29tcG9uZW50XSIgPSBOb25lLAogICAgICAgIHRlbXBsYXRlczogbGlzdFt0ZW1wbGF0ZS5UZW1wbGF0ZS5JdGVtXSA9IFtdLAogICAgKToKICAgICAgICB3cml0ZWFibGUuU3Vic2NyaWJlci5fX2luaXRfXyhzZWxmKQogICAgICAgIHNlbGYuc3Vic2NyaWJlX3RvKG5hbWVzcGFjZSwgc2VsZi51cGRhdGUpCiAgICAgICAgc2VsZi5jaGlsZHJlbiA9IFtdCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IG5hbWVzcGFjZQogICAgICAgIHNlbGYuaXRlcmFibGVfZXhwciA9IGl0ZXJhYmxlX2V4cHIKICAgICAgICBzZWxmLmFsaWFzZXMgPSBhbGlhc2VzCiAgICAgICAgc2VsZi50ZW1wbGF0ZXMgPSB0ZW1wbGF0ZXMgICMgdGVtcGxhdGUKICAgICAgICBpZiBwYXJlbnQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYucGFyZW50LmNoaWxkcmVuLmFwcGVuZChzZWxmKQogICAgICAgIHNlbGYuY29udGVudCA9IE5vbmUKICAgICAgICBzZWxmLmNvbnRlbnRzID0gW10KICAgICAgICBzZWxmLl9sYXN0ID0gTm9uZQoKICAgIGRlZiBjcmVhdGUoc2VsZiwgcGFyZW50PU5vbmUpOgogICAgICAgIHBhcmVudCA9IHBhcmVudCBvciBzZWxmLnBhcmVudC5vdXRsZXQKICAgICAgICBzZWxmLmNvbnRlbnRzID0gW10KICAgICAgICBpdGVyYWJsZSA9IGV2YWwoc2VsZi5pdGVyYWJsZV9leHByLCB7fSwgc2VsZi5uYW1lc3BhY2UpCiAgICAgICAgc2VsZi5fbGFzdCA9IGl0ZXJhYmxlCiAgICAgICAgZm9yIGlkeCwgdmFsIGluIGVudW1lcmF0ZShpdGVyYWJsZSk6CiAgICAgICAgICAgIGFpZHgsIGF2YWwgPSBzZWxmLmFsaWFzZXMKICAgICAgICAgICAgbmFtZXNwYWNlID0gd3JpdGVhYmxlLk5hbWVzcGFjZShwYXJlbnRzPVtzZWxmLm5hbWVzcGFjZV0pCiAgICAgICAgICAgIG5hbWVzcGFjZVthaWR4XSA9IGlkeAogICAgICAgICAgICBuYW1lc3BhY2VbYXZhbF0gPSB2YWwKICAgICAgICAgICAgZm9yIHRlbXBsYXRlX2l0ZW0gaW4gc2VsZi50ZW1wbGF0ZXM6CiAgICAgICAgICAgICAgICBjb21wID0gdGVtcGxhdGVfaXRlbS5yZW5kZXIoc2VsZiwgbmFtZXNwYWNlKQogICAgICAgICAgICAgICAgY29tcC5jcmVhdGUocGFyZW50KQogICAgICAgICAgICAgICAgc2VsZi5jb250ZW50cy5hcHBlbmQoKG5hbWVzcGFjZSwgY29tcCkpCgogICAgZGVmIHVwZGF0ZShzZWxmKToKICAgICAgICB2YWx1ZSA9IGV2YWwoc2VsZi5pdGVyYWJsZV9leHByLCB7fSwgc2VsZi5uYW1lc3BhY2UpCiAgICAgICAgaWYgdmFsdWUgIT0gc2VsZi5fbGFzdDoKICAgICAgICAgICAgY29udGVudHMgPSBzZWxmLmNvbnRlbnRzLmNvcHkoKQogICAgICAgICAgICBzZWxmLmNyZWF0ZShzZWxmLnJlbmRlcl9wYXJlbnQpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYucGFyZW50LnVwZGF0ZSgpICAjIGZvciBzbW9vdGhlciByZW5kZXJyaW5nCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgIGZvciBuYW1lc3BhY2UsIGNvbXAgaW4gY29udGVudHM6CiAgICAgICAgICAgICAgICBkZWwgY29tcCwgbmFtZXNwYWNlCgoKY2xhc3MgSWZDb21wb25lbnQoQmFzZUNvbXBvbmVudCk6CiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBjb25kaXRpb24sCiAgICAgICAgbmFtZXNwYWNlLAogICAgICAgIHBhcmVudDogIk9wdGlvbmFsW0Jhc2VDb21wb25lbnRdIiA9IE5vbmUsCiAgICAgICAgdGVtcGxhdGU6IGxpc3QgPSBbXSwKICAgICk6CiAgICAgICAgd3JpdGVhYmxlLlN1YnNjcmliZXIuX19pbml0X18oc2VsZikKICAgICAgICBzZWxmLnN1YnNjcmliZV90byhuYW1lc3BhY2UsIHNlbGYudXBkYXRlKQogICAgICAgIHNlbGYuY2hpbGRyZW4gPSBbXQogICAgICAgIHNlbGYucGFyZW50ID0gcGFyZW50CiAgICAgICAgc2VsZi5uYW1lc3BhY2UgPSBuYW1lc3BhY2UKICAgICAgICBzZWxmLmNvbmRpdGlvbiA9IGNvbmRpdGlvbgogICAgICAgIHNlbGYudGVtcGxhdGUgPSB0ZW1wbGF0ZSAgIyB0ZW1wbGF0ZQogICAgICAgIGlmIHBhcmVudCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5wYXJlbnQuY2hpbGRyZW4uYXBwZW5kKHNlbGYpCiAgICAgICAgc2VsZi5jb250ZW50ID0gTm9uZQogICAgICAgIHNlbGYuX2xhc3QgPSBOb25lCgogICAgZGVmIGNyZWF0ZShzZWxmLCBwYXJlbnQ9Tm9uZSk6CiAgICAgICAgcGFyZW50ID0gcGFyZW50IG9yIHNlbGYucGFyZW50Lm91dGxldAogICAgICAgIHNlbGYucmVuZGVyX3BhcmVudCA9IHBhcmVudAogICAgICAgIHNlbGYuX2xhc3QgPSBldmFsKHNlbGYuY29uZGl0aW9uLCB7fSwgc2VsZi5uYW1lc3BhY2UpCiAgICAgICAgaWYgc2VsZi5fbGFzdDoKICAgICAgICAgICAgZm9yIHRlbXBsYXRlIGluIHNlbGYudGVtcGxhdGU6CiAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5yZW5kZXIoc2VsZiwgc2VsZi5uYW1lc3BhY2UpLmNyZWF0ZShwYXJlbnQpCgogICAgZGVmIHVwZGF0ZShzZWxmKToKICAgICAgICBjb25kID0gZXZhbChzZWxmLmNvbmRpdGlvbiwge30sIHNlbGYubmFtZXNwYWNlKQogICAgICAgIGlmIGNvbmQgIT0gc2VsZi5fbGFzdDoKICAgICAgICAgICAgZGVsIHNlbGYuY29udGVudAogICAgICAgICAgICBzZWxmLmNyZWF0ZShzZWxmLnJlbmRlcl9wYXJlbnQpCgoKY2xhc3MgQ29tcG9uZW50KEJhc2VDb21wb25lbnQpOgogICAgY29kZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgIF90ZW1wbGF0ZV9jYWNoZTogdHVwbGVbT3B0aW9uYWxbc3RyXSwgT3B0aW9uYWxbdGVtcGxhdGUuVGVtcGxhdGVdXSA9ICgKICAgICAgICBOb25lLAogICAgICAgIE5vbmUsCiAgICApCgogICAgZGVmIGluaXQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIEBhbm5vdGF0ZQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGl0ZW06IHN0cik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZi5uYW1lc3BhY2VbaXRlbV0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJldHVybiBnbG9iYWxzKClbaXRlbV0KICAgICAgICAgICAgZXhjZXB0IEluZGV4RXJyb3IgYXMgZToKICAgICAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoaXRlbSkgZnJvbSBlCgogICAgZGVmIF9faW5pdF9zdWJjbGFzc19fKGNscyk6CiAgICAgICAgY2xzLmdldF90ZW1wbGF0ZSgpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZ2V0X3RlbXBsYXRlKGNscyk6CiAgICAgICAgY29kZSA9IGNscy5jb2RlIG9yIGNscy5fX2RvY19fCiAgICAgICAgaWYgY2xzLl90ZW1wbGF0ZV9jYWNoZVswXSAhPSBjb2RlOgogICAgICAgICAgICBjbHMuX3RlbXBsYXRlX2NhY2hlID0gY29kZSwgdGVtcGxhdGUuVGVtcGxhdGUucGFyc2UoY29kZSkKICAgICAgICByZXR1cm4gY2xzLl90ZW1wbGF0ZV9jYWNoZVsxXQoKICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBpdGVtOiBzdHIsIHZhbHVlKToKICAgICAgICBzZWxmLm5hbWVzcGFjZVtpdGVtXSA9IHZhbHVlCgogICAgZGVmIF9faW5pdF9fKHNlbGYsICoqcGFyYW1zKToKICAgICAgICB3cml0ZWFibGUuU3Vic2NyaWJlci5fX2luaXRfXyhzZWxmKQogICAgICAgIHNlbGYuYXR0cnMgPSBBdHRyaWJ1dGVNYW5hZ2VyKAogICAgICAgICAgICBzZWxmLCB7fSwge2s6IChGYWxzZSwgdikgZm9yIGssIHYgaW4gcGFyYW1zLml0ZW1zKCl9CiAgICAgICAgKQogICAgICAgIHNlbGYuYXR0cnMuX3N1YnNjcmliZShzZWxmLCBzZWxmLl91cGRhdGUpCgogICAgICAgIHNlbGYubmFtZXNwYWNlID0gd3JpdGVhYmxlLk5hbWVzcGFjZSgpCiAgICAgICAgc2VsZi5zdWJzY3JpYmVfdG8oc2VsZi5uYW1lc3BhY2UsIHNlbGYudXBkYXRlKQogICAgICAgIGZvciBhdHRyX25hbWUgaW4gZGlyKHNlbGYpOgogICAgICAgICAgICBpZiBub3QgYXR0cl9uYW1lLnN0YXJ0c3dpdGgoIl8iKToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBzZWxmLm5hbWVzcGFjZVthdHRyX25hbWVdID0gZ2V0YXR0cihzZWxmLCBhdHRyX25hbWUpCiAgICAgICAgICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgIHNlbGYuaW5pdCgpCiAgICAgICAgc2VsZi5yZW5kZXJyZWQgPSBGYWxzZQogICAgICAgIHNlbGYuX2NvbXBvbmVudF8gPSBzZWxmLmdldF90ZW1wbGF0ZSgpLmV2YWwoc2VsZi5uYW1lc3BhY2UpCgogICAgZGVmIHJlbmRlcihzZWxmLCBtYXN0ZXIpOgogICAgICAgIHNlbGYuX2NvbXBvbmVudF8uY3JlYXRlKG1hc3RlcikKICAgICAgICBzZWxmLnJlZGVycmVkID0gVHJ1ZQogICAgICAgIHJldHVybiBzZWxmLmNvbnRhaW5lcgoKICAgIGRlZiB1cGRhdGUoc2VsZik6CiAgICAgICAgaWYgc2VsZi5yZW5kZXJyZWQ6CiAgICAgICAgICAgIHNlbGYuX2NvbXBvbmVudF8udXBkYXRlKCkKCiAgICBkZWYgZXhwb3NlKHNlbGYsIGZ1bmMpOgogICAgICAgIHNlbGYubmFtZXNwYWNlW2Z1bmMuX19uYW1lX19dID0gZnVuYwoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGNvbnRhaW5lcihzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fY29tcG9uZW50Xy5jb250YWluZXIKCiAgICBAcHJvcGVydHkKICAgIGRlZiBvdXRsZXQoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBvdXQgPSBzZWxmWyJvdXRsZXQiXQogICAgICAgICAgICBpZiBvdXQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICByZXR1cm4gb3V0Lm91dGxldAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBleGNlcHQgTmFtZUVycm9yOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBjcmVhdGVfdGsoc2VsZiwgcm9vdD1Ob25lKToKICAgICAgICAiIiJDcmVhdGUgdGhlIGNvbXBvbmVudCBpbiBhIGZ1bGwgVGsgd2luZG93LiIiIgogICAgICAgIHJvb3QuY29sdW1uY29uZmlndXJlKDAsIHdlaWdodD0xKQogICAgICAgIHJvb3Qucm93Y29uZmlndXJlKDAsIHdlaWdodD0xKQoKICAgICAgICBzZWxmLnJlbmRlcihyb290KS5ncmlkKGNvbHVtbj0wLCByb3c9MCwgc3RpY2t5PSJuc2V3IikKICAgICAgICByZXR1cm4gcm9vdAoKICAgIGRlZiBwb3B1cChzZWxmLCAqKnBhcmFtcyk6CiAgICAgICAgIiIiQ3JlYXRlIHRoZSBjb21wb25lbnQgaW4gYSBmdWxsIFRrIHdpbmRvdy4iIiIKICAgICAgICBmcm9tIHRraW50ZXIgaW1wb3J0IFRvcGxldmVsCgogICAgICAgIHJvb3QgPSBUb3BsZXZlbCgpCiAgICAgICAgcm9vdC5jb2x1bW5jb25maWd1cmUoMCwgd2VpZ2h0PTEpCiAgICAgICAgcm9vdC5yb3djb25maWd1cmUoMCwgd2VpZ2h0PTEpCgogICAgICAgIHNlbGYucmVuZGVyKHJvb3QpLmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKQogICAgICAgIHJldHVybiByb290CgoKZGVmIGNvbXBvbmVudChmdW5jKToKICAgIGRlZiBjb21wb25lbnRfaW5pdChzZWxmKToKICAgICAgICB2YXIgPSBmdW5jKHNlbGYpCiAgICAgICAgaWYgdmFyIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLm5hbWVzcGFjZS52YXJzLnVwZGF0ZSh2YXIpCgogICAgcmV0dXJuIHR5cGUoCiAgICAgICAgZnVuYy5fX25hbWVfXywKICAgICAgICAoQ29tcG9uZW50LCksCiAgICAgICAgewogICAgICAgICAgICAiaW5pdCI6IGNvbXBvbmVudF9pbml0LAogICAgICAgICAgICAiX19kb2NfXyI6IGZ1bmMuX19kb2NfXywKICAgICAgICB9LAogICAgKQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACvKgAAAAAAAK8qAAAAAAAAAAAAAAAA8L8"
				],
				[
					603,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAK8qAAAAAAAAsCoAAAAAAAAAAAAAsCoAAAAAAAC8KgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACvKgAAAAAAAK8qAAAAAAAAAAAAAAAA8L8"
				],
				[
					604,
					1,
					"left_delete",
					null,
					"AQAAALgqAAAAAAAAuCoAAAAAAAAEAAAAICAgIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC8KgAAAAAAALwqAAAAAAAAAAAAAAAA8L8"
				],
				[
					605,
					1,
					"insert",
					{
						"characters": "del"
					},
					"AwAAALgqAAAAAAAAuSoAAAAAAAAAAAAAuSoAAAAAAAC6KgAAAAAAAAAAAAC6KgAAAAAAALsqAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC4KgAAAAAAALgqAAAAAAAAAAAAAAAA8L8"
				],
				[
					606,
					1,
					"insert",
					{
						"characters": " self.co"
					},
					"CAAAALsqAAAAAAAAvCoAAAAAAAAAAAAAvCoAAAAAAAC9KgAAAAAAAAAAAAC9KgAAAAAAAL4qAAAAAAAAAAAAAL4qAAAAAAAAvyoAAAAAAAAAAAAAvyoAAAAAAADAKgAAAAAAAAAAAADAKgAAAAAAAMEqAAAAAAAAAAAAAMEqAAAAAAAAwioAAAAAAAAAAAAAwioAAAAAAADDKgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC7KgAAAAAAALsqAAAAAAAAAAAAAAAA8L8"
				],
				[
					607,
					1,
					"insert",
					{
						"characters": "nt"
					},
					"AgAAAMMqAAAAAAAAxCoAAAAAAAAAAAAAxCoAAAAAAADFKgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADDKgAAAAAAAMMqAAAAAAAAAAAAAAAA8L8"
				],
				[
					608,
					1,
					"insert_dimensions",
					null,
					"AgAAAMEqAAAAAAAAwSoAAAAAAAAEAAAAY29udMEqAAAAAAAAyioAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADFKgAAAAAAAMUqAAAAAAAAAAAAAAAA8L8"
				],
				[
					609,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAMoqAAAAAAAAzCoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADKKgAAAAAAAMoqAAAAAAAAAAAAAAAA8L8"
				],
				[
					612,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAACkIAAAAAAAAKQgAAIiIiClRoZSBtYWluIGNvbXBvbmVudHMgdG9vbC4KCkNvcHlyaWdodCAoQykgMjAyNCAga2VuLW1vcmVsClRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyCnRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlCkZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyCnZlcnNpb24uCgpUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwgYnV0IFdJVEhPVVQgQU5ZCldBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEKUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgpZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoCnRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiIiIgoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgVHlwZSwgQW55CmZyb20gaW5zcGVjdCBpbXBvcnQgX2VtcHR5Cgpmcm9tIHB5b2xvYWQgaW1wb3J0IGFubm90YXRlCgpmcm9tIC4gaW1wb3J0IE5pbCwgcmVzb2x2ZQpmcm9tIC4gaW1wb3J0IHRlbXBsYXRlLCB3cml0ZWFibGUKCkF0dHJTcGVjID0gZGljdFtzdHIsIHR1cGxlW1R5cGUsIE9wdGlvbmFsW0FueV1dXQoKCmNsYXNzIEF0dHJpYnV0ZU1hbmFnZXI6CiAgICAiIiJBbiBvYmplY3QgdG8gbWFuYWdlIGNvbXBvbmVudCBhdHRyaWJ1dGVzLiIiIgoKICAgIF9wYXJhbXM6IGRpY3RbQXR0clNwZWNdCiAgICBfc3Vic2NyaWJlcjogd3JpdGVhYmxlLlN1YnNjcmliZXIKICAgIF9zdWJzY3JpYmVhYmxlOiB3cml0ZWFibGUuU3Vic2NyaWJlYWJsZQoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIGNvbXBvbmVudDogIkJhc2VDb21wb25lbnQiLAogICAgICAgIHJhd19rd2FyZ3M6IGRpY3Rbc3RyLCBzdHJdID0ge30sCiAgICAgICAga3dhcmdzOiBkaWN0W3N0ciwgQW55XSA9IHt9LAogICAgKToKICAgICAgICAiIiJDcmVhdGUgdGhlIEF0dGlidXRlIG1hbmFnZXIgZnJvbSBjb21wb25lbnQgYW5kIGFyZ3MuIiIiCiAgICAgICAgc2VsZi5fY29tcG9uZW50ID0gY29tcG9uZW50CiAgICAgICAgc2VsZi5fcGFyYW1zID0ge30KICAgICAgICBmb3IgbmFtZSwgYW5uLCBkZWZhdWx0IGluIGNvbXBvbmVudC5nZXRfcGFyYW1zKCk6CiAgICAgICAgICAgIHNlbGYuX3BhcmFtc1tuYW1lXSA9IChhbm4sIGRlZmF1bHQpCiAgICAgICAgc2VsZi5fc3Vic2NyaWJlciA9IHdyaXRlYWJsZS5TdWJzY3JpYmVyKCkKICAgICAgICBzZWxmLl9zdWJzY3JpYmVhYmxlID0gd3JpdGVhYmxlLlN1YnNjcmliZWFibGUoKQogICAgICAgIHNlbGYuX3N1YnNjcmliZSA9IHNlbGYuX3N1YnNjcmliZWFibGUuc3Vic2NyaWJlCiAgICAgICAgc2VsZi5fYXJncyA9IHt9CiAgICAgICAgc2VsZi5fbGFzdCA9IE5vbmUKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiByYXdfa3dhcmdzLml0ZW1zKCk6CiAgICAgICAgICAgIHN1YiwgdmFsID0gdGVtcGxhdGUuZXZhbHVhdGVfbGl0ZXJhbCgKICAgICAgICAgICAgICAgIHZhbHVlLCBzZWxmLl9jb21wb25lbnQubmFtZXNwYWNlCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5fYXJnc1trZXldID0gKHN1YiwgdmFsKQogICAgICAgICAgICBpZiBzdWI6CiAgICAgICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVyLnN1YnNjcmliZV90byh2YWwsIHNlbGYuX3VwZGF0ZSkKICAgICAgICBzZWxmLl9hcmdzLnVwZGF0ZShrd2FyZ3MpCiAgICAgICAgc2VsZi5fY29sbGVjdF92YWx1ZXMoKQoKICAgIGRlZiBfdXBkYXRlKHNlbGYpOgogICAgICAgIHZhbHMgPSBzZWxmLl92YWx1ZXMuY29weSgpCiAgICAgICAgc2VsZi5fY29sbGVjdF92YWx1ZXMoKQogICAgICAgIGlmIHNlbGYuX3ZhbHVlcyAhPSB2YWxzOgogICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVhYmxlLndhcm5fc3Vic2NyaWJlcnMoKQoKICAgIGRlZiBfY29sbGVjdF92YWx1ZXMoc2VsZik6CiAgICAgICAgc2VsZi5fdmFsdWVzID0ge30KCiAgICAgICAgZGVmIGZpbHRlcnModmFsLCBnZXQsIGFubiwgZGVmYXVsdCk6CiAgICAgICAgICAgIGZyb20gLiBpbXBvcnQgbWVkaWEsIHdyaXRlYWJsZQogICAgICAgICAgICBmcm9tIHRraW50ZXIgaW1wb3J0IEltYWdlCgogICAgICAgICAgICBpZiB2YWwgaXMgTmlsOgogICAgICAgICAgICAgICAgdmFsID0gZGVmYXVsdAogICAgICAgICAgICBpZiBhbm4gaXMgd3JpdGVhYmxlLldyaXRlYWJsZSBhbmQgaXNpbnN0YW5jZSgKICAgICAgICAgICAgICAgIHZhbCwgd3JpdGVhYmxlLldyaXRlYWJsZQogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgcmV0dXJuIHZhbAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgZ2V0OgogICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5nZXQoKQogICAgICAgICAgICAgICAgaWYgYW5uIGlzIEltYWdlIG9yICgKICAgICAgICAgICAgICAgICAgICBpc2luc3RhbmNlKGFubiwgdHlwZSkKICAgICAgICAgICAgICAgICAgICBhbmQgaXNzdWJjbGFzcyhhbm4sIEltYWdlKQogICAgICAgICAgICAgICAgICAgIGFuZCBpc2luc3RhbmNlKHZhbCwgbWVkaWEuSW1hZ2UpCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5nZXQoKQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWwsIG1lZGlhLkltYWdlKToKICAgICAgICAgICAgICAgICAgICBwcmludCh2YWwpCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsCgogICAgICAgIGRlZiBzZXRfcGFyYW0ob2JqLCBrZXksIHZhbHVlLCBhbm5vdGF0aW9uLCBkZWZhdWx0KToKICAgICAgICAgICAgZ2V0LCB2YWwgPSB2YWx1ZQogICAgICAgICAgICBpZiAiOiIgaW4ga2V5OgogICAgICAgICAgICAgICAgcHJlLCBrZXkgPSBrZXkuc3BsaXQoIjoiLCAxKQoKICAgICAgICAgICAgICAgIGlmIHByZSBub3QgaW4gb2JqIG9yIG5vdCBpc2luc3RhbmNlKG9ialtwcmVdLCBkaWN0KToKICAgICAgICAgICAgICAgICAgICBvYmpbcHJlXSA9IHt9CiAgICAgICAgICAgICAgICBzZXRfcGFyYW0ob2JqW3ByZV0sIGtleSwgdmFsdWUsIGFubm90YXRpb24sIGRlZmF1bHQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBvYmpba2V5XSA9IGZpbHRlcnModmFsLCBnZXQsIGFubm90YXRpb24sIGRlZmF1bHQpCgogICAgICAgIGZvciBrZXksIHZhbHVlIGluIHNlbGYuX2FyZ3MuaXRlbXMoKToKICAgICAgICAgICAgaWYga2V5IGluIHNlbGYuX3BhcmFtczoKICAgICAgICAgICAgICAgIGFubiwgdmFsID0gc2VsZi5fcGFyYW1zW2tleV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGFubiA9IHZhbCA9IE5vbmUKICAgICAgICAgICAgc2V0X3BhcmFtKHNlbGYuX3ZhbHVlcywga2V5LCB2YWx1ZSwgYW5uLCB2YWwpCgogICAgZGVmIF9nZXRfd3JpdGVhYmxlKHNlbGYsIG5hbWUpOgogICAgICAgIHZhbCA9IHNlbGYuX2FyZ3NbbmFtZV1bMV0KICAgICAgICBpZiBpc2luc3RhbmNlKHZhbCwgd3JpdGVhYmxlLldyaXRlYWJsZSk6CiAgICAgICAgICAgIHJldHVybiB2YWwKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJTb3JyeS4uLiIpCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGF0dHI6IHN0cik6CiAgICAgICAgIiIiR2V0IGF0dHJpYnV0ZSBmcm9tIHZhbHVlcy4iIiIKICAgICAgICBpZiBhdHRyWzBdID09ICJfIjoKICAgICAgICAgICAgcmV0dXJuIHN1cGVyKCkuX19nZXRhdHRyX18oYXR0cikKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVzW2F0dHJdCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoKSBmcm9tIGUKCgpjbGFzcyBCYXNlQ29tcG9uZW50KHdyaXRlYWJsZS5TdWJzY3JpYmVyKToKICAgICIiIlRoZSBiYXNlIGNvbXBvbmVudCBjbGFzcy4iIiIKCiAgICBwYXJlbnQgPSBOb25lCiAgICBjaGlsZHJlbjogbGlzdAogICAgX3Bvc18gPSBOb25lCiAgICBjb250YWluZXIgPSBOb25lCiAgICBvdXRsZXQgPSBOb25lCiAgICBfYWxpZ25lciA9IE5vbmUKCiAgICBkZWYgX2luaXRfc3ViY2xhc3MoY2xzKToKICAgICAgICBpZiBub3QgaGFzYXR0cihjbHMsICJBdHRycyIpOgogICAgICAgICAgICBjbHMuQXR0cnMgPSB0eXBlKGNscy5fX25hbWVfXyArICIuQXR0cnMiLCAoKSwge30pCiAgICAgICAgY2xzLkF0dHJzID0gZGF0YWNsYXNzKGNscy5BdHRycykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBnZXRfcGFyYW1zKGNscykgLT4gdHVwbGVbdHVwbGVbc3RyLCB0eXBlLCBBbnldXToKICAgICAgICAiIiJHZXQgYW4gaXRlcmFibGUgb2YgdHVwbGVzIChuYW1lLCBhbm5vdGF0aW9uLCBkZWZhdWx0KS4iIiIKICAgICAgICBhbm5zID0ge30KICAgICAgICBwYXJhbXMgPSBbXQogICAgICAgIGZvciBuYW1lLCBhbm4gaW4gY2xzLkF0dHJzLl9fYW5ub3RhdGlvbnNfXy5pdGVtcygpOgogICAgICAgICAgICBhbm5zW25hbWVdID0gYW5uCiAgICAgICAgZm9yIG5hbWUsIHZhbCBpbiB2YXJzKGNscy5BdHRycykuaXRlbXMoKToKICAgICAgICAgICAgaWYgbmFtZSBpbiBhbm5zOgogICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgobmFtZSwgYW5uc1tuYW1lXSwgdmFsKSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoKG5hbWUsIF9lbXB0eSwgdmFsKSkKICAgICAgICByZXR1cm4gdHVwbGUocGFyYW1zKQoKICAgIF9faW5pdF9zdWJjbGFzc19fID0gX2luaXRfc3ViY2xhc3MKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBuYW1lc3BhY2U6ICJ3cml0ZWFibGUuTmFtZXNwYWNlIiA9IHt9LAogICAgICAgIHBhcmVudD1Ob25lLAogICAgICAgIGF0dHJzOiBkaWN0W3N0cl0gPSB7fSwKICAgICAgICBwYXJhbXM6IGRpY3Rbc3RyXSA9IHt9LAogICAgKToKICAgICAgICAiIiJJbml0aWFsaXplIEJhc2UgQ29tcG9uZW50LiIiIgogICAgICAgIHdyaXRlYWJsZS5TdWJzY3JpYmVyLl9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5jaGlsZHJlbiA9IFtdCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IG5hbWVzcGFjZQogICAgICAgIGlmIHBhcmVudCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5wYXJlbnQuY2hpbGRyZW4uYXBwZW5kKHNlbGYpCiAgICAgICAgc2VsZi5yYXdfYXR0cnMgPSBhdHRycwogICAgICAgIHNlbGYuYXR0cnMgPSBBdHRyaWJ1dGVNYW5hZ2VyKHNlbGYsIGF0dHJzKQogICAgICAgIHNlbGYuYXR0cnMuX3N1YnNjcmliZShzZWxmLCBzZWxmLl91cGRhdGUpCgogICAgZGVmIGJpbmRfYXR0cnMoc2VsZiwgYXR0cnM6IGRpY3Rbc3RyXSk6CiAgICAgICAgIiIiQmluZCB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZXMgdG8gdGhlIGNvbXBvbmVudC4iIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuYXR0cnMgPSBzZWxmLl9fY2xhc3NfXy5BdHRycygqKmF0dHJzKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKAogICAgICAgICAgICAgICAgZiJlcnJvciB3aGlsZSBiaW5kaW5nIGFyZ3VtZW50cyB0byB7c2VsZi5fX2NsYXNzX18hcn0iLAogICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgIHNlbGYuQXR0cnMsCiAgICAgICAgICAgICkgZnJvbSBOb25lCgogICAgZGVmIF9hbGlnbl93aWRnZXQoc2VsZiwgd2lkZ2V0LCBwYXJhbXM6IGRpY3Rbc3RyXSk6CiAgICAgICAgaWYgc2VsZi5fY2hpbGRyZW5fYWxpZ24gPT0gInIiOgogICAgICAgICAgICB3aWRnZXQuZ3JpZChjb2x1bW49c2VsZi5fYWxpZ25fb2Zmc2V0LCByb3c9MCwgKipwYXJhbXMpCiAgICAgICAgZWxpZiBzZWxmLl9jaGlsZHJlbl9hbGlnbiA9PSAiYyI6CiAgICAgICAgICAgIHdpZGdldC5ncmlkKHJvdz1zZWxmLl9hbGlnbl9vZmZzZXQsIGNvbHVtbj0wLCAqKnBhcmFtcykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ1bmtub3duIGFsaWduIG9mZnNldDoiLCBzZWxmLl9jaGlsZHJlbl9hbGlnbikKICAgICAgICBzZWxmLl9hbGlnbl9vZmZzZXQgKz0gMQoKICAgIGRlZiB1cGRhdGUoc2VsZik6CiAgICAgICAgc2VsZi5hdHRycy5fY29sbGVjdF92YWx1ZXMoKQogICAgICAgIGZvciBjaGlsZCBpbiBzZWxmLmNoaWxkcmVuOgogICAgICAgICAgICBjaGlsZC51cGRhdGUoKQogICAgICAgIHNlbGYuX3VwZGF0ZSgpCgogICAgZGVmIF91cGRhdGUoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBtYWtlX2JpbmRpbmdzKHNlbGYpOgogICAgICAgIGZvciBldmVudCwgaGFuZGxlciBpbiBzZWxmLmV2ZW50X2JpbmRzLml0ZW1zKCk6CiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmJpbmQoZiI8e2V2ZW50fT4iLCByZXNvbHZlKGhhbmRsZXIpKQoKICAgIGRlZiBjcmVhdGUoc2VsZik6CiAgICAgICAgc2VsZi5ldmVudF9iaW5kcyA9IHt9CgogICAgZGVmIGluaXRfZ2VvbWV0cnkoc2VsZik6CiAgICAgICAgZ3JpZF9wYXJhbXMgPSAoInN0aWNreSIsKQogICAgICAgIHBhY2tfcGFyYW1zID0gKAogICAgICAgICAgICAic2lkZSIsCiAgICAgICAgICAgICJhbmNob3IiLAogICAgICAgICAgICAiZXhwYW5kIiwKICAgICAgICAgICAgImZpbGwiLAogICAgICAgICAgICAiaXBhZHgiLAogICAgICAgICAgICAicGFkeCIsCiAgICAgICAgICAgICJpcGFkeSIsCiAgICAgICAgICAgICJwYWR5IiwKICAgICAgICApCiAgICAgICAgaWYgaGFzYXR0cihzZWxmLmF0dHJzLCAibGF5IikgYW5kIHNlbGYuYXR0cnMubGF5OgogICAgICAgICAgICBsYXkgPSBzZWxmLmF0dHJzLmxheQogICAgICAgICAgICBpZiAidyIgaW4gbGF5OgogICAgICAgICAgICAgICAgaWYgIngiIGluIGxheVsidyJdOgogICAgICAgICAgICAgICAgICAgIGxheXggPSByZXNvbHZlKGxheVsidyJdWyJ4Il0pCiAgICAgICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShsYXl4LCBzdHIpOgogICAgICAgICAgICAgICAgICAgICAgICBsYXl4ID0gZGljdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dXBsZShtYXAoc3RyLnN0cmlwLCB4LnNwbGl0KCI6IiwgMSkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIGxheXguc3BsaXQoIiwiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgZm9yIGNvbCwgd2VpZ2h0IGluIGxheXguaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdXRsZXQuY29sdW1uY29uZmlndXJlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50KGNvbCksIHdlaWdodD1pbnQod2VpZ2h0KQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBpZiAieSIgaW4gbGF5WyJ3Il06CiAgICAgICAgICAgICAgICAgICAgbGF5eSA9IHJlc29sdmUoc2VsZi5hdHRycy5sYXlbInciXVsieSJdKQogICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UobGF5eSwgc3RyKToKICAgICAgICAgICAgICAgICAgICAgICAgbGF5eSA9IGRpY3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGUobWFwKHN0ci5zdHJpcCwgeC5zcGxpdCgiOiIsIDEpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgeCBpbiBsYXl5LnNwbGl0KCIsIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGZvciBjb2wsIHdlaWdodCBpbiBsYXl5Lml0ZW1zKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3V0bGV0LmNvbHVtbmNvbmZpZ3VyZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludChjb2wpLCB3ZWlnaHQ9aW50KHdlaWdodCkKICAgICAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICBpZiBoYXNhdHRyKHNlbGYuYXR0cnMsICJwb3MiKToKICAgICAgICAgICAgcG9zID0gc2VsZi5hdHRycy5wb3MKICAgICAgICAgICAgaWYgInBhY2siIGluIHBvcyBhbmQgcG9zWyJwYWNrIl06CiAgICAgICAgICAgICAgICBwYXJhbXMgPSB7azogdiBmb3IgaywgdiBpbiBwb3MuaXRlbXMoKSBpZiBrIGluIHBhY2tfcGFyYW1zfQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShwb3NbInBhY2siXSwgc3RyKToKICAgICAgICAgICAgICAgICAgICBwYXJhbXNbInNpZGUiXSA9IHBvc1sicGFjayJdCiAgICAgICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5wYWNrKCoqcGFyYW1zKQogICAgICAgICAgICBlbGlmICJncmlkIiBpbiBwb3M6CiAgICAgICAgICAgICAgICBncmlkID0ge2s6IHYgZm9yIGssIHYgaW4gcG9zLml0ZW1zKCkgaWYgayBpbiBncmlkX3BhcmFtc30KICAgICAgICAgICAgICAgIGNvb3JkID0gcmVzb2x2ZShwb3NbImdyaWQiXSkKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY29vcmQsIHR1cGxlKToKICAgICAgICAgICAgICAgICAgICBpZiBsZW4oY29vcmQpID09IDI6CiAgICAgICAgICAgICAgICAgICAgICAgICh4LCB5KSA9IGNvb3JkCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbImNvbHVtbiJdID0geAogICAgICAgICAgICAgICAgICAgICAgICBncmlkWyJyb3ciXSA9IHkKICAgICAgICAgICAgICAgICAgICBlbGlmIGxlbihjb29yZCkgPT0gNDoKICAgICAgICAgICAgICAgICAgICAgICAgKHgsIHksIHhzLCB5cykgPSBjb29yZAogICAgICAgICAgICAgICAgICAgICAgICBncmlkWyJjb2x1bW4iXSA9IHgKICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFsicm93Il0gPSB5CiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbImNvbHVtbnNwYW4iXSA9IHhzCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbInJvd3NwYW4iXSA9IHlzCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3JvbmcgZ3JpZCB0dXBsZSIsIGNvb3JkKQogICAgICAgICAgICAgICAgc2VsZi5jb250YWluZXIuZ3JpZCgqKmdyaWQpCgoKY2xhc3MgVGtDb21wb25lbnQoQmFzZUNvbXBvbmVudCk6CiAgICBXaWRnZXQgPSBOb25lCiAgICBfYXR0cl9pZ25vcmUgPSAoKQogICAgX3BhcmFtcyA9IE5vbmUKCiAgICBkZWYgX19pbml0X3N1YmNsYXNzX18oY2xzKToKICAgICAgICBjbHMuQXR0cnMgPSBkYXRhY2xhc3MoY2xzLkF0dHJzKQogICAgICAgIHNhbWUgPSBbCiAgICAgICAgICAgIHgKICAgICAgICAgICAgZm9yIHggaW4gZGlyKGNscy5BdHRycykKICAgICAgICAgICAgaWYgbm90IHguc3RhcnRzd2l0aCgiXyIpIGFuZCB4IG5vdCBpbiBjbHMuX2F0dHJfaWdub3JlCiAgICAgICAgXQogICAgICAgIGNscy5jb25mX2FsaWFzc2VzID0gewogICAgICAgICAgICAqKmRpY3QoemlwKHNhbWUsIHNhbWUpKSwKICAgICAgICB9CiAgICAgICAgZGVsIHNhbWUKCiAgICBkZWYgY3JlYXRlKHNlbGYsIHBhcmVudCk6CiAgICAgICAgc3VwZXIoKS5jcmVhdGUoKQogICAgICAgIHNlbGYuX3BhcmFtcyA9IHBhcmFtcyA9IHsKICAgICAgICAgICAgKip7CiAgICAgICAgICAgICAgICBzZWxmLmNvbmZfYWxpYXNzZXNba106IHYKICAgICAgICAgICAgICAgIGZvciBrLCB2IGluIHNlbGYuYXR0cnMuX3ZhbHVlcy5pdGVtcygpCiAgICAgICAgICAgICAgICBpZiBrIGluIHNlbGYuY29uZl9hbGlhc3NlcyBhbmQgdiBpcyBub3QgTmlsCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2VsZi5fY3JlYXRlKHBhcmVudCwgcGFyYW1zKQogICAgICAgIHNlbGYubWFrZV9iaW5kaW5ncygpCiAgICAgICAgc2VsZi5pbml0X2dlb21ldHJ5KCkKICAgICAgICBmb3IgY2hpbGQgaW4gc2VsZi5jaGlsZHJlbjoKICAgICAgICAgICAgY2hpbGQuY3JlYXRlKHNlbGYub3V0bGV0KQoKICAgIGRlZiBfY3JlYXRlKHNlbGYsIHBhcmVudCwgcGFyYW1zPXt9KToKICAgICAgICBzZWxmLm91dGxldCA9IHNlbGYuY29udGFpbmVyID0gc2VsZi5XaWRnZXQocGFyZW50LCAqKnBhcmFtcykKCiAgICBkZWYgX3VwZGF0ZShzZWxmKToKICAgICAgICBmb3IgaywgdiBpbiB7CiAgICAgICAgICAgIHNlbGYuY29uZl9hbGlhc3Nlc1trXTogdgogICAgICAgICAgICBmb3IgaywgdiBpbiBzZWxmLmF0dHJzLl92YWx1ZXMuaXRlbXMoKQogICAgICAgICAgICBpZiBrIGluIHNlbGYuY29uZl9hbGlhc3NlcyBhbmQgdiBpcyBub3QgTmlsCiAgICAgICAgfS5pdGVtcygpOgogICAgICAgICAgICBpZiBrID09ICJ0ZXh0IjoKICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyWyJ0ZXh0Il0gPSB2CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNvbmZpZ3VyZSgqKntrOiB2fSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHJhaXNlCgogICAgZGVmIF9fZGVsX18oc2VsZik6CiAgICAgICAgZm9yIGNoaWxkIGluIHNlbGYuY2hpbGRyZW5bOl06CiAgICAgICAgICAgIGRlbCBjaGlsZAogICAgICAgIGRlbCBzZWxmLmNvbnRhaW5lcigpCgoKY2xhc3MgRW51bUNvbXBvbmVudChCYXNlQ29tcG9uZW50KToKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIGl0ZXJhYmxlX2V4cHI6IHN0ciwKICAgICAgICBhbGlhc2VzOiB0dXBsZVtzdHIsIHN0cl0sCiAgICAgICAgbmFtZXNwYWNlOiB3cml0ZWFibGUuTmFtZXNwYWNlLAogICAgICAgIHBhcmVudDogIk9wdGlvbmFsW0Jhc2VDb21wb25lbnRdIiA9IE5vbmUsCiAgICAgICAgdGVtcGxhdGVzOiBsaXN0W3RlbXBsYXRlLlRlbXBsYXRlLkl0ZW1dID0gW10sCiAgICApOgogICAgICAgIHdyaXRlYWJsZS5TdWJzY3JpYmVyLl9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5zdWJzY3JpYmVfdG8obmFtZXNwYWNlLCBzZWxmLnVwZGF0ZSkKICAgICAgICBzZWxmLmNoaWxkcmVuID0gW10KICAgICAgICBzZWxmLnBhcmVudCA9IHBhcmVudAogICAgICAgIHNlbGYubmFtZXNwYWNlID0gbmFtZXNwYWNlCiAgICAgICAgc2VsZi5pdGVyYWJsZV9leHByID0gaXRlcmFibGVfZXhwcgogICAgICAgIHNlbGYuYWxpYXNlcyA9IGFsaWFzZXMKICAgICAgICBzZWxmLnRlbXBsYXRlcyA9IHRlbXBsYXRlcyAgIyB0ZW1wbGF0ZQogICAgICAgIGlmIHBhcmVudCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5wYXJlbnQuY2hpbGRyZW4uYXBwZW5kKHNlbGYpCiAgICAgICAgc2VsZi5jb250ZW50ID0gTm9uZQogICAgICAgIHNlbGYuY29udGVudHMgPSBbXQogICAgICAgIHNlbGYuX2xhc3QgPSBOb25lCgogICAgZGVmIGNyZWF0ZShzZWxmLCBwYXJlbnQ9Tm9uZSk6CiAgICAgICAgcGFyZW50ID0gcGFyZW50IG9yIHNlbGYucGFyZW50Lm91dGxldAogICAgICAgIHNlbGYuY29udGVudHMgPSBbXQogICAgICAgIGl0ZXJhYmxlID0gZXZhbChzZWxmLml0ZXJhYmxlX2V4cHIsIHt9LCBzZWxmLm5hbWVzcGFjZSkKICAgICAgICBzZWxmLl9sYXN0ID0gaXRlcmFibGUKICAgICAgICBmb3IgaWR4LCB2YWwgaW4gZW51bWVyYXRlKGl0ZXJhYmxlKToKICAgICAgICAgICAgYWlkeCwgYXZhbCA9IHNlbGYuYWxpYXNlcwogICAgICAgICAgICBuYW1lc3BhY2UgPSB3cml0ZWFibGUuTmFtZXNwYWNlKHBhcmVudHM9W3NlbGYubmFtZXNwYWNlXSkKICAgICAgICAgICAgbmFtZXNwYWNlW2FpZHhdID0gaWR4CiAgICAgICAgICAgIG5hbWVzcGFjZVthdmFsXSA9IHZhbAogICAgICAgICAgICBmb3IgdGVtcGxhdGVfaXRlbSBpbiBzZWxmLnRlbXBsYXRlczoKICAgICAgICAgICAgICAgIGNvbXAgPSB0ZW1wbGF0ZV9pdGVtLnJlbmRlcihzZWxmLCBuYW1lc3BhY2UpCiAgICAgICAgICAgICAgICBjb21wLmNyZWF0ZShwYXJlbnQpCiAgICAgICAgICAgICAgICBzZWxmLmNvbnRlbnRzLmFwcGVuZCgobmFtZXNwYWNlLCBjb21wKSkKCiAgICBkZWYgdXBkYXRlKHNlbGYpOgogICAgICAgIHZhbHVlID0gZXZhbChzZWxmLml0ZXJhYmxlX2V4cHIsIHt9LCBzZWxmLm5hbWVzcGFjZSkKICAgICAgICBpZiB2YWx1ZSAhPSBzZWxmLl9sYXN0OgogICAgICAgICAgICBjb250ZW50cyA9IHNlbGYuY29udGVudHMuY29weSgpCiAgICAgICAgICAgIHNlbGYuY3JlYXRlKHNlbGYucmVuZGVyX3BhcmVudCkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5wYXJlbnQudXBkYXRlKCkgICMgZm9yIHNtb290aGVyIHJlbmRlcnJpbmcKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgZm9yIG5hbWVzcGFjZSwgY29tcCBpbiBjb250ZW50czoKICAgICAgICAgICAgICAgIGRlbCBjb21wLCBuYW1lc3BhY2UKCgpjbGFzcyBJZkNvbXBvbmVudChCYXNlQ29tcG9uZW50KToKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIGNvbmRpdGlvbiwKICAgICAgICBuYW1lc3BhY2UsCiAgICAgICAgcGFyZW50OiAiT3B0aW9uYWxbQmFzZUNvbXBvbmVudF0iID0gTm9uZSwKICAgICAgICB0ZW1wbGF0ZTogbGlzdCA9IFtdLAogICAgKToKICAgICAgICB3cml0ZWFibGUuU3Vic2NyaWJlci5fX2luaXRfXyhzZWxmKQogICAgICAgIHNlbGYuc3Vic2NyaWJlX3RvKG5hbWVzcGFjZSwgc2VsZi51cGRhdGUpCiAgICAgICAgc2VsZi5jaGlsZHJlbiA9IFtdCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IG5hbWVzcGFjZQogICAgICAgIHNlbGYuY29uZGl0aW9uID0gY29uZGl0aW9uCiAgICAgICAgc2VsZi50ZW1wbGF0ZSA9IHRlbXBsYXRlICAjIHRlbXBsYXRlCiAgICAgICAgaWYgcGFyZW50IGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLnBhcmVudC5jaGlsZHJlbi5hcHBlbmQoc2VsZikKICAgICAgICBzZWxmLmNvbnRlbnQgPSBOb25lCiAgICAgICAgc2VsZi5fbGFzdCA9IE5vbmUKCiAgICBkZWYgY3JlYXRlKHNlbGYsIHBhcmVudD1Ob25lKToKICAgICAgICBwYXJlbnQgPSBwYXJlbnQgb3Igc2VsZi5wYXJlbnQub3V0bGV0CiAgICAgICAgc2VsZi5yZW5kZXJfcGFyZW50ID0gcGFyZW50CiAgICAgICAgc2VsZi5fbGFzdCA9IGV2YWwoc2VsZi5jb25kaXRpb24sIHt9LCBzZWxmLm5hbWVzcGFjZSkKICAgICAgICBpZiBzZWxmLl9sYXN0OgogICAgICAgICAgICBmb3IgdGVtcGxhdGUgaW4gc2VsZi50ZW1wbGF0ZToKICAgICAgICAgICAgICAgIHRlbXBsYXRlLnJlbmRlcihzZWxmLCBzZWxmLm5hbWVzcGFjZSkuY3JlYXRlKHBhcmVudCkKCiAgICBkZWYgdXBkYXRlKHNlbGYpOgogICAgICAgIGNvbmQgPSBldmFsKHNlbGYuY29uZGl0aW9uLCB7fSwgc2VsZi5uYW1lc3BhY2UpCiAgICAgICAgaWYgY29uZCAhPSBzZWxmLl9sYXN0OgogICAgICAgICAgICBkZWwgc2VsZi5jb250ZW50CiAgICAgICAgICAgIHNlbGYuY3JlYXRlKHNlbGYucmVuZGVyX3BhcmVudCkKCgpjbGFzcyBDb21wb25lbnQoQmFzZUNvbXBvbmVudCk6CiAgICBjb2RlOiBPcHRpb25hbFtzdHJdID0gTm9uZQogICAgX3RlbXBsYXRlX2NhY2hlOiB0dXBsZVtPcHRpb25hbFtzdHJdLCBPcHRpb25hbFt0ZW1wbGF0ZS5UZW1wbGF0ZV1dID0gKAogICAgICAgIE5vbmUsCiAgICAgICAgTm9uZSwKICAgICkKCiAgICBkZWYgaW5pdChzZWxmKToKICAgICAgICBwYXNzCgogICAgQGFubm90YXRlCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaXRlbTogc3RyKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLm5hbWVzcGFjZVtpdGVtXQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0dXJuIGdsb2JhbHMoKVtpdGVtXQogICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgSW5kZXhFcnJvcihpdGVtKSBmcm9tIGUKCiAgICBkZWYgX19pbml0X3N1YmNsYXNzX18oY2xzKToKICAgICAgICBjbHMuZ2V0X3RlbXBsYXRlKCkKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBnZXRfdGVtcGxhdGUoY2xzKToKICAgICAgICBjb2RlID0gY2xzLmNvZGUgb3IgY2xzLl9fZG9jX18KICAgICAgICBpZiBjbHMuX3RlbXBsYXRlX2NhY2hlWzBdICE9IGNvZGU6CiAgICAgICAgICAgIGNscy5fdGVtcGxhdGVfY2FjaGUgPSBjb2RlLCB0ZW1wbGF0ZS5UZW1wbGF0ZS5wYXJzZShjb2RlKQogICAgICAgIHJldHVybiBjbHMuX3RlbXBsYXRlX2NhY2hlWzFdCgogICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGl0ZW06IHN0ciwgdmFsdWUpOgogICAgICAgIHNlbGYubmFtZXNwYWNlW2l0ZW1dID0gdmFsdWUKCiAgICBkZWYgX19pbml0X18oc2VsZiwgKipwYXJhbXMpOgogICAgICAgIHdyaXRlYWJsZS5TdWJzY3JpYmVyLl9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5hdHRycyA9IEF0dHJpYnV0ZU1hbmFnZXIoCiAgICAgICAgICAgIHNlbGYsIHt9LCB7azogKEZhbHNlLCB2KSBmb3IgaywgdiBpbiBwYXJhbXMuaXRlbXMoKX0KICAgICAgICApCiAgICAgICAgc2VsZi5hdHRycy5fc3Vic2NyaWJlKHNlbGYsIHNlbGYuX3VwZGF0ZSkKCiAgICAgICAgc2VsZi5uYW1lc3BhY2UgPSB3cml0ZWFibGUuTmFtZXNwYWNlKCkKICAgICAgICBzZWxmLnN1YnNjcmliZV90byhzZWxmLm5hbWVzcGFjZSwgc2VsZi51cGRhdGUpCiAgICAgICAgZm9yIGF0dHJfbmFtZSBpbiBkaXIoc2VsZik6CiAgICAgICAgICAgIGlmIG5vdCBhdHRyX25hbWUuc3RhcnRzd2l0aCgiXyIpOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHNlbGYubmFtZXNwYWNlW2F0dHJfbmFtZV0gPSBnZXRhdHRyKHNlbGYsIGF0dHJfbmFtZSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgc2VsZi5pbml0KCkKICAgICAgICBzZWxmLnJlbmRlcnJlZCA9IEZhbHNlCiAgICAgICAgc2VsZi5fY29tcG9uZW50XyA9IHNlbGYuZ2V0X3RlbXBsYXRlKCkuZXZhbChzZWxmLm5hbWVzcGFjZSkKCiAgICBkZWYgcmVuZGVyKHNlbGYsIG1hc3Rlcik6CiAgICAgICAgc2VsZi5fY29tcG9uZW50Xy5jcmVhdGUobWFzdGVyKQogICAgICAgIHNlbGYucmVkZXJyZWQgPSBUcnVlCiAgICAgICAgcmV0dXJuIHNlbGYuY29udGFpbmVyCgogICAgZGVmIHVwZGF0ZShzZWxmKToKICAgICAgICBpZiBzZWxmLnJlbmRlcnJlZDoKICAgICAgICAgICAgc2VsZi5fY29tcG9uZW50Xy51cGRhdGUoKQoKICAgIGRlZiBleHBvc2Uoc2VsZiwgZnVuYyk6CiAgICAgICAgc2VsZi5uYW1lc3BhY2VbZnVuYy5fX25hbWVfX10gPSBmdW5jCgogICAgQHByb3BlcnR5CiAgICBkZWYgY29udGFpbmVyKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9jb21wb25lbnRfLmNvbnRhaW5lcgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG91dGxldChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG91dCA9IHNlbGZbIm91dGxldCJdCiAgICAgICAgICAgIGlmIG91dCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiBvdXQub3V0bGV0CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGV4Y2VwdCBOYW1lRXJyb3I6CiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgZGVmIGNyZWF0ZV90ayhzZWxmLCByb290PU5vbmUpOgogICAgICAgICIiIkNyZWF0ZSB0aGUgY29tcG9uZW50IGluIGEgZnVsbCBUayB3aW5kb3cuIiIiCiAgICAgICAgcm9vdC5jb2x1bW5jb25maWd1cmUoMCwgd2VpZ2h0PTEpCiAgICAgICAgcm9vdC5yb3djb25maWd1cmUoMCwgd2VpZ2h0PTEpCgogICAgICAgIHNlbGYucmVuZGVyKHJvb3QpLmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKQogICAgICAgIHJldHVybiByb290CgogICAgZGVmIHBvcHVwKHNlbGYsICoqcGFyYW1zKToKICAgICAgICAiIiJDcmVhdGUgdGhlIGNvbXBvbmVudCBpbiBhIGZ1bGwgVGsgd2luZG93LiIiIgogICAgICAgIGZyb20gdGtpbnRlciBpbXBvcnQgVG9wbGV2ZWwKCiAgICAgICAgcm9vdCA9IFRvcGxldmVsKCkKICAgICAgICByb290LmNvbHVtbmNvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICByb290LnJvd2NvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKCiAgICAgICAgc2VsZi5yZW5kZXIocm9vdCkuZ3JpZChjb2x1bW49MCwgcm93PTAsIHN0aWNreT0ibnNldyIpCiAgICAgICAgcmV0dXJuIHJvb3QKCgpkZWYgY29tcG9uZW50KGZ1bmMpOgogICAgZGVmIGNvbXBvbmVudF9pbml0KHNlbGYpOgogICAgICAgIHZhciA9IGZ1bmMoc2VsZikKICAgICAgICBpZiB2YXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYubmFtZXNwYWNlLnZhcnMudXBkYXRlKHZhcikKCiAgICByZXR1cm4gdHlwZSgKICAgICAgICBmdW5jLl9fbmFtZV9fLAogICAgICAgIChDb21wb25lbnQsKSwKICAgICAgICB7CiAgICAgICAgICAgICJpbml0IjogY29tcG9uZW50X2luaXQsCiAgICAgICAgICAgICJfX2RvY19fIjogZnVuYy5fX2RvY19fLAogICAgICAgIH0sCiAgICApCg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADLKgAAAAAAAMsqAAAAAAAAAAAAAAAA8L8"
				],
				[
					615,
					4,
					"left_delete",
					null,
					"BAAAALsqAAAAAAAAuyoAAAAAAAABAAAAILoqAAAAAAAAuioAAAAAAAABAAAAbLkqAAAAAAAAuSoAAAAAAAABAAAAZbgqAAAAAAAAuCoAAAAAAAABAAAAZA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC8KgAAAAAAALwqAAAAAAAAAAAAAAAA8L8"
				],
				[
					617,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAMYqAAAAAAAAxioAAAAAAAABAAAAKMYqAAAAAAAAxioAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADHKgAAAAAAAMcqAAAAAAAAAAAAAAAA8L8"
				],
				[
					618,
					1,
					"insert",
					{
						"characters": ".destr"
					},
					"BgAAAMYqAAAAAAAAxyoAAAAAAAAAAAAAxyoAAAAAAADIKgAAAAAAAAAAAADIKgAAAAAAAMkqAAAAAAAAAAAAAMkqAAAAAAAAyioAAAAAAAAAAAAAyioAAAAAAADLKgAAAAAAAAAAAADLKgAAAAAAAMwqAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADGKgAAAAAAAMYqAAAAAAAAAAAAAAAA8L8"
				],
				[
					619,
					1,
					"insert_dimensions",
					null,
					"AgAAAMcqAAAAAAAAxyoAAAAAAAAFAAAAZGVzdHLHKgAAAAAAANAqAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADMKgAAAAAAAMwqAAAAAAAAAAAAAAAA8L8"
				],
				[
					622,
					1,
					"insert",
					{
						"characters": "\ndel"
					},
					"BQAAANAqAAAAAAAA0SoAAAAAAAAAAAAA0SoAAAAAAADZKgAAAAAAAAAAAADZKgAAAAAAANoqAAAAAAAAAAAAANoqAAAAAAAA2yoAAAAAAAAAAAAA2yoAAAAAAADcKgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADQKgAAAAAAANAqAAAAAAAAAAAAAAAA8L8"
				],
				[
					623,
					1,
					"insert",
					{
						"characters": " self.con"
					},
					"CQAAANwqAAAAAAAA3SoAAAAAAAAAAAAA3SoAAAAAAADeKgAAAAAAAAAAAADeKgAAAAAAAN8qAAAAAAAAAAAAAN8qAAAAAAAA4CoAAAAAAAAAAAAA4CoAAAAAAADhKgAAAAAAAAAAAADhKgAAAAAAAOIqAAAAAAAAAAAAAOIqAAAAAAAA4yoAAAAAAAAAAAAA4yoAAAAAAADkKgAAAAAAAAAAAADkKgAAAAAAAOUqAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADcKgAAAAAAANwqAAAAAAAAAAAAAAAA8L8"
				],
				[
					624,
					1,
					"insert_dimensions",
					null,
					"AgAAAOIqAAAAAAAA4ioAAAAAAAADAAAAY29u4ioAAAAAAADrKgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADlKgAAAAAAAOUqAAAAAAAAAAAAAAAA8L8"
				],
				[
					627,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAKUIAAAAAAAApQgAAIiIiClRoZSBtYWluIGNvbXBvbmVudHMgdG9vbC4KCkNvcHlyaWdodCAoQykgMjAyNCAga2VuLW1vcmVsClRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyCnRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlCkZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyCnZlcnNpb24uCgpUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwgYnV0IFdJVEhPVVQgQU5ZCldBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEKUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgpZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoCnRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiIiIgoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgVHlwZSwgQW55CmZyb20gaW5zcGVjdCBpbXBvcnQgX2VtcHR5Cgpmcm9tIHB5b2xvYWQgaW1wb3J0IGFubm90YXRlCgpmcm9tIC4gaW1wb3J0IE5pbCwgcmVzb2x2ZQpmcm9tIC4gaW1wb3J0IHRlbXBsYXRlLCB3cml0ZWFibGUKCkF0dHJTcGVjID0gZGljdFtzdHIsIHR1cGxlW1R5cGUsIE9wdGlvbmFsW0FueV1dXQoKCmNsYXNzIEF0dHJpYnV0ZU1hbmFnZXI6CiAgICAiIiJBbiBvYmplY3QgdG8gbWFuYWdlIGNvbXBvbmVudCBhdHRyaWJ1dGVzLiIiIgoKICAgIF9wYXJhbXM6IGRpY3RbQXR0clNwZWNdCiAgICBfc3Vic2NyaWJlcjogd3JpdGVhYmxlLlN1YnNjcmliZXIKICAgIF9zdWJzY3JpYmVhYmxlOiB3cml0ZWFibGUuU3Vic2NyaWJlYWJsZQoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIGNvbXBvbmVudDogIkJhc2VDb21wb25lbnQiLAogICAgICAgIHJhd19rd2FyZ3M6IGRpY3Rbc3RyLCBzdHJdID0ge30sCiAgICAgICAga3dhcmdzOiBkaWN0W3N0ciwgQW55XSA9IHt9LAogICAgKToKICAgICAgICAiIiJDcmVhdGUgdGhlIEF0dGlidXRlIG1hbmFnZXIgZnJvbSBjb21wb25lbnQgYW5kIGFyZ3MuIiIiCiAgICAgICAgc2VsZi5fY29tcG9uZW50ID0gY29tcG9uZW50CiAgICAgICAgc2VsZi5fcGFyYW1zID0ge30KICAgICAgICBmb3IgbmFtZSwgYW5uLCBkZWZhdWx0IGluIGNvbXBvbmVudC5nZXRfcGFyYW1zKCk6CiAgICAgICAgICAgIHNlbGYuX3BhcmFtc1tuYW1lXSA9IChhbm4sIGRlZmF1bHQpCiAgICAgICAgc2VsZi5fc3Vic2NyaWJlciA9IHdyaXRlYWJsZS5TdWJzY3JpYmVyKCkKICAgICAgICBzZWxmLl9zdWJzY3JpYmVhYmxlID0gd3JpdGVhYmxlLlN1YnNjcmliZWFibGUoKQogICAgICAgIHNlbGYuX3N1YnNjcmliZSA9IHNlbGYuX3N1YnNjcmliZWFibGUuc3Vic2NyaWJlCiAgICAgICAgc2VsZi5fYXJncyA9IHt9CiAgICAgICAgc2VsZi5fbGFzdCA9IE5vbmUKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiByYXdfa3dhcmdzLml0ZW1zKCk6CiAgICAgICAgICAgIHN1YiwgdmFsID0gdGVtcGxhdGUuZXZhbHVhdGVfbGl0ZXJhbCgKICAgICAgICAgICAgICAgIHZhbHVlLCBzZWxmLl9jb21wb25lbnQubmFtZXNwYWNlCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5fYXJnc1trZXldID0gKHN1YiwgdmFsKQogICAgICAgICAgICBpZiBzdWI6CiAgICAgICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVyLnN1YnNjcmliZV90byh2YWwsIHNlbGYuX3VwZGF0ZSkKICAgICAgICBzZWxmLl9hcmdzLnVwZGF0ZShrd2FyZ3MpCiAgICAgICAgc2VsZi5fY29sbGVjdF92YWx1ZXMoKQoKICAgIGRlZiBfdXBkYXRlKHNlbGYpOgogICAgICAgIHZhbHMgPSBzZWxmLl92YWx1ZXMuY29weSgpCiAgICAgICAgc2VsZi5fY29sbGVjdF92YWx1ZXMoKQogICAgICAgIGlmIHNlbGYuX3ZhbHVlcyAhPSB2YWxzOgogICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVhYmxlLndhcm5fc3Vic2NyaWJlcnMoKQoKICAgIGRlZiBfY29sbGVjdF92YWx1ZXMoc2VsZik6CiAgICAgICAgc2VsZi5fdmFsdWVzID0ge30KCiAgICAgICAgZGVmIGZpbHRlcnModmFsLCBnZXQsIGFubiwgZGVmYXVsdCk6CiAgICAgICAgICAgIGZyb20gLiBpbXBvcnQgbWVkaWEsIHdyaXRlYWJsZQogICAgICAgICAgICBmcm9tIHRraW50ZXIgaW1wb3J0IEltYWdlCgogICAgICAgICAgICBpZiB2YWwgaXMgTmlsOgogICAgICAgICAgICAgICAgdmFsID0gZGVmYXVsdAogICAgICAgICAgICBpZiBhbm4gaXMgd3JpdGVhYmxlLldyaXRlYWJsZSBhbmQgaXNpbnN0YW5jZSgKICAgICAgICAgICAgICAgIHZhbCwgd3JpdGVhYmxlLldyaXRlYWJsZQogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgcmV0dXJuIHZhbAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgZ2V0OgogICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5nZXQoKQogICAgICAgICAgICAgICAgaWYgYW5uIGlzIEltYWdlIG9yICgKICAgICAgICAgICAgICAgICAgICBpc2luc3RhbmNlKGFubiwgdHlwZSkKICAgICAgICAgICAgICAgICAgICBhbmQgaXNzdWJjbGFzcyhhbm4sIEltYWdlKQogICAgICAgICAgICAgICAgICAgIGFuZCBpc2luc3RhbmNlKHZhbCwgbWVkaWEuSW1hZ2UpCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5nZXQoKQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWwsIG1lZGlhLkltYWdlKToKICAgICAgICAgICAgICAgICAgICBwcmludCh2YWwpCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsCgogICAgICAgIGRlZiBzZXRfcGFyYW0ob2JqLCBrZXksIHZhbHVlLCBhbm5vdGF0aW9uLCBkZWZhdWx0KToKICAgICAgICAgICAgZ2V0LCB2YWwgPSB2YWx1ZQogICAgICAgICAgICBpZiAiOiIgaW4ga2V5OgogICAgICAgICAgICAgICAgcHJlLCBrZXkgPSBrZXkuc3BsaXQoIjoiLCAxKQoKICAgICAgICAgICAgICAgIGlmIHByZSBub3QgaW4gb2JqIG9yIG5vdCBpc2luc3RhbmNlKG9ialtwcmVdLCBkaWN0KToKICAgICAgICAgICAgICAgICAgICBvYmpbcHJlXSA9IHt9CiAgICAgICAgICAgICAgICBzZXRfcGFyYW0ob2JqW3ByZV0sIGtleSwgdmFsdWUsIGFubm90YXRpb24sIGRlZmF1bHQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBvYmpba2V5XSA9IGZpbHRlcnModmFsLCBnZXQsIGFubm90YXRpb24sIGRlZmF1bHQpCgogICAgICAgIGZvciBrZXksIHZhbHVlIGluIHNlbGYuX2FyZ3MuaXRlbXMoKToKICAgICAgICAgICAgaWYga2V5IGluIHNlbGYuX3BhcmFtczoKICAgICAgICAgICAgICAgIGFubiwgdmFsID0gc2VsZi5fcGFyYW1zW2tleV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGFubiA9IHZhbCA9IE5vbmUKICAgICAgICAgICAgc2V0X3BhcmFtKHNlbGYuX3ZhbHVlcywga2V5LCB2YWx1ZSwgYW5uLCB2YWwpCgogICAgZGVmIF9nZXRfd3JpdGVhYmxlKHNlbGYsIG5hbWUpOgogICAgICAgIHZhbCA9IHNlbGYuX2FyZ3NbbmFtZV1bMV0KICAgICAgICBpZiBpc2luc3RhbmNlKHZhbCwgd3JpdGVhYmxlLldyaXRlYWJsZSk6CiAgICAgICAgICAgIHJldHVybiB2YWwKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJTb3JyeS4uLiIpCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGF0dHI6IHN0cik6CiAgICAgICAgIiIiR2V0IGF0dHJpYnV0ZSBmcm9tIHZhbHVlcy4iIiIKICAgICAgICBpZiBhdHRyWzBdID09ICJfIjoKICAgICAgICAgICAgcmV0dXJuIHN1cGVyKCkuX19nZXRhdHRyX18oYXR0cikKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVzW2F0dHJdCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoKSBmcm9tIGUKCgpjbGFzcyBCYXNlQ29tcG9uZW50KHdyaXRlYWJsZS5TdWJzY3JpYmVyKToKICAgICIiIlRoZSBiYXNlIGNvbXBvbmVudCBjbGFzcy4iIiIKCiAgICBwYXJlbnQgPSBOb25lCiAgICBjaGlsZHJlbjogbGlzdAogICAgX3Bvc18gPSBOb25lCiAgICBjb250YWluZXIgPSBOb25lCiAgICBvdXRsZXQgPSBOb25lCiAgICBfYWxpZ25lciA9IE5vbmUKCiAgICBkZWYgX2luaXRfc3ViY2xhc3MoY2xzKToKICAgICAgICBpZiBub3QgaGFzYXR0cihjbHMsICJBdHRycyIpOgogICAgICAgICAgICBjbHMuQXR0cnMgPSB0eXBlKGNscy5fX25hbWVfXyArICIuQXR0cnMiLCAoKSwge30pCiAgICAgICAgY2xzLkF0dHJzID0gZGF0YWNsYXNzKGNscy5BdHRycykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBnZXRfcGFyYW1zKGNscykgLT4gdHVwbGVbdHVwbGVbc3RyLCB0eXBlLCBBbnldXToKICAgICAgICAiIiJHZXQgYW4gaXRlcmFibGUgb2YgdHVwbGVzIChuYW1lLCBhbm5vdGF0aW9uLCBkZWZhdWx0KS4iIiIKICAgICAgICBhbm5zID0ge30KICAgICAgICBwYXJhbXMgPSBbXQogICAgICAgIGZvciBuYW1lLCBhbm4gaW4gY2xzLkF0dHJzLl9fYW5ub3RhdGlvbnNfXy5pdGVtcygpOgogICAgICAgICAgICBhbm5zW25hbWVdID0gYW5uCiAgICAgICAgZm9yIG5hbWUsIHZhbCBpbiB2YXJzKGNscy5BdHRycykuaXRlbXMoKToKICAgICAgICAgICAgaWYgbmFtZSBpbiBhbm5zOgogICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgobmFtZSwgYW5uc1tuYW1lXSwgdmFsKSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoKG5hbWUsIF9lbXB0eSwgdmFsKSkKICAgICAgICByZXR1cm4gdHVwbGUocGFyYW1zKQoKICAgIF9faW5pdF9zdWJjbGFzc19fID0gX2luaXRfc3ViY2xhc3MKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBuYW1lc3BhY2U6ICJ3cml0ZWFibGUuTmFtZXNwYWNlIiA9IHt9LAogICAgICAgIHBhcmVudD1Ob25lLAogICAgICAgIGF0dHJzOiBkaWN0W3N0cl0gPSB7fSwKICAgICAgICBwYXJhbXM6IGRpY3Rbc3RyXSA9IHt9LAogICAgKToKICAgICAgICAiIiJJbml0aWFsaXplIEJhc2UgQ29tcG9uZW50LiIiIgogICAgICAgIHdyaXRlYWJsZS5TdWJzY3JpYmVyLl9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5jaGlsZHJlbiA9IFtdCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IG5hbWVzcGFjZQogICAgICAgIGlmIHBhcmVudCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5wYXJlbnQuY2hpbGRyZW4uYXBwZW5kKHNlbGYpCiAgICAgICAgc2VsZi5yYXdfYXR0cnMgPSBhdHRycwogICAgICAgIHNlbGYuYXR0cnMgPSBBdHRyaWJ1dGVNYW5hZ2VyKHNlbGYsIGF0dHJzKQogICAgICAgIHNlbGYuYXR0cnMuX3N1YnNjcmliZShzZWxmLCBzZWxmLl91cGRhdGUpCgogICAgZGVmIGJpbmRfYXR0cnMoc2VsZiwgYXR0cnM6IGRpY3Rbc3RyXSk6CiAgICAgICAgIiIiQmluZCB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZXMgdG8gdGhlIGNvbXBvbmVudC4iIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuYXR0cnMgPSBzZWxmLl9fY2xhc3NfXy5BdHRycygqKmF0dHJzKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKAogICAgICAgICAgICAgICAgZiJlcnJvciB3aGlsZSBiaW5kaW5nIGFyZ3VtZW50cyB0byB7c2VsZi5fX2NsYXNzX18hcn0iLAogICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgIHNlbGYuQXR0cnMsCiAgICAgICAgICAgICkgZnJvbSBOb25lCgogICAgZGVmIF9hbGlnbl93aWRnZXQoc2VsZiwgd2lkZ2V0LCBwYXJhbXM6IGRpY3Rbc3RyXSk6CiAgICAgICAgaWYgc2VsZi5fY2hpbGRyZW5fYWxpZ24gPT0gInIiOgogICAgICAgICAgICB3aWRnZXQuZ3JpZChjb2x1bW49c2VsZi5fYWxpZ25fb2Zmc2V0LCByb3c9MCwgKipwYXJhbXMpCiAgICAgICAgZWxpZiBzZWxmLl9jaGlsZHJlbl9hbGlnbiA9PSAiYyI6CiAgICAgICAgICAgIHdpZGdldC5ncmlkKHJvdz1zZWxmLl9hbGlnbl9vZmZzZXQsIGNvbHVtbj0wLCAqKnBhcmFtcykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ1bmtub3duIGFsaWduIG9mZnNldDoiLCBzZWxmLl9jaGlsZHJlbl9hbGlnbikKICAgICAgICBzZWxmLl9hbGlnbl9vZmZzZXQgKz0gMQoKICAgIGRlZiB1cGRhdGUoc2VsZik6CiAgICAgICAgc2VsZi5hdHRycy5fY29sbGVjdF92YWx1ZXMoKQogICAgICAgIGZvciBjaGlsZCBpbiBzZWxmLmNoaWxkcmVuOgogICAgICAgICAgICBjaGlsZC51cGRhdGUoKQogICAgICAgIHNlbGYuX3VwZGF0ZSgpCgogICAgZGVmIF91cGRhdGUoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBtYWtlX2JpbmRpbmdzKHNlbGYpOgogICAgICAgIGZvciBldmVudCwgaGFuZGxlciBpbiBzZWxmLmV2ZW50X2JpbmRzLml0ZW1zKCk6CiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmJpbmQoZiI8e2V2ZW50fT4iLCByZXNvbHZlKGhhbmRsZXIpKQoKICAgIGRlZiBjcmVhdGUoc2VsZik6CiAgICAgICAgc2VsZi5ldmVudF9iaW5kcyA9IHt9CgogICAgZGVmIGluaXRfZ2VvbWV0cnkoc2VsZik6CiAgICAgICAgZ3JpZF9wYXJhbXMgPSAoInN0aWNreSIsKQogICAgICAgIHBhY2tfcGFyYW1zID0gKAogICAgICAgICAgICAic2lkZSIsCiAgICAgICAgICAgICJhbmNob3IiLAogICAgICAgICAgICAiZXhwYW5kIiwKICAgICAgICAgICAgImZpbGwiLAogICAgICAgICAgICAiaXBhZHgiLAogICAgICAgICAgICAicGFkeCIsCiAgICAgICAgICAgICJpcGFkeSIsCiAgICAgICAgICAgICJwYWR5IiwKICAgICAgICApCiAgICAgICAgaWYgaGFzYXR0cihzZWxmLmF0dHJzLCAibGF5IikgYW5kIHNlbGYuYXR0cnMubGF5OgogICAgICAgICAgICBsYXkgPSBzZWxmLmF0dHJzLmxheQogICAgICAgICAgICBpZiAidyIgaW4gbGF5OgogICAgICAgICAgICAgICAgaWYgIngiIGluIGxheVsidyJdOgogICAgICAgICAgICAgICAgICAgIGxheXggPSByZXNvbHZlKGxheVsidyJdWyJ4Il0pCiAgICAgICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShsYXl4LCBzdHIpOgogICAgICAgICAgICAgICAgICAgICAgICBsYXl4ID0gZGljdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dXBsZShtYXAoc3RyLnN0cmlwLCB4LnNwbGl0KCI6IiwgMSkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIGxheXguc3BsaXQoIiwiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgZm9yIGNvbCwgd2VpZ2h0IGluIGxheXguaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdXRsZXQuY29sdW1uY29uZmlndXJlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50KGNvbCksIHdlaWdodD1pbnQod2VpZ2h0KQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBpZiAieSIgaW4gbGF5WyJ3Il06CiAgICAgICAgICAgICAgICAgICAgbGF5eSA9IHJlc29sdmUoc2VsZi5hdHRycy5sYXlbInciXVsieSJdKQogICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UobGF5eSwgc3RyKToKICAgICAgICAgICAgICAgICAgICAgICAgbGF5eSA9IGRpY3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGUobWFwKHN0ci5zdHJpcCwgeC5zcGxpdCgiOiIsIDEpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgeCBpbiBsYXl5LnNwbGl0KCIsIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGZvciBjb2wsIHdlaWdodCBpbiBsYXl5Lml0ZW1zKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3V0bGV0LmNvbHVtbmNvbmZpZ3VyZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludChjb2wpLCB3ZWlnaHQ9aW50KHdlaWdodCkKICAgICAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICBpZiBoYXNhdHRyKHNlbGYuYXR0cnMsICJwb3MiKToKICAgICAgICAgICAgcG9zID0gc2VsZi5hdHRycy5wb3MKICAgICAgICAgICAgaWYgInBhY2siIGluIHBvcyBhbmQgcG9zWyJwYWNrIl06CiAgICAgICAgICAgICAgICBwYXJhbXMgPSB7azogdiBmb3IgaywgdiBpbiBwb3MuaXRlbXMoKSBpZiBrIGluIHBhY2tfcGFyYW1zfQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShwb3NbInBhY2siXSwgc3RyKToKICAgICAgICAgICAgICAgICAgICBwYXJhbXNbInNpZGUiXSA9IHBvc1sicGFjayJdCiAgICAgICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5wYWNrKCoqcGFyYW1zKQogICAgICAgICAgICBlbGlmICJncmlkIiBpbiBwb3M6CiAgICAgICAgICAgICAgICBncmlkID0ge2s6IHYgZm9yIGssIHYgaW4gcG9zLml0ZW1zKCkgaWYgayBpbiBncmlkX3BhcmFtc30KICAgICAgICAgICAgICAgIGNvb3JkID0gcmVzb2x2ZShwb3NbImdyaWQiXSkKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY29vcmQsIHR1cGxlKToKICAgICAgICAgICAgICAgICAgICBpZiBsZW4oY29vcmQpID09IDI6CiAgICAgICAgICAgICAgICAgICAgICAgICh4LCB5KSA9IGNvb3JkCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbImNvbHVtbiJdID0geAogICAgICAgICAgICAgICAgICAgICAgICBncmlkWyJyb3ciXSA9IHkKICAgICAgICAgICAgICAgICAgICBlbGlmIGxlbihjb29yZCkgPT0gNDoKICAgICAgICAgICAgICAgICAgICAgICAgKHgsIHksIHhzLCB5cykgPSBjb29yZAogICAgICAgICAgICAgICAgICAgICAgICBncmlkWyJjb2x1bW4iXSA9IHgKICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFsicm93Il0gPSB5CiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbImNvbHVtbnNwYW4iXSA9IHhzCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbInJvd3NwYW4iXSA9IHlzCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3JvbmcgZ3JpZCB0dXBsZSIsIGNvb3JkKQogICAgICAgICAgICAgICAgc2VsZi5jb250YWluZXIuZ3JpZCgqKmdyaWQpCgoKY2xhc3MgVGtDb21wb25lbnQoQmFzZUNvbXBvbmVudCk6CiAgICBXaWRnZXQgPSBOb25lCiAgICBfYXR0cl9pZ25vcmUgPSAoKQogICAgX3BhcmFtcyA9IE5vbmUKCiAgICBkZWYgX19pbml0X3N1YmNsYXNzX18oY2xzKToKICAgICAgICBjbHMuQXR0cnMgPSBkYXRhY2xhc3MoY2xzLkF0dHJzKQogICAgICAgIHNhbWUgPSBbCiAgICAgICAgICAgIHgKICAgICAgICAgICAgZm9yIHggaW4gZGlyKGNscy5BdHRycykKICAgICAgICAgICAgaWYgbm90IHguc3RhcnRzd2l0aCgiXyIpIGFuZCB4IG5vdCBpbiBjbHMuX2F0dHJfaWdub3JlCiAgICAgICAgXQogICAgICAgIGNscy5jb25mX2FsaWFzc2VzID0gewogICAgICAgICAgICAqKmRpY3QoemlwKHNhbWUsIHNhbWUpKSwKICAgICAgICB9CiAgICAgICAgZGVsIHNhbWUKCiAgICBkZWYgY3JlYXRlKHNlbGYsIHBhcmVudCk6CiAgICAgICAgc3VwZXIoKS5jcmVhdGUoKQogICAgICAgIHNlbGYuX3BhcmFtcyA9IHBhcmFtcyA9IHsKICAgICAgICAgICAgKip7CiAgICAgICAgICAgICAgICBzZWxmLmNvbmZfYWxpYXNzZXNba106IHYKICAgICAgICAgICAgICAgIGZvciBrLCB2IGluIHNlbGYuYXR0cnMuX3ZhbHVlcy5pdGVtcygpCiAgICAgICAgICAgICAgICBpZiBrIGluIHNlbGYuY29uZl9hbGlhc3NlcyBhbmQgdiBpcyBub3QgTmlsCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2VsZi5fY3JlYXRlKHBhcmVudCwgcGFyYW1zKQogICAgICAgIHNlbGYubWFrZV9iaW5kaW5ncygpCiAgICAgICAgc2VsZi5pbml0X2dlb21ldHJ5KCkKICAgICAgICBmb3IgY2hpbGQgaW4gc2VsZi5jaGlsZHJlbjoKICAgICAgICAgICAgY2hpbGQuY3JlYXRlKHNlbGYub3V0bGV0KQoKICAgIGRlZiBfY3JlYXRlKHNlbGYsIHBhcmVudCwgcGFyYW1zPXt9KToKICAgICAgICBzZWxmLm91dGxldCA9IHNlbGYuY29udGFpbmVyID0gc2VsZi5XaWRnZXQocGFyZW50LCAqKnBhcmFtcykKCiAgICBkZWYgX3VwZGF0ZShzZWxmKToKICAgICAgICBmb3IgaywgdiBpbiB7CiAgICAgICAgICAgIHNlbGYuY29uZl9hbGlhc3Nlc1trXTogdgogICAgICAgICAgICBmb3IgaywgdiBpbiBzZWxmLmF0dHJzLl92YWx1ZXMuaXRlbXMoKQogICAgICAgICAgICBpZiBrIGluIHNlbGYuY29uZl9hbGlhc3NlcyBhbmQgdiBpcyBub3QgTmlsCiAgICAgICAgfS5pdGVtcygpOgogICAgICAgICAgICBpZiBrID09ICJ0ZXh0IjoKICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyWyJ0ZXh0Il0gPSB2CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNvbmZpZ3VyZSgqKntrOiB2fSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHJhaXNlCgogICAgZGVmIF9fZGVsX18oc2VsZik6CiAgICAgICAgZm9yIGNoaWxkIGluIHNlbGYuY2hpbGRyZW5bOl06CiAgICAgICAgICAgIGRlbCBjaGlsZAogICAgICAgIHNlbGYuY29udGFpbmVyLmRlc3Ryb3koKQogICAgICAgIGRlbCBzZWxmLmNvbnRhaW5lcgoKCmNsYXNzIEVudW1Db21wb25lbnQoQmFzZUNvbXBvbmVudCk6CiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBpdGVyYWJsZV9leHByOiBzdHIsCiAgICAgICAgYWxpYXNlczogdHVwbGVbc3RyLCBzdHJdLAogICAgICAgIG5hbWVzcGFjZTogd3JpdGVhYmxlLk5hbWVzcGFjZSwKICAgICAgICBwYXJlbnQ6ICJPcHRpb25hbFtCYXNlQ29tcG9uZW50XSIgPSBOb25lLAogICAgICAgIHRlbXBsYXRlczogbGlzdFt0ZW1wbGF0ZS5UZW1wbGF0ZS5JdGVtXSA9IFtdLAogICAgKToKICAgICAgICB3cml0ZWFibGUuU3Vic2NyaWJlci5fX2luaXRfXyhzZWxmKQogICAgICAgIHNlbGYuc3Vic2NyaWJlX3RvKG5hbWVzcGFjZSwgc2VsZi51cGRhdGUpCiAgICAgICAgc2VsZi5jaGlsZHJlbiA9IFtdCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IG5hbWVzcGFjZQogICAgICAgIHNlbGYuaXRlcmFibGVfZXhwciA9IGl0ZXJhYmxlX2V4cHIKICAgICAgICBzZWxmLmFsaWFzZXMgPSBhbGlhc2VzCiAgICAgICAgc2VsZi50ZW1wbGF0ZXMgPSB0ZW1wbGF0ZXMgICMgdGVtcGxhdGUKICAgICAgICBpZiBwYXJlbnQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYucGFyZW50LmNoaWxkcmVuLmFwcGVuZChzZWxmKQogICAgICAgIHNlbGYuY29udGVudCA9IE5vbmUKICAgICAgICBzZWxmLmNvbnRlbnRzID0gW10KICAgICAgICBzZWxmLl9sYXN0ID0gTm9uZQoKICAgIGRlZiBjcmVhdGUoc2VsZiwgcGFyZW50PU5vbmUpOgogICAgICAgIHBhcmVudCA9IHBhcmVudCBvciBzZWxmLnBhcmVudC5vdXRsZXQKICAgICAgICBzZWxmLmNvbnRlbnRzID0gW10KICAgICAgICBpdGVyYWJsZSA9IGV2YWwoc2VsZi5pdGVyYWJsZV9leHByLCB7fSwgc2VsZi5uYW1lc3BhY2UpCiAgICAgICAgc2VsZi5fbGFzdCA9IGl0ZXJhYmxlCiAgICAgICAgZm9yIGlkeCwgdmFsIGluIGVudW1lcmF0ZShpdGVyYWJsZSk6CiAgICAgICAgICAgIGFpZHgsIGF2YWwgPSBzZWxmLmFsaWFzZXMKICAgICAgICAgICAgbmFtZXNwYWNlID0gd3JpdGVhYmxlLk5hbWVzcGFjZShwYXJlbnRzPVtzZWxmLm5hbWVzcGFjZV0pCiAgICAgICAgICAgIG5hbWVzcGFjZVthaWR4XSA9IGlkeAogICAgICAgICAgICBuYW1lc3BhY2VbYXZhbF0gPSB2YWwKICAgICAgICAgICAgZm9yIHRlbXBsYXRlX2l0ZW0gaW4gc2VsZi50ZW1wbGF0ZXM6CiAgICAgICAgICAgICAgICBjb21wID0gdGVtcGxhdGVfaXRlbS5yZW5kZXIoc2VsZiwgbmFtZXNwYWNlKQogICAgICAgICAgICAgICAgY29tcC5jcmVhdGUocGFyZW50KQogICAgICAgICAgICAgICAgc2VsZi5jb250ZW50cy5hcHBlbmQoKG5hbWVzcGFjZSwgY29tcCkpCgogICAgZGVmIHVwZGF0ZShzZWxmKToKICAgICAgICB2YWx1ZSA9IGV2YWwoc2VsZi5pdGVyYWJsZV9leHByLCB7fSwgc2VsZi5uYW1lc3BhY2UpCiAgICAgICAgaWYgdmFsdWUgIT0gc2VsZi5fbGFzdDoKICAgICAgICAgICAgY29udGVudHMgPSBzZWxmLmNvbnRlbnRzLmNvcHkoKQogICAgICAgICAgICBzZWxmLmNyZWF0ZShzZWxmLnJlbmRlcl9wYXJlbnQpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYucGFyZW50LnVwZGF0ZSgpICAjIGZvciBzbW9vdGhlciByZW5kZXJyaW5nCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgIGZvciBuYW1lc3BhY2UsIGNvbXAgaW4gY29udGVudHM6CiAgICAgICAgICAgICAgICBkZWwgY29tcCwgbmFtZXNwYWNlCgoKY2xhc3MgSWZDb21wb25lbnQoQmFzZUNvbXBvbmVudCk6CiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBjb25kaXRpb24sCiAgICAgICAgbmFtZXNwYWNlLAogICAgICAgIHBhcmVudDogIk9wdGlvbmFsW0Jhc2VDb21wb25lbnRdIiA9IE5vbmUsCiAgICAgICAgdGVtcGxhdGU6IGxpc3QgPSBbXSwKICAgICk6CiAgICAgICAgd3JpdGVhYmxlLlN1YnNjcmliZXIuX19pbml0X18oc2VsZikKICAgICAgICBzZWxmLnN1YnNjcmliZV90byhuYW1lc3BhY2UsIHNlbGYudXBkYXRlKQogICAgICAgIHNlbGYuY2hpbGRyZW4gPSBbXQogICAgICAgIHNlbGYucGFyZW50ID0gcGFyZW50CiAgICAgICAgc2VsZi5uYW1lc3BhY2UgPSBuYW1lc3BhY2UKICAgICAgICBzZWxmLmNvbmRpdGlvbiA9IGNvbmRpdGlvbgogICAgICAgIHNlbGYudGVtcGxhdGUgPSB0ZW1wbGF0ZSAgIyB0ZW1wbGF0ZQogICAgICAgIGlmIHBhcmVudCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5wYXJlbnQuY2hpbGRyZW4uYXBwZW5kKHNlbGYpCiAgICAgICAgc2VsZi5jb250ZW50ID0gTm9uZQogICAgICAgIHNlbGYuX2xhc3QgPSBOb25lCgogICAgZGVmIGNyZWF0ZShzZWxmLCBwYXJlbnQ9Tm9uZSk6CiAgICAgICAgcGFyZW50ID0gcGFyZW50IG9yIHNlbGYucGFyZW50Lm91dGxldAogICAgICAgIHNlbGYucmVuZGVyX3BhcmVudCA9IHBhcmVudAogICAgICAgIHNlbGYuX2xhc3QgPSBldmFsKHNlbGYuY29uZGl0aW9uLCB7fSwgc2VsZi5uYW1lc3BhY2UpCiAgICAgICAgaWYgc2VsZi5fbGFzdDoKICAgICAgICAgICAgZm9yIHRlbXBsYXRlIGluIHNlbGYudGVtcGxhdGU6CiAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5yZW5kZXIoc2VsZiwgc2VsZi5uYW1lc3BhY2UpLmNyZWF0ZShwYXJlbnQpCgogICAgZGVmIHVwZGF0ZShzZWxmKToKICAgICAgICBjb25kID0gZXZhbChzZWxmLmNvbmRpdGlvbiwge30sIHNlbGYubmFtZXNwYWNlKQogICAgICAgIGlmIGNvbmQgIT0gc2VsZi5fbGFzdDoKICAgICAgICAgICAgZGVsIHNlbGYuY29udGVudAogICAgICAgICAgICBzZWxmLmNyZWF0ZShzZWxmLnJlbmRlcl9wYXJlbnQpCgoKY2xhc3MgQ29tcG9uZW50KEJhc2VDb21wb25lbnQpOgogICAgY29kZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgIF90ZW1wbGF0ZV9jYWNoZTogdHVwbGVbT3B0aW9uYWxbc3RyXSwgT3B0aW9uYWxbdGVtcGxhdGUuVGVtcGxhdGVdXSA9ICgKICAgICAgICBOb25lLAogICAgICAgIE5vbmUsCiAgICApCgogICAgZGVmIGluaXQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIEBhbm5vdGF0ZQogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGl0ZW06IHN0cik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZi5uYW1lc3BhY2VbaXRlbV0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJldHVybiBnbG9iYWxzKClbaXRlbV0KICAgICAgICAgICAgZXhjZXB0IEluZGV4RXJyb3IgYXMgZToKICAgICAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoaXRlbSkgZnJvbSBlCgogICAgZGVmIF9faW5pdF9zdWJjbGFzc19fKGNscyk6CiAgICAgICAgY2xzLmdldF90ZW1wbGF0ZSgpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZ2V0X3RlbXBsYXRlKGNscyk6CiAgICAgICAgY29kZSA9IGNscy5jb2RlIG9yIGNscy5fX2RvY19fCiAgICAgICAgaWYgY2xzLl90ZW1wbGF0ZV9jYWNoZVswXSAhPSBjb2RlOgogICAgICAgICAgICBjbHMuX3RlbXBsYXRlX2NhY2hlID0gY29kZSwgdGVtcGxhdGUuVGVtcGxhdGUucGFyc2UoY29kZSkKICAgICAgICByZXR1cm4gY2xzLl90ZW1wbGF0ZV9jYWNoZVsxXQoKICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBpdGVtOiBzdHIsIHZhbHVlKToKICAgICAgICBzZWxmLm5hbWVzcGFjZVtpdGVtXSA9IHZhbHVlCgogICAgZGVmIF9faW5pdF9fKHNlbGYsICoqcGFyYW1zKToKICAgICAgICB3cml0ZWFibGUuU3Vic2NyaWJlci5fX2luaXRfXyhzZWxmKQogICAgICAgIHNlbGYuYXR0cnMgPSBBdHRyaWJ1dGVNYW5hZ2VyKAogICAgICAgICAgICBzZWxmLCB7fSwge2s6IChGYWxzZSwgdikgZm9yIGssIHYgaW4gcGFyYW1zLml0ZW1zKCl9CiAgICAgICAgKQogICAgICAgIHNlbGYuYXR0cnMuX3N1YnNjcmliZShzZWxmLCBzZWxmLl91cGRhdGUpCgogICAgICAgIHNlbGYubmFtZXNwYWNlID0gd3JpdGVhYmxlLk5hbWVzcGFjZSgpCiAgICAgICAgc2VsZi5zdWJzY3JpYmVfdG8oc2VsZi5uYW1lc3BhY2UsIHNlbGYudXBkYXRlKQogICAgICAgIGZvciBhdHRyX25hbWUgaW4gZGlyKHNlbGYpOgogICAgICAgICAgICBpZiBub3QgYXR0cl9uYW1lLnN0YXJ0c3dpdGgoIl8iKToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBzZWxmLm5hbWVzcGFjZVthdHRyX25hbWVdID0gZ2V0YXR0cihzZWxmLCBhdHRyX25hbWUpCiAgICAgICAgICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgIHNlbGYuaW5pdCgpCiAgICAgICAgc2VsZi5yZW5kZXJyZWQgPSBGYWxzZQogICAgICAgIHNlbGYuX2NvbXBvbmVudF8gPSBzZWxmLmdldF90ZW1wbGF0ZSgpLmV2YWwoc2VsZi5uYW1lc3BhY2UpCgogICAgZGVmIHJlbmRlcihzZWxmLCBtYXN0ZXIpOgogICAgICAgIHNlbGYuX2NvbXBvbmVudF8uY3JlYXRlKG1hc3RlcikKICAgICAgICBzZWxmLnJlZGVycmVkID0gVHJ1ZQogICAgICAgIHJldHVybiBzZWxmLmNvbnRhaW5lcgoKICAgIGRlZiB1cGRhdGUoc2VsZik6CiAgICAgICAgaWYgc2VsZi5yZW5kZXJyZWQ6CiAgICAgICAgICAgIHNlbGYuX2NvbXBvbmVudF8udXBkYXRlKCkKCiAgICBkZWYgZXhwb3NlKHNlbGYsIGZ1bmMpOgogICAgICAgIHNlbGYubmFtZXNwYWNlW2Z1bmMuX19uYW1lX19dID0gZnVuYwoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGNvbnRhaW5lcihzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fY29tcG9uZW50Xy5jb250YWluZXIKCiAgICBAcHJvcGVydHkKICAgIGRlZiBvdXRsZXQoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBvdXQgPSBzZWxmWyJvdXRsZXQiXQogICAgICAgICAgICBpZiBvdXQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICByZXR1cm4gb3V0Lm91dGxldAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBleGNlcHQgTmFtZUVycm9yOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBjcmVhdGVfdGsoc2VsZiwgcm9vdD1Ob25lKToKICAgICAgICAiIiJDcmVhdGUgdGhlIGNvbXBvbmVudCBpbiBhIGZ1bGwgVGsgd2luZG93LiIiIgogICAgICAgIHJvb3QuY29sdW1uY29uZmlndXJlKDAsIHdlaWdodD0xKQogICAgICAgIHJvb3Qucm93Y29uZmlndXJlKDAsIHdlaWdodD0xKQoKICAgICAgICBzZWxmLnJlbmRlcihyb290KS5ncmlkKGNvbHVtbj0wLCByb3c9MCwgc3RpY2t5PSJuc2V3IikKICAgICAgICByZXR1cm4gcm9vdAoKICAgIGRlZiBwb3B1cChzZWxmLCAqKnBhcmFtcyk6CiAgICAgICAgIiIiQ3JlYXRlIHRoZSBjb21wb25lbnQgaW4gYSBmdWxsIFRrIHdpbmRvdy4iIiIKICAgICAgICBmcm9tIHRraW50ZXIgaW1wb3J0IFRvcGxldmVsCgogICAgICAgIHJvb3QgPSBUb3BsZXZlbCgpCiAgICAgICAgcm9vdC5jb2x1bW5jb25maWd1cmUoMCwgd2VpZ2h0PTEpCiAgICAgICAgcm9vdC5yb3djb25maWd1cmUoMCwgd2VpZ2h0PTEpCgogICAgICAgIHNlbGYucmVuZGVyKHJvb3QpLmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKQogICAgICAgIHJldHVybiByb290CgoKZGVmIGNvbXBvbmVudChmdW5jKToKICAgIGRlZiBjb21wb25lbnRfaW5pdChzZWxmKToKICAgICAgICB2YXIgPSBmdW5jKHNlbGYpCiAgICAgICAgaWYgdmFyIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLm5hbWVzcGFjZS52YXJzLnVwZGF0ZSh2YXIpCgogICAgcmV0dXJuIHR5cGUoCiAgICAgICAgZnVuYy5fX25hbWVfXywKICAgICAgICAoQ29tcG9uZW50LCksCiAgICAgICAgewogICAgICAgICAgICAiaW5pdCI6IGNvbXBvbmVudF9pbml0LAogICAgICAgICAgICAiX19kb2NfXyI6IGZ1bmMuX19kb2NfXywKICAgICAgICB9LAogICAgKQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADrKgAAAAAAAOsqAAAAAAAAAAAAAAAA8L8"
				],
				[
					643,
					1,
					"insert",
					{
						"characters": "\nSub"
					},
					"BQAAAOsqAAAAAAAA7CoAAAAAAAAAAAAA7CoAAAAAAAD0KgAAAAAAAAAAAAD0KgAAAAAAAPUqAAAAAAAAAAAAAPUqAAAAAAAA9ioAAAAAAAAAAAAA9ioAAAAAAAD3KgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADrKgAAAAAAAOsqAAAAAAAAAAAAAAAA8L8"
				],
				[
					644,
					1,
					"insert_dimensions",
					null,
					"AgAAAPQqAAAAAAAA9CoAAAAAAAADAAAAU3Vi9CoAAAAAAAD/KgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD3KgAAAAAAAPcqAAAAAAAAAAAAAAAA8L8"
				],
				[
					647,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPQqAAAAAAAA9SoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD0KgAAAAAAAPQqAAAAAAAAAAAAAAAA8L8"
				],
				[
					649,
					1,
					"insert",
					{
						"characters": "wri"
					},
					"AwAAAPQqAAAAAAAA9SoAAAAAAAAAAAAA9SoAAAAAAAD2KgAAAAAAAAAAAAD2KgAAAAAAAPcqAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD0KgAAAAAAAPQqAAAAAAAAAAAAAAAA8L8"
				],
				[
					650,
					1,
					"insert_dimensions",
					null,
					"AgAAAPQqAAAAAAAA9CoAAAAAAAADAAAAd3Jp9CoAAAAAAAD+KgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD3KgAAAAAAAPcqAAAAAAAAAAAAAAAA8L8"
				],
				[
					652,
					1,
					"left_delete",
					null,
					"AQAAAP4qAAAAAAAA/ioAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD/KgAAAAAAAP8qAAAAAAAAAAAAAAAA8L8"
				],
				[
					654,
					1,
					"insert",
					{
						"characters": "__del__"
					},
					"BwAAAAkrAAAAAAAACisAAAAAAAAAAAAACisAAAAAAAALKwAAAAAAAAAAAAALKwAAAAAAAAwrAAAAAAAAAAAAAAwrAAAAAAAADSsAAAAAAAAAAAAADSsAAAAAAAAOKwAAAAAAAAAAAAAOKwAAAAAAAA8rAAAAAAAAAAAAAA8rAAAAAAAAECsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAJKwAAAAAAAAkrAAAAAAAAAAAAAAAA8L8"
				],
				[
					655,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAABArAAAAAAAAEisAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAQKwAAAAAAABArAAAAAAAAAAAAAAAA8L8"
				],
				[
					656,
					1,
					"insert",
					{
						"characters": "self"
					},
					"BAAAABErAAAAAAAAEisAAAAAAAAAAAAAEisAAAAAAAATKwAAAAAAAAAAAAATKwAAAAAAABQrAAAAAAAAAAAAABQrAAAAAAAAFSsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAARKwAAAAAAABErAAAAAAAAAAAAAAAA8L8"
				],
				[
					659,
					1,
					"black",
					{
						"use_selection": false
					},
					"AQAAAAAAAAAAAAAAVEIAAAAAAABUQgAAIiIiClRoZSBtYWluIGNvbXBvbmVudHMgdG9vbC4KCkNvcHlyaWdodCAoQykgMjAyNCAga2VuLW1vcmVsClRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyCnRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlCkZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyCnZlcnNpb24uCgpUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwgYnV0IFdJVEhPVVQgQU5ZCldBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEKUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgpZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoCnRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiIiIgoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgVHlwZSwgQW55CmZyb20gaW5zcGVjdCBpbXBvcnQgX2VtcHR5Cgpmcm9tIHB5b2xvYWQgaW1wb3J0IGFubm90YXRlCgpmcm9tIC4gaW1wb3J0IE5pbCwgcmVzb2x2ZQpmcm9tIC4gaW1wb3J0IHRlbXBsYXRlLCB3cml0ZWFibGUKCkF0dHJTcGVjID0gZGljdFtzdHIsIHR1cGxlW1R5cGUsIE9wdGlvbmFsW0FueV1dXQoKCmNsYXNzIEF0dHJpYnV0ZU1hbmFnZXI6CiAgICAiIiJBbiBvYmplY3QgdG8gbWFuYWdlIGNvbXBvbmVudCBhdHRyaWJ1dGVzLiIiIgoKICAgIF9wYXJhbXM6IGRpY3RbQXR0clNwZWNdCiAgICBfc3Vic2NyaWJlcjogd3JpdGVhYmxlLlN1YnNjcmliZXIKICAgIF9zdWJzY3JpYmVhYmxlOiB3cml0ZWFibGUuU3Vic2NyaWJlYWJsZQoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIGNvbXBvbmVudDogIkJhc2VDb21wb25lbnQiLAogICAgICAgIHJhd19rd2FyZ3M6IGRpY3Rbc3RyLCBzdHJdID0ge30sCiAgICAgICAga3dhcmdzOiBkaWN0W3N0ciwgQW55XSA9IHt9LAogICAgKToKICAgICAgICAiIiJDcmVhdGUgdGhlIEF0dGlidXRlIG1hbmFnZXIgZnJvbSBjb21wb25lbnQgYW5kIGFyZ3MuIiIiCiAgICAgICAgc2VsZi5fY29tcG9uZW50ID0gY29tcG9uZW50CiAgICAgICAgc2VsZi5fcGFyYW1zID0ge30KICAgICAgICBmb3IgbmFtZSwgYW5uLCBkZWZhdWx0IGluIGNvbXBvbmVudC5nZXRfcGFyYW1zKCk6CiAgICAgICAgICAgIHNlbGYuX3BhcmFtc1tuYW1lXSA9IChhbm4sIGRlZmF1bHQpCiAgICAgICAgc2VsZi5fc3Vic2NyaWJlciA9IHdyaXRlYWJsZS5TdWJzY3JpYmVyKCkKICAgICAgICBzZWxmLl9zdWJzY3JpYmVhYmxlID0gd3JpdGVhYmxlLlN1YnNjcmliZWFibGUoKQogICAgICAgIHNlbGYuX3N1YnNjcmliZSA9IHNlbGYuX3N1YnNjcmliZWFibGUuc3Vic2NyaWJlCiAgICAgICAgc2VsZi5fYXJncyA9IHt9CiAgICAgICAgc2VsZi5fbGFzdCA9IE5vbmUKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiByYXdfa3dhcmdzLml0ZW1zKCk6CiAgICAgICAgICAgIHN1YiwgdmFsID0gdGVtcGxhdGUuZXZhbHVhdGVfbGl0ZXJhbCgKICAgICAgICAgICAgICAgIHZhbHVlLCBzZWxmLl9jb21wb25lbnQubmFtZXNwYWNlCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5fYXJnc1trZXldID0gKHN1YiwgdmFsKQogICAgICAgICAgICBpZiBzdWI6CiAgICAgICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVyLnN1YnNjcmliZV90byh2YWwsIHNlbGYuX3VwZGF0ZSkKICAgICAgICBzZWxmLl9hcmdzLnVwZGF0ZShrd2FyZ3MpCiAgICAgICAgc2VsZi5fY29sbGVjdF92YWx1ZXMoKQoKICAgIGRlZiBfdXBkYXRlKHNlbGYpOgogICAgICAgIHZhbHMgPSBzZWxmLl92YWx1ZXMuY29weSgpCiAgICAgICAgc2VsZi5fY29sbGVjdF92YWx1ZXMoKQogICAgICAgIGlmIHNlbGYuX3ZhbHVlcyAhPSB2YWxzOgogICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmVhYmxlLndhcm5fc3Vic2NyaWJlcnMoKQoKICAgIGRlZiBfY29sbGVjdF92YWx1ZXMoc2VsZik6CiAgICAgICAgc2VsZi5fdmFsdWVzID0ge30KCiAgICAgICAgZGVmIGZpbHRlcnModmFsLCBnZXQsIGFubiwgZGVmYXVsdCk6CiAgICAgICAgICAgIGZyb20gLiBpbXBvcnQgbWVkaWEsIHdyaXRlYWJsZQogICAgICAgICAgICBmcm9tIHRraW50ZXIgaW1wb3J0IEltYWdlCgogICAgICAgICAgICBpZiB2YWwgaXMgTmlsOgogICAgICAgICAgICAgICAgdmFsID0gZGVmYXVsdAogICAgICAgICAgICBpZiBhbm4gaXMgd3JpdGVhYmxlLldyaXRlYWJsZSBhbmQgaXNpbnN0YW5jZSgKICAgICAgICAgICAgICAgIHZhbCwgd3JpdGVhYmxlLldyaXRlYWJsZQogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgcmV0dXJuIHZhbAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgZ2V0OgogICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5nZXQoKQogICAgICAgICAgICAgICAgaWYgYW5uIGlzIEltYWdlIG9yICgKICAgICAgICAgICAgICAgICAgICBpc2luc3RhbmNlKGFubiwgdHlwZSkKICAgICAgICAgICAgICAgICAgICBhbmQgaXNzdWJjbGFzcyhhbm4sIEltYWdlKQogICAgICAgICAgICAgICAgICAgIGFuZCBpc2luc3RhbmNlKHZhbCwgbWVkaWEuSW1hZ2UpCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5nZXQoKQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWwsIG1lZGlhLkltYWdlKToKICAgICAgICAgICAgICAgICAgICBwcmludCh2YWwpCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsCgogICAgICAgIGRlZiBzZXRfcGFyYW0ob2JqLCBrZXksIHZhbHVlLCBhbm5vdGF0aW9uLCBkZWZhdWx0KToKICAgICAgICAgICAgZ2V0LCB2YWwgPSB2YWx1ZQogICAgICAgICAgICBpZiAiOiIgaW4ga2V5OgogICAgICAgICAgICAgICAgcHJlLCBrZXkgPSBrZXkuc3BsaXQoIjoiLCAxKQoKICAgICAgICAgICAgICAgIGlmIHByZSBub3QgaW4gb2JqIG9yIG5vdCBpc2luc3RhbmNlKG9ialtwcmVdLCBkaWN0KToKICAgICAgICAgICAgICAgICAgICBvYmpbcHJlXSA9IHt9CiAgICAgICAgICAgICAgICBzZXRfcGFyYW0ob2JqW3ByZV0sIGtleSwgdmFsdWUsIGFubm90YXRpb24sIGRlZmF1bHQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBvYmpba2V5XSA9IGZpbHRlcnModmFsLCBnZXQsIGFubm90YXRpb24sIGRlZmF1bHQpCgogICAgICAgIGZvciBrZXksIHZhbHVlIGluIHNlbGYuX2FyZ3MuaXRlbXMoKToKICAgICAgICAgICAgaWYga2V5IGluIHNlbGYuX3BhcmFtczoKICAgICAgICAgICAgICAgIGFubiwgdmFsID0gc2VsZi5fcGFyYW1zW2tleV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGFubiA9IHZhbCA9IE5vbmUKICAgICAgICAgICAgc2V0X3BhcmFtKHNlbGYuX3ZhbHVlcywga2V5LCB2YWx1ZSwgYW5uLCB2YWwpCgogICAgZGVmIF9nZXRfd3JpdGVhYmxlKHNlbGYsIG5hbWUpOgogICAgICAgIHZhbCA9IHNlbGYuX2FyZ3NbbmFtZV1bMV0KICAgICAgICBpZiBpc2luc3RhbmNlKHZhbCwgd3JpdGVhYmxlLldyaXRlYWJsZSk6CiAgICAgICAgICAgIHJldHVybiB2YWwKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJTb3JyeS4uLiIpCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGF0dHI6IHN0cik6CiAgICAgICAgIiIiR2V0IGF0dHJpYnV0ZSBmcm9tIHZhbHVlcy4iIiIKICAgICAgICBpZiBhdHRyWzBdID09ICJfIjoKICAgICAgICAgICAgcmV0dXJuIHN1cGVyKCkuX19nZXRhdHRyX18oYXR0cikKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVzW2F0dHJdCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoKSBmcm9tIGUKCgpjbGFzcyBCYXNlQ29tcG9uZW50KHdyaXRlYWJsZS5TdWJzY3JpYmVyKToKICAgICIiIlRoZSBiYXNlIGNvbXBvbmVudCBjbGFzcy4iIiIKCiAgICBwYXJlbnQgPSBOb25lCiAgICBjaGlsZHJlbjogbGlzdAogICAgX3Bvc18gPSBOb25lCiAgICBjb250YWluZXIgPSBOb25lCiAgICBvdXRsZXQgPSBOb25lCiAgICBfYWxpZ25lciA9IE5vbmUKCiAgICBkZWYgX2luaXRfc3ViY2xhc3MoY2xzKToKICAgICAgICBpZiBub3QgaGFzYXR0cihjbHMsICJBdHRycyIpOgogICAgICAgICAgICBjbHMuQXR0cnMgPSB0eXBlKGNscy5fX25hbWVfXyArICIuQXR0cnMiLCAoKSwge30pCiAgICAgICAgY2xzLkF0dHJzID0gZGF0YWNsYXNzKGNscy5BdHRycykKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBnZXRfcGFyYW1zKGNscykgLT4gdHVwbGVbdHVwbGVbc3RyLCB0eXBlLCBBbnldXToKICAgICAgICAiIiJHZXQgYW4gaXRlcmFibGUgb2YgdHVwbGVzIChuYW1lLCBhbm5vdGF0aW9uLCBkZWZhdWx0KS4iIiIKICAgICAgICBhbm5zID0ge30KICAgICAgICBwYXJhbXMgPSBbXQogICAgICAgIGZvciBuYW1lLCBhbm4gaW4gY2xzLkF0dHJzLl9fYW5ub3RhdGlvbnNfXy5pdGVtcygpOgogICAgICAgICAgICBhbm5zW25hbWVdID0gYW5uCiAgICAgICAgZm9yIG5hbWUsIHZhbCBpbiB2YXJzKGNscy5BdHRycykuaXRlbXMoKToKICAgICAgICAgICAgaWYgbmFtZSBpbiBhbm5zOgogICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgobmFtZSwgYW5uc1tuYW1lXSwgdmFsKSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoKG5hbWUsIF9lbXB0eSwgdmFsKSkKICAgICAgICByZXR1cm4gdHVwbGUocGFyYW1zKQoKICAgIF9faW5pdF9zdWJjbGFzc19fID0gX2luaXRfc3ViY2xhc3MKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBuYW1lc3BhY2U6ICJ3cml0ZWFibGUuTmFtZXNwYWNlIiA9IHt9LAogICAgICAgIHBhcmVudD1Ob25lLAogICAgICAgIGF0dHJzOiBkaWN0W3N0cl0gPSB7fSwKICAgICAgICBwYXJhbXM6IGRpY3Rbc3RyXSA9IHt9LAogICAgKToKICAgICAgICAiIiJJbml0aWFsaXplIEJhc2UgQ29tcG9uZW50LiIiIgogICAgICAgIHdyaXRlYWJsZS5TdWJzY3JpYmVyLl9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5jaGlsZHJlbiA9IFtdCiAgICAgICAgc2VsZi5wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IG5hbWVzcGFjZQogICAgICAgIGlmIHBhcmVudCBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5wYXJlbnQuY2hpbGRyZW4uYXBwZW5kKHNlbGYpCiAgICAgICAgc2VsZi5yYXdfYXR0cnMgPSBhdHRycwogICAgICAgIHNlbGYuYXR0cnMgPSBBdHRyaWJ1dGVNYW5hZ2VyKHNlbGYsIGF0dHJzKQogICAgICAgIHNlbGYuYXR0cnMuX3N1YnNjcmliZShzZWxmLCBzZWxmLl91cGRhdGUpCgogICAgZGVmIGJpbmRfYXR0cnMoc2VsZiwgYXR0cnM6IGRpY3Rbc3RyXSk6CiAgICAgICAgIiIiQmluZCB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZXMgdG8gdGhlIGNvbXBvbmVudC4iIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuYXR0cnMgPSBzZWxmLl9fY2xhc3NfXy5BdHRycygqKmF0dHJzKQogICAgICAgIGV4Y2VwdCBUeXBlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKAogICAgICAgICAgICAgICAgZiJlcnJvciB3aGlsZSBiaW5kaW5nIGFyZ3VtZW50cyB0byB7c2VsZi5fX2NsYXNzX18hcn0iLAogICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgIHNlbGYuQXR0cnMsCiAgICAgICAgICAgICkgZnJvbSBOb25lCgogICAgZGVmIF9hbGlnbl93aWRnZXQoc2VsZiwgd2lkZ2V0LCBwYXJhbXM6IGRpY3Rbc3RyXSk6CiAgICAgICAgaWYgc2VsZi5fY2hpbGRyZW5fYWxpZ24gPT0gInIiOgogICAgICAgICAgICB3aWRnZXQuZ3JpZChjb2x1bW49c2VsZi5fYWxpZ25fb2Zmc2V0LCByb3c9MCwgKipwYXJhbXMpCiAgICAgICAgZWxpZiBzZWxmLl9jaGlsZHJlbl9hbGlnbiA9PSAiYyI6CiAgICAgICAgICAgIHdpZGdldC5ncmlkKHJvdz1zZWxmLl9hbGlnbl9vZmZzZXQsIGNvbHVtbj0wLCAqKnBhcmFtcykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ1bmtub3duIGFsaWduIG9mZnNldDoiLCBzZWxmLl9jaGlsZHJlbl9hbGlnbikKICAgICAgICBzZWxmLl9hbGlnbl9vZmZzZXQgKz0gMQoKICAgIGRlZiB1cGRhdGUoc2VsZik6CiAgICAgICAgc2VsZi5hdHRycy5fY29sbGVjdF92YWx1ZXMoKQogICAgICAgIGZvciBjaGlsZCBpbiBzZWxmLmNoaWxkcmVuOgogICAgICAgICAgICBjaGlsZC51cGRhdGUoKQogICAgICAgIHNlbGYuX3VwZGF0ZSgpCgogICAgZGVmIF91cGRhdGUoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBtYWtlX2JpbmRpbmdzKHNlbGYpOgogICAgICAgIGZvciBldmVudCwgaGFuZGxlciBpbiBzZWxmLmV2ZW50X2JpbmRzLml0ZW1zKCk6CiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmJpbmQoZiI8e2V2ZW50fT4iLCByZXNvbHZlKGhhbmRsZXIpKQoKICAgIGRlZiBjcmVhdGUoc2VsZik6CiAgICAgICAgc2VsZi5ldmVudF9iaW5kcyA9IHt9CgogICAgZGVmIGluaXRfZ2VvbWV0cnkoc2VsZik6CiAgICAgICAgZ3JpZF9wYXJhbXMgPSAoInN0aWNreSIsKQogICAgICAgIHBhY2tfcGFyYW1zID0gKAogICAgICAgICAgICAic2lkZSIsCiAgICAgICAgICAgICJhbmNob3IiLAogICAgICAgICAgICAiZXhwYW5kIiwKICAgICAgICAgICAgImZpbGwiLAogICAgICAgICAgICAiaXBhZHgiLAogICAgICAgICAgICAicGFkeCIsCiAgICAgICAgICAgICJpcGFkeSIsCiAgICAgICAgICAgICJwYWR5IiwKICAgICAgICApCiAgICAgICAgaWYgaGFzYXR0cihzZWxmLmF0dHJzLCAibGF5IikgYW5kIHNlbGYuYXR0cnMubGF5OgogICAgICAgICAgICBsYXkgPSBzZWxmLmF0dHJzLmxheQogICAgICAgICAgICBpZiAidyIgaW4gbGF5OgogICAgICAgICAgICAgICAgaWYgIngiIGluIGxheVsidyJdOgogICAgICAgICAgICAgICAgICAgIGxheXggPSByZXNvbHZlKGxheVsidyJdWyJ4Il0pCiAgICAgICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShsYXl4LCBzdHIpOgogICAgICAgICAgICAgICAgICAgICAgICBsYXl4ID0gZGljdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dXBsZShtYXAoc3RyLnN0cmlwLCB4LnNwbGl0KCI6IiwgMSkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIGxheXguc3BsaXQoIiwiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgZm9yIGNvbCwgd2VpZ2h0IGluIGxheXguaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdXRsZXQuY29sdW1uY29uZmlndXJlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50KGNvbCksIHdlaWdodD1pbnQod2VpZ2h0KQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBpZiAieSIgaW4gbGF5WyJ3Il06CiAgICAgICAgICAgICAgICAgICAgbGF5eSA9IHJlc29sdmUoc2VsZi5hdHRycy5sYXlbInciXVsieSJdKQogICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UobGF5eSwgc3RyKToKICAgICAgICAgICAgICAgICAgICAgICAgbGF5eSA9IGRpY3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGUobWFwKHN0ci5zdHJpcCwgeC5zcGxpdCgiOiIsIDEpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgeCBpbiBsYXl5LnNwbGl0KCIsIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGZvciBjb2wsIHdlaWdodCBpbiBsYXl5Lml0ZW1zKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3V0bGV0LmNvbHVtbmNvbmZpZ3VyZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludChjb2wpLCB3ZWlnaHQ9aW50KHdlaWdodCkKICAgICAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICBpZiBoYXNhdHRyKHNlbGYuYXR0cnMsICJwb3MiKToKICAgICAgICAgICAgcG9zID0gc2VsZi5hdHRycy5wb3MKICAgICAgICAgICAgaWYgInBhY2siIGluIHBvcyBhbmQgcG9zWyJwYWNrIl06CiAgICAgICAgICAgICAgICBwYXJhbXMgPSB7azogdiBmb3IgaywgdiBpbiBwb3MuaXRlbXMoKSBpZiBrIGluIHBhY2tfcGFyYW1zfQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShwb3NbInBhY2siXSwgc3RyKToKICAgICAgICAgICAgICAgICAgICBwYXJhbXNbInNpZGUiXSA9IHBvc1sicGFjayJdCiAgICAgICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5wYWNrKCoqcGFyYW1zKQogICAgICAgICAgICBlbGlmICJncmlkIiBpbiBwb3M6CiAgICAgICAgICAgICAgICBncmlkID0ge2s6IHYgZm9yIGssIHYgaW4gcG9zLml0ZW1zKCkgaWYgayBpbiBncmlkX3BhcmFtc30KICAgICAgICAgICAgICAgIGNvb3JkID0gcmVzb2x2ZShwb3NbImdyaWQiXSkKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY29vcmQsIHR1cGxlKToKICAgICAgICAgICAgICAgICAgICBpZiBsZW4oY29vcmQpID09IDI6CiAgICAgICAgICAgICAgICAgICAgICAgICh4LCB5KSA9IGNvb3JkCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbImNvbHVtbiJdID0geAogICAgICAgICAgICAgICAgICAgICAgICBncmlkWyJyb3ciXSA9IHkKICAgICAgICAgICAgICAgICAgICBlbGlmIGxlbihjb29yZCkgPT0gNDoKICAgICAgICAgICAgICAgICAgICAgICAgKHgsIHksIHhzLCB5cykgPSBjb29yZAogICAgICAgICAgICAgICAgICAgICAgICBncmlkWyJjb2x1bW4iXSA9IHgKICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFsicm93Il0gPSB5CiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbImNvbHVtbnNwYW4iXSA9IHhzCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRbInJvd3NwYW4iXSA9IHlzCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigid3JvbmcgZ3JpZCB0dXBsZSIsIGNvb3JkKQogICAgICAgICAgICAgICAgc2VsZi5jb250YWluZXIuZ3JpZCgqKmdyaWQpCgoKY2xhc3MgVGtDb21wb25lbnQoQmFzZUNvbXBvbmVudCk6CiAgICBXaWRnZXQgPSBOb25lCiAgICBfYXR0cl9pZ25vcmUgPSAoKQogICAgX3BhcmFtcyA9IE5vbmUKCiAgICBkZWYgX19pbml0X3N1YmNsYXNzX18oY2xzKToKICAgICAgICBjbHMuQXR0cnMgPSBkYXRhY2xhc3MoY2xzLkF0dHJzKQogICAgICAgIHNhbWUgPSBbCiAgICAgICAgICAgIHgKICAgICAgICAgICAgZm9yIHggaW4gZGlyKGNscy5BdHRycykKICAgICAgICAgICAgaWYgbm90IHguc3RhcnRzd2l0aCgiXyIpIGFuZCB4IG5vdCBpbiBjbHMuX2F0dHJfaWdub3JlCiAgICAgICAgXQogICAgICAgIGNscy5jb25mX2FsaWFzc2VzID0gewogICAgICAgICAgICAqKmRpY3QoemlwKHNhbWUsIHNhbWUpKSwKICAgICAgICB9CiAgICAgICAgZGVsIHNhbWUKCiAgICBkZWYgY3JlYXRlKHNlbGYsIHBhcmVudCk6CiAgICAgICAgc3VwZXIoKS5jcmVhdGUoKQogICAgICAgIHNlbGYuX3BhcmFtcyA9IHBhcmFtcyA9IHsKICAgICAgICAgICAgKip7CiAgICAgICAgICAgICAgICBzZWxmLmNvbmZfYWxpYXNzZXNba106IHYKICAgICAgICAgICAgICAgIGZvciBrLCB2IGluIHNlbGYuYXR0cnMuX3ZhbHVlcy5pdGVtcygpCiAgICAgICAgICAgICAgICBpZiBrIGluIHNlbGYuY29uZl9hbGlhc3NlcyBhbmQgdiBpcyBub3QgTmlsCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2VsZi5fY3JlYXRlKHBhcmVudCwgcGFyYW1zKQogICAgICAgIHNlbGYubWFrZV9iaW5kaW5ncygpCiAgICAgICAgc2VsZi5pbml0X2dlb21ldHJ5KCkKICAgICAgICBmb3IgY2hpbGQgaW4gc2VsZi5jaGlsZHJlbjoKICAgICAgICAgICAgY2hpbGQuY3JlYXRlKHNlbGYub3V0bGV0KQoKICAgIGRlZiBfY3JlYXRlKHNlbGYsIHBhcmVudCwgcGFyYW1zPXt9KToKICAgICAgICBzZWxmLm91dGxldCA9IHNlbGYuY29udGFpbmVyID0gc2VsZi5XaWRnZXQocGFyZW50LCAqKnBhcmFtcykKCiAgICBkZWYgX3VwZGF0ZShzZWxmKToKICAgICAgICBmb3IgaywgdiBpbiB7CiAgICAgICAgICAgIHNlbGYuY29uZl9hbGlhc3Nlc1trXTogdgogICAgICAgICAgICBmb3IgaywgdiBpbiBzZWxmLmF0dHJzLl92YWx1ZXMuaXRlbXMoKQogICAgICAgICAgICBpZiBrIGluIHNlbGYuY29uZl9hbGlhc3NlcyBhbmQgdiBpcyBub3QgTmlsCiAgICAgICAgfS5pdGVtcygpOgogICAgICAgICAgICBpZiBrID09ICJ0ZXh0IjoKICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyWyJ0ZXh0Il0gPSB2CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNvbmZpZ3VyZSgqKntrOiB2fSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHJhaXNlCgogICAgZGVmIF9fZGVsX18oc2VsZik6CiAgICAgICAgZm9yIGNoaWxkIGluIHNlbGYuY2hpbGRyZW5bOl06CiAgICAgICAgICAgIGRlbCBjaGlsZAogICAgICAgIHNlbGYuY29udGFpbmVyLmRlc3Ryb3koKQogICAgICAgIGRlbCBzZWxmLmNvbnRhaW5lcgogICAgICAgIHdyaXRlYWJsZS5TdWJzY3JpYmVyLl9fZGVsX18oc2VsZikKCgpjbGFzcyBFbnVtQ29tcG9uZW50KEJhc2VDb21wb25lbnQpOgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgaXRlcmFibGVfZXhwcjogc3RyLAogICAgICAgIGFsaWFzZXM6IHR1cGxlW3N0ciwgc3RyXSwKICAgICAgICBuYW1lc3BhY2U6IHdyaXRlYWJsZS5OYW1lc3BhY2UsCiAgICAgICAgcGFyZW50OiAiT3B0aW9uYWxbQmFzZUNvbXBvbmVudF0iID0gTm9uZSwKICAgICAgICB0ZW1wbGF0ZXM6IGxpc3RbdGVtcGxhdGUuVGVtcGxhdGUuSXRlbV0gPSBbXSwKICAgICk6CiAgICAgICAgd3JpdGVhYmxlLlN1YnNjcmliZXIuX19pbml0X18oc2VsZikKICAgICAgICBzZWxmLnN1YnNjcmliZV90byhuYW1lc3BhY2UsIHNlbGYudXBkYXRlKQogICAgICAgIHNlbGYuY2hpbGRyZW4gPSBbXQogICAgICAgIHNlbGYucGFyZW50ID0gcGFyZW50CiAgICAgICAgc2VsZi5uYW1lc3BhY2UgPSBuYW1lc3BhY2UKICAgICAgICBzZWxmLml0ZXJhYmxlX2V4cHIgPSBpdGVyYWJsZV9leHByCiAgICAgICAgc2VsZi5hbGlhc2VzID0gYWxpYXNlcwogICAgICAgIHNlbGYudGVtcGxhdGVzID0gdGVtcGxhdGVzICAjIHRlbXBsYXRlCiAgICAgICAgaWYgcGFyZW50IGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLnBhcmVudC5jaGlsZHJlbi5hcHBlbmQoc2VsZikKICAgICAgICBzZWxmLmNvbnRlbnQgPSBOb25lCiAgICAgICAgc2VsZi5jb250ZW50cyA9IFtdCiAgICAgICAgc2VsZi5fbGFzdCA9IE5vbmUKCiAgICBkZWYgY3JlYXRlKHNlbGYsIHBhcmVudD1Ob25lKToKICAgICAgICBwYXJlbnQgPSBwYXJlbnQgb3Igc2VsZi5wYXJlbnQub3V0bGV0CiAgICAgICAgc2VsZi5jb250ZW50cyA9IFtdCiAgICAgICAgaXRlcmFibGUgPSBldmFsKHNlbGYuaXRlcmFibGVfZXhwciwge30sIHNlbGYubmFtZXNwYWNlKQogICAgICAgIHNlbGYuX2xhc3QgPSBpdGVyYWJsZQogICAgICAgIGZvciBpZHgsIHZhbCBpbiBlbnVtZXJhdGUoaXRlcmFibGUpOgogICAgICAgICAgICBhaWR4LCBhdmFsID0gc2VsZi5hbGlhc2VzCiAgICAgICAgICAgIG5hbWVzcGFjZSA9IHdyaXRlYWJsZS5OYW1lc3BhY2UocGFyZW50cz1bc2VsZi5uYW1lc3BhY2VdKQogICAgICAgICAgICBuYW1lc3BhY2VbYWlkeF0gPSBpZHgKICAgICAgICAgICAgbmFtZXNwYWNlW2F2YWxdID0gdmFsCiAgICAgICAgICAgIGZvciB0ZW1wbGF0ZV9pdGVtIGluIHNlbGYudGVtcGxhdGVzOgogICAgICAgICAgICAgICAgY29tcCA9IHRlbXBsYXRlX2l0ZW0ucmVuZGVyKHNlbGYsIG5hbWVzcGFjZSkKICAgICAgICAgICAgICAgIGNvbXAuY3JlYXRlKHBhcmVudCkKICAgICAgICAgICAgICAgIHNlbGYuY29udGVudHMuYXBwZW5kKChuYW1lc3BhY2UsIGNvbXApKQoKICAgIGRlZiB1cGRhdGUoc2VsZik6CiAgICAgICAgdmFsdWUgPSBldmFsKHNlbGYuaXRlcmFibGVfZXhwciwge30sIHNlbGYubmFtZXNwYWNlKQogICAgICAgIGlmIHZhbHVlICE9IHNlbGYuX2xhc3Q6CiAgICAgICAgICAgIGNvbnRlbnRzID0gc2VsZi5jb250ZW50cy5jb3B5KCkKICAgICAgICAgICAgc2VsZi5jcmVhdGUoc2VsZi5yZW5kZXJfcGFyZW50KQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZWxmLnBhcmVudC51cGRhdGUoKSAgIyBmb3Igc21vb3RoZXIgcmVuZGVycmluZwogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICBmb3IgbmFtZXNwYWNlLCBjb21wIGluIGNvbnRlbnRzOgogICAgICAgICAgICAgICAgZGVsIGNvbXAsIG5hbWVzcGFjZQoKCmNsYXNzIElmQ29tcG9uZW50KEJhc2VDb21wb25lbnQpOgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgY29uZGl0aW9uLAogICAgICAgIG5hbWVzcGFjZSwKICAgICAgICBwYXJlbnQ6ICJPcHRpb25hbFtCYXNlQ29tcG9uZW50XSIgPSBOb25lLAogICAgICAgIHRlbXBsYXRlOiBsaXN0ID0gW10sCiAgICApOgogICAgICAgIHdyaXRlYWJsZS5TdWJzY3JpYmVyLl9faW5pdF9fKHNlbGYpCiAgICAgICAgc2VsZi5zdWJzY3JpYmVfdG8obmFtZXNwYWNlLCBzZWxmLnVwZGF0ZSkKICAgICAgICBzZWxmLmNoaWxkcmVuID0gW10KICAgICAgICBzZWxmLnBhcmVudCA9IHBhcmVudAogICAgICAgIHNlbGYubmFtZXNwYWNlID0gbmFtZXNwYWNlCiAgICAgICAgc2VsZi5jb25kaXRpb24gPSBjb25kaXRpb24KICAgICAgICBzZWxmLnRlbXBsYXRlID0gdGVtcGxhdGUgICMgdGVtcGxhdGUKICAgICAgICBpZiBwYXJlbnQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYucGFyZW50LmNoaWxkcmVuLmFwcGVuZChzZWxmKQogICAgICAgIHNlbGYuY29udGVudCA9IE5vbmUKICAgICAgICBzZWxmLl9sYXN0ID0gTm9uZQoKICAgIGRlZiBjcmVhdGUoc2VsZiwgcGFyZW50PU5vbmUpOgogICAgICAgIHBhcmVudCA9IHBhcmVudCBvciBzZWxmLnBhcmVudC5vdXRsZXQKICAgICAgICBzZWxmLnJlbmRlcl9wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLl9sYXN0ID0gZXZhbChzZWxmLmNvbmRpdGlvbiwge30sIHNlbGYubmFtZXNwYWNlKQogICAgICAgIGlmIHNlbGYuX2xhc3Q6CiAgICAgICAgICAgIGZvciB0ZW1wbGF0ZSBpbiBzZWxmLnRlbXBsYXRlOgogICAgICAgICAgICAgICAgdGVtcGxhdGUucmVuZGVyKHNlbGYsIHNlbGYubmFtZXNwYWNlKS5jcmVhdGUocGFyZW50KQoKICAgIGRlZiB1cGRhdGUoc2VsZik6CiAgICAgICAgY29uZCA9IGV2YWwoc2VsZi5jb25kaXRpb24sIHt9LCBzZWxmLm5hbWVzcGFjZSkKICAgICAgICBpZiBjb25kICE9IHNlbGYuX2xhc3Q6CiAgICAgICAgICAgIGRlbCBzZWxmLmNvbnRlbnQKICAgICAgICAgICAgc2VsZi5jcmVhdGUoc2VsZi5yZW5kZXJfcGFyZW50KQoKCmNsYXNzIENvbXBvbmVudChCYXNlQ29tcG9uZW50KToKICAgIGNvZGU6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICBfdGVtcGxhdGVfY2FjaGU6IHR1cGxlW09wdGlvbmFsW3N0cl0sIE9wdGlvbmFsW3RlbXBsYXRlLlRlbXBsYXRlXV0gPSAoCiAgICAgICAgTm9uZSwKICAgICAgICBOb25lLAogICAgKQoKICAgIGRlZiBpbml0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBAYW5ub3RhdGUKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpdGVtOiBzdHIpOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHNlbGYubmFtZXNwYWNlW2l0ZW1dCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXR1cm4gZ2xvYmFscygpW2l0ZW1dCiAgICAgICAgICAgIGV4Y2VwdCBJbmRleEVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICByYWlzZSBJbmRleEVycm9yKGl0ZW0pIGZyb20gZQoKICAgIGRlZiBfX2luaXRfc3ViY2xhc3NfXyhjbHMpOgogICAgICAgIGNscy5nZXRfdGVtcGxhdGUoKQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGdldF90ZW1wbGF0ZShjbHMpOgogICAgICAgIGNvZGUgPSBjbHMuY29kZSBvciBjbHMuX19kb2NfXwogICAgICAgIGlmIGNscy5fdGVtcGxhdGVfY2FjaGVbMF0gIT0gY29kZToKICAgICAgICAgICAgY2xzLl90ZW1wbGF0ZV9jYWNoZSA9IGNvZGUsIHRlbXBsYXRlLlRlbXBsYXRlLnBhcnNlKGNvZGUpCiAgICAgICAgcmV0dXJuIGNscy5fdGVtcGxhdGVfY2FjaGVbMV0KCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwgaXRlbTogc3RyLCB2YWx1ZSk6CiAgICAgICAgc2VsZi5uYW1lc3BhY2VbaXRlbV0gPSB2YWx1ZQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqKnBhcmFtcyk6CiAgICAgICAgd3JpdGVhYmxlLlN1YnNjcmliZXIuX19pbml0X18oc2VsZikKICAgICAgICBzZWxmLmF0dHJzID0gQXR0cmlidXRlTWFuYWdlcigKICAgICAgICAgICAgc2VsZiwge30sIHtrOiAoRmFsc2UsIHYpIGZvciBrLCB2IGluIHBhcmFtcy5pdGVtcygpfQogICAgICAgICkKICAgICAgICBzZWxmLmF0dHJzLl9zdWJzY3JpYmUoc2VsZiwgc2VsZi5fdXBkYXRlKQoKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IHdyaXRlYWJsZS5OYW1lc3BhY2UoKQogICAgICAgIHNlbGYuc3Vic2NyaWJlX3RvKHNlbGYubmFtZXNwYWNlLCBzZWxmLnVwZGF0ZSkKICAgICAgICBmb3IgYXR0cl9uYW1lIGluIGRpcihzZWxmKToKICAgICAgICAgICAgaWYgbm90IGF0dHJfbmFtZS5zdGFydHN3aXRoKCJfIik6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5uYW1lc3BhY2VbYXR0cl9uYW1lXSA9IGdldGF0dHIoc2VsZiwgYXR0cl9uYW1lKQogICAgICAgICAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICBzZWxmLmluaXQoKQogICAgICAgIHNlbGYucmVuZGVycmVkID0gRmFsc2UKICAgICAgICBzZWxmLl9jb21wb25lbnRfID0gc2VsZi5nZXRfdGVtcGxhdGUoKS5ldmFsKHNlbGYubmFtZXNwYWNlKQoKICAgIGRlZiByZW5kZXIoc2VsZiwgbWFzdGVyKToKICAgICAgICBzZWxmLl9jb21wb25lbnRfLmNyZWF0ZShtYXN0ZXIpCiAgICAgICAgc2VsZi5yZWRlcnJlZCA9IFRydWUKICAgICAgICByZXR1cm4gc2VsZi5jb250YWluZXIKCiAgICBkZWYgdXBkYXRlKHNlbGYpOgogICAgICAgIGlmIHNlbGYucmVuZGVycmVkOgogICAgICAgICAgICBzZWxmLl9jb21wb25lbnRfLnVwZGF0ZSgpCgogICAgZGVmIGV4cG9zZShzZWxmLCBmdW5jKToKICAgICAgICBzZWxmLm5hbWVzcGFjZVtmdW5jLl9fbmFtZV9fXSA9IGZ1bmMKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjb250YWluZXIoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX2NvbXBvbmVudF8uY29udGFpbmVyCgogICAgQHByb3BlcnR5CiAgICBkZWYgb3V0bGV0KHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgb3V0ID0gc2VsZlsib3V0bGV0Il0KICAgICAgICAgICAgaWYgb3V0IGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgcmV0dXJuIG91dC5vdXRsZXQKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgZXhjZXB0IE5hbWVFcnJvcjoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgY3JlYXRlX3RrKHNlbGYsIHJvb3Q9Tm9uZSk6CiAgICAgICAgIiIiQ3JlYXRlIHRoZSBjb21wb25lbnQgaW4gYSBmdWxsIFRrIHdpbmRvdy4iIiIKICAgICAgICByb290LmNvbHVtbmNvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICByb290LnJvd2NvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKCiAgICAgICAgc2VsZi5yZW5kZXIocm9vdCkuZ3JpZChjb2x1bW49MCwgcm93PTAsIHN0aWNreT0ibnNldyIpCiAgICAgICAgcmV0dXJuIHJvb3QKCiAgICBkZWYgcG9wdXAoc2VsZiwgKipwYXJhbXMpOgogICAgICAgICIiIkNyZWF0ZSB0aGUgY29tcG9uZW50IGluIGEgZnVsbCBUayB3aW5kb3cuIiIiCiAgICAgICAgZnJvbSB0a2ludGVyIGltcG9ydCBUb3BsZXZlbAoKICAgICAgICByb290ID0gVG9wbGV2ZWwoKQogICAgICAgIHJvb3QuY29sdW1uY29uZmlndXJlKDAsIHdlaWdodD0xKQogICAgICAgIHJvb3Qucm93Y29uZmlndXJlKDAsIHdlaWdodD0xKQoKICAgICAgICBzZWxmLnJlbmRlcihyb290KS5ncmlkKGNvbHVtbj0wLCByb3c9MCwgc3RpY2t5PSJuc2V3IikKICAgICAgICByZXR1cm4gcm9vdAoKCmRlZiBjb21wb25lbnQoZnVuYyk6CiAgICBkZWYgY29tcG9uZW50X2luaXQoc2VsZik6CiAgICAgICAgdmFyID0gZnVuYyhzZWxmKQogICAgICAgIGlmIHZhciBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5uYW1lc3BhY2UudmFycy51cGRhdGUodmFyKQoKICAgIHJldHVybiB0eXBlKAogICAgICAgIGZ1bmMuX19uYW1lX18sCiAgICAgICAgKENvbXBvbmVudCwpLAogICAgICAgIHsKICAgICAgICAgICAgImluaXQiOiBjb21wb25lbnRfaW5pdCwKICAgICAgICAgICAgIl9fZG9jX18iOiBmdW5jLl9fZG9jX18sCiAgICAgICAgfSwKICAgICkK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAVKwAAAAAAABUrAAAAAAAAAAAAAAAA8L8"
				]
			]
		}
	],
	"build_system": "Taktk todoapp",
	"build_system_choices":
	[
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"Taktk Docs",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"Taktk Docs",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/py310.sublime-build",
					""
				],
				[
					"Packages/User/py312.sublime-build",
					""
				],
				[
					"Packages/User/py313.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"Taktk Docs",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"Taktk admin",
					""
				],
				[
					"Taktk notify",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"Taktk admin",
					""
				],
				[
					"Taktk simple",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk simple",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"Taktk admin",
					""
				],
				[
					"Taktk simple test",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/User/black.sublime-build",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"Taktk notify",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Black taktk",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/py310.sublime-build",
					""
				],
				[
					"Packages/User/py312.sublime-build",
					""
				],
				[
					"Packages/User/py313.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Black taktk",
					""
				],
				[
					"Taktk Docs",
					""
				],
				[
					"Taktk todoapp",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk todoapp",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					"Clean"
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sass.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/User/black.sublime-build",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					"Clean"
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sass.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sass.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Anaconda Python Builder",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Sbook",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Sbook",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sass.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		],
		[
			[
				[
					"Anaconda Python Builder",
					""
				],
				[
					"Sbook",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/sass.sublime-build",
					""
				]
			],
			[
				"Anaconda Python Builder",
				""
			]
		],
		[
			[
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"Taktk Docs",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/Default/Syntax Tests.sublime-build",
					""
				],
				[
					"Packages/Default/Syntax Tests.sublime-build",
					"All Syntaxes"
				],
				[
					"Packages/Default/Syntax Tests.sublime-build",
					"Performance"
				],
				[
					"Packages/Default/Syntax Tests.sublime-build",
					"Regex Compatibility"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"JSON"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"Property List"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Block Style)"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Default Style)"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk",
				""
			]
		],
		[
			[
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"Taktk Docs",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"JSON"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"Property List"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Block Style)"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Default Style)"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/py310.sublime-build",
					""
				],
				[
					"Packages/User/py312.sublime-build",
					""
				],
				[
					"Packages/User/py313.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk Docs",
				""
			]
		],
		[
			[
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"Taktk Docs",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/py310.sublime-build",
					""
				],
				[
					"Packages/User/py312.sublime-build",
					""
				],
				[
					"Packages/User/py313.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk",
				""
			]
		],
		[
			[
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"JSON"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"Property List"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Block Style)"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Default Style)"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"isort taktk",
				""
			]
		],
		[
			[
				[
					"Black taktk",
					""
				],
				[
					"Taktk",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk",
				""
			]
		],
		[
			[
				[
					"Black taktk",
					""
				],
				[
					"Taktk Docs",
					""
				],
				[
					"Taktk todoapp",
					""
				],
				[
					"isort taktk",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"JSON"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"Property List"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Block Style)"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Default Style)"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk todoapp",
				""
			]
		],
		[
			[
				[
					"Packages/Default/Syntax Tests.sublime-build",
					""
				],
				[
					"Packages/Default/Syntax Tests.sublime-build",
					"All Syntaxes"
				],
				[
					"Packages/Default/Syntax Tests.sublime-build",
					"Performance"
				],
				[
					"Packages/Default/Syntax Tests.sublime-build",
					"Regex Compatibility"
				],
				[
					"Packages/User/Django.sublime-build",
					""
				]
			],
			[
				"Packages/User/Django.sublime-build",
				""
			]
		],
		[
			[
				[
					"Packages/Default/Syntax Tests.sublime-build",
					""
				],
				[
					"Packages/Default/Syntax Tests.sublime-build",
					"All Syntaxes"
				],
				[
					"Packages/Default/Syntax Tests.sublime-build",
					"Performance"
				],
				[
					"Packages/Default/Syntax Tests.sublime-build",
					"Regex Compatibility"
				],
				[
					"Packages/User/Django.sublime-build",
					""
				],
				[
					"Packages/User/Django.sublime-build",
					"pylint"
				]
			],
			[
				"Packages/User/Django.sublime-build",
				""
			]
		],
		[
			[
				[
					"Packages/Golang Build/Go.sublime-build",
					""
				],
				[
					"Packages/Golang Build/Go.sublime-build",
					"Run"
				],
				[
					"Packages/Golang Build/Go.sublime-build",
					"Test"
				],
				[
					"Packages/Golang Build/Go.sublime-build",
					"Install"
				],
				[
					"Packages/Golang Build/Go.sublime-build",
					"Cross-Compile (Interactive)"
				],
				[
					"Packages/Golang Build/Go.sublime-build",
					"Clean"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sass.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/Golang Build/Go.sublime-build",
				"Run"
			]
		],
		[
			[
				[
					"Packages/Makefile/Make.sublime-build",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					"Clean"
				],
				[
					"Packages/Golang Build/Go.sublime-build",
					""
				],
				[
					"Packages/Golang Build/Go.sublime-build",
					"Run"
				],
				[
					"Packages/Golang Build/Go.sublime-build",
					"Test"
				],
				[
					"Packages/Golang Build/Go.sublime-build",
					"Install"
				],
				[
					"Packages/Golang Build/Go.sublime-build",
					"Cross-Compile (Interactive)"
				],
				[
					"Packages/Golang Build/Go.sublime-build",
					"Clean"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sass.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/Golang Build/Go.sublime-build",
				"Run"
			]
		],
		[
			[
				[
					"Packages/Makefile/Make.sublime-build",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					"Clean"
				],
				[
					"Packages/NSIS/NSIS.sublime-build",
					""
				],
				[
					"Packages/NSIS/NSIS.sublime-build",
					"strict"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sass.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/NSIS/NSIS.sublime-build",
				"strict"
			]
		],
		[
			[
				[
					"Packages/Makefile/Make.sublime-build",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					"Clean"
				],
				[
					"Packages/NSIS/NSIS.sublime-build",
					""
				],
				[
					"Packages/NSIS/NSIS.sublime-build",
					"strict"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/NSIS/NSIS.sublime-build",
				""
			]
		],
		[
			[
				[
					"Packages/Makefile/Make.sublime-build",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					"Clean"
				],
				[
					"Packages/shellsy/shellsy.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sass.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/shellsy/shellsy.sublime-build",
				""
			]
		],
		[
			[
				[
					"Packages/Makefile/Make.sublime-build",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					"Clean"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sass.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/User/black.sublime-build",
				""
			]
		],
		[
			[
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"JSON"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"Property List"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Block Style)"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Default Style)"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/User/black.sublime-build",
				""
			]
		],
		[
			[
				[
					"Packages/User/Django.sublime-build",
					""
				],
				[
					"Packages/User/Django.sublime-build",
					"pylint"
				]
			],
			[
				"Packages/User/Django.sublime-build",
				""
			]
		],
		[
			[
				[
					"Sbook",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				]
			],
			[
				"Sbook",
				""
			]
		],
		[
			[
				[
					"Sbook",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				]
			],
			[
				"Packages/subliminal/Django.sublime-build",
				""
			]
		],
		[
			[
				[
					"Sbook",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sass.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Packages/User/sass.sublime-build",
				""
			]
		],
		[
			[
				[
					"Sbook",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/sass.sublime-build",
					""
				]
			],
			[
				"Packages/User/sass.sublime-build",
				""
			]
		],
		[
			[
				[
					"Taktk",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"JSON"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"Property List"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Block Style)"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Default Style)"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk",
				""
			]
		],
		[
			[
				[
					"Taktk",
					""
				],
				[
					"Taktk admin",
					""
				],
				[
					"Taktk notify",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"JSON"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"Property List"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Block Style)"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Default Style)"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk admin",
				""
			]
		],
		[
			[
				[
					"Taktk",
					""
				],
				[
					"Taktk admin",
					""
				],
				[
					"Taktk simple test",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					""
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"JSON"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"Property List"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Block Style)"
				],
				[
					"Packages/PackageDev/Package/Convert to ....sublime-build",
					"YAML (Default Style)"
				],
				[
					"Packages/subliminal/Django.sublime-build",
					""
				],
				[
					"Packages/subliminal/Django.sublime-build",
					"pylint"
				],
				[
					"Packages/User/black.sublime-build",
					""
				],
				[
					"Packages/User/go.sublime-build",
					""
				],
				[
					"Packages/User/sphinx.sublime-build",
					""
				]
			],
			[
				"Taktk",
				""
			]
		]
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"macc",
				"Anaconda: McCabe complexity check"
			],
			[
				"myp",
				"Anaconda: McCabe complexity check"
			],
			[
				"install",
				"Package Control: Install Package"
			],
			[
				"anaconda",
				"Anaconda: McCabe complexity check"
			],
			[
				"black",
				"python-black: Format the selected code or the code of the entire file"
			],
			[
				"remo",
				"Package Control: Remove Package"
			],
			[
				"bl",
				"python-black: Format the selected code or the code of the entire file"
			],
			[
				"enab",
				"Package Control: Enable Package"
			],
			[
				"helium",
				"Helium: Settings"
			],
			[
				"insta",
				"Package Control: Install Package"
			],
			[
				"notifi",
				"Open Github Notifications"
			],
			[
				"remove",
				"Package Control: Remove Package"
			],
			[
				"enable",
				"Package Control: Enable Package"
			],
			[
				"dis",
				"Package Control: Disable Package"
			],
			[
				"in",
				"Package Control: Install Package"
			],
			[
				"re",
				"Package Control: Remove Package"
			],
			[
				"waka",
				"WakaTime: Open Dashboard"
			],
			[
				"camel",
				"Convert Case: lowerCamelCase"
			],
			[
				"disable",
				"Package Control: Disable Package"
			],
			[
				"disa",
				"Package Control: Disable Package"
			],
			[
				"lsp py",
				"Preferences: LSP-pylsp Settings"
			],
			[
				"ins",
				"Package Control: Install Package"
			],
			[
				"anac",
				"Anaconda: Goto Python object"
			],
			[
				"lab",
				"Preferences: LSP-basedpyright Settings"
			],
			[
				"lsp",
				"Preferences: LSP Settings"
			],
			[
				"UI",
				"UI: Select Theme"
			],
			[
				"cAMEL",
				"Convert Case: UpperCamelCase"
			],
			[
				"ui",
				"UI: Select Theme"
			],
			[
				"Package Control: i",
				"Package Control: Install Package"
			],
			[
				"reformat",
				"Preferences: Terminus Command Palette"
			],
			[
				"Package Control: dis",
				"Package Control: Disable Package"
			],
			[
				"install ",
				"Package Control: Install Package"
			],
			[
				"Package Control: e",
				"Package Control: Enable Package"
			],
			[
				"Package Control: in",
				"Package Control: Install Package"
			],
			[
				"Package Control: add",
				"Package Control: Add Repository"
			],
			[
				"Package Control: I",
				"Package Control: Install Package"
			],
			[
				"Package Control: d",
				"Package Control: Disable Package"
			],
			[
				"Package Control: D",
				"Package Control: Disable Package"
			],
			[
				"open",
				"Sublime Files: Open Navigator"
			],
			[
				"ter",
				"Terminal: Open"
			],
			[
				"Package Control: Add",
				"Package Control: Add Repository"
			],
			[
				"Package Control: l",
				"Package Control: List Packages"
			],
			[
				"Package Control: ",
				"Package Control: Install Package"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 164.0,
		"history":
		[
			"import socket; socket.socket(socket.AF_INET, socket.SOCK_STREAM).connect((\"localhost\", 52595))",
			"\nd",
			"\nimport socket; socket.socket(socket.AF_INET, socket.SOCK_STREAM).connect((\"localhost\", 49491))"
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/media/ken-morel/data/taktk",
		"/media/ken-morel/data/taktk/examples",
		"/media/ken-morel/data/taktk/examples/todoapp",
		"/media/ken-morel/data/taktk/examples/todoapp/todoapp",
		"/media/ken-morel/data/taktk/examples/todoapp/todoapp/dictionaries",
		"/media/ken-morel/data/taktk/examples/todoapp/todoapp/pages",
		"/media/ken-morel/data/taktk/src",
		"/media/ken-morel/data/taktk/src/taktk"
	],
	"file_history":
	[
		"/media/ken-morel/data/taktk/examples/todoapp/main.py",
		"/media/ken-morel/data/taktk/taktk.sublime-project",
		"/media/ken-morel/data/taktk/examples/todoapp/todoapp/pages/sign.py",
		"/media/ken-morel/data/taktk/examples/todoapp/todoapp/taktk.py",
		"/media/ken-morel/data/taktk/examples/todoapp/todoapp/dictionaries/English.yml",
		"/media/ken-morel/data/taktk/glance.yml",
		"/media/ken-morel/data/taktk/.gitignore",
		"/media/ken-morel/data/taktk/src/taktk/template.py",
		"/media/ken-morel/data/taktk/examples/todoapp/todoapp/pages/todos.py",
		"/media/ken-morel/data/taktk/src/taktk/menu.py",
		"/media/ken-morel/data/taktk/src/taktk/media.py",
		"/media/ken-morel/data/taktk/src/taktk/component.py",
		"/media/ken-morel/data/taktk/src/taktk/page.py",
		"/home/ken-morel/.config/sublime-text/Packages/subliminal/subliminal-Python.sublime-syntax",
		"/media/ken-morel/data/taktk/src/taktk/components.py",
		"/media/ken-morel/data/taktk/examples/todoapp/todoapp/pages/__init__.py",
		"/media/ken-morel/data/taktk/src/taktk/application.py",
		"/media/ken-morel/data/taktk/lib/python3.12/site-packages/pyoload/__init__.py",
		"/home/ken-morel/.config/sublime-text/Packages/User/githubNotif.sublime-settings",
		"/home/ken-morel/.config/sublime-text/Packages/User/github_issue.sublime-settings",
		"/media/ken-morel/data/taktk/pyproject.toml",
		"/media/ken-morel/data/taktk/src/taktk/dictionary.py",
		"/media/ken-morel/data/taktk/examples/locale/main.py",
		"/media/ken-morel/data/taktk/examples/locale/<string>",
		"/media/ken-morel/data/taktk/src/taktk/writeable.py",
		"/media/ken-morel/data/taktk/examples/login_page.py",
		"/media/ken-morel/data/taktk/examples/acrylic.py",
		"/media/ken-morel/data/taktk/examples/notify.py",
		"/media/ken-morel/data/taktk/examples/simple.py",
		"/media/ken-morel/data/taktk/src/taktk/<string>",
		"/usr/lib/python3.10/tkinter/__init__.py",
		"/media/ken-morel/data/taktk/lib/python3.10/site-packages/ttkbootstrap/style.py",
		"/home/ken-morel/.config/sublime-text/Packages/User/Anaconda.sublime-settings",
		"/home/ken-morel/.config/sublime-text/Packages/Anaconda/Anaconda.sublime-settings",
		"/media/ken-morel/6A84527C84524B29/Users/engon/AppData/Roaming/Sublime Text/Packages/User/Default (Windows).sublime-keymap",
		"/D/taktk/src/taktk/constants.py",
		"/C/Users/engon/.ipython/profile_default/ipython_config.py",
		"/C/.py/py_startup.py",
		"/C/Users/engon/AppData/Roaming/Sublime Text/Packages/User/Anaconda.sublime-settings",
		"/C/Users/engon/AppData/Roaming/Sublime Text/Packages/Anaconda/Anaconda.sublime-settings",
		"/D/taktk/src/taktk/sdown.py",
		"/D/taktk/src/taktk/component/builtin/__init__.py",
		"/D/taktk/pyproject.toml",
		"/D/taktk/src/taktk/component/builtin/sdown.py",
		"/D/taktk/src/taktk/component.py",
		"/D/taktk/examples/todoapp/todoapp/taktk.py",
		"/D/taktk/examples/noseman.obj",
		"/D/taktk/examples/load_obj.py",
		"/D/tkinter_gl/test/square.py",
		"/D/shellsy/src/shellsy/lexer.py",
		"/D/taktk/docs/whatsnew.rst",
		"/D/taktk/docs/index.rst",
		"/D/taktk/examples/login_page.py",
		"/D/taktk/docs/quickstart.rst",
		"/D/taktk/src/taktk/lexer.py",
		"/C/Users/engon/AppData/Local/Packages/Microsoft.DesktopAppInstaller_8wekyb3d8bbwe/LocalState/settings.json",
		"/C/Users/engon/AppData/Roaming/Sublime Text/Packages/subliminal/subliminal-Python.sublime-syntax",
		"/D/taktk/docs/conf.py",
		"/D/taktk/examples/maps.py",
		"/D/taktk/examples/tiny_3d.py",
		"/D/taktk/docs/requirements.txt",
		"/D/taktk/docs/installation.rst",
		"/D/taktk/docs/_static/github.svg",
		"/D/taktk/docs/todo.md",
		"/D/taktk/docs/tutorials/index.rst",
		"/D/taktk/docs/docutils.conf",
		"/D/taktk/.pre-commit-config.yaml",
		"/D/taktk/.readthedocs.yaml",
		"/D/taktk/requirements.txt",
		"/D/taktk/taktk.sublime-project",
		"/C/Users/engon/AppData/Roaming/Sublime Text/Packages/User/SublimeTextTrans.sublime-settings",
		"/C/Users/engon/AppData/Roaming/Sublime Text/Packages/Transparency/SublimeTextTrans.sublime-settings",
		"/D/utils/rmbg.py",
		"/D/taktk/README.md",
		"/D/taktk/examples/todoapp/main.py",
		"/D/taktk/examples/todo.py",
		"/D/taktk/src/taktk/component/__init__.py",
		"/D/taktk/src/taktk/notification.py",
		"/D/taktk/src/taktk/dictionary.py",
		"/D/taktk/src/taktk/writeable.py",
		"/D/taktk/src/taktk/template.py",
		"/C/Users/engon/OneDrive/Documents/PowerShell/Microsoft.PowerShell_profile.ps1",
		"/D/taktk/src/taktk/component/builtin/ctk.py",
		"/D/TBomb/bomber.py",
		"/D/taktk/examples/todoapp/todoapp/admin.py",
		"/D/taktk/examples/notify.py",
		"/C/Users/engon/AppData/Roaming/Sublime Text/Packages/User/Sublime Text Settings.sublime-settings",
		"/D/taktk/src/taktk/component/parser.py",
		"/D/nanoGPT/out-shakespeare-char/ckpt.pt",
		"/D/taktk/src/taktk/application.py",
		"/D/taktk/src/taktk/__init__.py",
		"/D/taktk/examples/todoapp/todoapp/dictionaries/English.yml",
		"/D/taktk/examples/todoapp/todoapp/dictionaries/French.yml",
		"/C/Users/engon/AppData/Roaming/Sublime Text/Packages/Github Notifications/githubNotif.sublime-settings",
		"/C/Users/engon/AppData/Roaming/Sublime Text/Packages/User/githubNotif.sublime-settings",
		"/D/taktk/examples/todoapp/todoapp/pages/sign.py",
		"/D/taktk/.gitignore",
		"/D/taktk/examples/todoapp/todoapp/pages/__init__.py",
		"/D/taktk/examples/acrylic.py",
		"/C/Users/engon/AppData/Roaming/Sublime Text/Packages/User/py313.sublime-build",
		"/C/taktk/examples/todoapp/todoapp/__init__.py",
		"/C/taktk/examples/todoapp/main.py",
		"/C/taktk/examples/todoapp/todoapp/pages/users.py",
		"/C/taktk/examples/todoapp/todoapp/pages/todos.py",
		"/C/taktk/examples/todoapp/todoapp/pages/_user.py",
		"/C/taktk/examples/todoapp/todoapp/pages/__init__.py",
		"/C/taktk/src/taktk/page.py",
		"/C/taktk/src/taktk/application.py",
		"/C/taktk/examples/todoapp/todoapp/pages/sign.py",
		"/C/taktk/src/taktk/component/__init__.py",
		"/C/taktk/examples/todoapp/todoapp/store.json",
		"/C/taktk/src/taktk/component/instructions.py",
		"/C/taktk/src/taktk/store.py",
		"/C/taktk/src/taktk/component/builtin/__init__.py",
		"/C/taktk/src/taktk/dictionary.py",
		"/C/taktk/src/taktk/__init__.py",
		"/C/taktk/src/taktk/component/builtin/taktk.py",
		"/C/taktk/src/taktk/media.py",
		"/C/taktk/src/taktk/application_server.py",
		"/C/taktk/taktk.sublime-project",
		"/C/taktk/src/taktk/__main__.py",
		"/C/Program Files/Python313/Lib/http/server.py",
		"/C/taktk/examples/todoapp/todoapp/media/img/rmbg.py",
		"/C/taktk/examples/video.py",
		"/C/taktk/src/taktk/notification.py",
		"/C/gh_models/main.py",
		"/C/gh_models/log.md",
		"/C/Users/engon/OneDrive/Documents/Rainmeter/Skins/GMailNotify/GMailNotify.ini"
	],
	"find":
	{
		"height": 30.0
	},
	"find_in_files":
	{
		"height": 190.0,
		"where_history":
		[
			""
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"self.store",
			"app",
			"store_",
			"Application",
			"application",
			"app",
			"destroy",
			"\n        ",
			"grid",
			"self",
			"widgets",
			"widget",
			"instr",
			"condition",
			"object",
			"condition",
			"alias",
			"aliasses",
			"alias",
			"state",
			"enum",
			"special",
			"self.store",
			"print\\(e\\)",
			"self.redirect",
			"self",
			"def",
			"kwargs",
			"store",
			"self",
			"ctk.",
			"self",
			"eval",
			"self",
			"pass",
			"parent",
			"item",
			"instructions",
			"SPECIAL",
			"name",
			"state",
			"begin",
			"5",
			"_store",
			"image",
			"Resoirce",
			"Media",
			"Writeable",
			"tuple",
			"created",
			"self",
			"taktk-media-spec",
			"d",
			"locale",
			"Subscriber",
			"NamespaceWriteable",
			"simple",
			"english",
			"self",
			"locale",
			"self",
			"namespace",
			"locale",
			"Component",
			"grid",
			"french",
			"english",
			"Writeable",
			"Subscribeable",
			"eval_structure",
			"ttkMenu",
			"ttkbootstrap",
			"window",
			"show",
			"dictionary",
			"Subscribeable",
			"Dictionary",
			"None",
			"add",
			"subscribers",
			"self",
			"False",
			"resolve",
			"print",
			"self",
			"val",
			"vars(self.attrs).items()",
			"set",
			"add",
			"set",
			"sub",
			"value",
			"dir",
			"functools",
			"key",
			"args",
			"namespace",
			"attrs",
			"params",
			"Attrs",
			"Iterable",
			"code",
			"false",
			"basic",
			"call",
			"subscriber",
			"Scripts",
			"True",
			"code",
			"constants",
			"tkinter",
			"get_media",
			"RAW",
			"State",
			"phantom",
			"false",
			"show",
			"hide",
			"Expression",
			"TkComponent",
			"_Component",
			"Writeable",
			"Image",
			"_Component",
			"TkComponent",
			"_Component",
			"Writeable",
			"Namespace"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": true,
		"replace_history":
		[
			"self.get_store()",
			" +",
			"",
			"store",
			"cls.from_dict(",
			"_Component"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"file": "src/taktk/template.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 19871,
						"regions":
						{
						},
						"selection":
						[
							[
								8943,
								8943
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ":",
									"selector": "text.html.markdown"
								},
								{
									"characters": "<",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								},
								{
									"characters": ".",
									"selector": "source.python - string - comment - constant.numeric, meta.interpolated.format.fstring"
								}
							],
							"syntax": "Packages/subliminal/subliminal-Python.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 3510.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "examples/todoapp/todoapp/pages/__init__.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1118,
						"regions":
						{
						},
						"selection":
						[
							[
								646,
								615
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ":",
									"selector": "text.html.markdown"
								},
								{
									"characters": "<",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								},
								{
									"characters": ".",
									"selector": "source.python - string - comment - constant.numeric, meta.interpolated.format.fstring"
								}
							],
							"syntax": "Packages/subliminal/subliminal-Python.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "src/taktk/application.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 9736,
						"regions":
						{
						},
						"selection":
						[
							[
								7494,
								7494
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ":",
									"selector": "text.html.markdown"
								},
								{
									"characters": "<",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								},
								{
									"characters": ".",
									"selector": "source.python - string - comment - constant.numeric, meta.interpolated.format.fstring"
								}
							],
							"syntax": "Packages/subliminal/subliminal-Python.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 2626.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "src/taktk/page.py",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 8815,
						"regions":
						{
						},
						"selection":
						[
							[
								1259,
								1259
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ":",
									"selector": "text.html.markdown"
								},
								{
									"characters": "<",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								},
								{
									"characters": ".",
									"selector": "source.python - string - comment - constant.numeric, meta.interpolated.format.fstring"
								}
							],
							"syntax": "Packages/subliminal/subliminal-Python.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 455.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "examples/todoapp/todoapp/taktk.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3812,
						"regions":
						{
						},
						"selection":
						[
							[
								2010,
								2020
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ":",
									"selector": "text.html.markdown"
								},
								{
									"characters": "<",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								},
								{
									"characters": ".",
									"selector": "source.python - string - comment - constant.numeric, meta.interpolated.format.fstring"
								}
							],
							"syntax": "Packages/subliminal/subliminal-Python.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 871.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "src/taktk/component.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 16980,
						"regions":
						{
						},
						"selection":
						[
							[
								13971,
								13971
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ":",
									"selector": "text.html.markdown"
								},
								{
									"characters": "<",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								},
								{
									"characters": ".",
									"selector": "source.python - string - comment - constant.numeric, meta.interpolated.format.fstring"
								}
							],
							"syntax": "Packages/subliminal/subliminal-Python.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 3354.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 30.0
	},
	"input":
	{
		"height": 57.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.SublimeLinter":
	{
		"height": 0.0
	},
	"output.Terminus":
	{
		"height": 187.0
	},
	"output.Terminus 2":
	{
		"height": 134.0
	},
	"output.Terminus 3":
	{
		"height": 151.0
	},
	"output.Terminus 4":
	{
		"height": 146.0
	},
	"output.Terminus 5":
	{
		"height": 126.0
	},
	"output.Terminus 6":
	{
		"height": 220.0
	},
	"output.diff_views":
	{
		"height": 527.0
	},
	"output.exec":
	{
		"height": 188.0
	},
	"output.find_results":
	{
		"height": 0.0
	},
	"output.golang_build":
	{
		"height": 126.0
	},
	"output.gotools_syntax_errors":
	{
		"height": 98.0
	},
	"output.mdpopups":
	{
		"height": 0.0
	},
	"output.stino_build_panel":
	{
		"height": 0.0
	},
	"output.stino_panel":
	{
		"height": 0.0
	},
	"pinned_build_system": "",
	"project": "taktk.sublime-project",
	"replace":
	{
		"height": 56.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"templa",
				"taktk/src/taktk/template.py"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 500.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"C:\\taktic\\desktop\\taktic-desktop.sublime-project"
			]
		],
		"width": 380.0
	},
	"select_symbol":
	{
		"height": 129.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"gt_next"
			]
		],
		"width": 598.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 266.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
